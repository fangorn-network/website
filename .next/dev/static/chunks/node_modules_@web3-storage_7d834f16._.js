(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/node_modules/@web3-storage/capabilities/node_modules/uint8arrays/dist/src/equals.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Returns true if the two passed Uint8Arrays have the same content
 */ __turbopack_context__.s([
    "equals",
    ()=>equals
]);
function equals(a, b) {
    if (a === b) {
        return true;
    }
    if (a.byteLength !== b.byteLength) {
        return false;
    }
    for(let i = 0; i < a.byteLength; i++){
        if (a[i] !== b[i]) {
            return false;
        }
    }
    return true;
} //# sourceMappingURL=equals.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/equals.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Returns true if the two passed Uint8Arrays have the same content
 */ __turbopack_context__.s([
    "equals",
    ()=>equals
]);
function equals(a, b) {
    if (a === b) {
        return true;
    }
    if (a.byteLength !== b.byteLength) {
        return false;
    }
    for(let i = 0; i < a.byteLength; i++){
        if (a[i] !== b[i]) {
            return false;
        }
    }
    return true;
} //# sourceMappingURL=equals.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/alloc.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Returns a `Uint8Array` of the requested size. Referenced memory will
 * be initialized to 0.
 */ __turbopack_context__.s([
    "alloc",
    ()=>alloc,
    "allocUnsafe",
    ()=>allocUnsafe
]);
function alloc(size = 0) {
    return new Uint8Array(size);
}
function allocUnsafe(size = 0) {
    return new Uint8Array(size);
} //# sourceMappingURL=alloc.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/util/as-uint8array.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * To guarantee Uint8Array semantics, convert nodejs Buffers
 * into vanilla Uint8Arrays
 */ __turbopack_context__.s([
    "asUint8Array",
    ()=>asUint8Array
]);
function asUint8Array(buf) {
    return buf;
} //# sourceMappingURL=as-uint8array.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/xor.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "xor",
    ()=>xor
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/alloc.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$as$2d$uint8array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/util/as-uint8array.js [app-client] (ecmascript)");
;
;
function xor(a, b) {
    if (a.length !== b.length) {
        throw new Error('Inputs should have the same length');
    }
    const result = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["allocUnsafe"])(a.length);
    for(let i = 0; i < a.length; i++){
        result[i] = a[i] ^ b[i];
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$as$2d$uint8array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["asUint8Array"])(result);
} //# sourceMappingURL=xor.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/compare.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Can be used with Array.sort to sort and array with Uint8Array entries
 */ __turbopack_context__.s([
    "compare",
    ()=>compare
]);
function compare(a, b) {
    for(let i = 0; i < a.byteLength; i++){
        if (a[i] < b[i]) {
            return -1;
        }
        if (a[i] > b[i]) {
            return 1;
        }
    }
    if (a.byteLength > b.byteLength) {
        return 1;
    }
    if (a.byteLength < b.byteLength) {
        return -1;
    }
    return 0;
} //# sourceMappingURL=compare.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/concat.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "concat",
    ()=>concat
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/alloc.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$as$2d$uint8array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/util/as-uint8array.js [app-client] (ecmascript)");
;
;
function concat(arrays, length) {
    if (length == null) {
        length = arrays.reduce((acc, curr)=>acc + curr.length, 0);
    }
    const output = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["allocUnsafe"])(length);
    let offset = 0;
    for (const arr of arrays){
        output.set(arr, offset);
        offset += arr.length;
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$as$2d$uint8array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["asUint8Array"])(output);
} //# sourceMappingURL=concat.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/util/bases.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$basics$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/multiformats/dist/src/basics.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/alloc.js [app-client] (ecmascript)");
;
;
function createCodec(name, prefix, encode, decode) {
    return {
        name,
        prefix,
        encoder: {
            name,
            prefix,
            encode
        },
        decoder: {
            decode
        }
    };
}
const string = createCodec('utf8', 'u', (buf)=>{
    const decoder = new TextDecoder('utf8');
    return 'u' + decoder.decode(buf);
}, (str)=>{
    const encoder = new TextEncoder();
    return encoder.encode(str.substring(1));
});
const ascii = createCodec('ascii', 'a', (buf)=>{
    let string = 'a';
    for(let i = 0; i < buf.length; i++){
        string += String.fromCharCode(buf[i]);
    }
    return string;
}, (str)=>{
    str = str.substring(1);
    const buf = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["allocUnsafe"])(str.length);
    for(let i = 0; i < str.length; i++){
        buf[i] = str.charCodeAt(i);
    }
    return buf;
});
const BASES = {
    utf8: string,
    'utf-8': string,
    hex: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$basics$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["bases"].base16,
    latin1: ascii,
    ascii,
    binary: ascii,
    ...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$basics$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["bases"]
};
const __TURBOPACK__default__export__ = BASES;
 //# sourceMappingURL=bases.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/from-string.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "fromString",
    ()=>fromString
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$bases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/util/bases.js [app-client] (ecmascript)");
;
function fromString(string, encoding = 'utf8') {
    const base = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$bases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"][encoding];
    if (base == null) {
        throw new Error(`Unsupported encoding "${encoding}"`);
    }
    // add multibase prefix
    return base.decoder.decode(`${base.prefix}${string}`); // eslint-disable-line @typescript-eslint/restrict-template-expressions
} //# sourceMappingURL=from-string.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/to-string.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "toString",
    ()=>toString
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$bases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/util/bases.js [app-client] (ecmascript)");
;
function toString(array, encoding = 'utf8') {
    const base = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$bases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"][encoding];
    if (base == null) {
        throw new Error(`Unsupported encoding "${encoding}"`);
    }
    // strip multibase prefix
    return base.encoder.encode(array).substring(1);
} //# sourceMappingURL=to-string.js.map
}),
"[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/index.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

/**
 * @packageDocumentation
 *
 * `Uint8Array`s bring memory-efficient(ish) byte handling to browsers - they are similar to Node.js `Buffer`s but lack a lot of the utility methods present on that class.
 *
 * This module exports a number of function that let you do common operations - joining Uint8Arrays together, seeing if they have the same contents etc.
 *
 * Since Node.js `Buffer`s are also `Uint8Array`s, it falls back to `Buffer` internally where it makes sense for performance reasons.
 *
 * ## alloc(size)
 *
 * Create a new `Uint8Array`. When running under Node.js, `Buffer` will be used in preference to `Uint8Array`.
 *
 * ### Example
 *
 * ```js
 * import { alloc } from 'uint8arrays/alloc'
 *
 * const buf = alloc(100)
 * ```
 *
 * ## allocUnsafe(size)
 *
 * Create a new `Uint8Array`. When running under Node.js, `Buffer` will be used in preference to `Uint8Array`.
 *
 * On platforms that support it, memory referenced by the returned `Uint8Array` will not be initialized.
 *
 * ### Example
 *
 * ```js
 * import { allocUnsafe } from 'uint8arrays/alloc'
 *
 * const buf = allocUnsafe(100)
 * ```
 *
 * ## compare(a, b)
 *
 * Compare two `Uint8Arrays`
 *
 * ### Example
 *
 * ```js
 * import { compare } from 'uint8arrays/compare'
 *
 * const arrays = [
 *   Uint8Array.from([3, 4, 5]),
 *   Uint8Array.from([0, 1, 2])
 * ]
 *
 * const sorted = arrays.sort(compare)
 *
 * console.info(sorted)
 * // [
 * //    Uint8Array[0, 1, 2]
 * //    Uint8Array[3, 4, 5]
 * // ]
 * ```
 *
 * ## concat(arrays, \[length])
 *
 * Concatenate one or more `Uint8Array`s and return a `Uint8Array` with their contents.
 *
 * If you know the length of the arrays, pass it as a second parameter, otherwise it will be calculated by traversing the list of arrays.
 *
 * ### Example
 *
 * ```js
 * import { concat } from 'uint8arrays/concat'
 *
 * const arrays = [
 *   Uint8Array.from([0, 1, 2]),
 *   Uint8Array.from([3, 4, 5])
 * ]
 *
 * const all = concat(arrays, 6)
 *
 * console.info(all)
 * // Uint8Array[0, 1, 2, 3, 4, 5]
 * ```
 *
 * ## equals(a, b)
 *
 * Returns true if the two arrays are the same array or if they have the same length and contents.
 *
 * ### Example
 *
 * ```js
 * import { equals } from 'uint8arrays/equals'
 *
 * const a = Uint8Array.from([0, 1, 2])
 * const b = Uint8Array.from([3, 4, 5])
 * const c = Uint8Array.from([0, 1, 2])
 *
 * console.info(equals(a, b)) // false
 * console.info(equals(a, c)) // true
 * console.info(equals(a, a)) // true
 * ```
 *
 * ## fromString(string, encoding = 'utf8')
 *
 * Returns a new `Uint8Array` created from the passed string and interpreted as the passed encoding.
 *
 * Supports `utf8` and any of the [multibase encodings](https://github.com/multiformats/multibase/blob/master/multibase.csv) as implemented by the [multiformats module](https://www.npmjs.com/package/multiformats).
 *
 * ### Example
 *
 * ```js
 * import { fromString } from 'uint8arrays/from-string'
 *
 * console.info(fromString('hello world')) // Uint8Array[104, 101 ...
 * console.info(fromString('00010203aabbcc', 'base16')) // Uint8Array[0, 1 ...
 * console.info(fromString('AAECA6q7zA', 'base64')) // Uint8Array[0, 1 ...
 * console.info(fromString('01234', 'ascii')) // Uint8Array[48, 49 ...
 * ```
 *
 * ## toString(array, encoding = 'utf8')
 *
 * Returns a string created from the passed `Uint8Array` in the passed encoding.
 *
 * Supports `utf8` and any of the [multibase encodings](https://github.com/multiformats/multibase/blob/master/multibase.csv) as implemented by the [multiformats module](https://www.npmjs.com/package/multiformats).
 *
 * ### Example
 *
 * ```js
 * import { toString } from 'uint8arrays/to-string'
 *
 * console.info(toString(Uint8Array.from([104, 101...]))) // 'hello world'
 * console.info(toString(Uint8Array.from([0, 1, 2...]), 'base16')) // '00010203aabbcc'
 * console.info(toString(Uint8Array.from([0, 1, 2...]), 'base64')) // 'AAECA6q7zA'
 * console.info(toString(Uint8Array.from([48, 49, 50...]), 'ascii')) // '01234'
 * ```
 *
 * ## xor(a, b)
 *
 * Returns a `Uint8Array` containing `a` and `b` xored together.
 *
 * ### Example
 *
 * ```js
 * import { xor } from 'uint8arrays/xor'
 *
 * console.info(xor(Uint8Array.from([1, 0]), Uint8Array.from([0, 1]))) // Uint8Array[1, 1]
 * ```
 *
 * ## xorCompare(a, b)
 *
 * Compares the distances between two xor `Uint8Array`s.
 *
 * ### Example
 *
 * ```ts
 * import { xor } from 'uint8arrays/xor'
 * import { xorCompare } from 'uint8arrays/xor-compare'
 *
 * const target = Uint8Array.from([1, 1])
 * const val1 = Uint8Array.from([1, 0])
 * const xor1 = xor(target, val1)
 *
 * const val2 = Uint8Array.from([0, 1])
 * const xor2 = xor(target, val2)
 *
 * console.info(xorCompare(xor1, xor2)) // -1 or 0 or 1
 * ```
 */ __turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$equals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/equals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$xor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/xor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$compare$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/compare.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$from$2d$string$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/from-string.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$to$2d$string$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/to-string.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
 //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/equals.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Returns true if the two passed Uint8Arrays have the same content
 */ __turbopack_context__.s([
    "equals",
    ()=>equals
]);
function equals(a, b) {
    if (a === b) {
        return true;
    }
    if (a.byteLength !== b.byteLength) {
        return false;
    }
    for(let i = 0; i < a.byteLength; i++){
        if (a[i] !== b[i]) {
            return false;
        }
    }
    return true;
} //# sourceMappingURL=equals.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/alloc.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Returns a `Uint8Array` of the requested size. Referenced memory will
 * be initialized to 0.
 */ __turbopack_context__.s([
    "alloc",
    ()=>alloc,
    "allocUnsafe",
    ()=>allocUnsafe
]);
function alloc(size = 0) {
    return new Uint8Array(size);
}
function allocUnsafe(size = 0) {
    return new Uint8Array(size);
} //# sourceMappingURL=alloc.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/util/as-uint8array.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * To guarantee Uint8Array semantics, convert nodejs Buffers
 * into vanilla Uint8Arrays
 */ __turbopack_context__.s([
    "asUint8Array",
    ()=>asUint8Array
]);
function asUint8Array(buf) {
    return buf;
} //# sourceMappingURL=as-uint8array.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/xor.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "xor",
    ()=>xor
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/alloc.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$as$2d$uint8array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/util/as-uint8array.js [app-client] (ecmascript)");
;
;
function xor(a, b) {
    if (a.length !== b.length) {
        throw new Error('Inputs should have the same length');
    }
    const result = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["allocUnsafe"])(a.length);
    for(let i = 0; i < a.length; i++){
        result[i] = a[i] ^ b[i];
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$as$2d$uint8array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["asUint8Array"])(result);
} //# sourceMappingURL=xor.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/compare.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Can be used with Array.sort to sort and array with Uint8Array entries
 */ __turbopack_context__.s([
    "compare",
    ()=>compare
]);
function compare(a, b) {
    for(let i = 0; i < a.byteLength; i++){
        if (a[i] < b[i]) {
            return -1;
        }
        if (a[i] > b[i]) {
            return 1;
        }
    }
    if (a.byteLength > b.byteLength) {
        return 1;
    }
    if (a.byteLength < b.byteLength) {
        return -1;
    }
    return 0;
} //# sourceMappingURL=compare.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/concat.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "concat",
    ()=>concat
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/alloc.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$as$2d$uint8array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/util/as-uint8array.js [app-client] (ecmascript)");
;
;
function concat(arrays, length) {
    if (length == null) {
        length = arrays.reduce((acc, curr)=>acc + curr.length, 0);
    }
    const output = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["allocUnsafe"])(length);
    let offset = 0;
    for (const arr of arrays){
        output.set(arr, offset);
        offset += arr.length;
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$as$2d$uint8array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["asUint8Array"])(output);
} //# sourceMappingURL=concat.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/util/bases.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$basics$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/multiformats/dist/src/basics.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/alloc.js [app-client] (ecmascript)");
;
;
function createCodec(name, prefix, encode, decode) {
    return {
        name,
        prefix,
        encoder: {
            name,
            prefix,
            encode
        },
        decoder: {
            decode
        }
    };
}
const string = createCodec('utf8', 'u', (buf)=>{
    const decoder = new TextDecoder('utf8');
    return 'u' + decoder.decode(buf);
}, (str)=>{
    const encoder = new TextEncoder();
    return encoder.encode(str.substring(1));
});
const ascii = createCodec('ascii', 'a', (buf)=>{
    let string = 'a';
    for(let i = 0; i < buf.length; i++){
        string += String.fromCharCode(buf[i]);
    }
    return string;
}, (str)=>{
    str = str.substring(1);
    const buf = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$alloc$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["allocUnsafe"])(str.length);
    for(let i = 0; i < str.length; i++){
        buf[i] = str.charCodeAt(i);
    }
    return buf;
});
const BASES = {
    utf8: string,
    'utf-8': string,
    hex: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$basics$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["bases"].base16,
    latin1: ascii,
    ascii,
    binary: ascii,
    ...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$basics$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["bases"]
};
const __TURBOPACK__default__export__ = BASES;
 //# sourceMappingURL=bases.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/from-string.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "fromString",
    ()=>fromString
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$bases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/util/bases.js [app-client] (ecmascript)");
;
function fromString(string, encoding = 'utf8') {
    const base = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$bases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"][encoding];
    if (base == null) {
        throw new Error(`Unsupported encoding "${encoding}"`);
    }
    // add multibase prefix
    return base.decoder.decode(`${base.prefix}${string}`); // eslint-disable-line @typescript-eslint/restrict-template-expressions
} //# sourceMappingURL=from-string.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/to-string.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "toString",
    ()=>toString
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$bases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/util/bases.js [app-client] (ecmascript)");
;
function toString(array, encoding = 'utf8') {
    const base = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$util$2f$bases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"][encoding];
    if (base == null) {
        throw new Error(`Unsupported encoding "${encoding}"`);
    }
    // strip multibase prefix
    return base.encoder.encode(array).substring(1);
} //# sourceMappingURL=to-string.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/index.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

/**
 * @packageDocumentation
 *
 * `Uint8Array`s bring memory-efficient(ish) byte handling to browsers - they are similar to Node.js `Buffer`s but lack a lot of the utility methods present on that class.
 *
 * This module exports a number of function that let you do common operations - joining Uint8Arrays together, seeing if they have the same contents etc.
 *
 * Since Node.js `Buffer`s are also `Uint8Array`s, it falls back to `Buffer` internally where it makes sense for performance reasons.
 *
 * ## alloc(size)
 *
 * Create a new `Uint8Array`. When running under Node.js, `Buffer` will be used in preference to `Uint8Array`.
 *
 * ### Example
 *
 * ```js
 * import { alloc } from 'uint8arrays/alloc'
 *
 * const buf = alloc(100)
 * ```
 *
 * ## allocUnsafe(size)
 *
 * Create a new `Uint8Array`. When running under Node.js, `Buffer` will be used in preference to `Uint8Array`.
 *
 * On platforms that support it, memory referenced by the returned `Uint8Array` will not be initialized.
 *
 * ### Example
 *
 * ```js
 * import { allocUnsafe } from 'uint8arrays/alloc'
 *
 * const buf = allocUnsafe(100)
 * ```
 *
 * ## compare(a, b)
 *
 * Compare two `Uint8Arrays`
 *
 * ### Example
 *
 * ```js
 * import { compare } from 'uint8arrays/compare'
 *
 * const arrays = [
 *   Uint8Array.from([3, 4, 5]),
 *   Uint8Array.from([0, 1, 2])
 * ]
 *
 * const sorted = arrays.sort(compare)
 *
 * console.info(sorted)
 * // [
 * //    Uint8Array[0, 1, 2]
 * //    Uint8Array[3, 4, 5]
 * // ]
 * ```
 *
 * ## concat(arrays, \[length])
 *
 * Concatenate one or more `Uint8Array`s and return a `Uint8Array` with their contents.
 *
 * If you know the length of the arrays, pass it as a second parameter, otherwise it will be calculated by traversing the list of arrays.
 *
 * ### Example
 *
 * ```js
 * import { concat } from 'uint8arrays/concat'
 *
 * const arrays = [
 *   Uint8Array.from([0, 1, 2]),
 *   Uint8Array.from([3, 4, 5])
 * ]
 *
 * const all = concat(arrays, 6)
 *
 * console.info(all)
 * // Uint8Array[0, 1, 2, 3, 4, 5]
 * ```
 *
 * ## equals(a, b)
 *
 * Returns true if the two arrays are the same array or if they have the same length and contents.
 *
 * ### Example
 *
 * ```js
 * import { equals } from 'uint8arrays/equals'
 *
 * const a = Uint8Array.from([0, 1, 2])
 * const b = Uint8Array.from([3, 4, 5])
 * const c = Uint8Array.from([0, 1, 2])
 *
 * console.info(equals(a, b)) // false
 * console.info(equals(a, c)) // true
 * console.info(equals(a, a)) // true
 * ```
 *
 * ## fromString(string, encoding = 'utf8')
 *
 * Returns a new `Uint8Array` created from the passed string and interpreted as the passed encoding.
 *
 * Supports `utf8` and any of the [multibase encodings](https://github.com/multiformats/multibase/blob/master/multibase.csv) as implemented by the [multiformats module](https://www.npmjs.com/package/multiformats).
 *
 * ### Example
 *
 * ```js
 * import { fromString } from 'uint8arrays/from-string'
 *
 * console.info(fromString('hello world')) // Uint8Array[104, 101 ...
 * console.info(fromString('00010203aabbcc', 'base16')) // Uint8Array[0, 1 ...
 * console.info(fromString('AAECA6q7zA', 'base64')) // Uint8Array[0, 1 ...
 * console.info(fromString('01234', 'ascii')) // Uint8Array[48, 49 ...
 * ```
 *
 * ## toString(array, encoding = 'utf8')
 *
 * Returns a string created from the passed `Uint8Array` in the passed encoding.
 *
 * Supports `utf8` and any of the [multibase encodings](https://github.com/multiformats/multibase/blob/master/multibase.csv) as implemented by the [multiformats module](https://www.npmjs.com/package/multiformats).
 *
 * ### Example
 *
 * ```js
 * import { toString } from 'uint8arrays/to-string'
 *
 * console.info(toString(Uint8Array.from([104, 101...]))) // 'hello world'
 * console.info(toString(Uint8Array.from([0, 1, 2...]), 'base16')) // '00010203aabbcc'
 * console.info(toString(Uint8Array.from([0, 1, 2...]), 'base64')) // 'AAECA6q7zA'
 * console.info(toString(Uint8Array.from([48, 49, 50...]), 'ascii')) // '01234'
 * ```
 *
 * ## xor(a, b)
 *
 * Returns a `Uint8Array` containing `a` and `b` xored together.
 *
 * ### Example
 *
 * ```js
 * import { xor } from 'uint8arrays/xor'
 *
 * console.info(xor(Uint8Array.from([1, 0]), Uint8Array.from([0, 1]))) // Uint8Array[1, 1]
 * ```
 *
 * ## xorCompare(a, b)
 *
 * Compares the distances between two xor `Uint8Array`s.
 *
 * ### Example
 *
 * ```ts
 * import { xor } from 'uint8arrays/xor'
 * import { xorCompare } from 'uint8arrays/xor-compare'
 *
 * const target = Uint8Array.from([1, 1])
 * const val1 = Uint8Array.from([1, 0])
 * const xor1 = xor(target, val1)
 *
 * const val2 = Uint8Array.from([0, 1])
 * const xor2 = xor(target, val2)
 *
 * console.info(xorCompare(xor1, xor2)) // -1 or 0 or 1
 * ```
 */ __turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$equals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/equals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$xor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/xor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$compare$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/compare.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$from$2d$string$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/from-string.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$to$2d$string$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/to-string.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
 //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/@web3-storage/capabilities/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
}),
"[project]/node_modules/@web3-storage/access/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
}),
"[project]/node_modules/@web3-storage/w3up-client/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
}),
"[project]/node_modules/@web3-storage/access/dist/src/errors.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
;
 //# sourceMappingURL=errors.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/types.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

// export other types
__turbopack_context__.s([
    "AppName",
    ()=>AppName
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/types.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/errors.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/did-mailto/dist/src/index.js [app-client] (ecmascript) <locals>");
;
;
;
;
var AppName;
(function(AppName) {
    AppName["BskyBackups"] = "bsky-backups";
})(AppName || (AppName = {})); //# sourceMappingURL=types.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/encoding.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Encoding utilities
 *
 * It is recommended that you import directly with:
 * ```js
 * import * as Encoding from '@web3-storage/access/encoding'
 *
 * // or
 *
 * import { encodeDelegations } from '@web3-storage/access/encoding'
 * ```
 *
 * @module
 */ __turbopack_context__.s([
    "bytesToDelegations",
    ()=>bytesToDelegations,
    "delegationToString",
    ()=>delegationToString,
    "delegationsToBytes",
    ()=>delegationsToBytes,
    "delegationsToString",
    ()=>delegationsToString,
    "expirationToDate",
    ()=>expirationToDate,
    "stringToDelegation",
    ()=>stringToDelegation,
    "stringToDelegations",
    ()=>stringToDelegations
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$reader$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/car/src/buffer-reader-browser.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/car/src/buffer-writer.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$to$2d$string$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/to-string.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$from$2d$string$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/uint8arrays/dist/src/from-string.js [app-client] (ecmascript)");
// eslint-disable-next-line no-unused-vars
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
;
;
;
;
;
function delegationsToBytes(delegations) {
    if (!Array.isArray(delegations) || delegations.length === 0) {
        throw new Error('Delegations required to be an non empty array.');
    }
    const roots = delegations.map((d)=>d.root.cid);
    const cids = new Set();
    /** @type {CarBufferWriter.Block[]} */ const blocks = [];
    let byteLength = 0;
    for (const delegation of delegations){
        for (const block of delegation.export()){
            const cid = block.cid.toV1().toString();
            if (!cids.has(cid)) {
                byteLength += __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["blockLength"](block);
                blocks.push(block);
                cids.add(cid);
            }
        }
    }
    const headerLength = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["estimateHeaderLength"](roots.length);
    const writer = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createWriter"](new ArrayBuffer(headerLength + byteLength), {
        roots
    });
    for (const block of blocks){
        writer.write(block);
    }
    return writer.close();
}
function bytesToDelegations(bytes) {
    if (!(bytes instanceof Uint8Array) || bytes.length === 0) {
        throw new TypeError('Input should be a non-empty Uint8Array.');
    }
    const reader = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$reader$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CarBufferReader"].fromBytes(bytes);
    const roots = reader.getRoots();
    /** @type {Types.Delegation<T>[]} */ const delegations = [];
    for (const root of roots){
        const rootBlock = reader.get(root);
        if (rootBlock) {
            const blocks = new Map();
            for (const block of reader.blocks()){
                if (block.cid.toString() !== root.toString()) blocks.set(block.cid.toString(), block);
            }
            // @ts-ignore
            delegations.push(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Delegation"](rootBlock, blocks));
        } else {
            throw new Error('Failed to find root from raw delegation.');
        }
    }
    return delegations;
}
function delegationsToString(delegations, encoding = 'base64url') {
    const bytes = delegationsToBytes(delegations);
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$to$2d$string$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toString"](bytes, encoding);
}
function delegationToString(delegation, encoding) {
    return delegationsToString([
        delegation
    ], encoding);
}
function stringToDelegations(raw, encoding = 'base64url') {
    const bytes = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$from$2d$string$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fromString"](raw, encoding);
    return bytesToDelegations(bytes);
}
function stringToDelegation(raw, encoding) {
    const delegations = stringToDelegations(raw, encoding);
    return delegations[0];
}
function expirationToDate(expiration) {
    const expires = expiration === Infinity || !expiration ? undefined : new Date(expiration * 1000);
    return expires;
} //# sourceMappingURL=encoding.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/access.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "GrantedAccess",
    ()=>GrantedAccess,
    "accountAccess",
    ()=>accountAccess,
    "claim",
    ()=>claim,
    "createPendingAccessRequest",
    ()=>createPendingAccessRequest,
    "delegate",
    ()=>delegate,
    "request",
    ()=>request,
    "spaceAccess",
    ()=>spaceAccess,
    "toCapabilities",
    ()=>toCapabilities
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/access.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/types.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__DID$3e$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/did.js [app-client] (ecmascript) <export * as DID>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/agent.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$encoding$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/encoding.js [app-client] (ecmascript)");
;
;
;
;
;
const delegate = async (agent, { delegations, proofs = [], space = agent.currentSpace() })=>{
    if (!space) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fail"])('Space must be specified');
    }
    const entries = Object.values(delegations).map((proof)=>[
            proof.cid.toString(),
            proof.cid
        ]);
    const { out } = await agent.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["delegate"], {
        with: space,
        nb: {
            delegations: Object.fromEntries(entries)
        },
        // must be embedded here because it's referenced by cid in .nb.delegations
        proofs: [
            ...delegations,
            ...proofs
        ]
    });
    return out;
};
const request = async (agent, { account, provider = agent.connection.id.did(), audience: audience = agent.did(), access = spaceAccess })=>{
    // Request access from the account.
    const { out: result } = await agent.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["authorize"], {
        audience: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__DID$3e$__["DID"].parse(provider),
        with: audience,
        nb: {
            iss: account,
            // New ucan spec moved to recap style layout for capabilities and new
            // `access/request` will use similar format as opposed to legacy one,
            // in the meantime we translate new format to legacy format here.
            att: [
                ...toCapabilities(access)
            ]
        }
    });
    return result.error ? result : {
        ok: new PendingAccessRequest({
            ...result.ok,
            agent,
            audience,
            provider
        })
    };
};
const claim = async (agent, { provider = agent.connection.id.did(), audience = agent.did() } = {})=>{
    const { out: result } = await agent.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["claim"], {
        audience: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__DID$3e$__["DID"].parse(provider),
        with: audience
    });
    if (result.error) {
        return result;
    } else {
        const delegations = Object.values(result.ok.delegations);
        const proofs = delegations.flatMap((proof)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$encoding$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["bytesToDelegations"])(proof));
        return {
            ok: new GrantedAccess({
                agent,
                proofs
            })
        };
    }
};
const createPendingAccessRequest = (agent, { request, expiration, provider = agent.connection.id.did(), audience: audience = agent.did() })=>new PendingAccessRequest({
        agent,
        request,
        expiration,
        provider,
        audience
    });
/**
 * Represents a pending access request. It can be used to poll for the requested
 * delegation.
 */ class PendingAccessRequest {
    /**
     * @typedef {object} PendingAccessRequestModel
     * @property {API.Agent} agent - Agent handling interaction.
     * @property {API.DID} audience - Principal requesting an access.
     * @property {API.ProviderDID} provider - Provider handling request.
     * @property {API.UTCUnixTimestamp} expiration - Seconds in UTC.
     * @property {API.Link} request - Link to the `access/authorize` invocation.
     *
     * @param {PendingAccessRequestModel} model
     */ constructor(model){
        this.model = model;
    }
    get agent() {
        return this.model.agent;
    }
    get audience() {
        return this.model.audience;
    }
    get expiration() {
        return new Date(this.model.expiration * 1000);
    }
    get request() {
        return this.model.request;
    }
    get provider() {
        return this.model.provider;
    }
    /**
     * Low level method and most likely you want to use `.claim` instead. This method will poll
     * fetch delegations **just once** and will return proofs matching to this request. Please note
     * that there may not be any matches in which case result will be `{ ok: [] }`.
     *
     * If you do want to continuously poll until request is approved or expired, you should use
     * `.claim` method instead.
     *
     * @returns {Promise<API.Result<API.Delegation[], API.InvocationError|API.AccessClaimFailure|RequestExpired>>}
     */ async poll() {
        const { agent, audience, provider, expiration } = this.model;
        const timeout = expiration * 1000 - Date.now();
        if (timeout <= 0) {
            return {
                error: new RequestExpired(this.model)
            };
        } else {
            const result = await claim(agent, {
                audience,
                provider
            });
            return result.error ? result : {
                ok: result.ok.proofs.filter((proof)=>isRequestedAccess(proof, this.model))
            };
        }
    }
    /**
     * Continuously polls delegations until this request is approved or expired. Returns
     * a `GrantedAccess` object (view over the delegations) that can be used in the
     * invocations or can be saved in the agent (store) using `.save()` method.
     *
     * @param {object} options
     * @param {number} [options.interval]
     * @param {AbortSignal} [options.signal]
     * @returns {Promise<API.Result<GrantedAccess, Error>>}
     */ async claim({ signal, interval = 250 } = {}) {
        while(signal?.aborted !== true){
            const result = await this.poll();
            // If polling failed, return the error.
            if (result.error) {
                return result;
            } else if (result.ok.length > 0) {
                return {
                    ok: new GrantedAccess({
                        agent: this.agent,
                        proofs: result.ok
                    })
                };
            }
            await new Promise((resolve)=>setTimeout(resolve, interval));
        }
        return {
            error: Object.assign(new Error('Aborted'), {
                reason: signal.reason
            })
        };
    }
}
/**
 * Error returned when pending access request expires.
 */ class RequestExpired extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Failure"] {
    /**
     * @param {PendingAccessRequestModel} model
     */ constructor(model){
        super();
        this.model = model;
    }
    get name() {
        return 'RequestExpired';
    }
    get request() {
        return this.model.request;
    }
    get expiredAt() {
        return new Date(this.model.expiration * 1000);
    }
    describe() {
        return `Access request expired at ${this.expiredAt} for ${this.request} request.`;
    }
}
class GrantedAccess {
    /**
     * @typedef {object} GrantedAccessModel
     * @property {API.Agent} agent - Agent that processed the request.
     * @property {API.Tuple<API.Delegation>} proofs - Delegations that grant access.
     *
     * @param {GrantedAccessModel} model
     */ constructor(model){
        this.model = model;
    }
    get proofs() {
        return this.model.proofs;
    }
    /**
     * Saves access into the agents proofs store so that it can be retained
     * between sessions.
     *
     * @param {object} input
     * @param {API.Agent} [input.agent]
     */ save({ agent = this.model.agent } = {}) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["importAuthorization"])(agent, this);
    }
}
/**
 * Checks if the given delegation is caused by the passed `request` for access.
 *
 * @param {API.Delegation} delegation
 * @param {object} selector
 * @param {API.Link} selector.request
 * @returns
 */ const isRequestedAccess = (delegation, { request })=>// `access/confirm` handler adds facts to the delegation issued by the account
    // so that principal requesting access can identify correct delegation when
    // access is granted.
    delegation.facts.some((fact)=>`${fact['access/request']}` === `${request}`);
const toCapabilities = (access)=>{
    const abilities = [];
    const entries = Object.entries(access);
    for (const [can, details] of entries){
        if (details) {
            abilities.push({
                can
            });
        }
    }
    return abilities;
};
const spaceAccess = {
    'space/*': {},
    'blob/*': {},
    'index/*': {},
    'store/*': {},
    'upload/*': {},
    'access/*': {},
    'filecoin/*': {},
    'usage/*': {}
};
const accountAccess = {
    '*': {}
}; //# sourceMappingURL=access.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/provider.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AccountDID",
    ()=>AccountDID,
    "ProviderDID",
    ()=>ProviderDID,
    "add",
    ()=>add
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/types.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/provider.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/provider.js [app-client] (ecmascript)");
;
;
const { Provider: ProviderDID, AccountDID } = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__;
const add = async (agent, { account, consumer, provider = agent.connection.id.did(), proofs })=>{
    if (!ProviderDID.is(provider)) {
        throw new Error(`Unable to determine provider from agent.connection.id did ${provider}. expected a did:web:`);
    }
    const { out } = await agent.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__.add, {
        with: account,
        nb: {
            provider,
            consumer
        },
        proofs
    });
    return out;
}; //# sourceMappingURL=provider.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/space.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "OwnedSpace",
    ()=>OwnedSpace,
    "SESSION_LIFETIME",
    ()=>SESSION_LIFETIME,
    "SharedSpace",
    ()=>SharedSpace,
    "createAuthorization",
    ()=>createAuthorization,
    "createRecovery",
    ()=>createRecovery,
    "fromDelegation",
    ()=>fromDelegation,
    "fromMnemonic",
    ()=>fromMnemonic,
    "generate",
    ()=>generate,
    "provision",
    ()=>provision,
    "toMnemonic",
    ()=>toMnemonic
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$ed25519$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/principal/src/ed25519.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$ed25519$2f$signer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/principal/src/ed25519/signer.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema.js [app-client] (ecmascript) <export * as Schema>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__UCAN$3e$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/lib.js [app-client] (ecmascript) <export * as UCAN>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__DID$3e$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/did.js [app-client] (ecmascript) <export * as DID>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$scure$2f$bip39$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@scure/bip39/esm/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$scure$2f$bip39$2f$esm$2f$wordlists$2f$english$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@scure/bip39/esm/wordlists/english.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/types.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/access.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/provider.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
const generate = async ({ name, agent })=>{
    const { signer } = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$ed25519$2f$signer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["generate"]();
    return new OwnedSpace({
        signer,
        name,
        agent
    });
};
const fromMnemonic = async (mnemonic, { name, agent })=>{
    const secret = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$scure$2f$bip39$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mnemonicToEntropy"](mnemonic, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$scure$2f$bip39$2f$esm$2f$wordlists$2f$english$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["wordlist"]);
    const signer = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$ed25519$2f$signer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["derive"](secret);
    return new OwnedSpace({
        signer,
        name,
        agent
    });
};
const toMnemonic = ({ signer })=>{
    /** @type {Uint8Array} */ // @ts-expect-error - Field is defined but not in the interface
    const secret = signer.secret;
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$scure$2f$bip39$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["entropyToMnemonic"](secret, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$scure$2f$bip39$2f$esm$2f$wordlists$2f$english$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["wordlist"]);
};
const createRecovery = (space, account)=>createAuthorization(space, {
        audience: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__DID$3e$__["DID"].parse(account),
        access: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["accountAccess"],
        expiration: Infinity
    });
const SESSION_LIFETIME = 60 * 60 * 24 * 365;
const createAuthorization = async ({ signer, name }, { audience, access = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["spaceAccess"], expiration = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__UCAN$3e$__["UCAN"].now() + SESSION_LIFETIME })=>{
    return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["delegate"])({
        issuer: signer,
        audience: audience,
        capabilities: toCapabilities({
            [signer.did()]: access
        }),
        ...expiration ? {
            expiration
        } : {},
        facts: [
            {
                space: {
                    name
                }
            }
        ]
    });
};
/**
 * @param {Record<API.Resource, API.Access>} allow
 * @returns {API.Capabilities}
 */ const toCapabilities = (allow)=>{
    const capabilities = [];
    for (const [subject, access] of Object.entries(allow)){
        const entries = Object.entries(access);
        for (const [can, details] of entries){
            if (details) {
                capabilities.push({
                    can,
                    with: subject
                });
            }
        }
    }
    return capabilities;
};
class OwnedSpace {
    /**
     * @param {Model} model
     */ constructor(model){
        this.model = model;
    }
    get signer() {
        return this.model.signer;
    }
    get name() {
        return this.model.name;
    }
    did() {
        return this.signer.did();
    }
    /**
     * Creates a renamed version of this space.
     *
     * @param {string} name
     */ withName(name) {
        return new OwnedSpace({
            signer: this.signer,
            name
        });
    }
    /**
     * Saves account in the agent store so it can be accessed across sessions.
     *
     * @param {object} input
     * @param {API.Agent} [input.agent]
     * @returns {Promise<API.Result<API.Unit, Error>>}
     */ async save({ agent = this.model.agent } = {}) {
        if (!agent) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fail"])('Please provide an agent to save the space into');
        }
        const proof = await createAuthorization(this, {
            audience: agent
        });
        await agent.importSpaceFromDelegation(proof);
        await agent.setCurrentSpace(this.did());
        return {
            ok: {}
        };
    }
    /**
     * @param {Authorization} authorization
     * @param {object} options
     * @param {API.Agent} [options.agent]
     */ provision({ proofs }, { agent = this.model.agent } = {}) {
        if (!agent) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fail"])('Please provide an agent to save the space into');
        }
        return provision(this, {
            proofs,
            agent
        });
    }
    /**
     * Creates a (UCAN) delegation that gives full access to the space to the
     * specified `account`. At the moment we only allow `did:mailto` principal
     * to be used as an `account`.
     *
     * @param {API.AccountDID} account
     */ async createRecovery(account) {
        return createRecovery(this, account);
    }
    /**
     * Creates (UCAN) delegation that gives specified `agent` an access to
     * specified ability (passed as `access.can` field) on the this space.
     * Optionally, you can specify `access.expiration` field to set the
     *
     * @param {API.Principal} principal
     * @param {object} [input]
     * @param {API.Access} [input.access]
     * @param {API.UCAN.UTCUnixTimestamp} [input.expiration]
     */ createAuthorization(principal, input) {
        return createAuthorization(this, {
            ...input,
            audience: principal
        });
    }
    /**
     * Derives BIP39 mnemonic that can be used to recover the space.
     *
     * @returns {string}
     */ toMnemonic() {
        return toMnemonic(this);
    }
}
const SpaceDID = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].did({
    method: 'key'
});
const fromDelegation = (delegation)=>{
    const result = SpaceDID.read(delegation.capabilities[0].with);
    if (result.error) {
        throw Object.assign(new Error(`Invalid delegation, expected capabilities[0].with to be DID, ${result.error}`), {
            cause: result.error
        });
    }
    /** @type {{name?:string}} */ const meta = delegation.facts[0]?.space ?? {};
    return new SharedSpace({
        id: result.ok,
        delegation,
        meta
    });
};
const provision = async (space, { proofs, agent })=>{
    const [capability] = proofs[0].capabilities;
    const { ok: account, error: reason } = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AccountDID"].read(capability.with);
    if (reason) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["error"])(reason);
    }
    return await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"](agent, {
        consumer: space.did(),
        account,
        proofs
    });
};
class SharedSpace {
    /**
     * @typedef {object} SharedSpaceModel
     * @property {API.SpaceDID} id
     * @property {API.Delegation} delegation
     * @property {{name?:string}} meta
     * @property {API.Agent} [agent]
     *
     * @param {SharedSpaceModel} model
     */ constructor(model){
        this.model = model;
    }
    get delegation() {
        return this.model.delegation;
    }
    get meta() {
        return this.model.meta;
    }
    get name() {
        return this.meta.name ?? '';
    }
    did() {
        return this.model.id;
    }
    /**
     * @param {string} name
     */ withName(name) {
        return new SharedSpace({
            ...this.model,
            meta: {
                ...this.meta,
                name
            }
        });
    }
} //# sourceMappingURL=space.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/delegations.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "canDelegateCapability",
    ()=>canDelegateCapability,
    "isExpired",
    ()=>isExpired,
    "isTooEarly",
    ()=>isTooEarly,
    "matchResource",
    ()=>matchResource,
    "validate",
    ()=>validate
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Delegation$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript) <export * as Delegation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/types.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/utils.js [app-client] (ecmascript)");
;
;
;
function isExpired(delegation) {
    if (delegation.expiration === undefined || delegation.expiration <= Math.floor(Date.now() / 1000)) {
        return true;
    }
    return false;
}
function isTooEarly(delegation) {
    if (!delegation.notBefore) {
        return false;
    }
    return delegation.notBefore > Math.floor(Date.now() / 1000);
}
function validate(delegation, opts) {
    const { checkAudience, checkIsExpired = true, checkIsTooEarly = true } = opts ?? {};
    if (checkAudience && delegation.audience.did() !== checkAudience.did()) {
        throw new Error(`Delegation audience ${delegation.audience.did()} does not match required DID ${checkAudience.did()}`);
    }
    if (checkIsExpired && isExpired(delegation)) {
        throw new Error(`Delegation expired.`);
    }
    if (checkIsTooEarly && isTooEarly(delegation)) {
        throw new Error(`Delegation is not active yet (too early).`);
    }
}
function canDelegateCapability(delegation, capability) {
    const allowsCapabilities = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Delegation$3e$__["Delegation"].allows(delegation);
    for (const [uri, abilities] of Object.entries(allowsCapabilities)){
        if (matchResource(uri, capability.with)) {
            const cans = Object.keys(abilities);
            for (const can of cans){
                if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["canDelegateAbility"])(can, capability.can)) {
                    return true;
                }
            }
        }
    }
    return false;
}
const matchResource = (resource, query)=>{
    if (query === 'ucan:*') {
        return true;
    } else if (typeof query === 'string') {
        return resource === query;
    } else {
        return query.test(resource);
    }
}; //# sourceMappingURL=delegations.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/utils/buffers.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Convert a Uint8Array to an ArrayBuffer, taking into account
 * that we may be looking at a "data view".
 * thanks, https://stackoverflow.com/a/54646864
 *
 * If we aren't looking at a data view, simply returns the underlying ArrayBuffer
 * directly.
 *
 * @param {Uint8Array} array
 * @returns ArrayBuffer
 */ __turbopack_context__.s([
    "uint8ArrayToArrayBuffer",
    ()=>uint8ArrayToArrayBuffer
]);
function uint8ArrayToArrayBuffer(array) {
    if (array.byteOffset === 0 && array.byteLength === array.buffer.byteLength) {
        return array.buffer;
    } else {
        return array.buffer.slice(array.byteOffset, array.byteLength + array.byteOffset);
    }
} //# sourceMappingURL=buffers.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/agent-data.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AgentData",
    ()=>AgentData,
    "getSessionProofs",
    ()=>getSessionProofs,
    "isSessionProof",
    ()=>isSessionProof
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/principal/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$ed25519$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/principal/src/ed25519.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$ed25519$2f$signer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Signer$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/principal/src/ed25519/signer.js [app-client] (ecmascript) <export * as Signer>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/multiformats/dist/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$cid$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/node_modules/multiformats/dist/src/cid.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$ucan$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__UCAN$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/ucan.js [app-client] (ecmascript) <export * as UCAN>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$delegations$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/delegations.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$utils$2f$buffers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/utils/buffers.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
class AgentData {
    /** @type {(data: import('./types.js').AgentDataExport) => Promise<void> | void} */ #save;
    /**
     * @param {import('./types.js').AgentDataModel} data
     * @param {import('./types.js').AgentDataOptions} [options]
     */ constructor(data, options = {}){
        this.meta = data.meta;
        this.principal = data.principal;
        this.spaces = data.spaces;
        this.delegations = data.delegations;
        this.currentSpace = data.currentSpace;
        this.#save = (data)=>options.store ? options.store.save(data) : undefined;
    }
    /**
     * Create a new AgentData instance from the passed initialization data.
     *
     * @param {Partial<import('./types.js').AgentDataModel>} [init]
     * @param {import('./types.js').AgentDataOptions} [options]
     */ static async create(init = {}, options = {}) {
        const agentData = new AgentData({
            meta: {
                name: 'agent',
                type: 'device',
                ...init.meta
            },
            principal: init.principal ?? await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$ed25519$2f$signer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Signer$3e$__["Signer"].generate(),
            spaces: init.spaces ?? new Map(),
            delegations: init.delegations ?? new Map(),
            currentSpace: init.currentSpace
        }, options);
        if (options.store) {
            await options.store.save(agentData.export());
        }
        return agentData;
    }
    /**
     * Instantiate AgentData from previously exported data.
     *
     * @param {import('./types.js').AgentDataExport} raw
     * @param {import('./types.js').AgentDataOptions} [options]
     */ static fromExport(raw, options) {
        /** @type {import('./types.js').AgentDataModel['delegations']} */ const dels = new Map();
        for (const [key, value] of raw.delegations){
            dels.set(key, {
                delegation: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["importDAG"])(value.delegation.map((d)=>({
                        cid: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$cid$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CID"].parse(d.cid).toV1(),
                        bytes: d.bytes instanceof Uint8Array ? d.bytes : new Uint8Array(d.bytes)
                    }))),
                meta: value.meta
            });
        }
        return new AgentData({
            meta: raw.meta,
            // @ts-expect-error for some reason TS thinks this is a EdSigner
            principal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$principal$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Signer"].from(raw.principal),
            currentSpace: raw.currentSpace,
            spaces: raw.spaces,
            delegations: dels
        }, options);
    }
    /**
     * Export data in a format safe to pass to `structuredClone()`.
     */ export() {
        /** @type {import('./types.js').AgentDataExport} */ const raw = {
            meta: this.meta,
            principal: this.principal.toArchive(),
            currentSpace: this.currentSpace,
            spaces: this.spaces,
            delegations: new Map()
        };
        for (const [key, value] of this.delegations){
            raw.delegations.set(key, {
                meta: value.meta,
                delegation: [
                    ...value.delegation.export()
                ].map((b)=>({
                        cid: b.cid.toString(),
                        bytes: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$utils$2f$buffers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["uint8ArrayToArrayBuffer"])(b.bytes)
                    }))
            });
        }
        return raw;
    }
    /**
     * @param {import('@ucanto/interface').DID} did
     * @param {import('./types.js').SpaceMeta} meta
     * @param {import('@ucanto/interface').Delegation} [proof]
     */ async addSpace(did, meta, proof) {
        this.spaces.set(did, meta);
        await (proof ? this.addDelegation(proof) : this.#save(this.export()));
    }
    /**
     * @deprecated
     * @param {import('@ucanto/interface').DID<'key'>} did
     */ async setCurrentSpace(did) {
        this.currentSpace = did;
        await this.#save(this.export());
    }
    /**
     * @param {import('@ucanto/interface').Delegation} delegation
     * @param {import('./types.js').DelegationMeta} [meta]
     */ async addDelegation(delegation, meta) {
        this.delegations.set(delegation.cid.toString(), {
            delegation,
            meta: meta ?? {}
        });
        await this.#save(this.export());
    }
    /**
     * @param {import('@ucanto/interface').UCANLink} cid
     */ async removeDelegation(cid) {
        this.delegations.delete(cid.toString());
        await this.#save(this.export());
    }
}
/**
 * Is the given capability a session attestation?
 *
 * @param {Ucanto.Capability} cap
 * @returns {boolean}
 */ const isSessionCapability = (cap)=>cap.can === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$ucan$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__UCAN$3e$__["UCAN"].attest.can;
const isSessionProof = (delegation)=>delegation.capabilities.some((cap)=>isSessionCapability(cap));
function getSessionProofs(data) {
    /** @type {SessionProofIndexedByAuthorizationAndIssuer} */ const proofs = {};
    for (const { delegation } of data.delegations.values()){
        if (isSessionProof(delegation)) {
            const cap = delegation.capabilities[0];
            if (cap && !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$delegations$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isExpired"])(delegation)) {
                const proof = cap.nb.proof;
                if (proof) {
                    const proofCid = proof.toString();
                    const issuerDid = delegation.issuer.did();
                    proofs[proofCid] = proofs[proofCid] ?? {};
                    proofs[proofCid][issuerDid] = proofs[proofCid][issuerDid] ?? [];
                    proofs[proofCid][issuerDid].push(delegation);
                }
            }
        }
    }
    return proofs;
} //# sourceMappingURL=agent-data.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/agent-use-cases.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addProvider",
    ()=>addProvider,
    "addProviderAndDelegateToAccount",
    ()=>addProviderAndDelegateToAccount,
    "authorizeAndWait",
    ()=>authorizeAndWait,
    "authorizeWaitAndClaim",
    ()=>authorizeWaitAndClaim,
    "claimAccess",
    ()=>claimAccess,
    "delegationsIncludeSessionProof",
    ()=>delegationsIncludeSessionProof,
    "getAccountPlan",
    ()=>getAccountPlan,
    "pollAccessClaimUntil",
    ()=>pollAccessClaimUntil,
    "requestAccess",
    ()=>requestAccess,
    "waitForAuthorizationByPolling",
    ()=>waitForAuthorizationByPolling
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/agent.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/access.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$encoding$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/encoding.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Provider$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/provider.js [app-client] (ecmascript) <export * as Provider>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$plan$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Plan$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/plan.js [app-client] (ecmascript) <export * as Plan>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Access$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/access.js [app-client] (ecmascript) <export * as Access>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema.js [app-client] (ecmascript) <export * as Schema>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2d$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/agent-data.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/did-mailto/dist/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/types.js [app-client] (ecmascript) <locals>");
;
;
;
;
;
;
;
;
;
const DIDWeb = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].DID.match({
    method: 'web'
});
async function requestAccess(access, account, capabilities) {
    const res = await access.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["authorize"], {
        audience: access.connection.id,
        with: access.issuer.did(),
        nb: {
            iss: account.did(),
            att: [
                ...capabilities
            ]
        }
    });
    if (res?.out.error) {
        throw res.out.error;
    }
}
async function claimAccess(access, audienceOfClaimedDelegations = access.connection.id.did(), { addProofs = false, nonce } = {}) {
    const res = await access.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["claim"], {
        audience: access.connection.id,
        with: audienceOfClaimedDelegations,
        nonce
    });
    if (res.out.error) {
        throw res.out.error;
    }
    const delegations = Object.values(res.out.ok.delegations).flatMap((bytes)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$encoding$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["bytesToDelegations"])(bytes));
    if (addProofs) {
        for (const d of delegations){
            await access.addProof(d);
        }
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["addSpacesFromDelegations"])(access, delegations);
    }
    return delegations;
}
async function addProvider({ access, space, account, provider }) {
    const result = await access.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$provider$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Provider$3e$__["Provider"].add, {
        audience: access.connection.id,
        with: account.did(),
        nb: {
            provider,
            consumer: space
        }
    });
    if (result.out.error) {
        throw result.out.error;
    }
}
function delegationsIncludeSessionProof(delegations) {
    return delegations.some((d)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2d$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isSessionProof"])(d));
}
async function pollAccessClaimUntil(delegationsMatch, access, delegee, opts) {
    const interval = opts?.interval || 250;
    // eslint-disable-next-line no-constant-condition
    while(true){
        if (opts?.signal?.aborted) throw opts.signal.reason ?? new Error('operation aborted');
        const res = await access.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Access$3e$__["Access"].claim, {
            with: delegee
        });
        if (res.out.error) throw res.out.error;
        const claims = Object.values(res.out.ok.delegations).flatMap((d)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$encoding$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["bytesToDelegations"])(d));
        if (delegationsMatch(claims)) return claims;
        await new Promise((resolve)=>setTimeout(resolve, interval));
    }
}
async function waitForAuthorizationByPolling(access, opts = {}) {
    const claimed = await pollAccessClaimUntil(delegationsIncludeSessionProof, access, access.issuer.did(), {
        signal: opts?.signal,
        interval: opts?.interval
    });
    return [
        ...claimed
    ];
}
async function authorizeAndWait(access, email, opts = {}) {
    const expectAuthorization = opts.expectAuthorization || waitForAuthorizationByPolling;
    const account = {
        did: ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromEmail"](email)
    };
    await requestAccess(access, account, opts?.capabilities || [
        {
            can: 'space/*'
        },
        {
            can: 'store/*'
        },
        {
            can: 'provider/add'
        },
        {
            can: 'subscription/list'
        },
        {
            can: 'upload/*'
        },
        {
            can: 'ucan/*'
        },
        {
            can: 'plan/*'
        },
        {
            can: 'usage/*'
        },
        {
            can: 'w3up/*'
        }
    ]);
    const sessionDelegations = [
        ...await expectAuthorization(access, opts)
    ];
    if (!opts?.dontAddProofs) {
        await Promise.all(sessionDelegations.map(async (d)=>access.addProof(d)));
    }
}
async function authorizeWaitAndClaim(accessAgent, email, opts) {
    await authorizeAndWait(accessAgent, email, opts);
    await claimAccess(accessAgent, accessAgent.issuer.did(), {
        addProofs: opts?.addProofs ?? true
    });
}
async function addProviderAndDelegateToAccount(access, agentData, email, opts) {
    const space = opts?.space || access.currentSpace();
    const spaceMeta = space ? agentData.spaces.get(space) : undefined;
    const provider = opts?.provider || (()=>{
        const service = access.connection.id.did();
        if (DIDWeb.is(service)) {
            // connection.id did is a valid provider value. Try using that.
            return service;
        }
        throw new Error(`unable to determine provider to use to addProviderAndDelegateToAccount using access.connection.id did ${service}. expected a did:web:`);
    })();
    if (!space || !spaceMeta) {
        throw new Error('No space selected');
    }
    if (spaceMeta) {
        throw new Error('Space already registered with web3.storage.');
    }
    const account = {
        did: ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromEmail"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["email"](email))
    };
    await addProvider({
        access,
        space,
        account,
        provider
    });
    const delegateSpaceAccessResult = await delegateSpaceAccessToAccount(access, space, account);
    if (delegateSpaceAccessResult.out.error) {
        throw delegateSpaceAccessResult.out.error;
    }
    await agentData.addSpace(space, spaceMeta);
}
/**
 * @param {AccessAgent} access
 * @param {API.SpaceDID} space
 * @param {API.Principal<API.AccountDID>} account
 */ async function delegateSpaceAccessToAccount(access, space, account) {
    const issuerSaysAccountCanAdminSpace = await createIssuerSaysAccountCanAdminSpace(access.issuer, space, account, undefined, access.proofs([
        {
            with: space,
            can: '*'
        }
    ]), // we want to sign over control of this space forever
    Infinity);
    return access.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["delegate"], {
        audience: access.connection.id,
        with: space,
        expiration: Infinity,
        nb: {
            delegations: {
                [issuerSaysAccountCanAdminSpace.cid.toString()]: issuerSaysAccountCanAdminSpace.cid
            }
        },
        proofs: [
            // must be embedded here because it's referenced by cid in .nb.delegations
            issuerSaysAccountCanAdminSpace
        ]
    });
}
/**
 * @param {API.Signer<API.DIDKey>} issuer
 * @param {API.SpaceDID} space
 * @param {API.Principal<API.AccountDID>} account
 * @param {API.Capabilities} capabilities
 * @param {API.Delegation[]} proofs
 * @param {number} expiration
 * @returns
 */ async function createIssuerSaysAccountCanAdminSpace(issuer, space, account, capabilities = [
    {
        can: '*',
        with: space
    }
], proofs = [], expiration) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["delegate"])({
        issuer,
        audience: account,
        capabilities,
        proofs,
        expiration
    });
}
async function getAccountPlan(agent, account) {
    const receipt = await agent.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$plan$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Plan$3e$__["Plan"].get, {
        with: account
    });
    return receipt.out;
} //# sourceMappingURL=agent-use-cases.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/agent.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Agent",
    ()=>Agent,
    "addSpacesFromDelegations",
    ()=>addSpacesFromDelegations,
    "connection",
    ()=>connection,
    "importAuthorization",
    ()=>importAuthorization
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/connection.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/car.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/http.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Delegation$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript) <export * as Delegation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$space$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/space.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$ucan$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/ucan.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/access.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$space$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/space.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/invocation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__DID$3e$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/did.js [app-client] (ecmascript) <export * as DID>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema.js [app-client] (ecmascript) <export * as Schema>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$delegations$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/delegations.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2d$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/agent-data.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$ucan$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__UCAN$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/ucan.js [app-client] (ecmascript) <export * as UCAN>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/types.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2d$use$2d$cases$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/agent-use-cases.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const HOST = 'https://up.web3.storage';
const PRINCIPAL = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__DID$3e$__["DID"].parse('did:web:web3.storage');
/**
 * Keeps track of AgentData for all Agents constructed.
 * Used by addSpacesFromDelegations - so it can only accept Agent as param, but
 * still mutate corresponding AgentData
 *
 * @deprecated - remove this when deprecated addSpacesFromDelegations is removed
 */ /** @type {WeakMap<Agent<Record<string, any>>, AgentData>} */ const agentToData = new WeakMap();
function connection(options = {}) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["connect"]({
        id: options.principal ?? PRINCIPAL,
        codec: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["outbound"],
        channel: options.channel ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["open"]({
            url: options.url ?? new URL(HOST),
            method: 'POST',
            fetch: options.fetch ?? globalThis.fetch.bind(globalThis)
        })
    });
}
class Agent {
    /** @type {import('./agent-data.js').AgentData} */ #data;
    /**
     * @param {import('./agent-data.js').AgentData} data - Agent data
     * @param {import('./types.js').AgentOptions<S>} [options]
     */ constructor(data, options = {}){
        /** @type { Client.Channel<S> & { url?: URL } | undefined } */ const channel = options.connection?.channel;
        this.url = options.url ?? channel?.url ?? new URL(HOST);
        this.connection = options.connection ?? connection({
            principal: options.servicePrincipal,
            url: this.url
        });
        this.#data = data;
        agentToData.set(this, this.#data);
    }
    /**
     * Create a new Agent instance, optionally with the passed initialization data.
     *
     * @template {Record<string, any>} [R=Service]
     * @param {Partial<import('./types.js').AgentDataModel>} [init]
     * @param {import('./types.js').AgentOptions<R> & import('./types.js').AgentDataOptions} [options]
     */ static async create(init, options = {}) {
        const data = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2d$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AgentData"].create(init, options);
        return new Agent(data, options);
    }
    /**
     * Instantiate an Agent from pre-exported agent data.
     *
     * @template {Record<string, any>} [R=Service]
     * @param {import('./types.js').AgentDataExport} raw
     * @param {import('./types.js').AgentOptions<R> & import('./types.js').AgentDataOptions} [options]
     */ static from(raw, options = {}) {
        const data = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2d$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AgentData"].fromExport(raw, options);
        return new Agent(data, options);
    }
    get issuer() {
        return this.#data.principal;
    }
    get meta() {
        return this.#data.meta;
    }
    get spaces() {
        return this.#data.spaces;
    }
    did() {
        return this.#data.principal.did();
    }
    /**
     * Add a proof to the agent store.
     *
     * @param {API.Delegation} delegation
     */ async addProof(delegation) {
        return await this.addProofs([
            delegation
        ]);
    }
    /**
     * Adds set of proofs to the agent store.
     *
     * @param {Iterable<API.Delegation>} delegations
     */ async addProofs(delegations) {
        for (const proof of delegations){
            await this.#data.addDelegation(proof, {
                audience: this.meta
            });
        }
        await this.removeExpiredDelegations();
        return {};
    }
    /**
     * Query the delegations store for all the delegations matching the capabilities provided.
     *
     * @param {API.CapabilityQuery[]} [caps]
     */ #delegations(caps) {
        const _caps = new Set(caps);
        /** @type {Array<{ delegation: API.Delegation, meta: API.DelegationMeta }>} */ const values = [];
        for (const [, value] of this.#data.delegations){
            // check expiration
            if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$delegations$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isExpired"])(value.delegation) && // check if delegation can be used
            !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$delegations$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isTooEarly"])(value.delegation)) {
                // check if we need to filter for caps
                if (Array.isArray(caps) && caps.length > 0) {
                    for (const cap of _caps){
                        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$delegations$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["canDelegateCapability"])(value.delegation, cap)) {
                            values.push(value);
                        }
                    }
                } else {
                    values.push(value);
                }
            }
        }
        return values;
    }
    /**
     * Clean up any expired delegations.
     */ async removeExpiredDelegations() {
        for (const [, value] of this.#data.delegations){
            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$delegations$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isExpired"])(value.delegation)) {
                await this.#data.removeDelegation(value.delegation.cid);
            }
        }
    }
    /**
     * Revoke a delegation by CID.
     *
     * If the delegation was issued by this agent (and therefore is stored in the
     * delegation store) you can just pass the CID. If not, or if the current agent's
     * delegation store no longer contains the delegation, you MUST pass a chain of
     * proofs that proves your authority to revoke this delegation as `options.proofs`.
     *
     * @param {API.UCANLink} delegationCID
     * @param {object} [options]
     * @param {API.Delegation[]} [options.proofs]
     */ async revoke(delegationCID, options = {}) {
        const additionalProofs = options.proofs ?? [];
        // look for the identified delegation in the delegation store and the passed proofs
        const delegation = [
            ...this.delegations(),
            ...additionalProofs
        ].find((delegation)=>delegation.cid.equals(delegationCID));
        if (!delegation) {
            return {
                error: new Error(`could not find delegation ${delegationCID.toString()} - please include the delegation in options.proofs`)
            };
        }
        const receipt = await this.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$ucan$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__UCAN$3e$__["UCAN"].revoke, {
            // per https://github.com/storacha/w3up/blob/main/packages/capabilities/src/ucan.js#L38C6-L38C6 the resource here should be
            // the current issuer - using the space DID here works for simple cases but falls apart when a delegee tries to revoke a delegation
            // they have re-delegated, since they don't have "ucan/revoke" capabilities on the space
            with: this.issuer.did(),
            nb: {
                ucan: delegation.cid
            },
            proofs: [
                delegation,
                ...additionalProofs
            ]
        });
        return receipt.out;
    }
    /**
     * Get all the proofs matching the capabilities.
     *
     * Proofs are delegations with an audience matching agent DID, or with an
     * audience matching the session DID.
     *
     * Proof of session will also be included in the returned proofs if any
     * proofs matching the passed capabilities require it.
     *
     * @param {API.CapabilityQuery[]} [caps] - Capabilities to filter by. Empty or undefined caps with return all the proofs.
     * @param {object} [options]
     * @param {API.DID} [options.sessionProofIssuer] - only include session proofs for this issuer
     */ proofs(caps, options) {
        /** @type {Map<string, API.Delegation<API.Capabilities>>} */ const authorizations = new Map();
        for (const { delegation } of this.#delegations(caps)){
            if (delegation.audience.did() === this.issuer.did()) {
                authorizations.set(delegation.cid.toString(), delegation);
            }
        }
        // now let's add any session proofs that refer to those authorizations
        const sessions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$agent$2d$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getSessionProofs"])(this.#data);
        for (const proof of [
            ...authorizations.values()
        ]){
            const proofsByIssuer = sessions[proof.asCID.toString()] ?? {};
            const sessionProofs = options?.sessionProofIssuer ? proofsByIssuer[options.sessionProofIssuer] ?? [] : Object.values(proofsByIssuer).flat();
            for (const sessionProof of sessionProofs){
                authorizations.set(sessionProof.cid.toString(), sessionProof);
            }
        }
        return [
            ...authorizations.values()
        ];
    }
    /**
     * Get delegations created by the agent for others.
     *
     * @param {API.CapabilityQuery[]} [caps] - Capabilities to filter by. Empty or undefined caps with return all the delegations.
     */ delegations(caps) {
        const arr = [];
        for (const { delegation } of this.delegationsWithMeta(caps)){
            arr.push(delegation);
        }
        return arr;
    }
    /**
     * Get delegations created by the agent for others and their metadata.
     *
     * @param {API.CapabilityQuery[]} [caps] - Capabilities to filter by. Empty or undefined caps with return all the delegations.
     */ delegationsWithMeta(caps) {
        const arr = [];
        for (const value of this.#delegations(caps)){
            const { delegation } = value;
            const isSession = delegation.capabilities.some((c)=>c.can === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$ucan$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["attest"].can);
            if (!isSession && delegation.audience.did() !== this.issuer.did()) {
                arr.push(value);
            }
        }
        return arr;
    }
    /**
     * Creates a space signer and a delegation to the agent
     *
     * @param {string} name
     */ async createSpace(name) {
        return await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$space$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["generate"]({
            name,
            agent: this
        });
    }
    /**
     * @param {string} secret
     * @param {object} options
     * @param {string} options.name
     */ async recoverSpace(secret, { name }) {
        return await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$space$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fromMnemonic"](secret, {
            name,
            agent: this
        });
    }
    /**
     * Import a space from a delegation.
     *
     * @param {API.Delegation} delegation
     * @param {object} options
     * @param {string} [options.name]
     */ async importSpaceFromDelegation(delegation, { name = '' } = {}) {
        const space = name === '' ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$space$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fromDelegation"](delegation) : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$space$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fromDelegation"](delegation).withName(name);
        this.#data.spaces.set(space.did(), {
            ...space.meta,
            name: space.name
        });
        await this.addProof(space.delegation);
        // if we do not have a current space, make this one current
        if (!this.currentSpace()) {
            await this.setCurrentSpace(space.did());
        }
        return space;
    }
    /**
     * Sets the current selected space
     *
     * Other methods will default to use the current space if no resource is defined
     *
     * @param {API.SpaceDID} space
     */ async setCurrentSpace(space) {
        if (!this.#data.spaces.has(space)) {
            throw new Error(`Agent has no proofs for ${space}.`);
        }
        await this.#data.setCurrentSpace(space);
        return space;
    }
    /**
     * Get current space DID
     */ currentSpace() {
        return this.#data.currentSpace;
    }
    /**
     * Get current space DID, proofs and abilities
     */ currentSpaceWithMeta() {
        if (!this.#data.currentSpace) {
            return;
        }
        const proofs = this.proofs([
            {
                can: 'space/info',
                with: this.#data.currentSpace
            }
        ]);
        const caps = new Set();
        for (const p of proofs){
            for (const cap of p.capabilities){
                caps.add(cap.can);
            }
        }
        return {
            did: this.#data.currentSpace,
            proofs,
            capabilities: [
                ...caps
            ],
            meta: this.#data.spaces.get(this.#data.currentSpace)
        };
    }
    /**
     *
     * @param {import('./types.js').DelegationOptions} options
     */ async delegate(options) {
        const space = this.currentSpaceWithMeta();
        if (!space) {
            throw new Error('no space selected.');
        }
        const caps = options.abilities.map((a)=>{
            return {
                with: space.did,
                can: a
            };
        });
        // Verify agent can provide proofs for each requested capability
        for (const cap of caps){
            if (!this.proofs([
                cap
            ]).length) {
                throw new Error(`cannot delegate capability ${cap.can} with ${cap.with}`);
            }
        }
        const delegation = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["delegate"])({
            issuer: this.issuer,
            capabilities: caps,
            proofs: this.proofs(caps),
            facts: [
                {
                    space: space.meta ?? {}
                }
            ],
            ...options
        });
        await this.#data.addDelegation(delegation, {
            audience: options.audienceMeta
        });
        await this.removeExpiredDelegations();
        return delegation;
    }
    /**
     * Invoke and execute the given capability on the Access service connection
     *
     * ```js
     *
     * await agent.invokeAndExecute(Space.recover, {
     *   nb: {
     *     identity: 'mailto: email@gmail.com',
     *   },
     * })
     *
     * // sugar for
     * const recoverInvocation = await agent.invoke(Space.recover, {
     *   nb: {
     *     identity: 'mailto: email@gmail.com',
     *   },
     * })
     *
     * await recoverInvocation.execute(agent.connection)
     * ```
     *
     * @template {API.Ability} A
     * @template {API.URI} R
     * @template {API.Caveats} C
     * @param {API.TheCapabilityParser<API.CapabilityMatch<A, R, C>>} cap
     * @param {API.InvokeOptions<A, R, API.TheCapabilityParser<API.CapabilityMatch<A, R, C>>>} options
     * @returns {Promise<API.InferReceipt<API.Capability<A, R, C>, S>>}
     */ async invokeAndExecute(cap, options) {
        const inv = await this.invoke(cap, options);
        const out = inv.execute(this.connection);
        return out;
    }
    /**
     * Execute invocations on the agent's connection
     *
     * @example
     * ```js
     * const i1 = await agent.invoke(Space.info, {})
     * const i2 = await agent.invoke(Space.recover, {
     *   nb: {
     *     identity: 'mailto:hello@web3.storage',
     *   },
     * })
     *
     * const results = await agent.execute2(i1, i2)
     *
     * ```
     * @template {API.Capability} C
     * @template {API.Tuple<API.ServiceInvocation<C, S>>} I
     * @param {I} invocations
     */ execute(...invocations) {
        return this.connection.execute(...invocations);
    }
    /**
     * Creates an invocation for the given capability with Agent's proofs, service, issuer and space.
     *
     * @example
     * ```js
     * const recoverInvocation = await agent.invoke(Space.recover, {
     *   nb: {
     *     identity: 'mailto: email@gmail.com',
     *   },
     * })
     *
     * await recoverInvocation.execute(agent.connection)
     * // or
     * await agent.execute(recoverInvocation)
     * ```
     *
     * @template {API.Ability} A
     * @template {API.URI} R
     * @template {API.TheCapabilityParser<API.CapabilityMatch<A, R, C>>} CAP
     * @template {API.Caveats} [C={}]
     * @param {CAP} cap
     * @param {import('./types.js').InvokeOptions<A, R, CAP>} options
     */ async invoke(cap, options) {
        const audience = options.audience || this.connection.id;
        const space = options.with || this.currentSpace();
        if (!space) {
            throw new Error('No space or resource selected, you need pass a resource.');
        }
        const proofs = [
            ...options.proofs || [],
            ...this.proofs([
                {
                    with: space,
                    can: cap.can
                }
            ], {
                sessionProofIssuer: audience.did()
            })
        ];
        if (proofs.length === 0 && options.with !== this.did()) {
            throw new Error(`no proofs available for resource ${space} and ability ${cap.can}`);
        }
        const inv = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["invoke"])({
            ...options,
            audience,
            // @ts-ignore
            capability: cap.create({
                with: space,
                nb: options.nb
            }),
            issuer: this.issuer,
            proofs: [
                ...proofs
            ],
            nonce: options.nonce
        });
        return inv;
    }
    /**
     * Get Space information from Access service
     *
     * @param {API.URI<"did:">} [space]
     * @param {object} [options]
     * @param {string} [options.nonce]
     */ async getSpaceInfo(space, options) {
        const _space = space || this.currentSpace();
        if (!_space) {
            throw new Error('No space selected, you need pass a resource.');
        }
        const inv = await this.invokeAndExecute(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$space$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["info"], {
            ...options,
            with: _space
        });
        if (inv.out.error) {
            throw inv.out.error;
        }
        return inv.out.ok;
    }
}
async function addSpacesFromDelegations(agent, delegations) {
    const data = agentToData.get(agent);
    if (!data) {
        throw Object.assign(new Error(`cannot determine AgentData for Agent`), {
            agent: agent
        });
    }
    // spaces we find along the way.
    const spaces = new Map();
    // only consider ucans with this agent as the audience
    const ours = delegations.filter((x)=>x.audience.did() === agent.did());
    // space names are stored as facts in proofs in the special `ucan:*` delegation from email to agent.
    const ucanStars = ours.filter((x)=>x.capabilities[0].can === '*' && x.capabilities[0].with === 'ucan:*');
    for (const delegation of ucanStars){
        for (const proof of delegation.proofs){
            if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isDelegation"])(proof) || !proof.capabilities[0].with.startsWith('did:key')) {
                continue;
            }
            const space = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$space$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fromDelegation"](proof);
            spaces.set(space.did(), space.meta);
        }
    }
    // Find any other spaces the user may have access to
    for (const delegation of ours){
        // TODO: we need a more robust way to determine which spaces a user has access to
        // it may or may not involve look at delegations
        const allows = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Delegation$3e$__["Delegation"].allows(delegation);
        for (const [resource, value] of Object.entries(allows)){
            // If we discovered a delegation to any DID, we add it to the spaces list.
            if (resource.startsWith('did:key') && Object.keys(value).length > 0) {
                if (!spaces.has(resource)) {
                    spaces.set(resource, {});
                }
            }
        }
    }
    for (const [did, meta] of spaces){
        await data.addSpace(did, meta);
    }
}
const importAuthorization = async (agent, { proofs })=>{
    try {
        await agent.addProofs(proofs);
        await addSpacesFromDelegations(agent, proofs);
        return {
            ok: {}
        };
    } catch (error) {
        return {
            error
        };
    }
}; //# sourceMappingURL=agent.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/drivers/indexeddb.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "IndexedDBDriver",
    ()=>IndexedDBDriver
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$p$2d$defer$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/p-defer/index.js [app-client] (ecmascript)");
;
/**
 * @template T
 * @typedef {import('./types.js').Driver<T>} Driver
 */ const STORE_NAME = 'AccessStore';
const DATA_ID = 1;
class IndexedDBDriver {
    /** @type {string} */ #dbName;
    /** @type {number|undefined} */ #dbVersion;
    /** @type {string} */ #dbStoreName;
    /** @type {IDBDatabase|undefined} */ #db;
    /** @type {boolean} */ #autoOpen;
    /**
     * @param {string} dbName
     * @param {object} [options]
     * @param {number} [options.dbVersion]
     * @param {string} [options.dbStoreName]
     * @param {boolean} [options.autoOpen]
     */ constructor(dbName, options = {}){
        this.#dbName = dbName;
        this.#dbVersion = options.dbVersion;
        this.#dbStoreName = options.dbStoreName ?? STORE_NAME;
        this.#autoOpen = options.autoOpen ?? true;
    }
    /** @returns {Promise<IDBDatabase>} */ async #getOpenDB() {
        if (!this.#db) {
            if (!this.#autoOpen) throw new Error('Store is not open');
            await this.open();
        }
        // @ts-expect-error open sets this.#db
        return this.#db;
    }
    async open() {
        const db = this.#db;
        if (db) return;
        /** @type {import('p-defer').DeferredPromise<void>} */ const { resolve, reject, promise } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$p$2d$defer$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"])();
        const openReq = indexedDB.open(this.#dbName, this.#dbVersion);
        openReq.addEventListener('upgradeneeded', ()=>{
            const db = openReq.result;
            db.createObjectStore(this.#dbStoreName, {
                keyPath: 'id'
            });
        });
        openReq.addEventListener('success', ()=>{
            this.#db = openReq.result;
            resolve();
        });
        openReq.addEventListener('error', ()=>reject(openReq.error));
        return promise;
    }
    async close() {
        const db = this.#db;
        if (!db) throw new Error('Store is not open');
        db.close();
        this.#db = undefined;
    }
    /** @param {T} data */ async save(data) {
        const db = await this.#getOpenDB();
        const putData = withObjectStore(db, 'readwrite', this.#dbStoreName, async (store)=>{
            /** @type {import('p-defer').DeferredPromise<void>} */ const { resolve, reject, promise } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$p$2d$defer$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"])();
            const putReq = store.put({
                id: DATA_ID,
                ...data
            });
            putReq.addEventListener('success', ()=>resolve());
            putReq.addEventListener('error', ()=>reject(new Error('failed to query DB', {
                    cause: putReq.error
                })));
            return promise;
        });
        return await putData();
    }
    async load() {
        const db = await this.#getOpenDB();
        const getData = withObjectStore(db, 'readonly', this.#dbStoreName, async (store)=>{
            /** @type {import('p-defer').DeferredPromise<T|undefined>} */ const { resolve, reject, promise } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$p$2d$defer$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"])();
            const getReq = store.get(DATA_ID);
            getReq.addEventListener('success', ()=>resolve(getReq.result));
            getReq.addEventListener('error', ()=>reject(new Error('failed to query DB', {
                    cause: getReq.error
                })));
            return promise;
        });
        return await getData();
    }
    async reset() {
        const db = await this.#getOpenDB();
        const clear = withObjectStore(db, 'readwrite', this.#dbStoreName, (s)=>{
            /** @type {import('p-defer').DeferredPromise<void>} */ const { resolve, reject, promise } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$p$2d$defer$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"])();
            const req = s.clear();
            req.addEventListener('success', ()=>{
                resolve();
            });
            req.addEventListener('error', ()=>reject(new Error('failed to query DB', {
                    cause: req.error
                })));
            return promise;
        });
        await clear();
    }
}
/**
 * @template T
 * @param {IDBDatabase} db
 * @param {IDBTransactionMode} txnMode
 * @param {string} storeName
 * @param {(s: IDBObjectStore) => Promise<T>} fn
 * @returns
 */ function withObjectStore(db, txnMode, storeName, fn) {
    return async ()=>{
        const tx = db.transaction(storeName, txnMode);
        /** @type {import('p-defer').DeferredPromise<T>} */ const { resolve, reject, promise } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$p$2d$defer$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"])();
        /** @type {T} */ let result;
        tx.addEventListener('complete', ()=>resolve(result));
        tx.addEventListener('abort', ()=>reject(tx.error || new Error('transaction aborted')));
        tx.addEventListener('error', ()=>reject(new Error('transaction error', {
                cause: tx.error
            })));
        try {
            result = await fn(tx.objectStore(storeName));
            tx.commit();
        } catch (error) {
            reject(error);
            tx.abort();
        }
        return promise;
    };
} //# sourceMappingURL=indexeddb.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/stores/store-indexeddb.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "StoreIndexedDB",
    ()=>StoreIndexedDB
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$drivers$2f$indexeddb$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/drivers/indexeddb.js [app-client] (ecmascript)");
;
class StoreIndexedDB extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$drivers$2f$indexeddb$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IndexedDBDriver"] {
} //# sourceMappingURL=store-indexeddb.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/access.js [app-client] (ecmascript) <export * as Access>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Access",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$access$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/access.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/access/dist/src/drivers/memory.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * @template T
 * @typedef {import('./types.js').Driver<T>} Driver
 */ /**
 * Driver implementation that stores data in memory."
 *
 * Usage:
 *
 * ```js
 * import { MemoryDriver } from '@web3-storage/access/drivers/memory'
 * ```
 *
 * @template {Record<string, any>} T
 * @implements {Driver<T>}
 */ __turbopack_context__.s([
    "MemoryDriver",
    ()=>MemoryDriver
]);
class MemoryDriver {
    /**
     * @type {T|undefined}
     */ #data;
    constructor(){
        this.#data = undefined;
    }
    async open() {}
    async close() {}
    async reset() {
        this.#data = undefined;
    }
    /** @param {T} data */ async save(data) {
        this.#data = {
            ...data
        };
    }
    /** @returns {Promise<T|undefined>} */ async load() {
        if (this.#data === undefined) return;
        if (Object.keys(this.#data).length === 0) return;
        return this.#data;
    }
} //# sourceMappingURL=memory.js.map
}),
"[project]/node_modules/@web3-storage/access/dist/src/stores/store-memory.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "StoreMemory",
    ()=>StoreMemory
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$drivers$2f$memory$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/access/dist/src/drivers/memory.js [app-client] (ecmascript)");
;
class StoreMemory extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$access$2f$dist$2f$src$2f$drivers$2f$memory$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MemoryDriver"] {
} //# sourceMappingURL=store-memory.js.map
}),
"[project]/node_modules/@web3-storage/did-mailto/dist/src/types.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
;
 //# sourceMappingURL=types.js.map
}),
"[project]/node_modules/@web3-storage/did-mailto/dist/src/index.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "email",
    ()=>email,
    "fromEmail",
    ()=>fromEmail,
    "fromString",
    ()=>fromString,
    "toEmail",
    ()=>toEmail
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/did-mailto/dist/src/types.js [app-client] (ecmascript)");
;
function fromEmail(email) {
    const { domain, local } = parseEmail(email);
    const did = `did:mailto:${encodeURIComponent(domain)}:${encodeURIComponent(local)}`;
    return did;
}
function toEmail(did) {
    const parts = did.split(':');
    if (parts[1] !== 'mailto') {
        throw new Error(`DID ${did} is not a mailto did.`);
    }
    return `${decodeURIComponent(parts[3])}@${decodeURIComponent(parts[2])}`;
}
function email(input) {
    const { domain, local } = parseEmail(input);
    /** @type {import("./types.js").EmailAddress} */ const emailAddress = `${local}@${domain}`;
    return emailAddress;
}
function fromString(input) {
    const colonParts = input.split(':');
    if (colonParts.length !== 4) {
        throw new TypeError(`expected did:mailto to have 4 colon-delimited segments, but got ${colonParts.length}`);
    }
    const [domain, local] = [
        colonParts[2],
        colonParts[3]
    ];
    return `did:mailto:${domain}:${local}`;
}
/**
 * @param {string} email
 */ function parseEmail(email) {
    const atParts = email.split('@');
    if (atParts.length < 2) {
        throw new TypeError(`expected at least 2 @-delimtied segments, but got ${atParts.length}`);
    }
    const domain = atParts.at(-1) ?? '';
    const local = atParts.slice(0, -1).join('@');
    return {
        domain,
        local
    };
} //# sourceMappingURL=index.js.map
}),
"[project]/node_modules/@web3-storage/did-mailto/dist/src/index.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "email",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["email"],
    "fromEmail",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromEmail"],
    "fromString",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromString"],
    "toEmail",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["toEmail"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/did-mailto/dist/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/did-mailto/dist/src/types.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/did-mailto/dist/src/index.js [app-client] (ecmascript) <export * as DIDMailto>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "DIDMailto",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$did$2d$mailto$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/did-mailto/dist/src/index.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// @see https://github.com/microsoft/TypeScript/issues/41825
__turbopack_context__.s([]);
;
}),
"[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Number of bits per byte
 */ __turbopack_context__.s([
    "BYTES_PER_FR",
    ()=>BYTES_PER_FR,
    "EXPANDED_BYTES_PER_NODE",
    ()=>EXPANDED_BYTES_PER_NODE,
    "EXPANDED_BYTES_PER_QUAD",
    ()=>EXPANDED_BYTES_PER_QUAD,
    "FRS_PER_QUAD",
    ()=>FRS_PER_QUAD,
    "FR_RATIO",
    ()=>FR_RATIO,
    "IN_BITS_FR",
    ()=>IN_BITS_FR,
    "IN_BYTES_PER_QUAD",
    ()=>IN_BYTES_PER_QUAD,
    "LEAFS_PER_QUAD",
    ()=>LEAFS_PER_QUAD,
    "MIN_PAYLOAD_SIZE",
    ()=>MIN_PAYLOAD_SIZE,
    "NODE_SIZE",
    ()=>NODE_SIZE,
    "OUT_BITS_FR",
    ()=>OUT_BITS_FR,
    "OUT_BYTES_PER_QUAD",
    ()=>OUT_BYTES_PER_QUAD,
    "PADDED_BYTES_PER_QUAD",
    ()=>PADDED_BYTES_PER_QUAD
]);
const BITS_PER_BYTE = 8;
const FRS_PER_QUAD = 4;
const LEAFS_PER_QUAD = BigInt(FRS_PER_QUAD);
const IN_BITS_FR = 254;
const OUT_BITS_FR = 256;
const IN_BYTES_PER_QUAD = FRS_PER_QUAD * IN_BITS_FR / BITS_PER_BYTE;
const OUT_BYTES_PER_QUAD = FRS_PER_QUAD * OUT_BITS_FR / BITS_PER_BYTE;
const PADDED_BYTES_PER_QUAD = BigInt(IN_BYTES_PER_QUAD);
const EXPANDED_BYTES_PER_QUAD = BigInt(OUT_BYTES_PER_QUAD);
const BYTES_PER_FR = /** @type {32} */ OUT_BYTES_PER_QUAD / FRS_PER_QUAD;
const FR_RATIO = IN_BITS_FR / OUT_BITS_FR;
const NODE_SIZE = OUT_BYTES_PER_QUAD / FRS_PER_QUAD;
const EXPANDED_BYTES_PER_NODE = BigInt(NODE_SIZE);
const MIN_PAYLOAD_SIZE = 2 * NODE_SIZE + 1;
}),
"[project]/node_modules/@web3-storage/data-segment/src/node.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "empty",
    ()=>empty,
    "from",
    ()=>from,
    "of",
    ()=>of
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)");
;
;
;
const of = (...bytes)=>from(bytes);
const from = (bytes)=>{
    /* c8 ignore next 7 */ if (bytes instanceof Uint8Array) {
        if (bytes.length > __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NODE_SIZE"]) {
            return bytes.subarray(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NODE_SIZE"]);
        } else if (bytes.length == __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NODE_SIZE"]) {
            return bytes;
        }
    }
    const node = new Uint8Array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NODE_SIZE"]);
    node.set([
        ...bytes
    ]);
    return node;
};
const empty = ()=>EMPTY;
const EMPTY = from(new Uint8Array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NODE_SIZE"]).fill(0));
Object.freeze(EMPTY.buffer);
}),
"[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript) <export NODE_SIZE as Size>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Size",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NODE_SIZE"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/data-segment/src/ipld/sha256.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "code",
    ()=>code
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sync$2d$multihash$2d$sha2$2f$src$2f$sha256$2f$web$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/sync-multihash-sha2/src/sha256/web.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sync$2d$multihash$2d$sha2$2f$src$2f$sha256$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sync-multihash-sha2/src/sha256/digest.js [app-client] (ecmascript)");
;
;
;
const code = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sync$2d$multihash$2d$sha2$2f$src$2f$sha256$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["code"];
}),
"[project]/node_modules/@web3-storage/data-segment/src/ipld/cbor.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "code",
    ()=>code,
    "decode",
    ()=>decode,
    "encode",
    ()=>encode,
    "name",
    ()=>name
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-cbor/src/index.js [app-client] (ecmascript)");
;
;
const code = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["code"];
const name = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["name"];
const encode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["encode"];
const decode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"];
}),
"[project]/node_modules/@web3-storage/data-segment/src/ipld.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createLink",
    ()=>createLink
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/ipld/sha256.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/ipld/cbor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/node_modules/multiformats/dist/src/link.js [app-client] (ecmascript) <locals>");
;
;
;
;
const createLink = (bytes, { hasher, codec })=>{
    const digest = hasher.digest(bytes);
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["create"](codec.code, digest);
};
}),
"[project]/node_modules/@web3-storage/data-segment/src/ipld/sha256.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "code",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["code"],
    "digest",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sync$2d$multihash$2d$sha2$2f$src$2f$sha256$2f$web$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["digest"],
    "name",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sync$2d$multihash$2d$sha2$2f$src$2f$sha256$2f$web$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["name"],
    "size",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sync$2d$multihash$2d$sha2$2f$src$2f$sha256$2f$web$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["size"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/ipld/sha256.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sync$2d$multihash$2d$sha2$2f$src$2f$sha256$2f$web$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sync-multihash-sha2/src/sha256/web.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/data-segment/src/ipld/sha256.js [app-client] (ecmascript) <export * as SHA256>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "SHA256",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/ipld/sha256.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/data-segment/src/proof.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "computeNode",
    ()=>computeNode,
    "create",
    ()=>create,
    "depth",
    ()=>depth,
    "from",
    ()=>from,
    "offset",
    ()=>offset,
    "path",
    ()=>path,
    "resolveRoot",
    ()=>resolveRoot,
    "truncate",
    ()=>truncate,
    "truncatedHash",
    ()=>truncatedHash,
    "validateLevelIndex",
    ()=>validateLevelIndex,
    "verify",
    ()=>verify
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bytes$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/node_modules/multiformats/dist/src/bytes.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$node$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/node.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript) <export NODE_SIZE as Size>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/ipld.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__SHA256$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/ipld/sha256.js [app-client] (ecmascript) <export * as SHA256>");
;
;
;
;
const path = ([, path])=>path;
const offset = ([offset])=>offset;
const depth = (proof)=>path(proof).length;
const verify = (proof, { tree, node })=>{
    const computedRoot = resolveRoot(proof, node);
    if (computedRoot.error) {
        return {
            error: new Error(`computing root: ${computedRoot.error.message}`)
        };
    }
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bytes$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["equals"](computedRoot.ok, tree)) {
        return {
            error: new Error('inclusion proof does not lead to the same root')
        };
    }
    return {
        ok: {}
    };
};
const MAX_DEPTH = 63;
function resolveRoot(proof, node) {
    if (depth(proof) > MAX_DEPTH) {
        return {
            error: new RangeError('merkle proofs with depths greater than 63 are not supported')
        };
    }
    let position = offset(proof);
    if (position >> BigInt(depth(proof)) !== 0n) {
        return {
            error: new RangeError('offset greater than width of the tree')
        };
    }
    let top = node;
    let right = 0n;
    for (const node of path(proof)){
        right = position & 1n;
        position = position >> 1n;
        top = right === 1n ? computeNode(node, top) : computeNode(top, node);
    }
    return {
        ok: top
    };
}
function truncatedHash(payload, options = {}) {
    const hasher = options.hasher || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__SHA256$3e$__["SHA256"];
    const { digest } = hasher.digest(payload);
    return truncate(digest);
}
const computeNode = (left, right, options)=>{
    const payload = new Uint8Array(left.length + right.length);
    payload.set(left, 0);
    payload.set(right, left.length);
    return truncatedHash(payload, options);
};
function truncate(node) {
    node[__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"] - 1] &= 0b00111111;
    return node;
}
const create = ({ offset, path })=>[
        offset,
        path
    ];
const from = (source)=>{
    const [offset, path] = Array.isArray(source) ? source : [
        source.offset,
        source.path
    ];
    return create({
        offset: BigInt(offset),
        path
    });
};
const validateLevelIndex = (height, level, index)=>{
    if (level < 0) {
        throw new RangeError('level can not be negative');
    }
    if (level > height) {
        throw new RangeError(`level too high: ${level} >= ${height}`);
    }
    if (index > (1 << height - level) - 1) {
        throw new RangeError(`index too large for level: idx ${index}, level ${level} : ${(1 << height - level) - 1}`);
    }
};
}),
"[project]/node_modules/@web3-storage/data-segment/src/zero-comm.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "fromLevel",
    ()=>fromLevel
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$node$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/node.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript) <export NODE_SIZE as Size>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$proof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/proof.js [app-client] (ecmascript)");
;
;
;
const MAX_LEVEL = 64;
/**
 * This is a lazy zero-comm buffer which we fill up on demand.
 */ class ZeroComm {
    constructor(){
        this.bytes = new Uint8Array(MAX_LEVEL * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"]);
        this.bytes.set(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$node$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["empty"](), 0);
        /** @private */ this.node = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$node$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["empty"]();
        /** @private */ this.length = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"];
    }
    /**
   * @param {number} start
   * @param {number} end
   */ slice(start, end) {
        while(this.length < end){
            this.node = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$proof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["computeNode"](this.node, this.node);
            this.bytes.set(this.node, this.length);
            this.length += __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"];
        }
        return this.bytes.subarray(start, end);
    }
}
const ZERO_COMM = new ZeroComm();
const fromLevel = (level)=>{
    if (level < 0 || level >= MAX_LEVEL) {
        throw new Error(`Only levels between 0 and ${MAX_LEVEL - 1} inclusive are available`);
    }
    return ZERO_COMM.slice(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"] * level, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"] * (level + 1));
};
}),
"[project]/node_modules/@web3-storage/data-segment/src/piece/tree.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "MAX_LEAF_COUNT",
    ()=>MAX_LEAF_COUNT,
    "allocate",
    ()=>allocate,
    "build",
    ()=>build,
    "fromChunks",
    ()=>fromChunks,
    "fromLeafs",
    ()=>fromLeafs,
    "padLeafs",
    ()=>padLeafs,
    "root",
    ()=>root,
    "split",
    ()=>split
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$node$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/node.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript) <export NODE_SIZE as Size>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$proof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/proof.js [app-client] (ecmascript)");
;
;
;
;
const MAX_LEAF_COUNT = 2 ** 32 - 1;
function allocate(leafs) {
    const adjustedLeafs = 2 ** Math.ceil(Math.log2(leafs));
    if (adjustedLeafs > MAX_LEAF_COUNT) {
        throw new RangeError(`too many leafs ${adjustedLeafs} exceeds ${MAX_LEAF_COUNT} limit`);
    }
    const height = Math.ceil(Math.log2(adjustedLeafs));
    const nodes = new Array(height + 1);
    for (const level of nodes.keys()){
        nodes[level] = new Array(1 << level);
    }
    return new PieceTree({
        nodes,
        height
    });
}
/**
 * @param {API.TreeData} tree
 */ const depth = (tree)=>{
    return tree.nodes.length;
};
const root = (tree)=>{
    return tree.nodes[0][0];
};
const split = (source)=>{
    const count = source.length / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"];
    const chunks = new Array(count);
    for(let n = 0; n < count; n++){
        const offset = n * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"];
        const chunk = source.subarray(offset, offset + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__NODE_SIZE__as__Size$3e$__["Size"]);
        chunks[n] = chunk;
    }
    return chunks;
};
const build = (source)=>fromChunks(split(source));
const fromChunks = (chunks)=>{
    if (chunks.length === 0) {
        throw new RangeError('Empty source');
    }
    const leafs = chunks //await Promise.all(chunks.map(truncatedHash))
    ;
    return fromLeafs(leafs);
};
const fromLeafs = (leafs)=>{
    const tree = allocate(leafs.length);
    // Set the padded leaf nodes
    tree.nodes[depth(tree) - 1] = padLeafs(leafs);
    let parentNodes = tree.nodes[depth(tree) - 1];
    // Construct the Merkle tree bottom-up, starting from the leafs
    // Note the -1 due to 0-indexing the root level
    for(let level = depth(tree) - 2; level >= 0; level--){
        /** @type {API.MerkleTreeNode[]} */ const currentLevel = new Array(Math.ceil(parentNodes.length / 2));
        // Traverse the level left to right
        for(let i = 0; i + 1 < parentNodes.length; i = i + 2){
            currentLevel[Math.floor(i / 2)] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$proof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["computeNode"](parentNodes[i], parentNodes[i + 1]);
        }
        tree.nodes[level] = currentLevel;
        parentNodes = currentLevel;
    }
    return new PieceTree(tree);
};
const padLeafs = (leafs)=>{
    const paddingAmount = (1 << Math.ceil(Math.log2(leafs.length))) - leafs.length;
    // arrays are zeroed by default in JS
    const paddingLeafs = new Array(paddingAmount);
    return [
        ...leafs,
        ...paddingLeafs
    ];
};
/**
 * @implements {API.PieceTree}
 */ class PieceTree {
    /**
   * @param {object} data
   * @param {API.MerkleTreeNode[][]} data.nodes
   * @param {number} data.height
   */ constructor({ nodes, height }){
        this.nodes = nodes;
        this.height = height;
    }
    get root() {
        return root(this);
    }
    get leafs() {
        const { nodes } = this;
        return nodes[nodes.length - 1];
    }
    get leafCount() {
        return 2 ** this.height;
    }
    /**
   *
   * @param {number} level
   * @param {number} index
   */ node(level, index) {
        const { nodes } = this;
        return nodes[level][index];
    }
}
}),
"[project]/node_modules/@web3-storage/data-segment/src/fr32.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "fromPieceSize",
    ()=>fromPieceSize,
    "pad",
    ()=>pad,
    "toPieceSize",
    ()=>toPieceSize,
    "toZeroPaddedSize",
    ()=>toZeroPaddedSize,
    "unpad",
    ()=>unpad
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)");
;
;
function toZeroPaddedSize(payloadSize) {
    const size = Math.max(payloadSize, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIN_PAYLOAD_SIZE"]);
    const highestBit = Math.floor(Math.log2(size));
    const bound = Math.ceil(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["FR_RATIO"] * 2 ** (highestBit + 1));
    // the size is either the closest pow2 number, or the next pow2 number if we
    // don't have space for padding
    return size <= bound ? bound : Math.ceil(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["FR_RATIO"] * 2 ** (highestBit + 2));
}
const toPieceSize = (size)=>toZeroPaddedSize(size) / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["FR_RATIO"];
const fromPieceSize = (size)=>size * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["FR_RATIO"];
const pad = (source, output = new Uint8Array(toPieceSize(source.length)))=>{
    const size = toZeroPaddedSize(source.byteLength);
    // Calculate number of quads in the given source
    const quadCount = size / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IN_BYTES_PER_QUAD"];
    // Cycle over four(4) 31-byte groups, leaving 1 byte in between:
    // 31 + 1 + 31 + 1 + 31 + 1 + 31 = 127
    for(let n = 0; n < quadCount; n++){
        const readOffset = n * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IN_BYTES_PER_QUAD"];
        const writeOffset = n * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OUT_BYTES_PER_QUAD"];
        // First 31 bytes + 6 bits are taken as-is (trimmed later)
        output.set(source.subarray(readOffset, readOffset + 32), writeOffset);
        // first 2-bit "shim" forced into the otherwise identical output
        output[writeOffset + 31] &= 0b00111111;
        // copy next Fr32 preceded with the last two bits of the previous Fr32
        for(let i = 32; i < 64; i++){
            output[writeOffset + i] = source[readOffset + i] << 2 | source[readOffset + i - 1] >> 6;
        }
        // next 2-bit shim
        output[writeOffset + 63] &= 0b00111111;
        for(let i = 64; i < 96; i++){
            output[writeOffset + i] = source[readOffset + i] << 4 | source[readOffset + i - 1] >> 4;
        }
        // next 2-bit shim
        output[writeOffset + 95] &= 0b00111111;
        for(let i = 96; i < 127; i++){
            output[writeOffset + i] = source[readOffset + i] << 6 | source[readOffset + i - 1] >> 2;
        }
        // we shim last 2-bits by shifting the last byte by two bits
        output[writeOffset + 127] = source[readOffset + 126] >> 2;
    }
    return output;
};
const unpad = (source, out = new Uint8Array(fromPieceSize(source.length)))=>{
    const chunks = source.length / 128;
    for(let chunk = 0; chunk < chunks; chunk++){
        const inOffNext = chunk * 128 + 1;
        const outOff = chunk * 127;
        let at = source[chunk * 128];
        for(let i = 0; i < 32; i++){
            const next = source[i + inOffNext];
            out[outOff + i] = at;
            at = next;
        }
        out[outOff + 31] |= at << 6;
        for(let i = 32; i < 64; i++){
            const next = source[i + inOffNext];
            out[outOff + i] = at >> 2;
            out[outOff + i] |= next << 6;
            at = next;
        }
        out[outOff + 63] ^= at << 6 ^ at << 4;
        for(let i = 64; i < 96; i++){
            const next = source[i + inOffNext];
            out[outOff + i] = at >> 4;
            out[outOff + i] |= next << 4;
            at = next;
        }
        out[outOff + 95] ^= at << 4 ^ at << 2;
        for(let i = 96; i < 127; i++){
            const next = source[i + inOffNext];
            out[outOff + i];
            out[outOff + i] = at >> 6;
            out[outOff + i] |= next << 2;
            at = next;
        }
    }
    return out;
};
}),
"[project]/node_modules/@web3-storage/data-segment/src/uint64.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "log2Ceil",
    ()=>log2Ceil,
    "log2Floor",
    ()=>log2Floor,
    "onesCount64",
    ()=>onesCount64,
    "pow2",
    ()=>pow2,
    "trailingZeros64",
    ()=>trailingZeros64
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
;
const log2Floor = (n)=>{
    let result = 0n;
    while(n >>= 1n)result++;
    return Number(result);
};
const log2Ceil = (n)=>n <= 1n ? 0 : log2Floor(BigInt(n) - 1n) + 1;
const trailingZeros64 = (n)=>{
    if (n === 0n) {
        return 64;
    }
    let count = 0;
    while((n & 1n) === 0n){
        n >>= 1n;
        count++;
    }
    return count;
};
const onesCount64 = (value)=>{
    let count = 0;
    const mask = 1n;
    for(let i = 0n; i < 64n; i++){
        if ((value & mask << i) !== 0n) {
            count++;
        }
    }
    return count;
};
const pow2 = (n)=>1n << n;
}),
"[project]/node_modules/@web3-storage/data-segment/src/piece/size/padded.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "from",
    ()=>from,
    "fromExpanded",
    ()=>fromExpanded,
    "fromHeight",
    ()=>fromHeight,
    "fromWidth",
    ()=>fromWidth,
    "toExpanded",
    ()=>toExpanded,
    "toHeight",
    ()=>toHeight,
    "toWidth",
    ()=>toWidth,
    "tryFrom",
    ()=>tryFrom
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/uint64.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)");
;
;
;
const from = (size)=>{
    const result = tryFrom(size);
    if (result.error) {
        throw result.error;
    } else {
        return result.ok;
    }
};
const tryFrom = (input)=>{
    const size = BigInt(input);
    if (size < __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"]) {
        return {
            error: new RangeError(`Padded payload must contain at least ${__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"]} bytes`)
        };
    }
    if (size >> BigInt((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["trailingZeros64"])(size)) !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"]) {
        return {
            error: new RangeError(`Padded payload size must be (2 * ${__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"]})`)
        };
    }
    return {
        ok: size
    };
};
const fromExpanded = (size)=>fromQuads(size / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["EXPANDED_BYTES_PER_QUAD"]);
const toExpanded = (size)=>toQauds(size) * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["EXPANDED_BYTES_PER_QUAD"];
const fromHeight = (height)=>{
    // We calculate number of quads tree by calculating number of nodes tree
    // at second layer. This works because we deal with a binary tree so first
    // layer nodes will contain 2 leaves and second layer nodes will contain 4
    // leaves hence number of quads.
    const quads = 2n ** BigInt(height - 2);
    return quads * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"];
};
const toHeight = (size)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log2Ceil"])(toWidth(size));
const toWidth = (size)=>toQauds(size) * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LEAFS_PER_QUAD"];
const fromWidth = (width)=>fromQuads(width / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LEAFS_PER_QUAD"]);
/**
 * @param {API.PaddedSize} size
 */ const toQauds = (size)=>size / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"];
/**
 *
 * @param {API.uint64} count
 * @returns {API.PaddedSize}
 */ const fromQuads = (count)=>count * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"];
}),
"[project]/node_modules/@web3-storage/data-segment/src/piece/size/unpadded.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "fromPiece",
    ()=>fromPiece,
    "toExpanded",
    ()=>toExpanded,
    "toHeight",
    ()=>toHeight,
    "toPadded",
    ()=>toPadded,
    "toPadding",
    ()=>toPadding,
    "toWidth",
    ()=>toWidth
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/uint64.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$padded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/padded.js [app-client] (ecmascript)");
;
;
;
;
const fromPiece = ({ height, padding })=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$padded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fromHeight"](height) - padding;
const toPadding = (size)=>toPadded(size) - size;
const toPadded = (size)=>toQauds(size) * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"];
const toExpanded = (size)=>toQauds(size) * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["EXPANDED_BYTES_PER_QUAD"];
const toWidth = (size)=>toQauds(size) * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LEAFS_PER_QUAD"];
const toHeight = (size)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log2Ceil"])(toWidth(size));
/**
 * Takes arbitrary payload size and calculates number of quads that will be
 * required to represent it.
 *
 * @param {API.uint64} size
 */ const toQauds = (size)=>{
    // Number of quads required to fit given payload size.
    // Since bigint division truncates we add another quads shy of 1 number of
    // bytes to round up.
    const quadCount = (size + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"] - 1n) / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PADDED_BYTES_PER_QUAD"];
    // Next we we log2 then pow2 with some rounding to ensure that result
    // is 2 ^ n.
    return 2n ** BigInt((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log2Ceil"])(quadCount));
};
}),
"[project]/node_modules/@web3-storage/data-segment/src/piece/size/expanded.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "from",
    ()=>from,
    "fromHeight",
    ()=>fromHeight,
    "fromWidth",
    ()=>fromWidth,
    "toHeight",
    ()=>toHeight,
    "toWidth",
    ()=>toWidth,
    "tryFrom",
    ()=>tryFrom
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/uint64.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$padded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/padded.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$unpadded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/unpadded.js [app-client] (ecmascript)");
;
;
;
;
;
const tryFrom = (input)=>{
    const size = BigInt(input);
    if (size < __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["EXPANDED_BYTES_PER_QUAD"]) {
        return {
            error: RangeError(`Minimum piece size is ${__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["EXPANDED_BYTES_PER_QUAD"]} bytes`)
        };
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["onesCount64"])(size) !== 1) {
        return {
            error: RangeError('Piece size must be a power of 2')
        };
    }
    return {
        ok: size
    };
};
const from = (size)=>{
    const result = tryFrom(size);
    if (result.error) {
        throw result.error;
    } else {
        return result.ok;
    }
};
const fromHeight = (height)=>fromWidth(2n ** BigInt(height));
const toHeight = (size)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$uint64$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log2Ceil"])(toWidth(size));
const fromWidth = (width)=>width * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["EXPANDED_BYTES_PER_NODE"];
const toWidth = (size)=>size / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["EXPANDED_BYTES_PER_NODE"];
}),
"[project]/node_modules/@web3-storage/data-segment/src/piece/size.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$unpadded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/unpadded.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$padded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/padded.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$expanded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/expanded.js [app-client] (ecmascript) <locals>");
;
;
;
;
}),
"[project]/node_modules/@web3-storage/data-segment/src/piece/size/unpadded.js [app-client] (ecmascript) <export * as Unpadded>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Unpadded",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$unpadded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$unpadded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/unpadded.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/data-segment/src/digest.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "HEIGHT_SIZE",
    ()=>HEIGHT_SIZE,
    "MAX_DIGEST_SIZE",
    ()=>MAX_DIGEST_SIZE,
    "MAX_HEIGHT",
    ()=>MAX_HEIGHT,
    "MAX_PAYLOAD_SIZE",
    ()=>MAX_PAYLOAD_SIZE,
    "MAX_SIZE",
    ()=>MAX_SIZE,
    "ROOT_SIZE",
    ()=>ROOT_SIZE,
    "TAG_SIZE",
    ()=>TAG_SIZE,
    "code",
    ()=>code,
    "fromBytes",
    ()=>fromBytes,
    "fromPiece",
    ()=>fromPiece,
    "height",
    ()=>height,
    "name",
    ()=>name,
    "padding",
    ()=>padding,
    "root",
    ()=>root,
    "toBytes",
    ()=>toBytes
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/node_modules/multiformats/dist/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/node_modules/multiformats/dist/src/varint.js [app-client] (ecmascript) <export * as varint>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/ipld.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__SHA256$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/ipld/sha256.js [app-client] (ecmascript) <export * as SHA256>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$expanded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/expanded.js [app-client] (ecmascript) <locals>");
;
;
;
;
;
const name = 'fr32-sha2-256-trunc254-padded-binary-tree';
const code = 0x1011;
/**
 * Varint is used to encode the tree height which is limited to 9 bytes.
 *
 * @see https://github.com/multiformats/unsigned-varint#practical-maximum-of-9-bytes-for-security
 */ const MAX_PADDING_SIZE = 9;
const HEIGHT_SIZE = 1;
const ROOT_SIZE = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__SHA256$3e$__["SHA256"].size;
const MAX_DIGEST_SIZE = MAX_PADDING_SIZE + HEIGHT_SIZE + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__SHA256$3e$__["SHA256"].size;
const TAG_SIZE = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodingLength(code);
const MAX_SIZE = TAG_SIZE + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodingLength(MAX_DIGEST_SIZE) + MAX_DIGEST_SIZE;
const MAX_HEIGHT = 255;
const MAX_PAYLOAD_SIZE = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$expanded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromHeight"])(MAX_HEIGHT) * BigInt(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IN_BITS_FR"]) / BigInt(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OUT_BITS_FR"]);
const fromPiece = ({ padding, height, root })=>{
    const paddingLength = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodingLength(Number(padding));
    const size = paddingLength + HEIGHT_SIZE + ROOT_SIZE;
    const sizeLength = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodingLength(size);
    const multihashLength = TAG_SIZE + sizeLength + size;
    let offset = 0;
    const bytes = new Uint8Array(multihashLength);
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodeTo(code, bytes, offset);
    offset += TAG_SIZE;
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodeTo(size, bytes, offset);
    offset += sizeLength;
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodeTo(Number(padding), bytes, offset);
    offset += paddingLength;
    bytes[offset] = height;
    offset += HEIGHT_SIZE;
    bytes.set(root, offset);
    return new Digest(bytes);
};
const fromBytes = (bytes)=>new Digest(bytes);
const toBytes = ({ digest })=>{
    const SIZE_BYTE_LENGTH = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodingLength(digest.length);
    // number of bytes prefix will take up
    const prefixByteLength = SIZE_BYTE_LENGTH + TAG_SIZE;
    // if digest is view within a buffer that has enough bytes in front to
    // fit the prefix it may be already include a prefix in which case we
    // will simply use a larger slice.
    if (digest.byteOffset >= prefixByteLength) {
        const bytes = new Uint8Array(digest.buffer, digest.byteOffset - prefixByteLength, digest.byteOffset + digest.length);
        // if the prefix matches our bytes represent a multihash
        const [tag, offset] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].decode(bytes);
        if (tag === code && __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].decode(bytes, offset)[0] === digest.length) {
            return bytes;
        }
    }
    const bytes = new Uint8Array(digest.length + prefixByteLength);
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodeTo(code, bytes);
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodeTo(digest.length, bytes, TAG_SIZE);
    bytes.set(digest, prefixByteLength);
    return bytes;
};
const height = ({ digest })=>{
    const [, offset] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].decode(digest);
    return digest[offset];
};
const padding = ({ digest })=>{
    const [padding] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].decode(digest);
    return BigInt(padding);
};
const root = ({ digest })=>{
    const [, offset] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].decode(digest);
    return digest.subarray(offset + HEIGHT_SIZE, offset + HEIGHT_SIZE + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$ipld$2f$sha256$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__SHA256$3e$__["SHA256"].size);
};
/**
 * @implements {API.PieceDigest}
 */ class Digest {
    /**
   * @param {Uint8Array} bytes
   */ constructor(bytes){
        this.bytes = bytes;
        const [tag] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].decode(bytes);
        if (tag !== code) {
            throw new RangeError(`Expected multihash with code ${code}`);
        }
        let offset = TAG_SIZE;
        const [size, length] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].decode(bytes, offset);
        offset += length;
        const digest = bytes.subarray(offset);
        if (digest.length !== size) {
            throw new RangeError(`Invalid multihash size expected ${offset + size} bytes, got ${bytes.length} bytes`);
        }
        this.digest = digest;
    }
    get name() {
        return name;
    }
    get code() {
        return code;
    }
    get size() {
        return this.digest.length;
    }
    get padding() {
        return padding(this);
    }
    get height() {
        return height(this);
    }
    get root() {
        return root(this);
    }
}
}),
"[project]/node_modules/@web3-storage/data-segment/src/multihash.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "MAX_HEIGHT",
    ()=>MAX_HEIGHT,
    "MAX_PAYLOAD_SIZE",
    ()=>MAX_PAYLOAD_SIZE,
    "code",
    ()=>code,
    "create",
    ()=>create,
    "digest",
    ()=>digest,
    "name",
    ()=>name
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/constant.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$zero$2d$comm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/zero-comm.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$proof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/proof.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$tree$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/tree.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$fr32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/fr32.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$expanded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/expanded.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$unpadded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Unpadded$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/piece/size/unpadded.js [app-client] (ecmascript) <export * as Unpadded>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/digest.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/node_modules/multiformats/dist/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/node_modules/multiformats/dist/src/varint.js [app-client] (ecmascript) <export * as varint>");
;
;
;
;
;
;
;
;
;
;
;
const name = 'fr32-sha2-256-trunc254-padded-binary-tree';
const code = 0x1011;
const MAX_HEIGHT = 255;
const MAX_PAYLOAD_SIZE = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$expanded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fromHeight"])(MAX_HEIGHT) * BigInt(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IN_BITS_FR"]) / BigInt(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OUT_BITS_FR"]);
const digest = (payload)=>{
    const hasher = new Hasher();
    hasher.write(payload);
    return hasher.digest();
};
const create = ()=>new Hasher();
/**
 * @typedef {[API.MerkleTreeNode[], ...API.MerkleTreeNode[][]]} Layers
 *
 * @implements {API.StreamingHasher<typeof code, number, API.PieceDigest>}
 */ class Hasher {
    constructor(){
        /**
     * The number of bytes consumed by the hasher.
     *
     * @private
     */ this.bytesWritten = 0n;
        /**
     * This buffer is used to accumulate bytes until we have enough to fill a
     * quad.
     *
     *  Note that you should never read bytes past {@link offset} as those
     * are considered dirty and may contain garbage.
     *
     * @protected
     */ this.buffer = new Uint8Array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IN_BYTES_PER_QUAD"]);
        /**
     * Offset is the number of bytes in we have written into the buffer. If
     * offset is 0 it means that the buffer is effectively empty. When `offset`
     * is equal to `this.buffer.length` we have a quad that can be processed.
     *
     * @protected
     */ this.offset = 0;
        /**
     * The layers of the tree. Each layer will contain either 0 or 1 nodes
     * between writes. When we write into a hasher, if we have enough nodes
     * leaves will be created and pushed into the `layers[0]` array, after
     * which we flush and combine every two leafs into a node which is moved
     * to the next layer. This process is repeated until we reach the top
     * layer, leaving each layer either empty or with a single node.
     *
     * @type {Layers}
     */ this.layers = [
            []
        ];
    }
    /**
   * Return the total number of bytes written into the hasher. Calling
   * {@link reset} will reset the hasher and the count will be reset to 0.
   *
   * @returns {bigint}
   */ count() {
        return this.bytesWritten;
    }
    /**
   * Computes the digest of all the data that has been written into this hasher.
   * This method does not have side-effects, meaning that you can continue
   * writing and call this method again to compute digest of all the data
   * written from the very beginning.
   */ digest() {
        const bytes = new Uint8Array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MAX_SIZE"]);
        const count = this.digestInto(bytes, 0, true);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fromBytes"](bytes.subarray(0, count));
    }
    /**
   * Computes the digest and writes into the given buffer. You can provide
   * optional `byteOffset` to write digest at that offset in the buffer. By
   * default the multihash prefix will be written into the buffer, but you can
   * opt-out by passing `false` as the `asMultihash` argument.
   *
   * @param {Uint8Array} output
   * @param {number} [byteOffset]
   * @param {boolean} asMultihash
   */ digestInto(output, byteOffset = 0, asMultihash = true) {
        const { buffer, layers, offset, bytesWritten } = this;
        // We do not want to mutate the layers, so we create a shallow copy of it
        // which we will use to compute the root.
        let [leaves, ...nodes] = layers;
        // If we have some bytes in the buffer we fill rest with zeros and compute
        // leaves from it. Note that it is safe to mutate the buffer here as bytes
        // past `offset` are considered dirty and should not be read.
        if (offset > 0 || bytesWritten === 0n) {
            leaves = [
                ...leaves,
                ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$tree$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["split"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$fr32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pad"])(buffer.fill(0, offset)))
            ];
        }
        const tree = build([
            leaves,
            ...nodes
        ]);
        const height = tree.length - 1;
        const [root] = tree[height];
        const padding = Number(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$size$2f$unpadded$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Unpadded$3e$__["Unpadded"].toPadding(this.bytesWritten));
        const paddingLength = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodingLength(padding);
        let endOffset = byteOffset;
        // Write the multihash prefix if requested
        if (asMultihash) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodeTo(code, output, endOffset);
            endOffset += __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TAG_SIZE"];
            const size = paddingLength + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["HEIGHT_SIZE"] + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ROOT_SIZE"];
            const sizeLength = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodingLength(size);
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodeTo(size, output, endOffset);
            endOffset += sizeLength;
        }
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$varint$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__varint$3e$__["varint"].encodeTo(padding, output, endOffset);
        endOffset += paddingLength;
        // Write the tree height as the first byte of the digest
        output[endOffset] = height;
        endOffset += 1;
        // Write the root as the remaining 32 bytes of the digest
        output.set(root, endOffset);
        endOffset += root.length;
        // Return number of bytes written
        return endOffset - byteOffset;
    }
    /**
   * @param {Uint8Array} bytes
   */ write(bytes) {
        const { buffer, offset, layers } = this;
        const leaves = layers[0];
        const { length } = bytes;
        // If we got no bytes there is nothing to do here
        if (length === 0) {
            return this;
        /* c8 ignore next 5 */ } else if (this.bytesWritten + BigInt(length) > MAX_PAYLOAD_SIZE) {
            throw new RangeError(`Writing ${length} bytes exceeds max payload size of ${MAX_PAYLOAD_SIZE}`);
        } else if (offset + length < buffer.length) {
            buffer.set(bytes, offset);
            this.offset += length;
            this.bytesWritten += BigInt(length);
            return this;
        } else {
            // Number of bytes required to fill the quad buffer
            const bytesRequired = buffer.length - offset;
            // copy required bytes into the buffer and turn them into leaves
            // which we push into the leaf layer.
            buffer.set(bytes.subarray(0, bytesRequired), offset);
            leaves.push(...(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$tree$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["split"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$fr32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pad"])(buffer)));
            // Now we slice remaining bytes into quads, create leaves from them
            // and push them into the leaf layer.
            let readOffset = bytesRequired;
            while(readOffset + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IN_BYTES_PER_QUAD"] < length){
                const quad = bytes.subarray(readOffset, readOffset + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IN_BYTES_PER_QUAD"]);
                leaves.push(...(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$piece$2f$tree$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["split"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$fr32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pad"])(quad)));
                readOffset += __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$constant$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IN_BYTES_PER_QUAD"];
            }
            // Whatever byte were left are copied into the buffer and we update
            // the offset to reflect that.
            this.buffer.set(bytes.subarray(readOffset), 0);
            this.offset = length - readOffset;
            // We also update the total number of bytes written.
            this.bytesWritten += BigInt(length);
            // Now prune the layers to propagate all the new leaves up the tree.
            prune(this.layers);
            return this;
        }
    }
    /**
   * Resets this hasher to its initial state so it could be recycled as new
   * instance.
   */ reset() {
        this.offset = 0;
        this.bytesWritten = 0n;
        this.layers.length = 1;
        this.layers[0].length = 0;
        return this;
    }
    /* c8 ignore next 3 */ dispose() {
        this.reset();
    }
    get code() {
        return code;
    }
    get name() {
        return name;
    }
}
/**
 * Prunes layers by combining node pairs into nodes in the next layer and
 * removing them from the layer that they were in. After pruning each layer
 * will end up with at most one node. New layers may be created in the process
 * when nodes from the top layer are combined.
 *
 * @param {Layers} layers
 */ const prune = (layers)=>flush(layers, false);
/**
 * Flushes all the nodes in layers by combining node pairs into nodes in the
 * next layer. Layers with only one node are combined with zero padded nodes
 * (corresponding to the level of the layer). Unlike {@link prune} combined
 * nodes are not removed and layers are copied instead of been mutated.
 *
 * @param {Layers} layers
 */ const build = (layers)=>flush([
        ...layers
    ], true);
/**
 * @param {Layers} layers
 * @param {boolean} build
 * @returns {Layers}
 */ const flush = (layers, build)=>{
    // Note it is important that we do not mutate any of the layers otherwise
    // writing more data into the hasher and computing the digest will produce
    // wrong results.
    let level = 0;
    // We will walk up the tree until we reach the top layer. However, we may end
    // up with creating new layers in the process, so we will keep track of the
    while(level < layers.length){
        let next = layers[level + 1];
        const layer = layers[level];
        // If we have the odd number of nodes and we have not reached the top
        // layer, we push a zero padding node corresponding to the current level.
        if (build && layer.length % 2 > 0 && next) {
            layer.push(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$zero$2d$comm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fromLevel"](level));
        }
        level += 1;
        // If we have 0 nodes in the current layer we just move to the next one.
        // If we have a next layer and we are building  will combine nodes from the current layer
        next = next ? build ? [
            ...next
        ] : next : [];
        let index = 0;
        // Note that we have checked that we have an even number of nodes so
        // we will never end up with an extra node when consuming two at a time.
        while(index + 1 < layer.length){
            const node = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$proof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["computeNode"])(layer[index], layer[index + 1]);
            // we proactively delete nodes in order to free up a memory used.
            delete layer[index];
            delete layer[index + 1];
            next.push(node);
            index += 2;
        }
        if (next.length) {
            layers[level] = next;
        }
        // we remove nodes that we have combined from the current layer to reduce
        // memory overhead and move to the next layer.
        layer.splice(0, index);
    }
    return layers;
};
}),
"[project]/node_modules/@web3-storage/data-segment/src/multihash.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Digest",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__,
    "MAX_HEIGHT",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$multihash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["MAX_HEIGHT"],
    "MAX_PAYLOAD_SIZE",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$multihash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["MAX_PAYLOAD_SIZE"],
    "code",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$multihash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["code"],
    "create",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$multihash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["create"],
    "digest",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$multihash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["digest"],
    "name",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$multihash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["name"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$multihash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/multihash.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$data$2d$segment$2f$src$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/data-segment/src/digest.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/filecoin-client/dist/src/service.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "services",
    ()=>services
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/did.js [app-client] (ecmascript)");
;
const services = {
    STOREFRONT: {
        url: new URL('https://up.web3.storage'),
        principal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["parse"]('did:web:web3.storage')
    },
    AGGREGATOR: {
        url: new URL('https://aggregator.web3.storage'),
        principal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["parse"]('did:web:web3.storage')
    },
    DEALER: {
        url: new URL('https://dealer.web3.storage'),
        principal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["parse"]('did:web:web3.storage')
    },
    DEAL_TRACKER: {
        url: new URL('https://tracker.web3.storage'),
        principal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["parse"]('did:web:web3.storage')
    }
}; //# sourceMappingURL=service.js.map
}),
"[project]/node_modules/@web3-storage/filecoin-client/dist/src/storefront.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "connection",
    ()=>connection,
    "filecoinAccept",
    ()=>filecoinAccept,
    "filecoinInfo",
    ()=>filecoinInfo,
    "filecoinOffer",
    ()=>filecoinOffer,
    "filecoinSubmit",
    ()=>filecoinSubmit
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/connection.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/car.js [app-client] (ecmascript) <export * as CAR>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__HTTP$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/http.js [app-client] (ecmascript) <export * as HTTP>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$storefront$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/filecoin/storefront.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/service.js [app-client] (ecmascript)");
;
;
;
;
const connection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["connect"])({
    id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].STOREFRONT.principal,
    codec: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__["CAR"].outbound,
    channel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__HTTP$3e$__["HTTP"].open({
        url: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].STOREFRONT.url,
        method: 'POST'
    })
});
async function filecoinOffer({ issuer, with: resource, proofs, audience }, content, piece, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$storefront$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["filecoinOffer"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].STOREFRONT.principal,
        with: resource,
        nb: {
            content,
            piece
        },
        proofs,
        expiration: Infinity
    });
    return await invocation.execute(conn);
}
async function filecoinSubmit({ issuer, with: resource, proofs, audience }, content, piece, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$storefront$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["filecoinSubmit"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].STOREFRONT.principal,
        with: resource,
        nb: {
            content,
            piece
        },
        proofs,
        expiration: Infinity
    });
    return await invocation.execute(conn);
}
async function filecoinAccept({ issuer, with: resource, proofs, audience }, content, piece, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$storefront$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["filecoinAccept"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].STOREFRONT.principal,
        with: resource,
        nb: {
            content,
            piece
        },
        proofs,
        expiration: Infinity
    });
    return await invocation.execute(conn);
}
async function filecoinInfo({ issuer, with: resource, proofs, audience }, piece, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$storefront$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["filecoinInfo"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].STOREFRONT.principal,
        with: resource,
        nb: {
            piece
        },
        proofs
    });
    return await invocation.execute(conn);
} //# sourceMappingURL=storefront.js.map
}),
"[project]/node_modules/@web3-storage/filecoin-client/dist/src/aggregator.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "connection",
    ()=>connection,
    "pieceAccept",
    ()=>pieceAccept,
    "pieceOffer",
    ()=>pieceOffer
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/connection.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/car.js [app-client] (ecmascript) <export * as CAR>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__HTTP$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/http.js [app-client] (ecmascript) <export * as HTTP>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$aggregator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/filecoin/aggregator.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/service.js [app-client] (ecmascript)");
;
;
;
;
const connection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["connect"])({
    id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].AGGREGATOR.principal,
    codec: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__["CAR"].outbound,
    channel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__HTTP$3e$__["HTTP"].open({
        url: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].AGGREGATOR.url,
        method: 'POST'
    })
});
async function pieceOffer({ issuer, with: resource, proofs, audience }, piece, group, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$aggregator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pieceOffer"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].AGGREGATOR.principal,
        with: resource,
        nb: {
            piece,
            group
        },
        proofs,
        expiration: Infinity
    });
    return await invocation.execute(conn);
}
async function pieceAccept({ issuer, with: resource, proofs, audience }, piece, group, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$aggregator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pieceAccept"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].AGGREGATOR.principal,
        with: resource,
        nb: {
            piece,
            group
        },
        proofs,
        expiration: Infinity
    });
    return await invocation.execute(conn);
} //# sourceMappingURL=aggregator.js.map
}),
"[project]/node_modules/@web3-storage/filecoin-client/dist/src/dealer.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "aggregateAccept",
    ()=>aggregateAccept,
    "aggregateOffer",
    ()=>aggregateOffer,
    "connection",
    ()=>connection
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/connection.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/car.js [app-client] (ecmascript) <export * as CAR>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__HTTP$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/http.js [app-client] (ecmascript) <export * as HTTP>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CBOR$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <export * as CBOR>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$dealer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/filecoin/dealer.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/service.js [app-client] (ecmascript)");
;
;
;
;
;
const connection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["connect"])({
    id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].DEALER.principal,
    codec: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__["CAR"].outbound,
    channel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__HTTP$3e$__["HTTP"].open({
        url: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].DEALER.url,
        method: 'POST'
    })
});
async function aggregateOffer({ issuer, with: resource, proofs, audience }, aggregate, pieces, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const block = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CBOR$3e$__["CBOR"].write(pieces);
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$dealer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["aggregateOffer"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].AGGREGATOR.principal,
        with: resource,
        nb: {
            aggregate,
            pieces: block.cid
        },
        proofs,
        expiration: Infinity
    });
    invocation.attach(block);
    return await invocation.execute(conn);
}
async function aggregateAccept({ issuer, with: resource, proofs, audience }, aggregate, pieces, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$dealer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["aggregateAccept"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].AGGREGATOR.principal,
        with: resource,
        nb: {
            aggregate,
            pieces
        },
        proofs,
        expiration: Infinity
    });
    return await invocation.execute(conn);
} //# sourceMappingURL=dealer.js.map
}),
"[project]/node_modules/@web3-storage/filecoin-client/dist/src/deal-tracker.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "connection",
    ()=>connection,
    "dealInfo",
    ()=>dealInfo
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/client/src/connection.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/car.js [app-client] (ecmascript) <export * as CAR>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__HTTP$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/transport/src/http.js [app-client] (ecmascript) <export * as HTTP>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$deal$2d$tracker$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/capabilities/src/filecoin/deal-tracker.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/service.js [app-client] (ecmascript)");
;
;
;
;
const connection = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$client$2f$src$2f$connection$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["connect"])({
    id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].DEAL_TRACKER.principal,
    codec: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__["CAR"].outbound,
    channel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$transport$2f$src$2f$http$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__HTTP$3e$__["HTTP"].open({
        url: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].DEAL_TRACKER.url,
        method: 'POST'
    })
});
async function dealInfo({ issuer, with: resource, proofs, audience }, piece, options = {}) {
    /* c8 ignore next */ const conn = options.connection ?? connection;
    const invocation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$capabilities$2f$src$2f$filecoin$2f$deal$2d$tracker$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["dealInfo"].invoke({
        issuer,
        /* c8 ignore next */ audience: audience ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$service$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["services"].DEAL_TRACKER.principal,
        with: resource,
        nb: {
            piece
        },
        proofs
    });
    return await invocation.execute(conn);
} //# sourceMappingURL=deal-tracker.js.map
}),
"[project]/node_modules/@web3-storage/filecoin-client/dist/src/index.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$storefront$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/storefront.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$aggregator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/aggregator.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$dealer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/dealer.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$deal$2d$tracker$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/deal-tracker.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
;
;
;
}),
"[project]/node_modules/@web3-storage/filecoin-client/dist/src/storefront.js [app-client] (ecmascript) <export * as Storefront>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Storefront",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$storefront$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$filecoin$2d$client$2f$dist$2f$src$2f$storefront$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/filecoin-client/dist/src/storefront.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@web3-storage/upload-client/node_modules/p-retry/index.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AbortError",
    ()=>AbortError,
    "default",
    ()=>pRetry
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$retry$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/retry/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$is$2d$network$2d$error$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/is-network-error/index.js [app-client] (ecmascript)");
;
;
class AbortError extends Error {
    constructor(message){
        super();
        if (message instanceof Error) {
            this.originalError = message;
            ({ message } = message);
        } else {
            this.originalError = new Error(message);
            this.originalError.stack = this.stack;
        }
        this.name = 'AbortError';
        this.message = message;
    }
}
const decorateErrorWithCounts = (error, attemptNumber, options)=>{
    // Minus 1 from attemptNumber because the first attempt does not count as a retry
    const retriesLeft = options.retries - (attemptNumber - 1);
    error.attemptNumber = attemptNumber;
    error.retriesLeft = retriesLeft;
    return error;
};
async function pRetry(input, options) {
    return new Promise((resolve, reject)=>{
        options = {
            ...options
        };
        options.onFailedAttempt ??= ()=>{};
        options.shouldRetry ??= ()=>true;
        options.retries ??= 10;
        const operation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$retry$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"].operation(options);
        const abortHandler = ()=>{
            operation.stop();
            reject(options.signal?.reason);
        };
        if (options.signal && !options.signal.aborted) {
            options.signal.addEventListener('abort', abortHandler, {
                once: true
            });
        }
        const cleanUp = ()=>{
            options.signal?.removeEventListener('abort', abortHandler);
            operation.stop();
        };
        operation.attempt(async (attemptNumber)=>{
            try {
                const result = await input(attemptNumber);
                cleanUp();
                resolve(result);
            } catch (error) {
                try {
                    if (!(error instanceof Error)) {
                        throw new TypeError(`Non-error was thrown: "${error}". You should only throw errors.`);
                    }
                    if (error instanceof AbortError) {
                        throw error.originalError;
                    }
                    if (error instanceof TypeError && !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$is$2d$network$2d$error$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"])(error)) {
                        throw error;
                    }
                    decorateErrorWithCounts(error, attemptNumber, options);
                    if (!await options.shouldRetry(error)) {
                        operation.stop();
                        reject(error);
                    }
                    await options.onFailedAttempt(error);
                    if (!operation.retry(error)) {
                        throw operation.mainError();
                    }
                } catch (finalError) {
                    decorateErrorWithCounts(finalError, attemptNumber, options);
                    cleanUp();
                    reject(finalError);
                }
            }
        });
    });
}
}),
"[project]/node_modules/@web3-storage/blob-index/dist/src/api.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
;
 //# sourceMappingURL=api.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/dist/src/digest-map.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "DigestMap",
    ()=>DigestMap
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/dist/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base58$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/multiformats/dist/src/bases/base58.js [app-client] (ecmascript)");
;
;
/** @type {WeakMap<Uint8Array, string>} */ const cache = new WeakMap();
/** @param {API.MultihashDigest} digest */ const toBase58String = (digest)=>{
    let str = cache.get(digest.bytes);
    if (!str) {
        str = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base58$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["base58btc"].encode(digest.bytes);
        cache.set(digest.bytes, str);
    }
    return str;
};
class DigestMap {
    /** @type {Map<string, [Key, Value]>} */ #data;
    /**
     * @param {Array<[Key, Value]>} [entries]
     */ constructor(entries){
        this.#data = new Map();
        for (const [k, v] of entries ?? []){
            this.set(k, v);
        }
    }
    get [Symbol.toStringTag]() {
        return 'DigestMap';
    }
    clear() {
        this.#data.clear();
    }
    /**
     * @param {Key} key
     * @returns {boolean}
     */ delete(key) {
        const mhstr = toBase58String(key);
        return this.#data.delete(mhstr);
    }
    /**
     * @param {(value: Value, key: Key, map: Map<Key, Value>) => void} callbackfn
     * @param {any} [thisArg]
     */ forEach(callbackfn, thisArg) {
        for (const [k, v] of this.#data.values()){
            callbackfn.call(thisArg, v, k, this);
        }
    }
    /**
     * @param {Key} key
     * @returns {Value|undefined}
     */ get(key) {
        const data = this.#data.get(toBase58String(key));
        if (data) return data[1];
    }
    /**
     * @param {Key} key
     * @returns {boolean}
     */ has(key) {
        return this.#data.has(toBase58String(key));
    }
    /**
     * @param {Key} key
     * @param {Value} value
     */ set(key, value) {
        this.#data.set(toBase58String(key), [
            key,
            value
        ]);
        return this;
    }
    /** @returns {number} */ get size() {
        return this.#data.size;
    }
    /** @returns */ [Symbol.iterator]() {
        return this.entries();
    }
    /** @returns {IterableIterator<[Key, Value]>} */ *entries() {
        yield* this.#data.values();
    }
    /** @returns {IterableIterator<Key>} */ *keys() {
        for (const [k] of this.#data.values()){
            yield k;
        }
    }
    /** @returns {IterableIterator<Value>} */ *values() {
        for (const [, v] of this.#data.values()){
            yield v;
        }
    }
} //# sourceMappingURL=digest-map.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/dist/src/sharded-dag-index.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "BlobIndexSchema",
    ()=>BlobIndexSchema,
    "DecodeFailure",
    ()=>DecodeFailure,
    "MultihashSchema",
    ()=>MultihashSchema,
    "ShardedDAGIndexSchema",
    ()=>ShardedDAGIndexSchema,
    "UnknownFormat",
    ()=>UnknownFormat,
    "archive",
    ()=>archive,
    "create",
    ()=>create,
    "extract",
    ()=>extract,
    "version",
    ()=>version,
    "view",
    ()=>view
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/dist/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/car.js [app-client] (ecmascript) <export * as CAR>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema.js [app-client] (ecmascript) <export * as Schema>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$compare$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/uint8arrays/dist/src/compare.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-cbor/src/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/multiformats/dist/src/hashes/digest.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/multiformats/dist/src/link.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/multiformats/dist/src/hashes/sha2-browser.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$digest$2d$map$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/dist/src/digest-map.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
const version = 'index/sharded/dag@0.1';
const ShardedDAGIndexSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].variant({
    [version]: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].struct({
        /** DAG root. */ content: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].link(),
        /** Shards the DAG can be found in. */ shards: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].link())
    })
});
const MultihashSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].bytes();
const BlobIndexSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].tuple([
    MultihashSchema,
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].array(/** multihash bytes, offset, length. */ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].tuple([
        MultihashSchema,
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].tuple([
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].number(),
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Schema$3e$__["Schema"].number()
        ])
    ]))
]);
const extract = (archive)=>{
    const { roots, blocks } = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__["CAR"].decode(archive);
    if (!roots.length) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["error"])(new UnknownFormat('missing root block'));
    }
    const { code } = roots[0].cid;
    if (code !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["code"]) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["error"])(new UnknownFormat(`unexpected root CID codec: 0x${code.toString(16)}`));
    }
    return view({
        root: roots[0],
        blocks
    });
};
const view = ({ root, blocks })=>{
    const [version, dagIndexData] = ShardedDAGIndexSchema.match(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"](root.bytes));
    switch(version){
        case version:
            {
                const dagIndex = create(dagIndexData.content);
                for (const shardLink of dagIndexData.shards){
                    const shard = blocks.get(shardLink.toString());
                    if (!shard) {
                        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["error"])(new DecodeFailure(`missing shard block: ${shardLink}`));
                    }
                    const blobIndexData = BlobIndexSchema.from(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"](shard.bytes));
                    const blobIndex = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$digest$2d$map$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DigestMap"]();
                    for (const [digest, [offset, length]] of blobIndexData[1]){
                        blobIndex.set(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"](digest), [
                            offset,
                            length
                        ]);
                    }
                    dagIndex.shards.set(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$digest$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"](blobIndexData[0]), blobIndex);
                }
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ok"])(dagIndex);
            }
        default:
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["error"])(new UnknownFormat(`unknown index version: ${version}`));
    }
};
/** @implements {API.ShardedDAGIndexView} */ class ShardedDAGIndex {
    #content;
    #shards;
    /** @param {API.UnknownLink} content */ constructor(content){
        this.#content = content;
        /** @type {DigestMap<API.ShardDigest, API.Position>} */ this.#shards = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$digest$2d$map$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DigestMap"]();
    }
    get content() {
        return this.#content;
    }
    get shards() {
        return this.#shards;
    }
    /**
     * @param {API.ShardDigest} shard
     * @param {API.SliceDigest} slice
     * @param {API.Position} pos
     */ setSlice(shard, slice, pos) {
        let index = this.#shards.get(shard);
        if (!index) {
            index = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$digest$2d$map$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DigestMap"]();
            this.#shards.set(shard, index);
        }
        index.set(slice, pos);
    }
    archive() {
        return archive(this);
    }
}
class UnknownFormat extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Failure"] {
    #reason;
    /** @param {string} [reason] */ constructor(reason){
        super();
        this.name = 'UnknownFormat';
        this.#reason = reason;
    }
    describe() {
        return this.#reason ?? 'unknown format';
    }
}
class DecodeFailure extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Failure"] {
    #reason;
    /** @param {string} [reason] */ constructor(reason){
        super();
        this.name = 'DecodeFailure';
        this.#reason = reason;
    }
    describe() {
        return this.#reason ?? 'failed to decode';
    }
}
const create = (content)=>new ShardedDAGIndex(content);
const archive = async (model)=>{
    const blocks = new Map();
    const shards = [
        ...model.shards.entries()
    ].sort((a, b)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$compare$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["compare"])(a[0].digest, b[0].digest));
    const index = {
        content: model.content,
        shards: []
    };
    for (const s of shards){
        const slices = [
            ...s[1].entries()
        ].sort((a, b)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$uint8arrays$2f$dist$2f$src$2f$compare$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["compare"])(a[0].digest, b[0].digest)).map((e)=>[
                e[0].bytes,
                e[1]
            ]);
        const bytes = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["encode"]([
            s[0].bytes,
            slices
        ]);
        const digest = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sha256"].digest(bytes);
        const cid = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["create"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["code"], digest);
        blocks.set(cid.toString(), {
            cid,
            bytes
        });
        index.shards.push(cid);
    }
    const bytes = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["encode"]({
        [version]: index
    });
    const digest = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sha256"].digest(bytes);
    const cid = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["create"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["code"], digest);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ok"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CAR$3e$__["CAR"].encode({
        roots: [
            {
                cid,
                bytes
            }
        ],
        blocks
    }));
}; //# sourceMappingURL=sharded-dag-index.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/dist/src/util.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "fromShardArchives",
    ()=>fromShardArchives,
    "indexShardedDAG",
    ()=>indexShardedDAG
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$carstream$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/carstream/src/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$carstream$2f$src$2f$reader$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/carstream/src/reader.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/node_modules/multiformats/dist/src/hashes/sha2-browser.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$api$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/dist/src/api.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$sharded$2d$dag$2d$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/dist/src/sharded-dag-index.js [app-client] (ecmascript)");
;
;
;
;
const fromShardArchives = async (content, shards)=>{
    const index = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$sharded$2d$dag$2d$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["create"])(content);
    for (const s of shards){
        const digest = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sha256"].digest(s);
        await new ReadableStream({
            pull: (c)=>{
                c.enqueue(s);
                c.close();
            }
        }).pipeThrough(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$carstream$2f$src$2f$reader$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CARReaderStream"]()).pipeTo(new WritableStream({
            write ({ cid, blockOffset, blockLength }) {
                index.setSlice(digest, cid.multihash, [
                    blockOffset,
                    blockLength
                ]);
            }
        }));
    }
    return index;
};
async function indexShardedDAG(root, shards, shardIndexes) {
    const index = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$sharded$2d$dag$2d$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["create"])(root);
    for (const [i, shard] of shards.entries()){
        const slices = shardIndexes[i];
        index.shards.set(shard.multihash, slices);
    }
    return await index.archive();
} //# sourceMappingURL=util.js.map
}),
"[project]/node_modules/@web3-storage/blob-index/dist/src/index.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$sharded$2d$dag$2d$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/dist/src/sharded-dag-index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$digest$2d$map$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/dist/src/digest-map.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$web3$2d$storage$2f$blob$2d$index$2f$dist$2f$src$2f$util$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@web3-storage/blob-index/dist/src/util.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
;
;
}),
]);

//# sourceMappingURL=node_modules_%40web3-storage_7d834f16._.js.map