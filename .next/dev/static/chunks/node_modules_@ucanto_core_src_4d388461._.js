(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/node_modules/@ucanto/core/src/link.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/link.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/bases/base32.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base58$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/bases/base58.js [app-client] (ecmascript)");
;
;
;
}),
"[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "contentType",
    ()=>contentType,
    "encode",
    ()=>encode,
    "link",
    ()=>link,
    "write",
    ()=>write
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-cbor/src/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/hashes/sha2-browser.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/link.js [app-client] (ecmascript) <locals>");
;
;
;
;
;
const contentType = 'application/vnd.ipld.dag-cbor';
/**
 * @param {unknown} data
 * @param {Set<unknown>} seen
 * @returns {unknown}
 */ const prepare = (data, seen)=>{
    if (seen.has(data)) {
        throw new TypeError('Can not encode circular structure');
    }
    // top level undefined is ok
    if (data === undefined && seen.size === 0) {
        return null;
    }
    if (data === null) {
        return null;
    }
    if (typeof data === 'symbol' && seen.size === 0) {
        return null;
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["isLink"])(data)) {
        return data;
    }
    if (ArrayBuffer.isView(data)) {
        return data;
    }
    if (Array.isArray(data)) {
        seen.add(data);
        const items = [];
        for (const item of data){
            items.push(item === undefined || typeof item === 'symbol' ? null : prepare(item, seen));
        }
        return items;
    }
    if (typeof /** @type {{toJSON?:unknown}} */ data.toJSON === 'function') {
        seen.add(data);
        const json = /** @type {{toJSON():unknown}} */ data.toJSON();
        return prepare(json, seen);
    }
    if (typeof data === 'object') {
        seen.add(data);
        /** @type {Record<string, unknown>} */ const object = {};
        for (const [key, value] of Object.entries(data)){
            if (value !== undefined && typeof value !== 'symbol') {
                object[key] = prepare(value, new Set(seen));
            }
        }
        return object;
    }
    return data;
};
const encode = (data)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["encode"](prepare(data, new Set()));
const link = async (bytes, { hasher = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sha256"] } = {})=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["create"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["code"], await hasher.digest(bytes));
};
const write = async (data, options)=>{
    const bytes = encode(data);
    const cid = await link(bytes, options);
    return {
        cid,
        bytes
    };
};
}),
"[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "code",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["code"],
    "contentType",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["contentType"],
    "decode",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"],
    "encode",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["encode"],
    "link",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["link"],
    "name",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["name"],
    "write",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["write"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-cbor/src/index.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@ucanto/core/src/dag.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addEveryInto",
    ()=>addEveryInto,
    "addInto",
    ()=>addInto,
    "createStore",
    ()=>createStore,
    "embed",
    ()=>embed,
    "get",
    ()=>get,
    "iterate",
    ()=>iterate,
    "notFound",
    ()=>notFound,
    "writeInto",
    ()=>writeInto
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/link.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/link.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/hashes/sha2-browser.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$interface$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/interface.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$identity$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/hashes/identity.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
const iterate = function*(value) {
    if (value && typeof value === 'object' && 'iterateIPLDBlocks' in value && typeof value.iterateIPLDBlocks === 'function') {
        yield* value.iterateIPLDBlocks();
    }
};
const createStore = (blocks = [])=>{
    const store = new Map();
    addEveryInto(blocks, store);
    return store;
};
/** @type {API.MulticodecCode<typeof identity.code, typeof identity.name>} */ const EMBED_CODE = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$identity$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["identity"].code;
const get = (cid, store, fallback)=>{
    // If CID uses identity hash, we can return the block data directly
    if (cid.multihash.code === EMBED_CODE) {
        return {
            cid,
            bytes: cid.multihash.digest
        };
    }
    const block = store.get(`${cid}`);
    return block ? block : fallback === undefined ? notFound(cid) : fallback;
};
const embed = (source, { codec } = {})=>{
    const encoder = codec || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__;
    const bytes = encoder.encode(source);
    const digest = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$identity$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["identity"].digest(bytes);
    return {
        cid: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["create"])(encoder.code, digest),
        bytes,
        data: source
    };
};
const notFound = (link)=>{
    throw new Error(`Block for the ${link} is not found`);
};
const writeInto = async (source, store, options = {})=>{
    const codec = options.codec || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__;
    const hasher = options.hasher || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sha256"];
    const bytes = codec.encode(source);
    const digest = await hasher.digest(bytes);
    /** @type {API.Link<U, typeof codec.code, typeof hasher.code>} */ const link = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["create"])(codec.code, digest);
    store.set(link.toString(), {
        bytes,
        cid: link
    });
    return {
        bytes,
        cid: link,
        data: source
    };
};
const addInto = ({ cid, bytes }, store)=>{
    store.set(cid.toString(), {
        bytes,
        cid
    });
    return {
        bytes,
        cid
    };
};
const addEveryInto = (source, store)=>{
    for (const block of source){
        addInto(block, store);
    }
};
}),
"[project]/node_modules/@ucanto/core/src/car.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "code",
    ()=>code,
    "contentType",
    ()=>contentType,
    "createWriter",
    ()=>createWriter,
    "decode",
    ()=>decode,
    "encode",
    ()=>encode,
    "link",
    ()=>link,
    "name",
    ()=>name,
    "write",
    ()=>write
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$reader$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/car/src/buffer-reader-browser.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/car/src/buffer-writer.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/bases/base32.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/link.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/link.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/hashes/sha2-browser.js [app-client] (ecmascript)");
;
;
;
;
;
;
const contentType = 'application/vnd.ipld.car';
const name = 'CAR';
const code = 0x0202;
/**
 * @typedef {{
 * roots: API.IPLDBlock[]
 * blocks: Map<string, API.IPLDBlock>
 * }} Model
 */ class Writer {
    /**
   * @param {API.IPLDBlock[]} blocks
   * @param {number} byteLength
   */ constructor(blocks = [], byteLength = 0){
        this.written = new Set();
        this.blocks = blocks;
        this.byteLength = byteLength;
    }
    /**
   * @param {API.IPLDBlock[]} blocks
   */ write(...blocks) {
        for (const block of blocks){
            const id = block.cid.toString(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["base32"]);
            if (!this.written.has(id)) {
                this.blocks.push(block);
                this.byteLength += __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["blockLength"](block);
                this.written.add(id);
            }
        }
        return this;
    }
    /**
   * @param {API.IPLDBlock[]} rootBlocks
   */ flush(...rootBlocks) {
        const roots = [];
        // We reverse the roots so that the first root is the last block in the CAR
        for (const block of rootBlocks.reverse()){
            const id = block.cid.toString(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["base32"]);
            if (!this.written.has(id)) {
                this.blocks.unshift(block);
                this.byteLength += __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["blockLength"]({
                    cid: block.cid,
                    bytes: block.bytes
                });
                this.written.add(id);
            }
            // We unshift here because we want to preserve the order of the roots
            roots.unshift(block.cid);
        }
        this.byteLength += __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["headerLength"]({
            roots
        });
        const buffer = new ArrayBuffer(this.byteLength);
        const writer = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$writer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createWriter"](buffer, {
            roots
        });
        for (const block of this.blocks){
            writer.write(block);
        }
        return writer.close();
    }
}
const createWriter = ()=>new Writer();
const encode = ({ roots = [], blocks })=>{
    const writer = new Writer();
    if (blocks) {
        writer.write(...blocks.values());
    }
    return writer.flush(...roots);
};
const decode = (bytes)=>{
    const reader = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$car$2f$src$2f$buffer$2d$reader$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CarBufferReader"].fromBytes(bytes);
    /** @type {API.IPLDBlock[]} */ const roots = [];
    const blocks = new Map();
    for (const root of reader.getRoots()){
        const block = reader.get(root);
        if (block) {
            roots.push(block);
        }
    }
    for (const block of reader.blocks()){
        blocks.set(block.cid.toString(), block);
    }
    return {
        roots,
        blocks
    };
};
const link = async (bytes, { hasher = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sha256"] } = {})=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["create"])(code, await hasher.digest(bytes));
};
const write = async (data, options)=>{
    const bytes = encode(data);
    const cid = await link(bytes, options);
    return {
        bytes,
        cid
    };
};
}),
"[project]/node_modules/@ucanto/core/src/schema/type.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
}),
"[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Failure",
    ()=>Failure,
    "error",
    ()=>error,
    "fail",
    ()=>fail,
    "ok",
    ()=>ok,
    "panic",
    ()=>panic
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
;
const ok = (value)=>{
    if (value == null) {
        throw new TypeError(`ok(${value}) is not allowed, consider ok({}) instead`);
    } else {
        return {
            ok: value
        };
    }
};
const error = (cause)=>{
    if (cause == null) {
        throw new TypeError(`error(${cause}) is not allowed, consider passing an error instead`);
    } else {
        return {
            error: cause
        };
    }
};
const panic = (message)=>{
    throw new Failure(message);
};
const fail = (message)=>({
        error: new Failure(message)
    });
class Failure extends Error {
    describe() {
        return this.toString();
    }
    get message() {
        return this.describe();
    }
    toJSON() {
        const { name, message, stack } = this;
        return {
            name,
            message,
            stack
        };
    }
}
}),
"[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "API",
    ()=>API,
    "Bytes",
    ()=>Bytes,
    "and",
    ()=>and,
    "array",
    ()=>array,
    "boolean",
    ()=>boolean,
    "bytes",
    ()=>bytes,
    "dictionary",
    ()=>dictionary,
    "endsWith",
    ()=>endsWith,
    "enum",
    ()=>createEnum,
    "error",
    ()=>error,
    "float",
    ()=>float,
    "greaterThan",
    ()=>greaterThan,
    "integer",
    ()=>integer,
    "intersection",
    ()=>intersection,
    "lessThan",
    ()=>lessThan,
    "literal",
    ()=>literal,
    "memberError",
    ()=>memberError,
    "never",
    ()=>never,
    "nullable",
    ()=>nullable,
    "number",
    ()=>number,
    "optional",
    ()=>optional,
    "or",
    ()=>or,
    "refine",
    ()=>refine,
    "startsWith",
    ()=>startsWith,
    "string",
    ()=>string,
    "struct",
    ()=>struct,
    "toString",
    ()=>toString,
    "tuple",
    ()=>tuple,
    "typeError",
    ()=>typeError,
    "uint64",
    ()=>uint64,
    "union",
    ()=>union,
    "unknown",
    ()=>unknown,
    "variant",
    ()=>variant
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$type$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/type.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)");
;
;
;
;
class API {
    /**
   * @param {Settings} settings
   */ constructor(settings){
        this.settings = settings;
    }
    toString() {
        return `new ${this.constructor.name}()`;
    }
    /**
   * @abstract
   * @param {I} input
   * @param {Settings} settings
   * @returns {Schema.ReadResult<T>}
   */ /* c8 ignore next 3 */ readWith(input, settings) {
        throw new Error(`Abstract method readWith must be implemented by subclass`);
    }
    /**
   * @param {I} input
   * @returns {Schema.ReadResult<T>}
   */ read(input) {
        return this.readWith(input, this.settings);
    }
    /**
   * @param {unknown} value
   * @returns {value is T}
   */ is(value) {
        return !this.read(value)?.error;
    }
    /**
   * @param {unknown} value
   * @return {T}
   */ from(value) {
        const result = this.read(value);
        if (result.error) {
            throw result.error;
        } else {
            return result.ok;
        }
    }
    /**
   * @returns {Schema.Schema<T|undefined, I>}
   */ optional() {
        return optional(this);
    }
    /**
   * @returns {Schema.Schema<T|null, I>}
   */ nullable() {
        return nullable(this);
    }
    /**
   * @returns {Schema.Schema<T[], I>}
   */ array() {
        return array(this);
    }
    /**
   * @template U
   * @param {Schema.Reader<U, I>} schema
   * @returns {Schema.Schema<T | U, I>}
   */ or(schema) {
        return or(this, schema);
    }
    /**
   * @template U
   * @param {Schema.Reader<U, I>} schema
   * @returns {Schema.Schema<T & U, I>}
   */ and(schema) {
        return and(this, schema);
    }
    /**
   * @template {T} U
   * @param {Schema.Reader<U, T>} schema
   * @returns {Schema.Schema<U, I>}
   */ refine(schema) {
        return refine(this, schema);
    }
    /**
   * @template {string} Kind
   * @param {Kind} [kind]
   * @returns {Schema.Schema<Schema.Branded<T, Kind>, I>}
   */ brand(kind) {
        return this;
    }
    /**
   * @param {Schema.NotUndefined<T>} value
   * @returns {Schema.DefaultSchema<Schema.NotUndefined<T>, I>}
   */ default(value) {
        // ⚠️ this.from will throw if wrong default is provided
        const fallback = this.from(value);
        // we also check that fallback is not undefined because that is the point
        // of having a fallback
        if (fallback === undefined) {
            throw new Error(`Value of type undefined is not a valid default`);
        }
        const schema = new Default({
            reader: this,
            value: fallback
        });
        return schema;
    }
}
/**
 * @template [I=unknown]
 * @extends {API<never, I>}
 * @implements {Schema.Schema<never, I>}
 */ class Never extends API {
    toString() {
        return 'never()';
    }
    /**
   * @param {I} input
   * @returns {Schema.ReadResult<never>}
   */ read(input) {
        return typeError({
            expect: 'never',
            actual: input
        });
    }
}
const never = ()=>new Never();
/**
 * @template [I=unknown]
 * @extends API<unknown, I, void>
 * @implements {Schema.Schema<unknown, I>}
 */ class Unknown extends API {
    /**
   * @param {I} input
   */ read(input) {
        return {
            ok: input
        };
    }
    toString() {
        return 'unknown()';
    }
}
const unknown = ()=>new Unknown();
/**
 * @template O
 * @template [I=unknown]
 * @extends {API<null|O, I, Schema.Reader<O, I>>}
 * @implements {Schema.Schema<null|O, I>}
 */ class Nullable extends API {
    /**
   * @param {I} input
   * @param {Schema.Reader<O, I>} reader
   */ readWith(input, reader) {
        const result = reader.read(input);
        if (result.error) {
            return input === null ? {
                ok: null
            } : {
                error: new UnionError({
                    causes: [
                        result.error,
                        typeError({
                            expect: 'null',
                            actual: input
                        }).error
                    ]
                })
            };
        } else {
            return result;
        }
    }
    toString() {
        return `${this.settings}.nullable()`;
    }
}
const nullable = (schema)=>new Nullable(schema);
/**
 * @template O
 * @template [I=unknown]
 * @extends {API<O|undefined, I, Schema.Reader<O, I>>}
 * @implements {Schema.Schema<O|undefined, I>}
 */ class Optional extends API {
    optional() {
        return this;
    }
    /**
   * @param {I} input
   * @param {Schema.Reader<O, I>} reader
   * @returns {Schema.ReadResult<O|undefined>}
   */ readWith(input, reader) {
        const result = reader.read(input);
        return result.error && input === undefined ? {
            ok: undefined
        } : result;
    }
    toString() {
        return `${this.settings}.optional()`;
    }
}
/**
 * @template {unknown} O
 * @template [I=unknown]
 * @extends {API<O, I, {reader:Schema.Reader<O, I>, value:O & Schema.NotUndefined<O>}>}
 * @implements {Schema.DefaultSchema<O, I>}
 */ class Default extends API {
    /**
   * @returns {Schema.DefaultSchema<O & Schema.NotUndefined<O>, I>}
   */ optional() {
        // Short circuit here as we there is no point in wrapping this in optional.
        return this;
    }
    /**
   * @param {I} input
   * @param {object} options
   * @param {Schema.Reader<O|undefined, I>} options.reader
   * @param {O} options.value
   * @returns {Schema.ReadResult<O>}
   */ readWith(input, { reader, value }) {
        if (input === undefined) {
            return {
                ok: value
            };
        } else {
            const result = reader.read(input);
            return result.error ? result : result.ok !== undefined ? result : {
                ok: value
            };
        }
    }
    toString() {
        return `${this.settings.reader}.default(${JSON.stringify(this.settings.value)})`;
    }
    get value() {
        return this.settings.value;
    }
}
const optional = (schema)=>new Optional(schema);
/**
 * @template O
 * @template [I=unknown]
 * @extends {API<O[], I, Schema.Reader<O, I>>}
 * @implements {Schema.ArraySchema<O, I>}
 */ class ArrayOf extends API {
    /**
   * @param {I} input
   * @param {Schema.Reader<O, I>} schema
   */ readWith(input, schema) {
        if (!Array.isArray(input)) {
            return typeError({
                expect: 'array',
                actual: input
            });
        }
        /** @type {O[]} */ const results = [];
        for (const [index, value] of input.entries()){
            const result = schema.read(value);
            if (result.error) {
                return memberError({
                    at: index,
                    cause: result.error
                });
            } else {
                results.push(result.ok);
            }
        }
        return {
            ok: results
        };
    }
    get element() {
        return this.settings;
    }
    toString() {
        return `array(${this.element})`;
    }
}
const array = (schema)=>new ArrayOf(schema);
/**
 * @template {Schema.Reader<unknown, I>} T
 * @template {[T, ...T[]]} U
 * @template [I=unknown]
 * @extends {API<Schema.InferTuple<U>, I, U>}
 * @implements {Schema.Schema<Schema.InferTuple<U>, I>}
 */ class Tuple extends API {
    /**
   * @param {I} input
   * @param {U} shape
   * @returns {Schema.ReadResult<Schema.InferTuple<U>>}
   */ readWith(input, shape) {
        if (!Array.isArray(input)) {
            return typeError({
                expect: 'array',
                actual: input
            });
        }
        if (input.length !== this.shape.length) {
            return error(`Array must contain exactly ${this.shape.length} elements`);
        }
        const results = [];
        for (const [index, reader] of shape.entries()){
            const result = reader.read(input[index]);
            if (result.error) {
                return memberError({
                    at: index,
                    cause: result.error
                });
            } else {
                results[index] = result.ok;
            }
        }
        return {
            ok: results
        };
    }
    /** @type {U} */ get shape() {
        return this.settings;
    }
    toString() {
        return `tuple([${this.shape.map((reader)=>reader.toString()).join(', ')}])`;
    }
}
const tuple = (shape)=>new Tuple(shape);
/**
 * @template V
 * @template {string} K
 * @template [I=unknown]
 * @extends {API<Schema.Dictionary<K, V>, I, { key: Schema.Reader<K, string>, value: Schema.Reader<V, I> }>}
 * @implements {Schema.DictionarySchema<V, K, I>}
 */ class Dictionary extends API {
    /**
   * @param {I} input
   * @param {object} schema
   * @param {Schema.Reader<K, string>} schema.key
   * @param {Schema.Reader<V, I>} schema.value
   */ readWith(input, { key, value }) {
        if (typeof input != 'object' || input === null || Array.isArray(input)) {
            return typeError({
                expect: 'dictionary',
                actual: input
            });
        }
        const dict = {};
        for (const [k, v] of Object.entries(input)){
            const keyResult = key.read(k);
            if (keyResult.error) {
                return memberError({
                    at: k,
                    cause: keyResult.error
                });
            }
            const valueResult = value.read(v);
            if (valueResult.error) {
                return memberError({
                    at: k,
                    cause: valueResult.error
                });
            }
            // skip undefined because they mess up CBOR and are generally useless.
            if (valueResult.ok !== undefined) {
                dict[keyResult.ok] = valueResult.ok;
            }
        }
        return {
            ok: dict
        };
    }
    get key() {
        return this.settings.key;
    }
    get value() {
        return this.settings.value;
    }
    partial() {
        const { key, value } = this.settings;
        return new Dictionary({
            key,
            value: optional(value)
        });
    }
    toString() {
        return `dictionary(${this.settings})`;
    }
}
const dictionary = ({ value, key })=>new Dictionary({
        value,
        key: key || string()
    });
/**
 * @template {[unknown, ...unknown[]]} T
 * @template [I=unknown]
 * @extends {API<T[number], I, {type: string, variants:Set<T[number]>}>}
 * @implements {Schema.Schema<T[number], I>}
 */ class Enum extends API {
    /**
   * @param {I} input
   * @param {{type:string, variants:Set<T[number]>}} settings
   * @returns {Schema.ReadResult<T[number]>}
   */ readWith(input, { variants, type }) {
        if (variants.has(input)) {
            return {
                ok: input
            };
        } else {
            return typeError({
                expect: type,
                actual: input
            });
        }
    }
    toString() {
        return this.settings.type;
    }
}
/**
 * @template {string} T
 * @template {[T, ...T[]]} U
 * @template [I=unknown]
 * @param {U} variants
 * @returns {Schema.Schema<U[number], I>}
 */ const createEnum = (variants)=>new Enum({
        type: variants.join('|'),
        variants: new Set(variants)
    });
;
/**
 * @template {Schema.Reader<unknown, I>} T
 * @template {[T, ...T[]]} U
 * @template [I=unknown]
 * @extends {API<Schema.InferUnion<U>, I, U>}
 * @implements {Schema.Schema<Schema.InferUnion<U>, I>}
 */ class Union extends API {
    /**
   * @param {I} input
   * @param {U} variants
   */ readWith(input, variants) {
        const causes = [];
        for (const reader of variants){
            const result = reader.read(input);
            if (result.error) {
                causes.push(result.error);
            } else {
                return result;
            }
        }
        return {
            error: new UnionError({
                causes
            })
        };
    }
    get variants() {
        return this.settings;
    }
    toString() {
        return `union([${this.variants.map((type)=>type.toString()).join(', ')}])`;
    }
}
const union = (variants)=>new Union(variants);
const or = (left, right)=>union([
        left,
        right
    ]);
/**
 * @template {Schema.Reader<unknown, I>} T
 * @template {[T, ...T[]]} U
 * @template [I=unknown]
 * @extends {API<Schema.InferIntersection<U>, I, U>}
 * @implements {Schema.Schema<Schema.InferIntersection<U>, I>}
 */ class Intersection extends API {
    /**
   * @param {I} input
   * @param {U} schemas
   * @returns {Schema.ReadResult<Schema.InferIntersection<U>>}
   */ readWith(input, schemas) {
        const causes = [];
        for (const schema of schemas){
            const result = schema.read(input);
            if (result.error) {
                causes.push(result.error);
            }
        }
        return causes.length > 0 ? {
            error: new IntersectionError({
                causes
            })
        } : {
            ok: input
        };
    }
    toString() {
        return `intersection([${this.settings.map((type)=>type.toString()).join(',')}])`;
    }
}
const intersection = (variants)=>new Intersection(variants);
const and = (left, right)=>intersection([
        left,
        right
    ]);
/**
 * @template [I=unknown]
 * @extends {API<boolean, I>}
 */ class Boolean extends API {
    /**
   * @param {I} input
   */ readWith(input) {
        switch(input){
            case true:
            case false:
                return {
                    ok: input
                };
            default:
                return typeError({
                    expect: 'boolean',
                    actual: input
                });
        }
    }
    toString() {
        return `boolean()`;
    }
}
/** @type {Schema.Schema<boolean, unknown>} */ const anyBoolean = new Boolean();
const boolean = ()=>anyBoolean;
/**
 * @template {number} [O=number]
 * @template [I=unknown]
 * @template [Settings=void]
 * @extends {API<O, I, Settings>}
 * @implements {Schema.NumberSchema<O, I>}
 */ class UnknownNumber extends API {
    /**
   * @param {number} n
   */ greaterThan(n) {
        return this.refine(greaterThan(n));
    }
    /**
   * @param {number} n
   */ lessThan(n) {
        return this.refine(lessThan(n));
    }
    /**
   * @template {O} U
   * @param {Schema.Reader<U, O>} schema
   * @returns {Schema.NumberSchema<U, I>}
   */ refine(schema) {
        return new RefinedNumber({
            base: this,
            schema
        });
    }
}
/**
 * @template [I=unknown]
 * @extends {UnknownNumber<number, I>}
 * @implements {Schema.NumberSchema<number, I>}
 */ class AnyNumber extends UnknownNumber {
    /**
   * @param {I} input
   * @returns {Schema.ReadResult<number>}
   */ readWith(input) {
        return typeof input === 'number' ? {
            ok: input
        } : typeError({
            expect: 'number',
            actual: input
        });
    }
    toString() {
        return `number()`;
    }
}
/** @type {Schema.NumberSchema<number, unknown>} */ const anyNumber = new AnyNumber();
const number = ()=>anyNumber;
/**
 * @template {number} [T=number]
 * @template {T} [O=T]
 * @template [I=unknown]
 * @extends {UnknownNumber<O, I, {base:Schema.Reader<T, I>, schema:Schema.Reader<O, T>}>}
 * @implements {Schema.NumberSchema<O, I>}
 */ class RefinedNumber extends UnknownNumber {
    /**
   * @param {I} input
   * @param {{base:Schema.Reader<T, I>, schema:Schema.Reader<O, T>}} settings
   * @returns {Schema.ReadResult<O>}
   */ readWith(input, { base, schema }) {
        const result = base.read(input);
        return result.error ? result : schema.read(result.ok);
    }
    toString() {
        return `${this.settings.base}.refine(${this.settings.schema})`;
    }
}
/**
 * @template {number} T
 * @extends {API<T, T, number>}
 */ class LessThan extends API {
    /**
   * @param {T} input
   * @param {number} number
   * @returns {Schema.ReadResult<T>}
   */ readWith(input, number) {
        if (input < number) {
            return {
                ok: input
            };
        } else {
            return error(`Expected ${input} < ${number}`);
        }
    }
    toString() {
        return `lessThan(${this.settings})`;
    }
}
const lessThan = (n)=>new LessThan(n);
/**
 * @template {number} T
 * @extends {API<T, T, number>}
 */ class GreaterThan extends API {
    /**
   * @param {T} input
   * @param {number} number
   * @returns {Schema.ReadResult<T>}
   */ readWith(input, number) {
        if (input > number) {
            return {
                ok: input
            };
        } else {
            return error(`Expected ${input} > ${number}`);
        }
    }
    toString() {
        return `greaterThan(${this.settings})`;
    }
}
const greaterThan = (n)=>new GreaterThan(n);
const Integer = {
    /**
   * @param {number} input
   * @returns {Schema.ReadResult<Schema.Integer>}
   */ read (input) {
        return Number.isInteger(input) ? {
            ok: input
        } : typeError({
            expect: 'integer',
            actual: input
        });
    },
    toString () {
        return `Integer`;
    }
};
const anyInteger = anyNumber.refine(Integer);
const integer = ()=>anyInteger;
const MAX_UINT64 = 2n ** 64n - 1n;
/**
 * @template {bigint} [O=Schema.Uint64]
 * @template [I=unknown]
 * @extends {API<O, I, void>}
 * @implements {Schema.Schema<O, I>}
 */ class Uint64Schema extends API {
    /**
   * @param {I} input
   * @returns {Schema.ReadResult<O>}
   */ read(input) {
        switch(typeof input){
            case 'bigint':
                return input > MAX_UINT64 ? error(`Integer is too big for uint64, ${input} > ${MAX_UINT64}`) : input < 0 ? error(`Negative integer can not be represented as uint64, ${input} < ${0}`) : {
                    ok: input
                };
            case 'number':
                return !Number.isInteger(input) ? typeError({
                    expect: 'uint64',
                    actual: input
                }) : input < 0 ? error(`Negative integer can not be represented as uint64, ${input} < ${0}`) : {
                    ok: BigInt(input)
                };
            default:
                return typeError({
                    expect: 'uint64',
                    actual: input
                });
        }
    }
    toString() {
        return `uint64`;
    }
}
/** @type {Schema.Schema<Schema.Uint64, unknown>} */ const Uint64 = new Uint64Schema();
const uint64 = ()=>Uint64;
const Float = {
    /**
   * @param {number} number
   * @returns {Schema.ReadResult<Schema.Float>}
   */ read (number) {
        return Number.isFinite(number) ? {
            ok: number
        } : typeError({
            expect: 'Float',
            actual: number
        });
    },
    toString () {
        return 'Float';
    }
};
const anyFloat = anyNumber.refine(Float);
const float = ()=>anyFloat;
/**
 * @template {string} [O=string]
 * @template [I=unknown]
 * @template [Settings=void]
 * @extends {API<O, I, Settings>}
 */ class UnknownString extends API {
    /**
   * @template {O|unknown} U
   * @param {Schema.Reader<U, O>} schema
   * @returns {Schema.StringSchema<O & U, I>}
   */ refine(schema) {
        const other = schema;
        const rest = new RefinedString({
            base: this,
            schema: other
        });
        return rest;
    }
    /**
   * @template {string} Prefix
   * @param {Prefix} prefix
   */ startsWith(prefix) {
        return this.refine(startsWith(prefix));
    }
    /**
   * @template {string} Suffix
   * @param {Suffix} suffix
   */ endsWith(suffix) {
        return this.refine(endsWith(suffix));
    }
    toString() {
        return `string()`;
    }
}
/**
 * @template O
 * @template {string} [T=string]
 * @template [I=unknown]
 * @extends {UnknownString<T & O, I, {base:Schema.Reader<T, I>, schema:Schema.Reader<O, T>}>}
 * @implements {Schema.StringSchema<O & T, I>}
 */ class RefinedString extends UnknownString {
    /**
   * @param {I} input
   * @param {{base:Schema.Reader<T, I>, schema:Schema.Reader<O, T>}} settings
   * @returns {Schema.ReadResult<T & O>}
   */ readWith(input, { base, schema }) {
        const result = base.read(input);
        return result.error ? result : schema.read(result.ok);
    }
    toString() {
        return `${this.settings.base}.refine(${this.settings.schema})`;
    }
}
/**
 * @template [I=unknown]
 * @extends {UnknownString<string, I>}
 * @implements {Schema.StringSchema<string, I>}
 */ class AnyString extends UnknownString {
    /**
   * @param {I} input
   * @returns {Schema.ReadResult<string>}
   */ readWith(input) {
        return typeof input === 'string' ? {
            ok: input
        } : typeError({
            expect: 'string',
            actual: input
        });
    }
}
/** @type {Schema.StringSchema<string, unknown>} */ const anyString = new AnyString();
const string = ()=>anyString;
/**
 * @template [I=unknown]
 * @extends {API<Uint8Array, I, void>}
 */ class BytesSchema extends API {
    /**
   * @param {I} input
   * @returns {Schema.ReadResult<Uint8Array>}
   */ readWith(input) {
        if (input instanceof Uint8Array) {
            return {
                ok: input
            };
        } else {
            return typeError({
                expect: 'Uint8Array',
                actual: input
            });
        }
    }
}
const Bytes = new BytesSchema();
const bytes = ()=>Bytes;
/**
 * @template {string} Prefix
 * @template {string} Body
 * @extends {API<Body & `${Prefix}${Body}`, Body, Prefix>}
 * @implements {Schema.Schema<Body & `${Prefix}${Body}`, Body>}
 */ class StartsWith extends API {
    /**
   * @param {Body} input
   * @param {Prefix} prefix
   */ readWith(input, prefix) {
        const result = input.startsWith(prefix) ? {
            ok: input
        } : error(`Expect string to start with "${prefix}" instead got "${input}"`);
        return result;
    }
    get prefix() {
        return this.settings;
    }
    toString() {
        return `startsWith("${this.prefix}")`;
    }
}
const startsWith = (prefix)=>new StartsWith(prefix);
/**
 * @template {string} Suffix
 * @template {string} Body
 * @extends {API<Body & `${Body}${Suffix}`, Body, Suffix>}
 */ class EndsWith extends API {
    /**
   * @param {Body} input
   * @param {Suffix} suffix
   */ readWith(input, suffix) {
        return input.endsWith(suffix) ? {
            ok: input
        } : error(`Expect string to end with "${suffix}" instead got "${input}"`);
    }
    get suffix() {
        return this.settings;
    }
    toString() {
        return `endsWith("${this.suffix}")`;
    }
}
const endsWith = (suffix)=>new EndsWith(suffix);
/**
 * @template T
 * @template {T} U
 * @template [I=unknown]
 * @extends {API<U, I, { base: Schema.Reader<T, I>, schema: Schema.Reader<U, T> }>}
 * @implements {Schema.Schema<U, I>}
 */ class Refine extends API {
    /**
   * @param {I} input
   * @param {{ base: Schema.Reader<T, I>, schema: Schema.Reader<U, T> }} settings
   */ readWith(input, { base, schema }) {
        const result = base.read(input);
        return result.error ? result : schema.read(result.ok);
    }
    toString() {
        return `${this.settings.base}.refine(${this.settings.schema})`;
    }
}
const refine = (base, schema)=>new Refine({
        base,
        schema
    });
/**
 * @template {null|boolean|string|number} T
 * @template [I=unknown]
 * @extends {API<T, I, T>}
 * @implements {Schema.LiteralSchema<T, I>}
 */ class Literal extends API {
    /**
   * @param {I} input
   * @param {T} expect
   * @returns {Schema.ReadResult<T>}
   */ readWith(input, expect) {
        return input !== expect ? {
            error: new LiteralError({
                expect,
                actual: input
            })
        } : {
            ok: expect
        };
    }
    get value() {
        return this.settings;
    }
    /**
   * @template {Schema.NotUndefined<T>} U
   * @param {U} value
   */ default(value = this.value) {
        return super.default(value);
    }
    toString() {
        return `literal(${toString(this.value)})`;
    }
}
const literal = (value)=>new Literal(value);
/**
 * @template {{[key:string]: Schema.Reader}} U
 * @template [I=unknown]
 * @extends {API<Schema.InferStruct<U>, I, U>}
 */ class Struct extends API {
    /**
   * @param {I} input
   * @param {U} shape
   * @returns {Schema.ReadResult<Schema.InferStruct<U>>}
   */ readWith(input, shape) {
        if (typeof input != 'object' || input === null || Array.isArray(input)) {
            return typeError({
                expect: 'object',
                actual: input
            });
        }
        const source = input;
        const struct = {};
        const entries = Object.entries(shape);
        for (const [at, reader] of entries){
            const result = reader.read(source[at]);
            if (result.error) {
                return memberError({
                    at,
                    cause: result.error
                });
            } else if (result.ok !== undefined) {
                struct[at] = result.ok;
            }
        }
        return {
            ok: struct
        };
    }
    /**
   * @returns {Schema.MapRepresentation<Partial<Schema.InferStruct<U>>> & Schema.StructSchema}
   */ partial() {
        return new Struct(Object.fromEntries(Object.entries(this.shape).map(([key, value])=>[
                key,
                optional(value)
            ])));
    }
    /** @type {U} */ get shape() {
        // @ts-ignore - We declared `settings` private but we access it here
        return this.settings;
    }
    toString() {
        return [
            `struct({ `,
            ...Object.entries(this.shape).map(([key, schema])=>`${key}: ${schema}`).join(', '),
            ` })`
        ].join('');
    }
    /**
   * @param {Schema.InferStructSource<U>} data
   */ create(data) {
        return this.from(data || {});
    }
    /**
   * @template {{[key:string]: Schema.Reader}} E
   * @param {E} extension
   * @returns {Schema.StructSchema<U & E, I>}
   */ extend(extension) {
        return new Struct({
            ...this.shape,
            ...extension
        });
    }
}
const struct = (fields)=>{
    const shape = {};
    /** @type {[keyof U & string, T|Schema.Reader][]} */ const entries = Object.entries(fields);
    for (const [key, field] of entries){
        switch(typeof field){
            case 'number':
            case 'string':
            case 'boolean':
                shape[key] = literal(field);
                break;
            case 'object':
                shape[key] = field === null ? literal(null) : field;
                break;
            default:
                throw new Error(`Invalid struct field "${key}", expected schema or literal, instead got ${typeof field}`);
        }
    }
    return new Struct(shape);
};
/**
 * @template {Schema.VariantChoices} U
 * @template [I=unknown]
 * @extends {API<Schema.InferVariant<U>, I, U>}
 * @implements {Schema.VariantSchema<U, I>}
 */ class Variant extends API {
    /**
   * @param {I} input
   * @param {U} variants
   * @returns {Schema.ReadResult<Schema.InferVariant<U>>}
   */ readWith(input, variants) {
        if (typeof input != 'object' || input === null || Array.isArray(input)) {
            return typeError({
                expect: 'object',
                actual: input
            });
        }
        const keys = Object.keys(input);
        const [key] = keys.length === 1 ? keys : [];
        const reader = key ? variants[key] : undefined;
        if (reader) {
            const result = reader.read(input[key]);
            return result.error ? memberError({
                at: key,
                cause: result.error
            }) : {
                ok: {
                    [key]: result.ok
                }
            };
        } else if (variants._) {
            const result = variants._.read(input);
            return result.error ? result : {
                ok: {
                    _: result.ok
                }
            };
        } else if (key) {
            return error(`Expected an object with one of the these keys: ${Object.keys(variants).sort().join(', ')} instead got object with key ${key}`);
        } else {
            return error('Expected an object with a single key instead got object with keys ' + keys.sort().join(', '));
        }
    }
    /**
   * @template [E=never]
   * @param {I} input
   * @param {E} [fallback]
   */ match(input, fallback) {
        const result = this.read(input);
        if (result.error) {
            if (fallback !== undefined) {
                return [
                    null,
                    fallback
                ];
            } else {
                throw result.error;
            }
        } else {
            const [key] = Object.keys(result.ok);
            const value = result.ok[key];
            return [
                key,
                value
            ];
        }
    }
    /**
   * @template {Schema.InferVariant<U>} O
   * @param {O} source
   * @returns {O}
   */ create(source) {
        return this.from(source);
    }
}
const variant = (variants)=>new Variant(variants);
const error = (message)=>({
        error: new SchemaError(message)
    });
class SchemaError extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Failure"] {
    get name() {
        return 'SchemaError';
    }
    /* c8 ignore next 3 */ describe() {
        return this.name;
    }
}
class TypeError extends SchemaError {
    /**
   * @param {{expect:string, actual:unknown}} data
   */ constructor({ expect, actual }){
        super();
        this.expect = expect;
        this.actual = actual;
    }
    get name() {
        return 'TypeError';
    }
    describe() {
        return `Expected value of type ${this.expect} instead got ${toString(this.actual)}`;
    }
}
const typeError = (data)=>({
        error: new TypeError(data)
    });
const toString = (value)=>{
    const type = typeof value;
    switch(type){
        case 'boolean':
        case 'string':
            return JSON.stringify(value);
        // if these types we do not want JSON.stringify as it may mess things up
        // eg turn NaN and Infinity to null
        case 'bigint':
            return `${value}n`;
        case 'number':
        case 'symbol':
        case 'undefined':
            return String(value);
        case 'object':
            return value === null ? 'null' : Array.isArray(value) ? 'array' : Symbol.toStringTag in value ? value[Symbol.toStringTag] : 'object';
        default:
            return type;
    }
};
class LiteralError extends SchemaError {
    /**
   * @param {{
   * expect:string|number|boolean|null
   * actual:unknown
   * }} data
   */ constructor({ expect, actual }){
        super();
        this.expect = expect;
        this.actual = actual;
    }
    get name() {
        return 'LiteralError';
    }
    describe() {
        return `Expected literal ${toString(this.expect)} instead got ${toString(this.actual)}`;
    }
}
class ElementError extends SchemaError {
    /**
   * @param {{at:number, cause:Schema.Error}} data
   */ constructor({ at, cause }){
        super();
        this.at = at;
        this.cause = cause;
    }
    get name() {
        return 'ElementError';
    }
    describe() {
        return [
            `Array contains invalid element at ${this.at}:`,
            li(this.cause.message)
        ].join('\n');
    }
}
class FieldError extends SchemaError {
    /**
   * @param {{at:string, cause:Schema.Error}} data
   */ constructor({ at, cause }){
        super();
        this.at = at;
        this.cause = cause;
    }
    get name() {
        return 'FieldError';
    }
    describe() {
        return [
            `Object contains invalid field "${this.at}":`,
            li(this.cause.message)
        ].join('\n');
    }
}
const memberError = ({ at, cause })=>typeof at === 'string' ? {
        error: new FieldError({
            at,
            cause
        })
    } : {
        error: new ElementError({
            at,
            cause
        })
    };
class UnionError extends SchemaError {
    /**
   * @param {{causes: Schema.Error[]}} data
   */ constructor({ causes }){
        super();
        this.causes = causes;
    }
    get name() {
        return 'UnionError';
    }
    describe() {
        const { causes } = this;
        return [
            `Value does not match any type of the union:`,
            ...causes.map((cause)=>li(cause.message))
        ].join('\n');
    }
}
class IntersectionError extends SchemaError {
    /**
   * @param {{causes: Schema.Error[]}} data
   */ constructor({ causes }){
        super();
        this.causes = causes;
    }
    get name() {
        return 'IntersectionError';
    }
    describe() {
        const { causes } = this;
        return [
            `Value does not match following types of the intersection:`,
            ...causes.map((cause)=>li(cause.message))
        ].join('\n');
    }
}
/**
 * @param {string} message
 */ const indent = (message, indent = '  ')=>`${indent}${message.split('\n').join(`\n${indent}`)}`;
/**
 * @param {string} message
 */ const li = (message)=>indent(`- ${message}`);
}),
"[project]/node_modules/@ucanto/core/src/schema/uri.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "from",
    ()=>from,
    "match",
    ()=>match,
    "read",
    ()=>read,
    "uri",
    ()=>uri
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript) <locals>");
;
;
/**
 * @template {API.Protocol} [P=API.Protocol]
 * @typedef {{protocol: P}} Options
 */ /**
 * @template {Options} O
 * @extends {Schema.API<API.URI<O['protocol']>, unknown, Partial<O>>}
 */ class URISchema extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["API"] {
    /**
   * @param {unknown} input
   * @param {Partial<O>} options
   * @returns {Schema.ReadResult<API.URI<O['protocol']>>}
   */ readWith(input, { protocol } = {}) {
        if (typeof input !== 'string' && !(input instanceof URL)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected URI but got ${input === null ? 'null' : typeof input}`);
        }
        try {
            const url = new URL(String(input));
            if (protocol != null && url.protocol !== protocol) {
                return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected ${protocol} URI instead got ${url.href}`);
            } else {
                return {
                    ok: url.href
                };
            }
        } catch (_) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Invalid URI`);
        }
    }
}
const schema = new URISchema({});
const uri = ()=>schema;
const read = (input)=>schema.read(input);
const match = (options)=>new URISchema(options);
const from = (input)=>schema.from(input);
}),
"[project]/node_modules/@ucanto/core/src/schema/link.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "link",
    ()=>link,
    "match",
    ()=>match,
    "optional",
    ()=>optional,
    "read",
    ()=>read,
    "schema",
    ()=>schema
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/link.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/link.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/bases/base32.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript) <locals>");
;
;
;
;
/**
 * @template {number} [Code=number]
 * @template {number} [Alg=number]
 * @template {1|0} [Version=0|1]
 * @typedef {{
 * code?:Code,
 * version?:Version
 * multihash?: {code?: Alg, digest?: Uint8Array}
 * }} Settings
 */ /**
 * @template {number} Code
 * @template {number} Alg
 * @template {1|0} Version
 * @extends {Schema.API<API.Link<unknown, Code, Alg, Version>, unknown, Settings<Code, Alg, Version>>}
 */ class LinkSchema extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["API"] {
    /**
   *
   * @param {unknown} cid
   * @param {Settings<Code, Alg, Version>} settings
   * @returns {Schema.ReadResult<API.Link<unknown, Code, Alg, Version>>}
   */ readWith(cid, { code, multihash = {}, version }) {
        if (cid == null) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected link but got ${cid} instead`);
        } else {
            if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isLink"])(cid)) {
                return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected link to be a CID instead of ${cid}`);
            } else {
                if (code != null && cid.code !== code) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected link to be CID with 0x${code.toString(16)} codec`);
                }
                if (multihash.code != null && cid.multihash.code !== multihash.code) return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected link to be CID with 0x${multihash.code.toString(16)} hashing algorithm`);
                if (version != null && cid.version !== version) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected link to be CID version ${version} instead of ${cid.version}`);
                }
                const [expectDigest, actualDigest] = multihash.digest != null ? [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["base32"].baseEncode(multihash.digest),
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base32$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["base32"].baseEncode(cid.multihash.digest)
                ] : [
                    '',
                    ''
                ];
                if (expectDigest !== actualDigest) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected link with "${expectDigest}" hash digest instead of "${actualDigest}"`);
                }
                return {
                    ok: cid
                };
            }
        }
    }
}
const schema = new LinkSchema({});
const link = ()=>schema;
const match = (options = {})=>new LinkSchema(options);
const read = (input)=>schema.read(input);
const optional = ()=>schema.optional();
}),
"[project]/node_modules/@ucanto/core/src/schema/principal.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "from",
    ()=>from,
    "match",
    ()=>match,
    "principal",
    ()=>principal,
    "read",
    ()=>read
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/did.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript) <locals>");
;
;
;
/**
 * @template {string} Method
 * @extends {Schema.API<API.PrincipalView<API.DID<Method> & API.URI<"did:">>, unknown, void|Method>}
 */ class PrincipalSchema extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["API"] {
    /**
   * @param {unknown} source
   * @param {void|Method} method
   */ readWith(source, method) {
        if (!(source instanceof Uint8Array)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["typeError"]({
                expect: 'Uint8Array',
                actual: source
            });
        }
        let principal;
        try {
            principal = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"](source);
        } catch (err) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Unable to decode bytes as DID: ${err}`);
        }
        const prefix = method ? `did:${method}:` : `did:`;
        if (!principal.did().startsWith(prefix)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected a ${prefix} but got "${principal.did()}" instead`);
        }
        return {
            ok: principal
        };
    }
}
const schema = new PrincipalSchema();
const principal = ()=>schema;
const read = (input)=>schema.read(input);
const match = (options = {})=>new PrincipalSchema(options.method);
const from = (input)=>match({}).from(input);
}),
"[project]/node_modules/@ucanto/core/src/schema/did.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "did",
    ()=>did,
    "didBytes",
    ()=>didBytes,
    "from",
    ()=>from,
    "fromBytes",
    ()=>fromBytes,
    "match",
    ()=>match,
    "matchBytes",
    ()=>matchBytes,
    "read",
    ()=>read,
    "readBytes",
    ()=>readBytes
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/did.js [app-client] (ecmascript)");
;
;
;
/**
 * @template {string} Method
 * @extends {Schema.API<API.DID<Method> & API.URI<"did:">, string, void|Method>}
 */ class DIDSchema extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["API"] {
    /**
   * @param {string} source
   * @param {void|Method} method
   */ readWith(source, method) {
        const prefix = method ? `did:${method}:` : `did:`;
        if (!source.startsWith(prefix)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected a ${prefix} but got "${source}" instead`);
        } else {
            return {
                ok: source
            };
        }
    }
}
const schema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["string"]().refine(new DIDSchema());
const did = ()=>schema;
const read = (input)=>schema.read(input);
const match = (options = {})=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["string"]().refine(new DIDSchema(options.method));
const from = (input)=>match({}).from(input);
/**
 * @template {string} Method
 * @extends {Schema.API<API.DID<Method> & API.URI<"did:">, unknown, void|Method>}
 */ class DIDBytesSchema extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["API"] {
    /**
   * @param {unknown} source
   * @param {void|Method} method
   */ readWith(source, method) {
        if (!(source instanceof Uint8Array)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["typeError"]({
                expect: 'Uint8Array',
                actual: source
            });
        }
        let did;
        try {
            did = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"](source).did();
        } catch (err) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Unable to parse bytes as did: ${err}`);
        }
        const prefix = method ? `did:${method}:` : `did:`;
        if (!did.startsWith(prefix)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected a ${prefix} but got "${did}" instead`);
        } else {
            return {
                ok: did
            };
        }
    }
}
const schemaBytes = new DIDBytesSchema();
const didBytes = ()=>schemaBytes;
const readBytes = (input)=>schemaBytes.read(input);
const matchBytes = (options = {})=>new DIDBytesSchema(options.method);
const fromBytes = (input)=>matchBytes({}).from(input);
}),
"[project]/node_modules/@ucanto/core/src/schema/text.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "match",
    ()=>match,
    "read",
    ()=>read,
    "text",
    ()=>text
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript) <locals>");
;
const schema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["string"]();
const match = (options)=>options ? schema.refine(new Match(options.pattern)) : schema;
const text = match;
const read = (input)=>schema.read(input);
/**
 * @extends {Schema.API<string, string, RegExp>}
 */ class Match extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["API"] {
    /**
   * @param {string} source
   * @param {RegExp} pattern
   */ readWith(source, pattern) {
        if (!pattern.test(source)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"](`Expected to match ${pattern} but got "${source}" instead`);
        } else {
            return {
                ok: source
            };
        }
    }
}
}),
"[project]/node_modules/@ucanto/core/src/schema.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$uri$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/uri.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/link.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$principal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/principal.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/did.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$text$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/text.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript) <locals>");
;
;
;
;
;
;
;
;
;
;
;
}),
"[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "API",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["API"],
    "Bytes",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Bytes"],
    "and",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["and"],
    "array",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["array"],
    "boolean",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["boolean"],
    "bytes",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["bytes"],
    "dictionary",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["dictionary"],
    "endsWith",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["endsWith"],
    "enum",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["enum"],
    "error",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["error"],
    "float",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["float"],
    "greaterThan",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["greaterThan"],
    "integer",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["integer"],
    "intersection",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["intersection"],
    "lessThan",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["lessThan"],
    "literal",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["literal"],
    "memberError",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["memberError"],
    "never",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["never"],
    "nullable",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["nullable"],
    "number",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["number"],
    "ok",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ok"],
    "optional",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["optional"],
    "or",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["or"],
    "refine",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["refine"],
    "startsWith",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["startsWith"],
    "string",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["string"],
    "struct",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["struct"],
    "toString",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["toString"],
    "tuple",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["tuple"],
    "typeError",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["typeError"],
    "uint64",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["uint64"],
    "union",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["union"],
    "unknown",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["unknown"],
    "variant",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["variant"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$type$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/type.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@ucanto/core/src/schema/link.js [app-client] (ecmascript) <locals> <export match as link>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "link",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["match"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/link.js [app-client] (ecmascript) <locals>");
}),
"[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ArchiveSchema",
    ()=>ArchiveSchema,
    "Delegation",
    ()=>Delegation,
    "View",
    ()=>Delegation,
    "allows",
    ()=>allows,
    "archive",
    ()=>archive,
    "create",
    ()=>create,
    "delegate",
    ()=>delegate,
    "exportDAG",
    ()=>exportDAG,
    "extract",
    ()=>extract,
    "importDAG",
    ()=>importDAG,
    "isDelegation",
    ()=>isDelegation,
    "isLink",
    ()=>isLink,
    "view",
    ()=>view
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/link.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/link.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/dag.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/car.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-cbor/src/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__$3c$export__match__as__link$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/link.js [app-client] (ecmascript) <locals> <export match as link>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
const isLink = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isLink"];
const isDelegation = (proof)=>!__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isLink"](proof);
const allows = (...delegations)=>{
    /** @type {API.Allows} */ let allow = {};
    for (const delegation of delegations){
        for (const { with: uri, can, nb } of iterateCapabilities(delegation)){
            const resource = allow[uri] || (allow[uri] = {});
            const abilities = resource[can] || (resource[can] = []);
            abilities.push({
                ...nb
            });
        }
    }
    return allow;
};
/**
 * Function takes a delegation and iterates over all the capabilities expanding
 * all the special forms like `with: ucan:*` and `can: *`.
 *
 * Note that this function only considers proofs that are included in the
 * delegation, linked proofs will not be resolved nor considered. It is up to
 * the user of this function to resolve whatever proofs it needs to consider
 * before calling this function.
 *
 * @param {API.Delegation} delegation
 * @returns {Iterable<API.Capability>}
 */ const iterateCapabilities = function*({ issuer, capabilities, proofs }) {
    for (const own of capabilities){
        // If `with` field is set to  `ucan:*` it implies re-delegation of all own
        // and delegated capabilities.
        if (own.with === 'ucan:*') {
            // Fist we include own capabilities. Note that we can not expand `can`
            // because it implicitly covers all possible options in the universe.
            yield {
                ...own,
                with: issuer.did()
            };
            // Next we iterate over all delegated capabilities including ones that
            // match ability in the `own.can` field.
            for (const proof of proofs){
                // We only consider proofs that are included and ignore linked proofs.
                if (isDelegation(proof)) {
                    for (const capability of iterateCapabilities(proof)){
                        // We attempt to match `capability.can` against `own.can` field
                        // if there is a match we include the capability otherwise we skip
                        const can = matchAbility(capability.can, own.can);
                        if (can) {
                            yield {
                                ...capability,
                                can,
                                // We do not know capability semantics so it is impossible
                                // for us to eliminate capabilities that do not satisfy imposed
                                // caveats (`own.nb`). Therefore we optimistically assume that
                                // `own.nb` further constraints `capability.nb` and do a shallow
                                // merge of the two. As a result we may include capabilities
                                // that during validation will be considered invalid due to
                                // constraint violations. While that is not ideal validator
                                // will treat them as if they were omitted and therefore it
                                // is a reasonable compromise.
                                nb: {
                                    ...capability.nb,
                                    ...Object(own.nb)
                                }
                            };
                        }
                    }
                }
            }
        } else {
            yield own;
        }
    }
};
/**
 * Function takes `can` field from the delegated capability and attempts to
 * match it against `can` field of the claimed capability. If there is a match
 * the function returns more specific `can` field of two, otherwise it returns
 * `null`.
 *
 * @param {API.Ability} provided
 * @param {API.Ability} claimed
 */ const matchAbility = (provided, claimed)=>{
    // If provided capability delegates all abilities we can derive any `can`
    // from it so we return `claimed` as is.
    if (provided === '*') {
        return claimed;
    }
    // If claimed capability delegates all abilities that includes any `can`
    // so we return `provided` as is.
    if (claimed === '*') {
        return provided;
    }
    // If claimed `can` is a pattern that includes `provided` `can` we return
    // `provided` as is.
    if (claimed.endsWith('/*') && provided.startsWith(claimed.slice(0, -1))) {
        return provided;
    }
    // If provided `can` is a pattern that includes `claimed` `can` we can derive
    // `claimed` from it so we return `claimed` as is.
    if (provided.endsWith('/*') && claimed.startsWith(provided.slice(0, -1))) {
        return claimed;
    }
    // If `can` fields are concrete and the same we have a match and can return it.
    if (provided === claimed) {
        return provided;
    }
    // otherwise two are incompatible and we return null.
    return null;
};
class Delegation {
    /**
   * @param {API.UCANBlock<C>} root
   * @param {DAG.BlockStore} [blocks]
   */ constructor(root, blocks = new Map()){
        this.root = root;
        this.blocks = blocks;
        Object.defineProperties(this, {
            blocks: {
                enumerable: false
            }
        });
    }
    /**
   * @returns {API.AttachedLinkSet}
   */ get attachedLinks() {
        const _attachedLinks = new Set();
        const ucanView = this.data;
        // Get links from capabilities nb
        for (const capability of ucanView.capabilities){
            /** @type {Link[]} */ const links = getLinksFromObject(capability);
            for (const link of links){
                _attachedLinks.add(`${link}`);
            }
        }
        // Get links from facts values
        for (const fact of ucanView.facts){
            if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isLink"](fact)) {
                _attachedLinks.add(`${fact}`);
            } else {
                /** @type {Link[]} */ // @ts-expect-error isLink does not infer value type
                const links = Object.values(fact).filter((e)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isLink"](e));
                for (const link of links){
                    _attachedLinks.add(`${link}`);
                }
            }
        }
        return _attachedLinks;
    }
    get version() {
        return this.data.version;
    }
    get signature() {
        return this.data.signature;
    }
    get cid() {
        return this.root.cid;
    }
    link() {
        return this.root.cid;
    }
    get asCID() {
        return this.cid;
    }
    get bytes() {
        return this.root.bytes;
    }
    get data() {
        const data = decode(this.root);
        Object.defineProperties(this, {
            data: {
                value: data,
                enumerable: false
            }
        });
        return data;
    }
    /**
   * Attach a block to the delegation DAG so it would be included in the
   * block iterator.
   * ⚠️ You can only attach blocks that are referenced from the `capabilities`
   * or `facts`.
   *
   * @param {API.Block} block
   */ attach(block) {
        if (!this.attachedLinks.has(`${block.cid.link()}`)) {
            throw new Error(`given block with ${block.cid} is not an attached link`);
        }
        this.blocks.set(`${block.cid}`, block);
    }
    export() {
        return exportDAG(this.root, this.blocks, this.attachedLinks);
    }
    /**
   * @returns {API.Await<API.Result<Uint8Array, Error>>}
   */ archive() {
        return archive(this);
    }
    iterateIPLDBlocks() {
        return exportDAG(this.root, this.blocks, this.attachedLinks);
    }
    /**
   * @type {API.Proof[]}
   */ get proofs() {
        return proofs(this);
    }
    /**
   * @type {API.Principal}
   */ get issuer() {
        return this.data.issuer;
    }
    /**
   * @type {API.Principal}
   */ get audience() {
        return this.data.audience;
    }
    /**
   * @returns {C}
   */ get capabilities() {
        return this.data.capabilities;
    }
    /**
   * @returns {number}
   */ get expiration() {
        return this.data.expiration;
    }
    /**
   * @returns {undefined|number}
   */ get notBefore() {
        return this.data.notBefore;
    }
    /**
   * @returns {undefined|string}
   */ get nonce() {
        return this.data.nonce;
    }
    /**
   * @returns {API.Fact[]}
   */ get facts() {
        return this.data.facts;
    }
    /**
   * Iterate over the proofs
   *
   * @returns {IterableIterator<API.Delegation>}
   */ iterate() {
        return it(this);
    }
    delegate() {
        return this;
    }
    buildIPLDView() {
        return this;
    }
    /**
   * @returns {API.DelegationJSON<this>}
   */ toJSON() {
        return {
            ...this.data.toJSON(),
            '/': this.cid.toString(),
            prf: this.proofs.map((proof)=>isDelegation(proof) ? proof : {
                    '/': proof.toString()
                })
        };
    }
}
const archive = async (delegation)=>{
    try {
        // Iterate over all of the blocks in the DAG and add them to the
        // block store.
        const store = new Map();
        for (const block of delegation.iterateIPLDBlocks()){
            store.set(`${block.cid}`, block);
        }
        // Then we we create a descriptor block to describe what this DAG represents
        // and it to the block store as well.
        const variant = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["write"]({
            [`ucan@${delegation.version}`]: delegation.root.cid
        });
        store.set(`${variant.cid}`, variant);
        // And finally we encode the whole thing into a CAR.
        const bytes = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["encode"]({
            roots: [
                variant
            ],
            blocks: store
        });
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ok"])(bytes);
    } catch (cause) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["error"])(cause);
    }
};
const ArchiveSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["variant"]({
    'ucan@0.9.1': __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__$3c$export__match__as__link$3e$__["link"]({
        version: 1
    })
});
const extract = async (archive)=>{
    try {
        const { roots, blocks } = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"](archive);
        const [root] = roots;
        if (root == null) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["error"]('CAR archive does not contain a root block');
        }
        const { bytes } = root;
        const variant = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$cbor$2f$src$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decode"](bytes);
        const [, link] = ArchiveSchema.match(variant);
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ok"])(view({
            root: link,
            blocks
        }));
    } catch (cause) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["error"])(cause);
    }
};
/**
 * @param {API.Delegation} delegation
 * @returns {IterableIterator<API.Delegation>}
 */ const it = function*(delegation) {
    for (const proof of delegation.proofs){
        if (isDelegation(proof)) {
            yield* it(proof);
            yield proof;
        }
    }
};
const decodeCache = new WeakMap();
/**
 * @template {API.Capabilities} C
 * @param {API.UCANBlock<C>} block
 * @returns {UCAN.View<C>}
 */ const decode = ({ bytes })=>{
    const data = decodeCache.get(bytes);
    if (!data) {
        const data = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["decode"](bytes);
        decodeCache.set(bytes, data);
        return data;
    }
    return data;
};
const delegate = async ({ issuer, audience, proofs = [], attachedBlocks = new Map(), ...input }, options)=>{
    const links = [];
    const blocks = new Map();
    for (const proof of proofs){
        if (!isDelegation(proof)) {
            links.push(proof);
        } else {
            links.push(proof.cid);
            for (const block of proof.export()){
                blocks.set(block.cid.toString(), block);
            }
        }
    }
    const data = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["issue"]({
        ...input,
        issuer,
        audience,
        proofs: links
    });
    const { cid, bytes } = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["write"](data, options);
    decodeCache.set(cid, data);
    /** @type {API.Delegation<C>} */ const delegation = new Delegation({
        cid,
        bytes
    }, blocks);
    Object.defineProperties(delegation, {
        proofs: {
            value: proofs
        }
    });
    for (const block of attachedBlocks.values()){
        delegation.attach(block);
    }
    return delegation;
};
const exportDAG = function*(root, blocks, attachedLinks) {
    for (const link of decode(root).proofs){
        // Check if block is included in this delegation
        const root = blocks.get(`${link}`);
        if (root) {
            yield* exportSubDAG(root, blocks);
        }
    }
    for (const link of attachedLinks.values()){
        const block = blocks.get(link);
        if (block) {
            // @ts-expect-error can get blocks with v0 and v1
            yield block;
        }
    }
    yield root;
};
/**
 * @template {API.Capabilities} C
 * @param {API.UCANBlock<C>} root
 * @param {DAG.BlockStore} blocks
 * @returns {IterableIterator<API.Block>}
 */ const exportSubDAG = function*(root, blocks) {
    for (const link of decode(root).proofs){
        // Check if block is included in this delegation
        const root = blocks.get(`${link}`);
        if (root) {
            yield* exportSubDAG(root, blocks);
        }
    }
    yield root;
};
const importDAG = (dag)=>{
    /** @type {Array<[string, API.Block]>} */ let entries = [];
    for (const block of dag){
        entries.push([
            block.cid.toString(),
            block
        ]);
    }
    const last = entries.pop();
    if (!last) {
        throw new RangeError('Empty DAG can not be turned into a delegation');
    } else {
        const [, root] = last;
        return new Delegation(root, new Map(entries));
    }
};
const create = ({ root, blocks })=>new Delegation(root, blocks);
const view = ({ root, blocks }, fallback)=>{
    const block = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["get"](root, blocks, null);
    if (block == null) {
        return fallback !== undefined ? fallback : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["notFound"](root);
    }
    return create({
        root: block,
        blocks
    });
};
/**
 * @param {API.Delegation} delegation
 */ const proofs = (delegation)=>{
    /** @type {API.Proof[]} */ const proofs = [];
    const { root, blocks } = delegation;
    // Iterate over proof links and materialize Delegation views.
    for (const link of decode(root).proofs){
        // Check if linked proof is included in our blocks if so create delegation
        // view otherwise use a link
        const root = blocks.get(link.toString());
        proofs.push(root ? create({
            root,
            blocks
        }) : link);
    }
    // we cache result of this computation as this property may get accessed
    // more than once.
    Object.defineProperty(delegation, 'proofs', {
        value: proofs
    });
    return proofs;
};
/**
 * @param {API.Capability<API.Ability, `${string}:${string}`, unknown>} obj
 */ function getLinksFromObject(obj) {
    /** @type {Link[]} */ const links = [];
    /**
   * @param {object} obj
   */ function recurse(obj) {
        for(const key in obj){
            // @ts-expect-error record type not inferred
            const value = obj[key];
            if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isLink"](value)) {
                // @ts-expect-error isLink does not infer value type
                links.push(value);
            } else if (value && typeof value === 'object') {
                recurse(value);
            }
        }
    }
    recurse(obj);
    return links;
}
;
}),
"[project]/node_modules/@ucanto/core/src/invocation.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Invocation",
    ()=>Invocation,
    "create",
    ()=>create,
    "invoke",
    ()=>invoke,
    "isInvocation",
    ()=>isInvocation,
    "view",
    ()=>view
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/dag.js [app-client] (ecmascript) <locals>");
;
;
;
const isInvocation = (value)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isDelegation"])(value);
const invoke = (options)=>new IssuedInvocation(options);
const create = ({ root, blocks })=>new Invocation(root, blocks);
const view = ({ root, blocks }, fallback)=>{
    const block = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["get"](root, blocks, null);
    if (block == null) {
        return fallback !== undefined ? fallback : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["notFound"](root);
    }
    return create({
        root: block,
        blocks
    });
};
/**
 * @template {API.Capability} Capability
 * @implements {API.IssuedInvocationView<Capability>}
 * @implements {API.IssuedInvocation<Capability>}
 */ class IssuedInvocation {
    /**
   * @param {API.InvocationOptions<Capability>} data
   */ constructor({ issuer, audience, capability, proofs = [], expiration, lifetimeInSeconds, notBefore, nonce, facts = [], attachedBlocks }){
        /** @readonly */ this.issuer = issuer;
        /** @readonly */ this.audience = audience;
        /** @readonly */ this.proofs = proofs;
        /**
     * @readonly
     * @type {[Capability]}
     */ this.capabilities = [
            capability
        ];
        this.expiration = expiration;
        this.lifetimeInSeconds = lifetimeInSeconds;
        this.notBefore = notBefore;
        this.nonce = nonce;
        this.facts = facts;
        /** @type {API.BlockStore<unknown>} */ this.attachedBlocks = attachedBlocks || new Map();
    }
    /**
   * @param {API.Block} block
   */ attach(block) {
        this.attachedBlocks.set(`${block.cid}`, block);
    }
    delegate() {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["delegate"])(this);
    }
    buildIPLDView() {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["delegate"])(this);
    }
    /**
   * @template {API.InvocationService<Capability>} Service
   * @param {API.ConnectionView<Service>} connection
   * @returns {Promise<API.InferReceipt<Capability, Service>>}
   */ async execute(connection) {
        /** @type {API.ServiceInvocation<Capability, Service>} */ // @ts-expect-error - Our `API.InvocationService<Capability>` constraint
        // does not seem to be enough to convince TS that `this` is valid
        // `ServiceInvocations<Service>`.
        const invocation = this;
        const [result] = await connection.execute(invocation);
        return result;
    }
}
class Invocation extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Delegation"] {
}
}),
"[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <export * as CBOR>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "CBOR",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@ucanto/core/src/invocation.js [app-client] (ecmascript) <export * as Invocation>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Invocation",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/invocation.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@ucanto/core/src/receipt.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "issue",
    ()=>issue,
    "view",
    ()=>view
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/did.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/invocation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$signature$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/signature.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/dag.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/hashes/sha2-browser.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
const view = ({ root, blocks }, fallback)=>{
    const block = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["get"](root, blocks, null);
    if (block == null) {
        return fallback !== undefined ? fallback : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["notFound"](root);
    }
    const data = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__.decode(block.bytes);
    return new Receipt({
        root: {
            ...block,
            data
        },
        store: blocks
    });
};
/**
 * Represents a UCAN invocation receipt view over some block store e.g. in
 * memory CAR. It incrementally decodes proofs, ran invocation etc. on access
 * which reduces overhead but potentially defers errors if references blocks
 * do not conform to the expected IPLD schema.
 *
 * @template {{}} Ok
 * @template {{}} Error
 * @template {API.Invocation} Ran
 * @template {API.SigAlg} [SigAlg=API.SigAlg]
 * @implements {API.Receipt<Ok, Error, Ran, SigAlg>}
 */ class Receipt {
    /**
   * @param {object} input
   * @param {Required<API.Block<API.ReceiptModel<Ok, Error, Ran>>>} input.root
   * @param {DAG.BlockStore} input.store
   * @param {API.Meta} [input.meta]
   * @param {Ran|ReturnType<Ran['link']>} [input.ran]
   * @param {API.EffectsModel} [input.fx]
   * @param {API.SignatureView<API.OutcomeModel<Ok, Error, Ran>, SigAlg>} [input.signature]
   * @param {API.UCAN.Principal} [input.issuer]
   * @param {API.Proof[]} [input.proofs]
   */ constructor({ root, store, ran, issuer, signature, proofs }){
        this.store = store;
        this.root = root;
        this._ran = ran;
        // Field is materialized on demand when `fx` getter is first accessed.
        /** @type {API.Effects|undefined} */ this._fx = undefined;
        this._signature = signature;
        this._proofs = proofs;
        this._issuer = issuer;
    }
    /**
   * @returns {Ran|ReturnType<Ran['link']>}
   */ get ran() {
        const ran = this._ran;
        if (!ran) {
            const ran = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["view"]({
                root: this.root.data.ocm.ran,
                blocks: this.store
            }, this.root.data.ocm.ran);
            this._ran = ran;
            return ran;
        } else {
            return ran;
        }
    }
    get proofs() {
        const proofs = this._proofs;
        if (proofs) {
            return proofs;
        } else {
            const { store, root } = this;
            const { prf } = root.data.ocm;
            const proofs = [];
            if (prf) {
                for (const link of prf){
                    const proof = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["view"]({
                        root: link,
                        blocks: store
                    }, link);
                    proofs.push(proof);
                }
            }
            this._proofs = proofs;
            return proofs;
        }
    }
    link() {
        return this.root.cid;
    }
    get meta() {
        return this.root.data.ocm.meta;
    }
    get issuer() {
        const issuer = this._issuer;
        if (issuer) {
            return issuer;
        } else {
            const { iss } = this.root.data.ocm;
            if (iss) {
                const issuer = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["parse"](iss);
                this._issuer = issuer;
                return issuer;
            }
        }
    }
    get out() {
        return this.root.data.ocm.out;
    }
    get fx() {
        let fx = this._fx;
        if (!fx) {
            const { store: blocks } = this;
            const { fork, join } = this.root.data.ocm.fx;
            fx = {
                fork: fork.map((root)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["view"]({
                        root,
                        blocks
                    }, root))
            };
            if (join) {
                fx.join = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["view"]({
                    root: join,
                    blocks
                }, join);
            }
            this._fx = fx;
        }
        return fx;
    }
    get signature() {
        const signature = this._signature;
        if (signature) {
            return signature;
        } else {
            const signature = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$signature$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["view"](this.root.data.sig);
            this._signature = signature;
            return signature;
        }
    }
    /**
   * @param {API.Crypto.Verifier} signingPrincipal
   */ verifySignature(signingPrincipal) {
        return this.signature.verify(signingPrincipal, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__.encode(this.root.data.ocm));
    }
    buildIPLDView() {
        return this;
    }
    *iterateIPLDBlocks() {
        const { ran, fx, proofs, root } = this;
        yield* __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["iterate"](ran);
        for (const fork of fx.fork){
            yield* __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["iterate"](fork);
        }
        if (fx.join) {
            yield* __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["iterate"](fx.join);
        }
        for (const proof of proofs){
            yield* __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["iterate"](proof);
        }
        yield root;
    }
}
/**
 * Represents a receipt builder that can be used to create a receipt that later
 * can be encoded into desired IPLD codec and hasher. In the future we may make
 * this an incremental builder so you could set some fields later on.
 *
 * @template {{}} Ok
 * @template {{}} Error
 * @template {API.Invocation} Ran
 * @template {API.SigAlg} SigAlg
 * @implements {API.IPLDViewBuilder<API.Receipt<Ok, Error, Ran, SigAlg>>}
 */ class ReceptBuilder {
    /**
   * @param {object} options
   * @param {API.Signer<API.DID, SigAlg>} options.issuer
   * @param {Ran|ReturnType<Ran['link']>} options.ran
   * @param {API.Result<Ok, Error>} options.result
   * @param {API.Effects} [options.fx]
   * @param {API.Proof[]} [options.proofs]
   * @param {Record<string, unknown>} [options.meta]
   */ constructor({ issuer, result, ran, fx = NOFX, proofs = [], meta = {} }){
        this.issuer = issuer;
        this.result = result;
        this.ran = ran;
        this.fx = fx;
        this.proofs = proofs;
        this.meta = meta;
    }
    async buildIPLDView({ hasher = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sha256"], codec = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ } = {}) {
        const store = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createStore"]();
        // copy invocation blocks int
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["addEveryInto"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["iterate"](this.ran), store);
        // copy proof blocks into store
        const prf = [];
        for (const proof of this.proofs){
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["addEveryInto"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["iterate"](proof), store);
            prf.push(proof.link());
        }
        // copy blocks from the embedded fx
        /** @type {{fork: API.Run[], join?:API.Run}}  */ const fx = {
            fork: []
        };
        for (const fork of this.fx.fork){
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["addEveryInto"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["iterate"](fork), store);
            fx.fork.push(fork.link());
        }
        if (this.fx.join) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["addEveryInto"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["iterate"](this.fx.join), store);
            fx.join = this.fx.join.link();
        }
        /** @type {API.OutcomeModel<Ok, Error, Ran>} */ const outcome = {
            ran: this.ran.link(),
            out: this.result,
            fx,
            meta: this.meta,
            iss: this.issuer.did(),
            prf
        };
        const signature = await this.issuer.sign(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__.encode(outcome));
        /** @type {API.ReceiptModel<Ok, Error, Ran>} */ const model = {
            ocm: outcome,
            sig: signature
        };
        const root = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["writeInto"](model, store, {
            hasher,
            codec
        });
        return new Receipt({
            root,
            store,
            signature,
            proofs: this.proofs,
            ran: this.ran
        });
    }
}
const NOFX = Object.freeze({
    fork: Object.freeze([])
});
const issue = (options)=>new ReceptBuilder(options).buildIPLDView();
}),
"[project]/node_modules/@ucanto/core/src/message.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "MessageSchema",
    ()=>MessageSchema,
    "build",
    ()=>build,
    "view",
    ()=>view
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/dag.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CBOR$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <export * as CBOR>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Invocation$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/invocation.js [app-client] (ecmascript) <export * as Invocation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$receipt$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/receipt.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/schema.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__$3c$export__match__as__link$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema/link.js [app-client] (ecmascript) <locals> <export match as link>");
;
;
;
;
;
const MessageSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["variant"]({
    'ucanto/message@7.0.0': __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["struct"]({
        execute: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__$3c$export__match__as__link$3e$__["link"]().array().optional(),
        delegate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["dictionary"]({
            key: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["string"](),
            value: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__$3c$export__match__as__link$3e$__["link"]()
        }).array().optional()
    })
});
const build = ({ invocations, receipts })=>new MessageBuilder({
        invocations,
        receipts
    }).buildIPLDView();
const view = ({ root, store }, fallback)=>{
    const block = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["get"](root, store, null);
    if (block === null) {
        return fallback !== undefined ? fallback : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["notFound"](root);
    }
    const data = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__CBOR$3e$__["CBOR"].decode(block.bytes);
    const [branch, value] = MessageSchema.match(data, fallback);
    switch(branch){
        case 'ucanto/message@7.0.0':
            return new Message({
                root: {
                    ...block,
                    data
                },
                store
            });
        default:
            return value;
    }
};
/**
 * @template {API.Tuple<API.IssuedInvocation>} I
 * @template {API.Tuple<API.Receipt>} R
 * @implements {API.AgentMessageBuilder<{In: API.InferInvocations<I>, Out: R }>}
 *
 */ class MessageBuilder {
    /**
   * @param {object} source
   * @param {I} [source.invocations]
   * @param {R} [source.receipts]
   */ constructor({ invocations, receipts }){
        this.invocations = invocations;
        this.receipts = receipts;
    }
    /**
   *
   * @param {API.BuildOptions} [options]
   * @returns {Promise<Message<{ In: API.InferInvocations<I>, Out: R }>>}
   */ async buildIPLDView(options) {
        const store = new Map();
        const { invocations, ...executeField } = await writeInvocations(this.invocations || [], store);
        const { receipts, ...receiptsField } = await writeReceipts(this.receipts || [], store);
        const root = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["writeInto"]({
            'ucanto/message@7.0.0': {
                ...executeField,
                ...receiptsField
            }
        }, store, options);
        return new Message({
            root,
            store
        }, {
            receipts,
            invocations
        });
    }
}
/**
 *
 * @param {API.IssuedInvocation[]} run
 * @param {Map<string, API.Block>} store
 */ const writeInvocations = async (run, store)=>{
    const invocations = [];
    const execute = [];
    for (const invocation of run){
        const view = await invocation.buildIPLDView();
        execute.push(view.link());
        invocations.push(view);
        for (const block of view.iterateIPLDBlocks()){
            store.set(`${block.cid}`, block);
        }
    }
    return {
        invocations,
        ...execute.length > 0 ? {
            execute
        } : {}
    };
};
/**
 * @param {API.Receipt[]} source
 * @param {Map<string, API.Block>} store
 */ const writeReceipts = async (source, store)=>{
    if (source.length === 0) {
        return {};
    }
    const receipts = new Map();
    /** @type {Record<API.ToString<API.ReceiptModel['ocm']['ran']>, API.Link<API.ReceiptModel>>} */ const report = {};
    for (const [n, receipt] of source.entries()){
        const view = await receipt.buildIPLDView();
        for (const block of view.iterateIPLDBlocks()){
            store.set(`${block.cid}`, block);
        }
        const key = `${view.ran.link()}`;
        if (!(key in report)) {
            report[key] = view.root.cid;
            receipts.set(key, view);
        } else {
            // In theory we could have gotten the same invocation twice and both
            // should get same receipt. In legacy code we send tuple of results
            // as opposed to a map keyed by invocation to keep old clients working
            // we just stick the receipt in the map with a unique key so that when
            // legacy encoder maps entries to array it will get both receipts in
            // the right order.
            receipts.set(`${key}@${n}`, view);
        }
    }
    return {
        receipts,
        report
    };
};
/**
 * @template {{ In: API.Invocation[], Out: API.Receipt[] }} T
 * @implements {API.AgentMessage<T>}
 */ class Message {
    /**
   * @param {object} source
   * @param {Required<API.Block<API.AgentMessageModel<T>>>} source.root
   * @param {DAG.BlockStore} source.store
   * @param {object} build
   * @param {API.Invocation[]} [build.invocations]
   * @param {Map<string, API.Receipt>} [build.receipts]
   */ constructor({ root, store }, { invocations, receipts } = {}){
        this.root = root;
        this.store = store;
        this._invocations = invocations;
        this._receipts = receipts;
    }
    *iterateIPLDBlocks() {
        for (const invocation of this.invocations){
            yield* invocation.iterateIPLDBlocks();
        }
        for (const receipt of this.receipts.values()){
            yield* receipt.iterateIPLDBlocks();
        }
        yield this.root;
    }
    /**
   * @template [E=never]
   * @param {API.Link} link
   * @param {E} [fallback]
   * @returns {API.Receipt|E}
   */ get(link, fallback) {
        const receipts = this.root.data['ucanto/message@7.0.0'].report || {};
        const receipt = receipts[`${link}`];
        if (receipt) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$receipt$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["view"]({
                root: receipt,
                blocks: this.store
            });
        } else {
            return fallback !== undefined ? fallback : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["panic"])(`Message does not include receipt for ${link}`);
        }
    }
    get invocationLinks() {
        return this.root.data['ucanto/message@7.0.0'].execute || [];
    }
    get invocations() {
        let invocations = this._invocations;
        if (!invocations) {
            invocations = this.invocationLinks.map((link)=>{
                return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__Invocation$3e$__["Invocation"].view({
                    root: link,
                    blocks: this.store
                });
            });
        }
        return invocations;
    }
    get receipts() {
        let receipts = this._receipts;
        if (!receipts) {
            receipts = new Map();
            const report = this.root.data['ucanto/message@7.0.0'].report || {};
            for (const [key, link] of Object.entries(report)){
                const receipt = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$receipt$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["view"]({
                    root: link,
                    blocks: this.store
                });
                receipts.set(`${receipt.ran.link()}`, receipt);
            }
        }
        return receipts;
    }
}
}),
"[project]/node_modules/@ucanto/core/src/lib.js [app-client] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$interface$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/interface/src/lib.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$delegation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/delegation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$invocation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/invocation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$message$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/message.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$receipt$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/receipt.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$dag$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/dag.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$cbor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/cbor.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/car.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/link.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$hashes$2f$sha2$2d$browser$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/hashes/sha2-browser.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bases$2f$base58$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/node_modules/multiformats/dist/src/bases/base58.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$lib$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/lib.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$did$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/did.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ipld$2f$dag$2d$ucan$2f$src$2f$signature$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ipld/dag-ucan/src/signature.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$result$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/result.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$schema$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/schema.js [app-client] (ecmascript) <locals>");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
}),
"[project]/node_modules/@ucanto/core/src/car.js [app-client] (ecmascript) <export * as CAR>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "CAR",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/car.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@ucanto/core/src/message.js [app-client] (ecmascript) <export * as Message>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Message",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$message$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$message$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/message.js [app-client] (ecmascript)");
}),
"[project]/node_modules/@ucanto/core/src/car.js [app-client] (ecmascript) <export * as codec>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "codec",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ucanto$2f$core$2f$src$2f$car$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ucanto/core/src/car.js [app-client] (ecmascript)");
}),
]);

//# sourceMappingURL=node_modules_%40ucanto_core_src_4d388461._.js.map