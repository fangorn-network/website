{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n        case REACT_VIEW_TRANSITION_TYPE:\n          return \"ViewTransition\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      isValidElement(node)\n        ? node._store && (node._store.validated = 1)\n        : \"object\" === typeof node &&\n          null !== node &&\n          node.$$typeof === REACT_LAZY_TYPE &&\n          (\"fulfilled\" === node._payload.status\n            ? isValidElement(node._payload.value) &&\n              node._payload.value._store &&\n              (node._payload.value._store.validated = 1)\n            : node._store && (node._store.validated = 1));\n    }\n    function isValidElement(object) {\n      return (\n        \"object\" === typeof object &&\n        null !== object &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n    var React = require(\"next/dist/compiled/react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_VIEW_TRANSITION_TYPE = Symbol.for(\"react.view_transition\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsxDEV = function (type, config, maybeKey, isStaticChildren) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      if (trackActualOwner) {\n        var previousStackTraceLimit = Error.stackTraceLimit;\n        Error.stackTraceLimit = 10;\n        var debugStackDEV = Error(\"react-stack-top-frame\");\n        Error.stackTraceLimit = previousStackTraceLimit;\n      } else debugStackDEV = unknownOwnerDebugStack;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        isStaticChildren,\n        debugStackDEV,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/next/dist/compiled/react/jsx-dev-runtime.js"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-dev-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-dev-runtime.development.js');\n}\n"],"names":[],"mappings":"AAEI;AAFJ;AAEA;;KAEO;IACL,OAAO,OAAO;AAChB","ignoreList":[0]}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/utf8.js"],"sourcesContent":["export const encoder = new TextEncoder()\nexport const decoder = new TextDecoder()\n\n/**\n * @template T\n * @param {import('./ucan').ToString<T>} text\n * @returns {import('./ucan').ByteView<T>}\n */\nexport const encode = text => encoder.encode(text)\n\n/**\n * @template T\n * @param {import('./ucan').ByteView<T>} bytes\n * @returns {import('./ucan').ToString<T>}\n */\nexport const decode = bytes => decoder.decode(bytes)\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,UAAU,IAAI;AACpB,MAAM,UAAU,IAAI;AAOpB,MAAM,SAAS,CAAA,OAAQ,QAAQ,MAAM,CAAC;AAOtC,MAAM,SAAS,CAAA,QAAS,QAAQ,MAAM,CAAC","ignoreList":[0]}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/did.js"],"sourcesContent":["import * as UCAN from \"./ucan.js\"\nimport { base58btc } from \"multiformats/bases/base58\"\nimport { varint } from \"multiformats\"\nimport * as UTF8 from \"./utf8.js\"\n\nconst DID_PREFIX = \"did:\"\nconst DID_PREFIX_SIZE = DID_PREFIX.length\nconst DID_KEY_PREFIX = `did:key:`\nconst DID_KEY_PREFIX_SIZE = DID_KEY_PREFIX.length\n\nexport const ED25519 = 0xed\nexport const RSA = 0x1205\nexport const P256 = 0x1200\nexport const P384 = 0x1201\nexport const P521 = 0x1202\nexport const SECP256K1 = 0xe7\nexport const BLS12381G1 = 0xea\nexport const BLS12381G2 = 0xeb\nexport const DID_CORE = 0x0d1d\nconst METHOD_OFFSET = varint.encodingLength(DID_CORE)\n\n/**\n * @typedef {typeof ED25519|typeof RSA|typeof P256|typeof P384|typeof P521|typeof DID_CORE} Code\n */\n\n/**\n * Parses a DID string into a DID buffer view\n *\n * @template {UCAN.DID} ID\n * @param {ID|UCAN.ToString<unknown>} did\n * @returns {UCAN.PrincipalView<ID>}\n */\nexport const parse = did => {\n  if (!did.startsWith(DID_PREFIX)) {\n    throw new RangeError(`Invalid DID \"${did}\", must start with 'did:'`)\n  } else if (did.startsWith(DID_KEY_PREFIX)) {\n    const key = base58btc.decode(did.slice(DID_KEY_PREFIX_SIZE))\n    return decode(key)\n  } else {\n    const suffix = UTF8.encode(did.slice(DID_PREFIX_SIZE))\n    const bytes = new Uint8Array(suffix.byteLength + METHOD_OFFSET)\n    varint.encodeTo(DID_CORE, bytes)\n    bytes.set(suffix, METHOD_OFFSET)\n    return new DID(bytes)\n  }\n}\n\n/**\n * @template {UCAN.DID} ID\n * @param {UCAN.Principal<ID>} id\n * @returns {ID}\n */\nexport const format = id => id.did()\n\n/**\n * @template {UCAN.DID} ID\n * @param {UCAN.PrincipalView<ID>|UCAN.ByteView<UCAN.Principal<ID>>|UCAN.Principal<ID>|ID|UCAN.ToJSONString<unknown>} principal\n * @returns {UCAN.PrincipalView<ID>}\n */\nexport const from = principal => {\n  if (principal instanceof DID) {\n    return principal\n  } else if (principal instanceof Uint8Array) {\n    return decode(principal)\n  } else if (typeof principal === \"string\") {\n    return parse(principal)\n  } else {\n    return parse(principal.did())\n  }\n}\n\n/**\n * @template {UCAN.DID} ID\n * @param {UCAN.ByteView<UCAN.Principal<ID>>} bytes\n * @returns {UCAN.PrincipalView<ID>}\n */\nexport const decode = bytes => {\n  const [code] = varint.decode(bytes)\n  const { buffer, byteOffset, byteLength } = bytes\n  switch (code) {\n    case P256:\n      if (bytes.length > 35) {\n        throw new RangeError(`Only p256-pub compressed is supported.`)\n      }\n    case ED25519:\n    case RSA:\n    case P384:\n    case P521:\n    case BLS12381G1:\n    case BLS12381G2:\n    case SECP256K1:\n      return /** @type {UCAN.PrincipalView<any>} */ (\n        new DIDKey(buffer, byteOffset, byteLength)\n      )\n    case DID_CORE:\n      return new DID(buffer, byteOffset, byteLength)\n    default:\n      throw new RangeError(\n        `Unsupported DID encoding, unknown multicode 0x${code.toString(16)}.`\n      )\n  }\n}\n\n/**\n * @template {UCAN.DID} ID\n * @param {UCAN.Principal<ID>} principal\n * @returns {UCAN.PrincipalView<ID>}\n */\nexport const encode = principal => parse(principal.did())\n\n/**\n * @template {UCAN.DID} ID\n * @implements {UCAN.PrincipalView<ID>}\n * @extends {Uint8Array}\n */\nclass DID extends Uint8Array {\n  /**\n   * @returns {ID}\n   */\n  did() {\n    const bytes = new Uint8Array(this.buffer, this.byteOffset + METHOD_OFFSET)\n    return /** @type {ID} */ (`did:${UTF8.decode(bytes)}`)\n  }\n\n  toJSON() {\n    return this.did()\n  }\n}\n\n/**\n * @implements {UCAN.PrincipalView<UCAN.DID<\"key\">>}\n * @extends {DID<UCAN.DID<\"key\">>}\n */\nclass DIDKey extends DID {\n  /**\n   * @return {`did:key:${string}`}\n   */\n  did() {\n    return `did:key:${base58btc.encode(this)}`\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AACA;;;;;AAEA,MAAM,aAAa;AACnB,MAAM,kBAAkB,WAAW,MAAM;AACzC,MAAM,iBAAiB,CAAC,QAAQ,CAAC;AACjC,MAAM,sBAAsB,eAAe,MAAM;AAE1C,MAAM,UAAU;AAChB,MAAM,MAAM;AACZ,MAAM,OAAO;AACb,MAAM,OAAO;AACb,MAAM,OAAO;AACb,MAAM,YAAY;AAClB,MAAM,aAAa;AACnB,MAAM,aAAa;AACnB,MAAM,WAAW;AACxB,MAAM,gBAAgB,oMAAM,CAAC,cAAc,CAAC;AAarC,MAAM,QAAQ,CAAA;IACnB,IAAI,CAAC,IAAI,UAAU,CAAC,aAAa;QAC/B,MAAM,IAAI,WAAW,CAAC,aAAa,EAAE,IAAI,yBAAyB,CAAC;IACrE,OAAO,IAAI,IAAI,UAAU,CAAC,iBAAiB;QACzC,MAAM,MAAM,8KAAS,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC;QACvC,OAAO,OAAO;IAChB,OAAO;QACL,MAAM,SAAS,iKAAW,CAAC,IAAI,KAAK,CAAC;QACrC,MAAM,QAAQ,IAAI,WAAW,OAAO,UAAU,GAAG;QACjD,oMAAM,CAAC,QAAQ,CAAC,UAAU;QAC1B,MAAM,GAAG,CAAC,QAAQ;QAClB,OAAO,IAAI,IAAI;IACjB;AACF;AAOO,MAAM,SAAS,CAAA,KAAM,GAAG,GAAG;AAO3B,MAAM,OAAO,CAAA;IAClB,IAAI,qBAAqB,KAAK;QAC5B,OAAO;IACT,OAAO,IAAI,qBAAqB,YAAY;QAC1C,OAAO,OAAO;IAChB,OAAO,IAAI,OAAO,cAAc,UAAU;QACxC,OAAO,MAAM;IACf,OAAO;QACL,OAAO,MAAM,UAAU,GAAG;IAC5B;AACF;AAOO,MAAM,SAAS,CAAA;IACpB,MAAM,CAAC,KAAK,GAAG,oMAAM,CAAC,MAAM,CAAC;IAC7B,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG;IAC3C,OAAQ;QACN,KAAK;YACH,IAAI,MAAM,MAAM,GAAG,IAAI;gBACrB,MAAM,IAAI,WAAW,CAAC,sCAAsC,CAAC;YAC/D;QACF,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;YACH,OACE,IAAI,OAAO,QAAQ,YAAY;QAEnC,KAAK;YACH,OAAO,IAAI,IAAI,QAAQ,YAAY;QACrC;YACE,MAAM,IAAI,WACR,CAAC,8CAA8C,EAAE,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC;IAE3E;AACF;AAOO,MAAM,SAAS,CAAA,YAAa,MAAM,UAAU,GAAG;AAEtD;;;;CAIC,GACD,MAAM,YAAY;IAChB;;GAEC,GACD,MAAM;QACJ,MAAM,QAAQ,IAAI,WAAW,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,GAAG;QAC5D,OAA0B,CAAC,IAAI,EAAE,iKAAW,CAAC,QAAQ;IACvD;IAEA,SAAS;QACP,OAAO,IAAI,CAAC,GAAG;IACjB;AACF;AAEA;;;CAGC,GACD,MAAM,eAAe;IACnB;;GAEC,GACD,MAAM;QACJ,OAAO,CAAC,QAAQ,EAAE,8KAAS,CAAC,MAAM,CAAC,IAAI,GAAG;IAC5C;AACF","ignoreList":[0]}},
    {"offset": {"line": 390, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/signature.js"],"sourcesContent":["import * as UCAN from \"./ucan.js\"\nimport { varint } from \"multiformats\"\nimport { base64url, base64 } from \"multiformats/bases/base64\"\nimport * as UTF8 from \"./utf8.js\"\n\nexport const NON_STANDARD = 0xd000\nexport const ES256K = 0xd0e7\nexport const BLS12381G1 = 0xd0ea\nexport const BLS12381G2 = 0xd0eb\nexport const EdDSA = 0xd0ed\nexport const ES256 = 0xd01200\nexport const ES384 = 0xd01201\nexport const ES512 = 0xd01202\nexport const RS256 = 0xd01205\nexport const EIP191 = 0xd191\n\n/**\n * @param {number} code\n * @returns {string}\n */\nconst codeName = code => {\n  switch (code) {\n    case ES256K:\n      return \"ES256K\"\n    case BLS12381G1:\n      return \"BLS12381G1\"\n    case BLS12381G2:\n      return \"BLS12381G2\"\n    case EdDSA:\n      return \"EdDSA\"\n    case ES256:\n      return \"ES256\"\n    case ES384:\n      return \"ES384\"\n    case ES512:\n      return \"ES512\"\n    case RS256:\n      return \"RS256\"\n    case EIP191:\n      return \"EIP191\"\n    default:\n      throw new RangeError(\n        `Unknown signature algorithm code 0x${code.toString(16)}`\n      )\n  }\n}\n\n/**\n *\n * @param {string} name\n */\nexport const nameCode = name => {\n  switch (name) {\n    case \"ES256K\":\n      return ES256K\n    case \"BLS12381G1\":\n      return BLS12381G1\n    case \"BLS12381G2\":\n      return BLS12381G2\n    case \"EdDSA\":\n      return EdDSA\n    case \"ES256\":\n      return ES256\n    case \"ES384\":\n      return ES384\n    case \"ES512\":\n      return ES512\n    case \"RS256\":\n      return RS256\n    case \"EIP191\":\n      return EIP191\n    default:\n      return NON_STANDARD\n  }\n}\n\n/**\n * @template {unknown} T\n * @template {number} A\n * @implements {UCAN.SignatureView<T, A>}\n */\nexport class Signature extends Uint8Array {\n  get code() {\n    const [code] = varint.decode(this)\n    Object.defineProperties(this, { code: { value: code } })\n    return /** @type {A} */ (code)\n  }\n\n  get size() {\n    const value = size(this)\n    Object.defineProperties(this, { size: { value } })\n    return value\n  }\n  get algorithm() {\n    const value = algorithm(this)\n    Object.defineProperties(this, { algorithm: { value } })\n    return value\n  }\n\n  get raw() {\n    const { buffer, byteOffset, size, code } = this\n    const codeSize = varint.encodingLength(code)\n    const rawSize = varint.encodingLength(size)\n    const value = new Uint8Array(buffer, byteOffset + codeSize + rawSize, size)\n    Object.defineProperties(this, { raw: { value } })\n    return value\n  }\n\n  /**\n   * Verify that this signature was created by the given key.\n   *\n   * @param {UCAN.Crypto.Verifier<A>} signer\n   * @param {UCAN.ByteView<T>} payload\n   */\n  async verify(signer, payload) {\n    try {\n      if ((await signer.verify(payload, this)) === true) {\n        return { ok: {} }\n      } else {\n        throw new Error(\"Invalid signature\")\n      }\n    } catch (cause) {\n      return { error: /** @type {Error} */ (cause) }\n    }\n  }\n\n  toJSON() {\n    return toJSON(this)\n  }\n}\n\n/**\n * @param {UCAN.Signature} signature\n */\nconst algorithm = signature => {\n  const { code, raw, buffer, byteOffset } = signature\n  if (code === NON_STANDARD) {\n    const offset =\n      raw.byteLength +\n      varint.encodingLength(code) +\n      varint.encodingLength(raw.byteLength)\n    const bytes = new Uint8Array(buffer, byteOffset + offset)\n    return UTF8.decode(bytes)\n  } else {\n    return codeName(code)\n  }\n}\n\n/**\n * @param {UCAN.Signature} signature\n */\nconst size = signature => {\n  const offset = varint.encodingLength(signature.code)\n  const [size] = varint.decode(\n    new Uint8Array(signature.buffer, signature.byteOffset + offset)\n  )\n  return size\n}\n\n/**\n * @template {unknown} T\n * @template {number} A\n * @param {A} code\n * @param {Uint8Array} raw\n * @returns {UCAN.SignatureView<T, A>}\n */\nexport const create = (code, raw) => {\n  const _ = codeName(code)\n  const codeSize = varint.encodingLength(code)\n  const rawSize = varint.encodingLength(raw.byteLength)\n\n  /** @type {Signature<T, A>} */\n  const signature = new Signature(codeSize + rawSize + raw.byteLength)\n  varint.encodeTo(code, signature)\n  varint.encodeTo(raw.byteLength, signature, codeSize)\n  signature.set(raw, codeSize + rawSize)\n  Object.defineProperties(signature, {\n    code: { value: code },\n    size: { value: raw.byteLength },\n  })\n  return signature\n}\n\n/**\n * @template {unknown} T\n * @param {string} name\n * @param {Uint8Array} raw\n * @return {UCAN.SignatureView<T>}\n */\nexport const createNamed = (name, raw) => {\n  const code = nameCode(name)\n  return code === NON_STANDARD\n    ? createNonStandard(name, raw)\n    : create(code, raw)\n}\n\n/**\n * @template {unknown} T\n * @param {string} name\n * @param {Uint8Array} raw\n * @return {UCAN.SignatureView<T, typeof NON_STANDARD>}\n */\nexport const createNonStandard = (name, raw) => {\n  const code = NON_STANDARD\n  const codeSize = varint.encodingLength(code)\n  const rawSize = varint.encodingLength(raw.byteLength)\n  const nameBytes = UTF8.encode(name)\n  /** @type {Signature<T, typeof NON_STANDARD>} */\n  const signature = new Signature(\n    codeSize + rawSize + raw.byteLength + nameBytes.byteLength\n  )\n  varint.encodeTo(code, signature)\n  varint.encodeTo(raw.byteLength, signature, codeSize)\n  signature.set(raw, codeSize + rawSize)\n  signature.set(nameBytes, codeSize + rawSize + raw.byteLength)\n\n  return signature\n}\n\n/**\n * @template {unknown} T\n * @template {number} A\n * @param {UCAN.ByteView<UCAN.Signature<T, A>>} bytes\n * @returns {UCAN.SignatureView<T, A>}\n */\nexport const view = bytes =>\n  new Signature(bytes.buffer, bytes.byteOffset, bytes.byteLength)\n\n/**\n * @template {unknown} T\n * @template {number} A\n * @param {UCAN.ByteView<UCAN.Signature<T, A>>} bytes\n * @returns {UCAN.SignatureView<T, A>}\n */\nexport const decode = bytes => {\n  if (!(bytes instanceof Uint8Array)) {\n    throw new TypeError(\n      `Can only decode Uint8Array into a Signature, instead got ${JSON.stringify(\n        bytes\n      )}`\n    )\n  }\n\n  /** @type {UCAN.SignatureView<T, A>} */\n  const signature = view(bytes)\n  const { code, algorithm, raw } = signature\n  return signature\n}\n\n/**\n * @template {unknown} T\n * @template {number} A\n * @param {UCAN.Signature<T, A>} signature\n * @returns {UCAN.ByteView<UCAN.Signature<T, A>>}\n */\nexport const encode = signature => decode(signature)\n\n/**\n * @template {unknown} T\n * @template {number} A\n * @template {string} [Prefix=\"u\"]\n * @param {UCAN.Signature<T, A>} signature\n * @param {UCAN.MultibaseEncoder<Prefix>} [base]\n * @returns {UCAN.ToString<UCAN.Signature<T, A>>}\n */\nexport const format = (signature, base) => (base || base64url).encode(signature)\n\n/**\n * @template {unknown} T\n * @template {number} A\n * @template {string} [Prefix=\"u\"]\n * @param {UCAN.ToString<UCAN.Signature<T, A>>} signature\n * @param {UCAN.MultibaseDecoder<Prefix>} [base]\n * @returns {UCAN.SignatureView<T, A>}\n */\nexport const parse = (signature, base) =>\n  /** @type {UCAN.SignatureView<T, A>} */ (\n    decode((base || base64url).decode(signature))\n  )\n\n/**\n * @template {UCAN.Signature} Signature\n * @param {Signature} signature\n * @returns {UCAN.SignatureJSON<Signature>}\n */\nexport const toJSON = signature => ({\n  \"/\": { bytes: base64.baseEncode(signature) },\n})\n\n/**\n * @template {unknown} T\n * @template {UCAN.SigAlg} A\n * @param {UCAN.SignatureJSON<UCAN.Signature<T, A>>} json\n * @returns {UCAN.SignatureView<T, A>}\n */\nexport const fromJSON = json => decode(base64.baseDecode(json[\"/\"].bytes))\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 645, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/schema.js"],"sourcesContent":["import * as UCAN from \"./ucan.js\"\nimport * as UTF8 from \"./utf8.js\"\nimport * as Link from \"multiformats/link\"\nimport { identity } from \"multiformats/hashes/identity\"\nimport * as DID from \"./did.js\"\nimport * as raw from \"multiformats/codecs/raw\"\nimport * as Signature from \"./signature.js\"\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {Record<string, unknown>|UCAN.Payload<C>} data\n * @returns {UCAN.Payload<C>}\n */\nexport const readPayload = data =>\n  readPayloadWith(data, {\n    readPrincipal,\n    readProof,\n  })\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {Record<string, unknown>|UCAN.Payload<C>} data\n * @returns {UCAN.Payload<C>}\n */\nexport const readJWTPayload = data =>\n  readPayloadWith(data, {\n    readPrincipal: readStringPrincipal,\n    readProof: readStringProof,\n  })\n/**\n *\n * @template {UCAN.Capabilities} C\n * @param {Record<string, unknown>|UCAN.Payload<C>} data\n * @param {object} readers\n * @param {(source:unknown, context:string) => UCAN.Principal} readers.readPrincipal\n * @param {(source:unknown, context:string) => UCAN.Link} readers.readProof\n * @returns {UCAN.Payload<C>}\n */\nconst readPayloadWith = (data, { readPrincipal, readProof }) => ({\n  iss: readPrincipal(data.iss, \"iss\"),\n  aud: readPrincipal(data.aud, \"aud\"),\n  att: readCapabilities(data.att, \"att\"),\n  prf: readOptionalArray(data.prf, readProof, \"prf\") || [],\n  exp: readNullable(data.exp === Infinity ? null : data.exp, readInt, \"exp\"),\n  nbf: readOptional(data.nbf, readInt, \"nbf\"),\n  fct: readOptionalArray(data.fct, readFact, \"fct\") || [],\n  nnc: readOptional(data.nnc, readString, \"nnc\"),\n})\n\n/**\n * @template {unknown} T\n * @template {number} A\n * @param {UCAN.ByteView<UCAN.Signature<T, A>>|unknown} source\n */\nexport const readSignature = source => {\n  if (source instanceof Uint8Array) {\n    return Signature.decode(source)\n  } else {\n    throw new TypeError(\n      `Can only decode Uint8Array into a Signature, instead got ${JSON.stringify(\n        source\n      )}`\n    )\n  }\n}\n\n/**\n * @param {unknown} input\n * @param {string} name\n * @returns {number}\n */\nexport const readInt = (input, name) =>\n  Number.isInteger(input)\n    ? /** @type {number} */ (input)\n    : ParseError.throw(\n        `Expected ${name} to be integer, instead got ${JSON.stringify(input)}`\n      )\n\n/**\n * @param {unknown} input\n * @param {string} context\n */\n\nexport const readCapability = (input, context) =>\n  readStruct(input, asCapability, context)\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {unknown|C} input\n * @param {string} context\n * @returns {C}\n */\nexport const readCapabilities = (input, context) =>\n  /** @type {C} */ (readArray(input, readCapability, context))\n\n/**\n * @template {UCAN.Capability} C\n * @param {object & {can?:unknown, with?:unknown}|C} input\n * @returns {C}\n */\nexport const asCapability = input =>\n  /** @type {C} */ ({\n    ...input,\n    can: readAbility(input.can),\n    with: readResource(input.with),\n  })\n\n/**\n * @param {unknown} input\n */\nconst readAbility = input =>\n  typeof input !== \"string\"\n    ? ParseError.throw(\n        `Capability has invalid 'can: ${JSON.stringify(\n          input\n        )}', value must be a string`\n      )\n    : input.slice(1, -1).includes(\"/\")\n    ? /** @type {UCAN.Ability} */ (input.toLocaleLowerCase())\n    : input === \"*\"\n    ? input\n    : ParseError.throw(\n        `Capability has invalid 'can: \"${input}\"', value must have at least one path segment`\n      )\n\n/**\n * @param {unknown} input\n */\nconst readResource = input =>\n  typeof input !== \"string\"\n    ? ParseError.throw(\n        `Capability has invalid 'with: ${JSON.stringify(\n          input\n        )}', value must be a string`\n      )\n    : parseURL(input) ||\n      ParseError.throw(\n        `Capability has invalid 'with: \"${input}\"', value must be a valid URI string`\n      )\n\n/**\n * @param {string} input\n */\nconst parseURL = input => {\n  try {\n    new URL(input)\n    return input\n  } catch (_) {\n    return null\n  }\n}\n/**\n * @template T\n * @param {unknown} input\n * @param {(input:unknown, context:string) => T} read\n * @param {string} context\n * @returns {T[]}\n */\nexport const readArray = (input, read, context) =>\n  Array.isArray(input)\n    ? input.map((element, n) => read(element, `${context}[${n}]`))\n    : ParseError.throw(`${context} must be an array`)\n\n/**\n * @template T\n * @param {unknown} input\n * @param {(input:unknown, context: string) => T} reader\n * @param {string} context\n * @returns {T[]|undefined}\n */\nexport const readOptionalArray = (input, reader, context) =>\n  input === undefined ? input : readArray(input, reader, context)\n\n/**\n * @template T\n * @param {unknown} input\n * @param {(input:object) => T} reader\n * @param {string} context\n * @returns {T}\n */\nexport const readStruct = (input, reader, context) =>\n  input != null && typeof input === \"object\"\n    ? reader(input)\n    : ParseError.throw(\n        `${context} must be of type object, instead got ${input}`\n      )\n\n/**\n * @param {unknown} input\n * @param {string} context\n * @returns {UCAN.Fact}\n */\nexport const readFact = (input, context) => readStruct(input, Object, context)\n\n/**\n * @param {unknown} source\n * @param {string} context\n * @returns {UCAN.Link}\n */\nexport const readProof = (source, context) =>\n  Link.isLink(source)\n    ? /** @type {UCAN.Link} */ (source)\n    : fail(\n        `Expected ${context} to be IPLD link, instead got ${JSON.stringify(\n          source\n        )}`\n      )\n\n/**\n * @param {unknown} source\n * @param {string} context\n * @returns {UCAN.Link}\n */\nexport const readStringProof = (source, context) =>\n  parseProof(readString(source, context))\n\n/**\n * @param {string} source\n * @returns {UCAN.Link}\n */\nconst parseProof = source => {\n  // First we attempt to read proof as CID, if we fail fallback to reading it as\n  // an inline proof.\n  try {\n    return Link.parse(source)\n  } catch (error) {\n    return Link.create(raw.code, identity.digest(UTF8.encode(source)))\n  }\n}\n\n/**\n * @param {unknown} input\n * @param {string} context\n */\nexport const readPrincipal = (input, context) =>\n  DID.decode(readBytes(input, context))\n\n/**\n * @param {unknown} source\n * @param {string} context\n */\nexport const readStringPrincipal = (source, context) =>\n  DID.parse(readString(source, context))\n\n/**\n * @template T\n * @param {unknown} source\n * @param {(source:unknown, context:string) => T} read\n * @param {string} [context]\n * @returns {T|undefined}\n */\nexport const readOptional = (source, read, context = \"Field\") =>\n  source !== undefined ? read(source, context) : undefined\n\n/**\n * @template T\n * @param {unknown} source\n * @param {(source:unknown, context:string) => T} read\n * @param {string} context\n * @returns {T|null}\n */\nexport const readNullable = (source, read, context) =>\n  source === null ? null : read(source, context)\n\n/**\n * @param {unknown} source\n * @param {string} [context]\n * @returns {string}\n */\nexport const readString = (source, context = \"Field\") =>\n  typeof source === \"string\"\n    ? source\n    : fail(`${context} has invalid value ${source}`)\n\n/**\n *\n * @param {unknown} source\n * @param {string} context\n * @returns {Uint8Array}\n */\nexport const readBytes = (source, context) =>\n  source instanceof Uint8Array\n    ? source\n    : fail(\n        `Expected ${context} to be Uint8Array, instead got ${JSON.stringify(\n          source\n        )}`\n      )\n\n/**\n * @param {unknown} input\n * @param {string} context\n * @returns {UCAN.Version}\n */\nexport const readVersion = (input, context) =>\n  /\\d+\\.\\d+\\.\\d+/.test(/** @type {string} */ (input))\n    ? /** @type {UCAN.Version} */ (input)\n    : ParseError.throw(`Invalid version '${context}: ${JSON.stringify(input)}'`)\n\n/**\n * @template {string|number|boolean|null} T\n * @param {unknown} input\n * @param {T} literal\n * @param {string} context\n * @returns {T}\n */\nexport const readLiteral = (input, literal, context) =>\n  input === literal\n    ? literal\n    : ParseError.throw(\n        `Expected ${context} to be a ${JSON.stringify(\n          literal\n        )} instead got ${JSON.stringify(input)}`\n      )\n\nexport class ParseError extends TypeError {\n  get name() {\n    return \"ParseError\"\n  }\n  /**\n   * @param {string} message\n   * @returns {never}\n   */\n  static throw(message) {\n    throw new this(message)\n  }\n}\n\n/**\n * @param {string} reason\n */\nexport const fail = reason => ParseError.throw(reason)\n\nexport { fail as throw }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAOO,MAAM,cAAc,CAAA,OACzB,gBAAgB,MAAM;QACpB;QACA;IACF;AAOK,MAAM,iBAAiB,CAAA,OAC5B,gBAAgB,MAAM;QACpB,eAAe;QACf,WAAW;IACb;AACF;;;;;;;;CAQC,GACD,MAAM,kBAAkB,CAAC,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,GAAK,CAAC;QAC/D,KAAK,cAAc,KAAK,GAAG,EAAE;QAC7B,KAAK,cAAc,KAAK,GAAG,EAAE;QAC7B,KAAK,iBAAiB,KAAK,GAAG,EAAE;QAChC,KAAK,kBAAkB,KAAK,GAAG,EAAE,WAAW,UAAU,EAAE;QACxD,KAAK,aAAa,KAAK,GAAG,KAAK,WAAW,OAAO,KAAK,GAAG,EAAE,SAAS;QACpE,KAAK,aAAa,KAAK,GAAG,EAAE,SAAS;QACrC,KAAK,kBAAkB,KAAK,GAAG,EAAE,UAAU,UAAU,EAAE;QACvD,KAAK,aAAa,KAAK,GAAG,EAAE,YAAY;IAC1C,CAAC;AAOM,MAAM,gBAAgB,CAAA;IAC3B,IAAI,kBAAkB,YAAY;QAChC,OAAO,sKAAgB,CAAC;IAC1B,OAAO;QACL,MAAM,IAAI,UACR,CAAC,yDAAyD,EAAE,KAAK,SAAS,CACxE,SACC;IAEP;AACF;AAOO,MAAM,UAAU,CAAC,OAAO,OAC7B,OAAO,SAAS,CAAC,SACU,QACvB,WAAW,KAAK,CACd,CAAC,SAAS,EAAE,KAAK,4BAA4B,EAAE,KAAK,SAAS,CAAC,QAAQ;AAQvE,MAAM,iBAAiB,CAAC,OAAO,UACpC,WAAW,OAAO,cAAc;AAQ3B,MAAM,mBAAmB,CAAC,OAAO,UACpB,UAAU,OAAO,gBAAgB;AAO9C,MAAM,eAAe,CAAA,QAC1B,cAAc,GAAG,CAAC;QAChB,GAAG,KAAK;QACR,KAAK,YAAY,MAAM,GAAG;QAC1B,MAAM,aAAa,MAAM,IAAI;IAC/B,CAAC;AAEH;;CAEC,GACD,MAAM,cAAc,CAAA,QAClB,OAAO,UAAU,WACb,WAAW,KAAK,CACd,CAAC,6BAA6B,EAAE,KAAK,SAAS,CAC5C,OACA,yBAAyB,CAAC,IAE9B,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,OACC,MAAM,iBAAiB,KACpD,UAAU,MACV,QACA,WAAW,KAAK,CACd,CAAC,8BAA8B,EAAE,MAAM,6CAA6C,CAAC;AAG7F;;CAEC,GACD,MAAM,eAAe,CAAA,QACnB,OAAO,UAAU,WACb,WAAW,KAAK,CACd,CAAC,8BAA8B,EAAE,KAAK,SAAS,CAC7C,OACA,yBAAyB,CAAC,IAE9B,SAAS,UACT,WAAW,KAAK,CACd,CAAC,+BAA+B,EAAE,MAAM,oCAAoC,CAAC;AAGrF;;CAEC,GACD,MAAM,WAAW,CAAA;IACf,IAAI;QACF,IAAI,IAAI;QACR,OAAO;IACT,EAAE,OAAO,GAAG;QACV,OAAO;IACT;AACF;AAQO,MAAM,YAAY,CAAC,OAAO,MAAM,UACrC,MAAM,OAAO,CAAC,SACV,MAAM,GAAG,CAAC,CAAC,SAAS,IAAM,KAAK,SAAS,GAAG,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC,KAC1D,WAAW,KAAK,CAAC,GAAG,QAAQ,iBAAiB,CAAC;AAS7C,MAAM,oBAAoB,CAAC,OAAO,QAAQ,UAC/C,UAAU,YAAY,QAAQ,UAAU,OAAO,QAAQ;AASlD,MAAM,aAAa,CAAC,OAAO,QAAQ,UACxC,SAAS,QAAQ,OAAO,UAAU,WAC9B,OAAO,SACP,WAAW,KAAK,CACd,GAAG,QAAQ,qCAAqC,EAAE,OAAO;AAQ1D,MAAM,WAAW,CAAC,OAAO,UAAY,WAAW,OAAO,QAAQ;AAO/D,MAAM,YAAY,CAAC,QAAQ,UAChC,gLAAW,CAAC,UACkB,SAC1B,KACE,CAAC,SAAS,EAAE,QAAQ,8BAA8B,EAAE,KAAK,SAAS,CAChE,SACC;AAQJ,MAAM,kBAAkB,CAAC,QAAQ,UACtC,WAAW,WAAW,QAAQ;AAEhC;;;CAGC,GACD,MAAM,aAAa,CAAA;IACjB,8EAA8E;IAC9E,mBAAmB;IACnB,IAAI;QACF,OAAO,+KAAU,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,OAAO,gLAAW,CAAC,uKAAQ,EAAE,gLAAQ,CAAC,MAAM,CAAC,iKAAW,CAAC;IAC3D;AACF;AAMO,MAAM,gBAAgB,CAAC,OAAO,UACnC,gKAAU,CAAC,UAAU,OAAO;AAMvB,MAAM,sBAAsB,CAAC,QAAQ,UAC1C,+JAAS,CAAC,WAAW,QAAQ;AASxB,MAAM,eAAe,CAAC,QAAQ,MAAM,UAAU,OAAO,GAC1D,WAAW,YAAY,KAAK,QAAQ,WAAW;AAS1C,MAAM,eAAe,CAAC,QAAQ,MAAM,UACzC,WAAW,OAAO,OAAO,KAAK,QAAQ;AAOjC,MAAM,aAAa,CAAC,QAAQ,UAAU,OAAO,GAClD,OAAO,WAAW,WACd,SACA,KAAK,GAAG,QAAQ,mBAAmB,EAAE,QAAQ;AAQ5C,MAAM,YAAY,CAAC,QAAQ,UAChC,kBAAkB,aACd,SACA,KACE,CAAC,SAAS,EAAE,QAAQ,+BAA+B,EAAE,KAAK,SAAS,CACjE,SACC;AAQJ,MAAM,cAAc,CAAC,OAAO,UACjC,gBAAgB,IAAI,CAAwB,SACX,QAC7B,WAAW,KAAK,CAAC,CAAC,iBAAiB,EAAE,QAAQ,EAAE,EAAE,KAAK,SAAS,CAAC,OAAO,CAAC,CAAC;AASxE,MAAM,cAAc,CAAC,OAAO,SAAS,UAC1C,UAAU,UACN,UACA,WAAW,KAAK,CACd,CAAC,SAAS,EAAE,QAAQ,SAAS,EAAE,KAAK,SAAS,CAC3C,SACA,aAAa,EAAE,KAAK,SAAS,CAAC,QAAQ;AAGzC,MAAM,mBAAmB;IAC9B,IAAI,OAAO;QACT,OAAO;IACT;IACA;;;GAGC,GACD,OAAO,MAAM,OAAO,EAAE;QACpB,MAAM,IAAI,IAAI,CAAC;IACjB;AACF;AAKO,MAAM,OAAO,CAAA,SAAU,WAAW,KAAK,CAAC","ignoreList":[0]}},
    {"offset": {"line": 809, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/formatter.js"],"sourcesContent":["import * as UCAN from \"./ucan.js\"\nimport * as DID from \"./did.js\"\nimport * as json from \"@ipld/dag-json\"\nimport { base64url } from \"multiformats/bases/base64\"\nimport * as Signature from \"./signature.js\"\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {UCAN.Model<C>} model\n * @returns {UCAN.JWT<C>}\n */\nexport const format = model => {\n  const header = formatHeader(model.v, model.s.algorithm)\n  const payload = formatPayload(model)\n  const signature = formatSignature(model.s)\n  return /** @type {UCAN.JWT<C>} */ (`${header}.${payload}.${signature}`)\n}\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {UCAN.Payload<C>} payload\n * @param {UCAN.Version} version\n * @param {string} alg\n */\nexport const formatSignPayload = (payload, version, alg) =>\n  `${formatHeader(version, alg)}.${formatPayload(payload)}`\n\n/**\n * @param {UCAN.Version} version\n * @param {string} alg\n */\nexport const formatHeader = (version, alg) =>\n  base64url.baseEncode(encodeHeader(version, alg))\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {UCAN.Payload<C>} data\n */\nexport const formatPayload = data => base64url.baseEncode(encodePayload(data))\n\n/**\n * @param {UCAN.Signature<string>} signature\n */\nexport const formatSignature = signature => base64url.baseEncode(signature.raw)\n\n/**\n * @param {UCAN.Version} v\n * @param {string} alg\n * @returns {UCAN.ByteView<UCAN.JWTHeader>}\n */\nconst encodeHeader = (v, alg) =>\n  json.encode({\n    alg,\n    ucv: v,\n    typ: \"JWT\",\n  })\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {UCAN.Payload<C>} data\n * @returns {UCAN.ByteView<UCAN.JWTPayload<C>>}\n */\nconst encodePayload = data =>\n  json.encode({\n    iss: DID.format(data.iss),\n    aud: DID.format(data.aud),\n    att: data.att,\n    exp: data.exp,\n    prf: data.prf.map(encodeProof),\n    // leave out optionals and empty fields\n    ...(data.fct.length > 0 && { fct: data.fct }),\n    ...(data.nnc && { nnc: data.nnc }),\n    ...(data.nbf && { nbf: data.nbf }),\n  })\n\n/**\n * @param {UCAN.Link} proof\n * @returns {UCAN.ToString<UCAN.Link>}\n */\nconst encodeProof = proof =>\n  /** @type {UCAN.ToString<UCAN.Link>} */ (proof.toString())\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAOO,MAAM,SAAS,CAAA;IACpB,MAAM,SAAS,aAAa,MAAM,CAAC,EAAE,MAAM,CAAC,CAAC,SAAS;IACtD,MAAM,UAAU,cAAc;IAC9B,MAAM,YAAY,gBAAgB,MAAM,CAAC;IACzC,OAAmC,GAAG,OAAO,CAAC,EAAE,QAAQ,CAAC,EAAE,WAAW;AACxE;AAQO,MAAM,oBAAoB,CAAC,SAAS,SAAS,MAClD,GAAG,aAAa,SAAS,KAAK,CAAC,EAAE,cAAc,UAAU;AAMpD,MAAM,eAAe,CAAC,SAAS,MACpC,8KAAS,CAAC,UAAU,CAAC,aAAa,SAAS;AAMtC,MAAM,gBAAgB,CAAA,OAAQ,8KAAS,CAAC,UAAU,CAAC,cAAc;AAKjE,MAAM,kBAAkB,CAAA,YAAa,8KAAS,CAAC,UAAU,CAAC,UAAU,GAAG;AAE9E;;;;CAIC,GACD,MAAM,eAAe,CAAC,GAAG,MACvB,kKAAW,CAAC;QACV;QACA,KAAK;QACL,KAAK;IACP;AAEF;;;;CAIC,GACD,MAAM,gBAAgB,CAAA,OACpB,kKAAW,CAAC;QACV,KAAK,gKAAU,CAAC,KAAK,GAAG;QACxB,KAAK,gKAAU,CAAC,KAAK,GAAG;QACxB,KAAK,KAAK,GAAG;QACb,KAAK,KAAK,GAAG;QACb,KAAK,KAAK,GAAG,CAAC,GAAG,CAAC;QAClB,uCAAuC;QACvC,GAAI,KAAK,GAAG,CAAC,MAAM,GAAG,KAAK;YAAE,KAAK,KAAK,GAAG;QAAC,CAAC;QAC5C,GAAI,KAAK,GAAG,IAAI;YAAE,KAAK,KAAK,GAAG;QAAC,CAAC;QACjC,GAAI,KAAK,GAAG,IAAI;YAAE,KAAK,KAAK,GAAG;QAAC,CAAC;IACnC;AAEF;;;CAGC,GACD,MAAM,cAAc,CAAA,QACuB,MAAM,QAAQ","ignoreList":[0]}},
    {"offset": {"line": 879, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/view.js"],"sourcesContent":["import * as UCAN from \"./ucan.js\"\nimport * as DID from \"./did.js\"\nimport { encode as encodeJSON } from \"@ipld/dag-json\"\nimport { decode as decodeUTF8 } from \"./utf8.js\"\n\n/**\n * @param {unknown} data\n */\nconst toJSON = data => JSON.parse(decodeUTF8(encodeJSON(data)))\n\n/**\n * @template {UCAN.Capabilities} C\n */\nexport class View {\n  /**\n   * @param {UCAN.UCAN<C>} model\n   */\n  constructor(model) {\n    /** @readonly */\n    this.model = model\n  }\n\n  get version() {\n    return this.model.v\n  }\n\n  get issuer() {\n    return DID.from(this.model.iss)\n  }\n\n  get audience() {\n    return DID.from(this.model.aud)\n  }\n\n  /**\n   * @returns {C}\n   */\n  get capabilities() {\n    return this.model.att\n  }\n\n  /**\n   * @returns {number}\n   */\n  get expiration() {\n    const { exp } = this.model\n    return exp === null ? Infinity : exp\n  }\n\n  /**\n   * @returns {undefined|number}\n   */\n  get notBefore() {\n    return this.model.nbf\n  }\n\n  /**\n   * @returns {undefined|string}\n   */\n\n  get nonce() {\n    return this.model.nnc\n  }\n\n  /**\n   * @returns {UCAN.Fact[]}\n   */\n  get facts() {\n    return this.model.fct\n  }\n\n  /**\n   * @returns {UCAN.Link[]}\n   */\n\n  get proofs() {\n    return this.model.prf\n  }\n\n  get signature() {\n    return this.model.s\n  }\n\n  // compatibility with UCAN.UCAN\n  get jwt() {\n    return this.model.jwt\n  }\n  get s() {\n    return this.model.s\n  }\n  get v() {\n    return this.model.v\n  }\n  get iss() {\n    return this.model.iss\n  }\n  get aud() {\n    return this.model.aud\n  }\n  get att() {\n    return this.model.att\n  }\n  get exp() {\n    return this.model.exp\n  }\n  get nbf() {\n    return this.model.nbf\n  }\n  get nnc() {\n    return this.model.nnc\n  }\n  get fct() {\n    return this.model.fct\n  }\n  get prf() {\n    return this.model.prf\n  }\n\n  /**\n   * @returns {UCAN.ToJSON<UCAN.UCAN<C>, UCAN.UCANJSON<this>>}\n   */\n  toJSON() {\n    const { v, iss, aud, s, att, prf, exp, fct, nnc, nbf } = this.model\n\n    return {\n      iss,\n      aud,\n      v,\n      s,\n      exp,\n      ...toJSON({\n        att,\n        prf,\n        ...(fct.length > 0 && { fct }),\n      }),\n      ...(nnc != null && { nnc }),\n      ...(nbf && { nbf }),\n    }\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEA;;CAEC,GACD,MAAM,SAAS,CAAA,OAAQ,KAAK,KAAK,CAAC,IAAA,iKAAU,EAAC,IAAA,kKAAU,EAAC;AAKjD,MAAM;IACX;;GAEC,GACD,YAAY,KAAK,CAAE;QACjB,cAAc,GACd,IAAI,CAAC,KAAK,GAAG;IACf;IAEA,IAAI,UAAU;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;IACrB;IAEA,IAAI,SAAS;QACX,OAAO,8JAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG;IAChC;IAEA,IAAI,WAAW;QACb,OAAO,8JAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG;IAChC;IAEA;;GAEC,GACD,IAAI,eAAe;QACjB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IAEA;;GAEC,GACD,IAAI,aAAa;QACf,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,KAAK;QAC1B,OAAO,QAAQ,OAAO,WAAW;IACnC;IAEA;;GAEC,GACD,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IAEA;;GAEC,GAED,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IAEA;;GAEC,GACD,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IAEA;;GAEC,GAED,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IAEA,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;IACrB;IAEA,+BAA+B;IAC/B,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IACA,IAAI,IAAI;QACN,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;IACrB;IACA,IAAI,IAAI;QACN,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;IACrB;IACA,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IACA,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IACA,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IACA,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IACA,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IACA,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IACA,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IACA,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG;IACvB;IAEA;;GAEC,GACD,SAAS;QACP,MAAM,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,KAAK;QAEnE,OAAO;YACL;YACA;YACA;YACA;YACA;YACA,GAAG,OAAO;gBACR;gBACA;gBACA,GAAI,IAAI,MAAM,GAAG,KAAK;oBAAE;gBAAI,CAAC;YAC/B,EAAE;YACF,GAAI,OAAO,QAAQ;gBAAE;YAAI,CAAC;YAC1B,GAAI,OAAO;gBAAE;YAAI,CAAC;QACpB;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 1007, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/codec/cbor.js"],"sourcesContent":["import * as UCAN from \"../ucan.js\"\nimport * as CBOR from \"@ipld/dag-cbor\"\nimport { readPayload, readVersion, readSignature } from \"../schema.js\"\nimport { format } from \"../formatter.js\"\nimport * as Signature from \"../signature.js\"\nimport { View } from \"../view.js\"\n\nexport const name = \"dag-ucan\"\nexport const code = CBOR.code\n\n/**\n * Creates a UCAN view from the underlying data model. Please note that this\n * function does no verification of the model and it is callers responsibility\n * to ensure that:\n *\n * 1. Data model is correct contains all the field etc...\n * 2. Payload of the signature will match paylodad when model is serialized\n *    with DAG-JSON.\n *\n * In other words you should never use this function unless you've parsed or\n * decoded a valid UCAN and want to wrap it into a view.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.FromModel<C>} model\n * @returns {UCAN.View<C>}\n */\nexport const from = model => new CBORView(model)\n\n/**\n * Encodes given UCAN (in either IPLD or JWT representation) and encodes it into\n * corresponding bytes representation. UCAN in IPLD representation is encoded as\n * DAG-CBOR which JWT representation is encoded as raw bytes of JWT string.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.Model<C>} model\n * @returns {UCAN.ByteView<UCAN.Model<C>>}\n */\nexport const encode = model => {\n  const { fct, nnc, nbf, ...payload } = readPayload(model)\n\n  return /** @type {Uint8Array} */ (\n    CBOR.encode({\n      // leave out optionals unless they are set\n      ...(fct.length > 0 && { fct }),\n      ...(nnc != null && { nnc }),\n      ...(nbf && { nbf }),\n      ...payload,\n      // add version and signature\n      v: readVersion(model.v, \"v\"),\n      s: encodeSignature(model.s, \"s\"),\n    })\n  )\n}\n\n/**\n * @param {UCAN.Signature} signature\n * @param {string} context\n */\nconst encodeSignature = (signature, context) => {\n  try {\n    return Signature.encode(signature)\n  } catch (cause) {\n    throw new Error(\n      `Expected signature ${context}, instead got ${JSON.stringify(signature)}`,\n      // @ts-expect-error - types don't know about second arg\n      { cause }\n    )\n  }\n}\n\n/**\n * Decodes UCAN in primary CBOR representation. It does not validate UCAN, it's\n * signature or proof chain. This is to say decoded UCAN may be invalid.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.ByteView<UCAN.Model<C>>} bytes\n * @returns {UCAN.View<C>}\n */\nexport const decode = bytes => {\n  const model = CBOR.decode(bytes)\n  return new CBORView({\n    ...readPayload(model),\n    v: readVersion(model.v, \"v\"),\n    s: readSignature(model.s),\n  })\n}\n\nexport { format }\n\n/**\n * @template {UCAN.Capabilities} C\n * @extends {View<C>}\n */\nclass CBORView extends View {\n  /** @type {UCAN.MulticodecCode<typeof code, \"CBOR\">} */\n  get code() {\n    return code\n  }\n  format() {\n    return format(this.model)\n  }\n  encode() {\n    return encode(this.model)\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,OAAO;AACb,MAAM,OAAO,gKAAS;AAkBtB,MAAM,OAAO,CAAA,QAAS,IAAI,SAAS;AAWnC,MAAM,SAAS,CAAA;IACpB,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,SAAS,GAAG,IAAA,wKAAW,EAAC;IAElD,OACE,kKAAW,CAAC;QACV,0CAA0C;QAC1C,GAAI,IAAI,MAAM,GAAG,KAAK;YAAE;QAAI,CAAC;QAC7B,GAAI,OAAO,QAAQ;YAAE;QAAI,CAAC;QAC1B,GAAI,OAAO;YAAE;QAAI,CAAC;QAClB,GAAG,OAAO;QACV,4BAA4B;QAC5B,GAAG,IAAA,wKAAW,EAAC,MAAM,CAAC,EAAE;QACxB,GAAG,gBAAgB,MAAM,CAAC,EAAE;IAC9B;AAEJ;AAEA;;;CAGC,GACD,MAAM,kBAAkB,CAAC,WAAW;IAClC,IAAI;QACF,OAAO,sKAAgB,CAAC;IAC1B,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MACR,CAAC,mBAAmB,EAAE,QAAQ,cAAc,EAAE,KAAK,SAAS,CAAC,YAAY,EACzE,uDAAuD;QACvD;YAAE;QAAM;IAEZ;AACF;AAUO,MAAM,SAAS,CAAA;IACpB,MAAM,QAAQ,kKAAW,CAAC;IAC1B,OAAO,IAAI,SAAS;QAClB,GAAG,IAAA,wKAAW,EAAC,MAAM;QACrB,GAAG,IAAA,wKAAW,EAAC,MAAM,CAAC,EAAE;QACxB,GAAG,IAAA,0KAAa,EAAC,MAAM,CAAC;IAC1B;AACF;;AAIA;;;CAGC,GACD,MAAM,iBAAiB,+JAAI;IACzB,qDAAqD,GACrD,IAAI,OAAO;QACT,OAAO;IACT;IACA,SAAS;QACP,OAAO,IAAA,sKAAM,EAAC,IAAI,CAAC,KAAK;IAC1B;IACA,SAAS;QACP,OAAO,OAAO,IAAI,CAAC,KAAK;IAC1B;AACF","ignoreList":[0]}},
    {"offset": {"line": 1093, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/parser.js"],"sourcesContent":["import * as UCAN from \"./ucan.js\"\nimport * as json from \"@ipld/dag-json\"\nimport * as Schema from \"./schema.js\"\nimport { base64url } from \"multiformats/bases/base64\"\nimport { createNamed as createSignature } from \"./signature.js\"\n\n/**\n * Parse JWT formatted UCAN. Note than no validation takes place here.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.JWT<C>|string} jwt\n * @returns {UCAN.Model<C>}\n */\nexport const parse = jwt => {\n  const segments = jwt.split(\".\")\n  const [header, payload, signature] =\n    segments.length === 3\n      ? segments\n      : Schema.throw(\n          `Can't parse UCAN: ${jwt}: Expected JWT format: 3 dot-separated base64url-encoded values.`\n        )\n\n  const { ucv, alg } = parseHeader(header)\n\n  return {\n    ...parsePayload(payload),\n    v: ucv,\n    s: createSignature(alg, base64url.baseDecode(signature)),\n  }\n}\n\n/**\n * @param {string} header\n */\nexport const parseHeader = header => {\n  const { ucv, alg, typ } = json.decode(base64url.baseDecode(header))\n\n  return {\n    typ: Schema.readLiteral(typ, \"JWT\", \"typ\"),\n    ucv: Schema.readVersion(ucv, \"ucv\"),\n    alg: Schema.readString(alg, \"alg\"),\n  }\n}\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {string} source\n * @returns {UCAN.Payload<C>}\n */\nexport const parsePayload = source => {\n  /** @type {Record<string, unknown>} */\n  const payload = json.decode(base64url.baseDecode(source))\n  return Schema.readJWTPayload(payload)\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AASO,MAAM,QAAQ,CAAA;IACnB,MAAM,WAAW,IAAI,KAAK,CAAC;IAC3B,MAAM,CAAC,QAAQ,SAAS,UAAU,GAChC,SAAS,MAAM,KAAK,IAChB,WACA,kKAAY,CACV,CAAC,kBAAkB,EAAE,IAAI,gEAAgE,CAAC;IAGlG,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,YAAY;IAEjC,OAAO;QACL,GAAG,aAAa,QAAQ;QACxB,GAAG;QACH,GAAG,IAAA,2KAAe,EAAC,KAAK,8KAAS,CAAC,UAAU,CAAC;IAC/C;AACF;AAKO,MAAM,cAAc,CAAA;IACzB,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,kKAAW,CAAC,8KAAS,CAAC,UAAU,CAAC;IAE3D,OAAO;QACL,KAAK,wKAAkB,CAAC,KAAK,OAAO;QACpC,KAAK,wKAAkB,CAAC,KAAK;QAC7B,KAAK,uKAAiB,CAAC,KAAK;IAC9B;AACF;AAOO,MAAM,eAAe,CAAA;IAC1B,oCAAoC,GACpC,MAAM,UAAU,kKAAW,CAAC,8KAAS,CAAC,UAAU,CAAC;IACjD,OAAO,2KAAqB,CAAC;AAC/B","ignoreList":[0]}},
    {"offset": {"line": 1137, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/codec/jwt.js"],"sourcesContent":["import * as UCAN from \"../ucan.js\"\nimport * as UTF8 from \"../utf8.js\"\nimport { parse } from \"../parser.js\"\nimport { code } from \"multiformats/codecs/raw\"\nimport { View } from \"../view.js\"\n\nexport { code }\nexport const name = \"dag-ucan\"\n\n/**\n * Creates a UCAN view from the underlying data model. Please note that this\n * function does no verification of the model and it is callers responsibility\n * to ensure that:\n *\n * 1. Data model is correct contains all the field etc...\n * 2. Payload of the signature will match paylodad when model is serialized\n *    with DAG-JSON.\n *\n * In other words you should never use this function unless you've parsed or\n * decoded a valid UCAN and want to wrap it into a view.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.FromJWT<C>} model\n * @returns {UCAN.View<C>}\n */\nexport const from = model => new JWTView(model)\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {UCAN.ByteView<UCAN.FromJWT<C>>} bytes\n * @returns {UCAN.View<C>}\n */\nexport const decode = bytes => {\n  const jwt = /** @type {UCAN.JWT<C>} */ (UTF8.decode(bytes))\n\n  return new JWTView({ ...parse(jwt), jwt })\n}\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {UCAN.FromJWT<C>} model\n * @returns {UCAN.ByteView<UCAN.UCAN<C>>}\n */\nexport const encode = ({ jwt }) => UTF8.encode(jwt)\n\n/**\n * @template {UCAN.Capabilities} C\n * @param {UCAN.FromJWT<C>} model\n * @returns {UCAN.JWT<C>}\n */\nexport const format = ({ jwt }) => jwt\n\n/**\n * @template {UCAN.Capabilities} C\n * @extends {View<C>}\n */\nclass JWTView extends View {\n  /**\n   * @param {UCAN.FromJWT<C>} model\n   */\n  constructor(model) {\n    super(model)\n    this.model = model\n  }\n  /** @type {UCAN.MulticodecCode<typeof code, \"Raw\">} */\n  get code() {\n    return code\n  }\n  format() {\n    return format(this.model)\n  }\n  encode() {\n    return encode(this.model)\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAGO,MAAM,OAAO;AAkBb,MAAM,OAAO,CAAA,QAAS,IAAI,QAAQ;AAOlC,MAAM,SAAS,CAAA;IACpB,MAAM,MAAkC,iKAAW,CAAC;IAEpD,OAAO,IAAI,QAAQ;QAAE,GAAG,IAAA,kKAAK,EAAC,IAAI;QAAE;IAAI;AAC1C;AAOO,MAAM,SAAS,CAAC,EAAE,GAAG,EAAE,GAAK,iKAAW,CAAC;AAOxC,MAAM,SAAS,CAAC,EAAE,GAAG,EAAE,GAAK;AAEnC;;;CAGC,GACD,MAAM,gBAAgB,+JAAI;IACxB;;GAEC,GACD,YAAY,KAAK,CAAE;QACjB,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;IACf;IACA,oDAAoD,GACpD,IAAI,OAAO;QACT,OAAO,uKAAI;IACb;IACA,SAAS;QACP,OAAO,OAAO,IAAI,CAAC,KAAK;IAC1B;IACA,SAAS;QACP,OAAO,OAAO,IAAI,CAAC,KAAK;IAC1B;AACF","ignoreList":[0]}},
    {"offset": {"line": 1195, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-ucan/src/lib.js"],"sourcesContent":["import * as UCAN from \"./ucan.js\"\nimport * as CBOR from \"./codec/cbor.js\"\nimport * as JWT from \"./codec/jwt.js\"\nimport * as UTF8 from \"./utf8.js\"\nimport { readPayload } from \"./schema.js\"\nimport { parse as parseDID } from \"./did.js\"\nimport { parse as parseJWT } from \"./parser.js\"\nimport { formatSignPayload } from \"./formatter.js\"\nimport { sha256 } from \"multiformats/hashes/sha2\"\nimport { create as createLink } from \"multiformats/link\"\nimport { format as formatDID } from \"./did.js\"\n\nexport * from \"./ucan.js\"\n\nexport const VERSION = \"0.9.1\"\nexport const name = \"dag-ucan\"\nexport const code = /** @type {UCAN.Code} */ (CBOR.code)\n\n/**\n * We cast sha256 to workaround typescripts limited inference problem when using\n * sha256 as default. If hasher is omitted type `A` should match sha256.code\n * but TS fails to deduce that.\n * @type {UCAN.MultihashHasher<any>}\n */\nconst defaultHasher = sha256\n\n/**\n * Encodes given UCAN (in either IPLD or JWT representation) and encodes it into\n * corresponding bytes representation. UCAN in IPLD representation is encoded as\n * DAG-CBOR which JWT representation is encoded as raw bytes of JWT string.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.UCAN<C>} ucan\n * @returns {UCAN.ByteView<UCAN.UCAN<C>>}\n */\nexport const encode = ucan => (ucan.jwt ? JWT.encode(ucan) : CBOR.encode(ucan))\n\n/**\n * Decodes binary encoded UCAN. It assumes UCAN is in primary IPLD\n * representation and attempts to decode it with DAG-CBOR, if that\n * fails it falls back to secondary representation and parses it as\n * a JWT.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.ByteView<UCAN.UCAN<C>>} bytes\n * @returns {UCAN.View<C>}\n */\nexport const decode = bytes => {\n  try {\n    return CBOR.decode(bytes)\n  } catch (_) {\n    return JWT.decode(/** @type {UCAN.ByteView<UCAN.FromJWT<C>>} */ (bytes))\n  }\n}\n\n/**\n * Convenience function to create a CID for the given UCAN. If UCAN is\n * in JWT representation get CID with RAW multicodec, while UCANs in IPLD\n * representation get UCAN multicodec code.\n *\n * @template {UCAN.Capabilities} C\n * @template {number} [A=typeof sha256.code] - Multihash code\n * @param {UCAN.View<C>} ucan\n * @param {{hasher?: UCAN.MultihashHasher<A>}} [options]\n */\nexport const link = async (ucan, options) => {\n  const { cid } = await write(ucan, options)\n  return cid\n}\n\n/**\n * @template {UCAN.Capabilities} C\n * @template {number} [A=typeof sha256.code] - Multihash code\n * @param {UCAN.UCAN<C>} ucan\n * @param {{hasher?: UCAN.MultihashHasher<A>}} options\n * @returns {Promise<UCAN.Block<C, UCAN.Code, A>>}\n */\nexport const write = async (ucan, { hasher = defaultHasher } = {}) => {\n  const [code, bytes] = ucan.jwt\n    ? [/** @type {UCAN.Code} */ (JWT.code), JWT.encode(ucan)]\n    : [/** @type {UCAN.Code} */ (CBOR.code), CBOR.encode(ucan)]\n  const digest = await hasher.digest(bytes)\n\n  return {\n    bytes,\n    cid: createLink(code, digest),\n    data: ucan,\n  }\n}\n\n/**\n * Parses UCAN formatted as JWT string. Returns UCAN view in IPLD representation\n * when serializing it back would produce original string, otherwise returns UCAN\n * view in secondary JWT representation which is not as compact, but it retains\n * key order and whitespaces so it could be formatted back to same JWT string.\n * View will have `type` field with either `\"IPLD\"` or `\"JWT\"` value telling\n * in which representation UCAN is.\n *\n * Note: Parsing does not perform validation of capabilities or semantics of the\n * UCAN, it only ensures structure is spec compliant and throws `ParseError`\n * if it is not.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.JWT<C>|string} jwt\n * @returns {UCAN.View<C>}\n */\nexport const parse = jwt => {\n  const model = parseJWT(jwt)\n\n  // If formatting UCAN produces same jwt string we can use IPLD representation\n  // otherwise we need to fallback to raw representation. This decision will\n  // affect how we `encode` the UCAN.\n  return CBOR.format(model) === jwt\n    ? CBOR.from(model)\n    : JWT.from({ ...model, jwt: /** @type {UCAN.JWT<C>} */ (jwt) })\n}\n\n/**\n * Takes UCAN object and formats it into JWT string.\n *\n * @template {UCAN.Capabilities} C\n * @param {UCAN.UCAN<C>} ucan\n * @returns {UCAN.JWT<C>}\n */\nexport const format = ucan => (ucan.jwt ? JWT.format(ucan) : CBOR.format(ucan))\n\n/**\n * Creates a new signed token with a given `options.issuer`. If expiration is\n * not set it defaults to 30 seconds from now. Returns UCAN in primary - IPLD\n * representation.\n *\n * @template {number} A\n * @template {UCAN.Capabilities} C\n * @param {UCAN.UCANOptions<C, A>} options\n * @returns {Promise<UCAN.View<C>>}\n */\nexport const issue = async ({\n  issuer,\n  audience,\n  capabilities,\n  lifetimeInSeconds = 30,\n  expiration = now() + lifetimeInSeconds,\n  notBefore,\n  facts = [],\n  proofs = [],\n  nonce,\n}) => {\n  const v = VERSION\n  const data = readPayload({\n    iss: parseDID(issuer.did()),\n    aud: parseDID(audience.did()),\n    att: capabilities,\n    fct: facts,\n    exp: expiration,\n    nbf: notBefore,\n    prf: proofs,\n    nnc: nonce,\n  })\n  const payload = encodeSignaturePayload(data, v, issuer.signatureAlgorithm)\n\n  return CBOR.from({\n    ...data,\n    v,\n    s: await issuer.sign(payload),\n  })\n}\n\n/**\n *\n * @param {UCAN.Payload} payload\n * @param {UCAN.Version} version\n * @param {string} algorithm\n * @returns\n */\nconst encodeSignaturePayload = (payload, version, algorithm) =>\n  UTF8.encode(formatSignPayload(payload, version, algorithm))\n\n/**\n * Verifies UCAN signature.\n *\n * @param {UCAN.View} ucan\n * @param {UCAN.Verifier} verifier\n */\nexport const verifySignature = (ucan, verifier) =>\n  formatDID(ucan.issuer) === verifier.did() &&\n  verifier.verify(\n    encodeSignaturePayload(ucan.model, ucan.model.v, ucan.signature.algorithm),\n    ucan.signature\n  )\n\n/**\n * Check if a UCAN is expired.\n *\n * @param {UCAN.View} ucan\n */\nexport const isExpired = ucan => ucan.expiration <= now()\n\n/**\n * Check if a UCAN is not active yet.\n * @param {UCAN.View} ucan\n */\nexport const isTooEarly = ucan =>\n  ucan.notBefore != null && now() <= ucan.notBefore\n\n/**\n * Returns UTC Unix timestamp for comparing it against time window of the UCAN.\n */\nexport const now = () => Math.floor(Date.now() / 1000)\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;;AAKO,MAAM,UAAU;AAChB,MAAM,OAAO;AACb,MAAM,OAAiC,wLAAS;AAEvD;;;;;CAKC,GACD,MAAM,gBAAgB,qLAAM;AAWrB,MAAM,SAAS,CAAA,OAAS,KAAK,GAAG,GAAG,yLAAU,CAAC,QAAQ,0LAAW,CAAC;AAYlE,MAAM,SAAS,CAAA;IACpB,IAAI;QACF,OAAO,0LAAW,CAAC;IACrB,EAAE,OAAO,GAAG;QACV,OAAO,yLAAU,CAAgD;IACnE;AACF;AAYO,MAAM,OAAO,OAAO,MAAM;IAC/B,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,MAAM,MAAM;IAClC,OAAO;AACT;AASO,MAAM,QAAQ,OAAO,MAAM,EAAE,SAAS,aAAa,EAAE,GAAG,CAAC,CAAC;IAC/D,MAAM,CAAC,MAAM,MAAM,GAAG,KAAK,GAAG,GAC1B;QAA2B,uKAAQ;QAAG,yLAAU,CAAC;KAAM,GACvD;QAA2B,wLAAS;QAAG,0LAAW,CAAC;KAAM;IAC7D,MAAM,SAAS,MAAM,OAAO,MAAM,CAAC;IAEnC,OAAO;QACL;QACA,KAAK,IAAA,gLAAU,EAAC,MAAM;QACtB,MAAM;IACR;AACF;AAkBO,MAAM,QAAQ,CAAA;IACnB,MAAM,QAAQ,IAAA,kKAAQ,EAAC;IAEvB,6EAA6E;IAC7E,0EAA0E;IAC1E,mCAAmC;IACnC,OAAO,sKAAW,CAAC,WAAW,MAC1B,wLAAS,CAAC,SACV,uLAAQ,CAAC;QAAE,GAAG,KAAK;QAAE,KAAiC;IAAK;AACjE;AASO,MAAM,SAAS,CAAA,OAAS,KAAK,GAAG,GAAG,yLAAU,CAAC,QAAQ,sKAAW,CAAC;AAYlE,MAAM,QAAQ,OAAO,EAC1B,MAAM,EACN,QAAQ,EACR,YAAY,EACZ,oBAAoB,EAAE,EACtB,aAAa,QAAQ,iBAAiB,EACtC,SAAS,EACT,QAAQ,EAAE,EACV,SAAS,EAAE,EACX,KAAK,EACN;IACC,MAAM,IAAI;IACV,MAAM,OAAO,IAAA,wKAAW,EAAC;QACvB,KAAK,IAAA,+JAAQ,EAAC,OAAO,GAAG;QACxB,KAAK,IAAA,+JAAQ,EAAC,SAAS,GAAG;QAC1B,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;IACP;IACA,MAAM,UAAU,uBAAuB,MAAM,GAAG,OAAO,kBAAkB;IAEzE,OAAO,wLAAS,CAAC;QACf,GAAG,IAAI;QACP;QACA,GAAG,MAAM,OAAO,IAAI,CAAC;IACvB;AACF;AAEA;;;;;;CAMC,GACD,MAAM,yBAAyB,CAAC,SAAS,SAAS,YAChD,iKAAW,CAAC,IAAA,iLAAiB,EAAC,SAAS,SAAS;AAQ3C,MAAM,kBAAkB,CAAC,MAAM,WACpC,IAAA,gKAAS,EAAC,KAAK,MAAM,MAAM,SAAS,GAAG,MACvC,SAAS,MAAM,CACb,uBAAuB,KAAK,KAAK,EAAE,KAAK,KAAK,CAAC,CAAC,EAAE,KAAK,SAAS,CAAC,SAAS,GACzE,KAAK,SAAS;AAQX,MAAM,YAAY,CAAA,OAAQ,KAAK,UAAU,IAAI;AAM7C,MAAM,aAAa,CAAA,OACxB,KAAK,SAAS,IAAI,QAAQ,SAAS,KAAK,SAAS;AAK5C,MAAM,MAAM,IAAM,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK","ignoreList":[0]}},
    {"offset": {"line": 1392, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bytes.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bytes.ts"],"sourcesContent":["export const empty = new Uint8Array(0)\n\nexport function toHex (d: Uint8Array): string {\n  return d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n}\n\nexport function fromHex (hex: string): Uint8Array {\n  const hexes = hex.match(/../g)\n  return hexes != null ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\nexport function equals (aa: Uint8Array, bb: Uint8Array): boolean {\n  if (aa === bb) { return true }\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nexport function coerce (o: ArrayBufferView | ArrayBuffer | Uint8Array): Uint8Array {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') { return o }\n  if (o instanceof ArrayBuffer) { return new Uint8Array(o) }\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\nexport function isBinary (o: unknown): o is ArrayBuffer | ArrayBufferView {\n  return o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n}\n\nexport function fromString (str: string): Uint8Array {\n  return new TextEncoder().encode(str)\n}\n\nexport function toString (b: Uint8Array): string {\n  return new TextDecoder().decode(b)\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAO,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAA;AAEhC,SAAU,KAAK,CAAE,CAAa;IAClC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAG,CAAD,EAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,CAAA;AAC9E,CAAC;AAEK,SAAU,OAAO,CAAE,GAAW;IAClC,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;IAC9B,OAAO,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,KAAK,CAAC,GAAG,EAAC,CAAC,CAAC,EAAE,AAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAA;AAChF,CAAC;AAEK,SAAU,MAAM,CAAE,EAAc,EAAE,EAAc;IACpD,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC;QAAC,OAAO,IAAI,CAAA;IAAC,CAAC;IAC9B,IAAI,EAAE,CAAC,UAAU,KAAK,EAAE,CAAC,UAAU,EAAE,CAAC;QACpC,OAAO,KAAK,CAAA;IACd,CAAC;IAED,IAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,UAAU,EAAE,EAAE,EAAE,CAAE,CAAC;QAC1C,IAAI,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;YACtB,OAAO,KAAK,CAAA;QACd,CAAC;IACH,CAAC;IAED,OAAO,IAAI,CAAA;AACb,CAAC;AAEK,SAAU,MAAM,CAAE,CAA6C;IACnE,IAAI,CAAC,YAAY,UAAU,IAAI,CAAC,CAAC,WAAW,CAAC,IAAI,KAAK,YAAY,EAAE,CAAC;QAAC,OAAO,CAAC,CAAA;IAAC,CAAC;IAChF,IAAI,CAAC,YAAY,WAAW,EAAE,CAAC;QAAC,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC,CAAA;IAAC,CAAC;IAC1D,IAAI,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;QAC1B,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,UAAU,EAAE,CAAC,CAAC,UAAU,CAAC,CAAA;IAC7D,CAAC;IACD,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAA;AACtD,CAAC;AAEK,SAAU,QAAQ,CAAE,CAAU;IAClC,OAAO,CAAC,YAAY,WAAW,IAAI,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AAC1D,CAAC;AAEK,SAAU,UAAU,CAAE,GAAW;IACrC,OAAO,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;AACtC,CAAC;AAEK,SAAU,QAAQ,CAAE,CAAa;IACrC,OAAO,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AACpC,CAAC"}},
    {"offset": {"line": 1457, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/vendor/base-x.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/vendor/base-x.js"],"sourcesContent":["/* eslint-disable */\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\n/**\n * @param {string} ALPHABET\n * @param {any} name\n */\nfunction base (ALPHABET, name) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET.length;\n  var LEADER = ALPHABET.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up\n  /**\n   * @param {any[] | Iterable<number>} source\n   */\n  function encode (source) {\n    // @ts-ignore\n    if (source instanceof Uint8Array) ; else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;\n    var b58 = new Uint8Array(size);\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0;\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0;\n        b58[it1] = (carry % BASE) >>> 0;\n        carry = (carry / BASE) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      pbegin++;\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]); }\n    return str\n  }\n  /**\n   * @param {string | string[]} source\n   */\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0;\n        // Skip leading spaces.\n    if (source[psz] === ' ') { return }\n        // Skip and count leading '1's.\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size);\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0;\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0;\n        b256[it3] = (carry % 256) >>> 0;\n        carry = (carry / 256) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      psz++;\n    }\n        // Skip trailing spaces.\n    if (source[psz] === ' ') { return }\n        // Skip leading zeroes in b256.\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = new Uint8Array(zeroes + (size - it4));\n    var j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch\n  }\n  /**\n   * @param {string | string[]} string\n   */\n  function decode (string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) { return buffer }\n    throw new Error(`Non-${name} character`)\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nvar src = base;\n\nvar _brrp__multiformats_scope_baseX = src;\n\nexport default _brrp__multiformats_scope_baseX;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1628, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base.ts"],"sourcesContent":["import { coerce } from '../bytes.js'\nimport basex from '../vendor/base-x.js'\nimport type { BaseCodec, BaseDecoder, BaseEncoder, CombobaseDecoder, Multibase, MultibaseCodec, MultibaseDecoder, MultibaseEncoder, UnibaseDecoder } from './interface.js'\n\ninterface EncodeFn { (bytes: Uint8Array): string }\ninterface DecodeFn { (text: string): Uint8Array }\n\n/**\n * Class represents both BaseEncoder and MultibaseEncoder meaning it\n * can be used to encode to multibase or base encode without multibase\n * prefix.\n */\nclass Encoder<Base extends string, Prefix extends string> implements MultibaseEncoder<Prefix>, BaseEncoder {\n  readonly name: Base\n  readonly prefix: Prefix\n  readonly baseEncode: EncodeFn\n\n  constructor (name: Base, prefix: Prefix, baseEncode: EncodeFn) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n  }\n\n  encode (bytes: Uint8Array): Multibase<Prefix> {\n    if (bytes instanceof Uint8Array) {\n      return `${this.prefix}${this.baseEncode(bytes)}`\n    } else {\n      throw Error('Unknown type, must be binary type')\n    }\n  }\n}\n\n/**\n * Class represents both BaseDecoder and MultibaseDecoder so it could be used\n * to decode multibases (with matching prefix) or just base decode strings\n * with corresponding base encoding.\n */\nclass Decoder<Base extends string, Prefix extends string> implements MultibaseDecoder<Prefix>, UnibaseDecoder<Prefix>, BaseDecoder {\n  readonly name: Base\n  readonly prefix: Prefix\n  readonly baseDecode: DecodeFn\n  private readonly prefixCodePoint: number\n\n  constructor (name: Base, prefix: Prefix, baseDecode: DecodeFn) {\n    this.name = name\n    this.prefix = prefix\n    const prefixCodePoint = prefix.codePointAt(0)\n    /* c8 ignore next 3 */\n    if (prefixCodePoint === undefined) {\n      throw new Error('Invalid prefix character')\n    }\n    this.prefixCodePoint = prefixCodePoint\n    this.baseDecode = baseDecode\n  }\n\n  decode (text: string): Uint8Array {\n    if (typeof text === 'string') {\n      if (text.codePointAt(0) !== this.prefixCodePoint) {\n        throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)\n      }\n      return this.baseDecode(text.slice(this.prefix.length))\n    } else {\n      throw Error('Can only multibase decode strings')\n    }\n  }\n\n  or<OtherPrefix extends string> (decoder: UnibaseDecoder<OtherPrefix> | ComposedDecoder<OtherPrefix>): ComposedDecoder<Prefix | OtherPrefix> {\n    return or(this, decoder)\n  }\n}\n\ntype Decoders<Prefix extends string> = Record<Prefix, UnibaseDecoder<Prefix>>\n\nclass ComposedDecoder<Prefix extends string> implements MultibaseDecoder<Prefix>, CombobaseDecoder<Prefix> {\n  readonly decoders: Decoders<Prefix>\n\n  constructor (decoders: Decoders<Prefix>) {\n    this.decoders = decoders\n  }\n\n  or <OtherPrefix extends string> (decoder: UnibaseDecoder<OtherPrefix> | ComposedDecoder<OtherPrefix>): ComposedDecoder<Prefix | OtherPrefix> {\n    return or(this, decoder)\n  }\n\n  decode (input: string): Uint8Array {\n    const prefix = input[0] as Prefix\n    const decoder = this.decoders[prefix]\n    if (decoder != null) {\n      return decoder.decode(input)\n    } else {\n      throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)\n    }\n  }\n}\n\nexport function or <L extends string, R extends string> (left: UnibaseDecoder<L> | CombobaseDecoder<L>, right: UnibaseDecoder<R> | CombobaseDecoder<R>): ComposedDecoder<L | R> {\n  return new ComposedDecoder({\n    ...(left.decoders ?? { [(left as UnibaseDecoder<L>).prefix]: left }),\n    ...(right.decoders ?? { [(right as UnibaseDecoder<R>).prefix]: right })\n  } as Decoders<L | R>)\n}\n\nexport class Codec<Base extends string, Prefix extends string> implements MultibaseCodec<Prefix>, MultibaseEncoder<Prefix>, MultibaseDecoder<Prefix>, BaseCodec, BaseEncoder, BaseDecoder {\n  readonly name: Base\n  readonly prefix: Prefix\n  readonly baseEncode: EncodeFn\n  readonly baseDecode: DecodeFn\n  readonly encoder: Encoder<Base, Prefix>\n  readonly decoder: Decoder<Base, Prefix>\n\n  constructor (name: Base, prefix: Prefix, baseEncode: EncodeFn, baseDecode: DecodeFn) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n    this.baseDecode = baseDecode\n    this.encoder = new Encoder(name, prefix, baseEncode)\n    this.decoder = new Decoder(name, prefix, baseDecode)\n  }\n\n  encode (input: Uint8Array): string {\n    return this.encoder.encode(input)\n  }\n\n  decode (input: string): Uint8Array {\n    return this.decoder.decode(input)\n  }\n}\n\nexport function from <Base extends string, Prefix extends string> ({ name, prefix, encode, decode }: { name: Base, prefix: Prefix, encode: EncodeFn, decode: DecodeFn }): Codec<Base, Prefix> {\n  return new Codec(name, prefix, encode, decode)\n}\n\nexport function baseX <Base extends string, Prefix extends string> ({ name, prefix, alphabet }: { name: Base, prefix: Prefix, alphabet: string }): Codec<Base, Prefix> {\n  const { encode, decode } = basex(alphabet, name)\n  return from({\n    prefix,\n    name,\n    encode,\n    decode: (text: string): Uint8Array => coerce(decode(text))\n  })\n}\n\nfunction decode (string: string, alphabetIdx: Record<string, number>, bitsPerChar: number, name: string): Uint8Array {\n  // Count the padding bytes:\n  let end = string.length\n  while (string[end - 1] === '=') {\n    --end\n  }\n\n  // Allocate the output:\n  const out = new Uint8Array((end * bitsPerChar / 8) | 0)\n\n  // Parse the data:\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  let written = 0 // Next byte to write\n  for (let i = 0; i < end; ++i) {\n    // Read one character from the string:\n    const value = alphabetIdx[string[i]]\n    if (value === undefined) {\n      throw new SyntaxError(`Non-${name} character`)\n    }\n\n    // Append the bits to the buffer:\n    buffer = (buffer << bitsPerChar) | value\n    bits += bitsPerChar\n\n    // Write out some bits if the buffer has a byte's worth:\n    if (bits >= 8) {\n      bits -= 8\n      out[written++] = 0xff & (buffer >> bits)\n    }\n  }\n\n  // Verify that we have received just enough bits:\n  if (bits >= bitsPerChar || (0xff & (buffer << (8 - bits))) !== 0) {\n    throw new SyntaxError('Unexpected end of data')\n  }\n\n  return out\n}\n\nfunction encode (data: Uint8Array, alphabet: string, bitsPerChar: number): string {\n  const pad = alphabet[alphabet.length - 1] === '='\n  const mask = (1 << bitsPerChar) - 1\n  let out = ''\n\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  for (let i = 0; i < data.length; ++i) {\n    // Slurp data into the buffer:\n    buffer = (buffer << 8) | data[i]\n    bits += 8\n\n    // Write out as much as we can:\n    while (bits > bitsPerChar) {\n      bits -= bitsPerChar\n      out += alphabet[mask & (buffer >> bits)]\n    }\n  }\n\n  // Partial character:\n  if (bits !== 0) {\n    out += alphabet[mask & (buffer << (bitsPerChar - bits))]\n  }\n\n  // Add padding characters until we hit a byte boundary:\n  if (pad) {\n    while (((out.length * bitsPerChar) & 7) !== 0) {\n      out += '='\n    }\n  }\n\n  return out\n}\n\nfunction createAlphabetIdx (alphabet: string): Record<string, number> {\n  // Build the character lookup table:\n  const alphabetIdx: Record<string, number> = {}\n  for (let i = 0; i < alphabet.length; ++i) {\n    alphabetIdx[alphabet[i]] = i\n  }\n  return alphabetIdx\n}\n\n/**\n * RFC4648 Factory\n */\nexport function rfc4648 <Base extends string, Prefix extends string> ({ name, prefix, bitsPerChar, alphabet }: { name: Base, prefix: Prefix, bitsPerChar: number, alphabet: string }): Codec<Base, Prefix> {\n  const alphabetIdx = createAlphabetIdx(alphabet)\n  return from({\n    prefix,\n    name,\n    encode (input: Uint8Array): string {\n      return encode(input, alphabet, bitsPerChar)\n    },\n    decode (input: string): Uint8Array {\n      return decode(input, alphabetIdx, bitsPerChar, name)\n    }\n  })\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1846, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base32.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base32.ts"],"sourcesContent":["import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAA;;AAE5B,MAAM,MAAM,OAAG,0KAAO,EAAC;IAC5B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,QAAQ;IACd,QAAQ,EAAE,kCAAkC;IAC5C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,WAAW,OAAG,0KAAO,EAAC;IACjC,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,aAAa;IACnB,QAAQ,EAAE,kCAAkC;IAC5C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,SAAS,OAAG,0KAAO,EAAC;IAC/B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,WAAW;IACjB,QAAQ,EAAE,mCAAmC;IAC7C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,cAAc,OAAG,0KAAO,EAAC;IACpC,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,gBAAgB;IACtB,QAAQ,EAAE,mCAAmC;IAC7C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,SAAS,OAAG,0KAAO,EAAC;IAC/B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,WAAW;IACjB,QAAQ,EAAE,kCAAkC;IAC5C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,cAAc,OAAG,0KAAO,EAAC;IACpC,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,gBAAgB;IACtB,QAAQ,EAAE,kCAAkC;IAC5C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,YAAY,OAAG,0KAAO,EAAC;IAClC,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,cAAc;IACpB,QAAQ,EAAE,mCAAmC;IAC7C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,iBAAiB,OAAG,0KAAO,EAAC;IACvC,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,mBAAmB;IACzB,QAAQ,EAAE,mCAAmC;IAC7C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,OAAO,OAAG,0KAAO,EAAC;IAC7B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,SAAS;IACf,QAAQ,EAAE,kCAAkC;IAC5C,WAAW,EAAE,CAAC;CACf,CAAC,CAAA"}},
    {"offset": {"line": 1926, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base36.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base36.ts"],"sourcesContent":["import { baseX } from './base.js'\n\nexport const base36 = baseX({\n  prefix: 'k',\n  name: 'base36',\n  alphabet: '0123456789abcdefghijklmnopqrstuvwxyz'\n})\n\nexport const base36upper = baseX({\n  prefix: 'K',\n  name: 'base36upper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n})\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,WAAW,CAAA;;AAE1B,MAAM,MAAM,OAAG,wKAAK,EAAC;IAC1B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,QAAQ;IACd,QAAQ,EAAE,sCAAsC;CACjD,CAAC,CAAA;AAEK,MAAM,WAAW,OAAG,wKAAK,EAAC;IAC/B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,aAAa;IACnB,QAAQ,EAAE,sCAAsC;CACjD,CAAC,CAAA"}},
    {"offset": {"line": 1948, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base58.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base58.ts"],"sourcesContent":["import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,WAAW,CAAA;;AAE1B,MAAM,SAAS,OAAG,wKAAK,EAAC;IAC7B,IAAI,EAAE,WAAW;IACjB,MAAM,EAAE,GAAG;IACX,QAAQ,EAAE,4DAA4D;CACvE,CAAC,CAAA;AAEK,MAAM,YAAY,OAAG,wKAAK,EAAC;IAChC,IAAI,EAAE,cAAc;IACpB,MAAM,EAAE,GAAG;IACX,QAAQ,EAAE,4DAA4D;CACvE,CAAC,CAAA"}},
    {"offset": {"line": 1970, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/vendor/varint.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/vendor/varint.js"],"sourcesContent":["/* eslint-disable */\nvar encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\n/**\n * @param {number} num\n * @param {number[]} out\n * @param {number} offset\n */\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  // @ts-ignore\n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\n/**\n * @param {string | any[]} buf\n * @param {number} offset\n */\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      // @ts-ignore\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  // @ts-ignore\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (/** @type {number} */ value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2042, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/varint.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/varint.ts"],"sourcesContent":["import varint from './vendor/varint.js'\n\nexport function decode (data: Uint8Array, offset = 0): [number, number] {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\nexport function encodeTo (int: number, target: Uint8Array, offset = 0): Uint8Array {\n  varint.encode(int, target, offset)\n  return target\n}\n\nexport function encodingLength (int: number): number {\n  return varint.encodingLength(int)\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,MAAM,MAAM,oBAAoB,CAAA;;AAEjC,SAAU,MAAM,CAAE,IAAgB,EAAE,MAAM,GAAG,CAAC;IAClD,MAAM,IAAI,GAAG,6KAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;IACxC,OAAO;QAAC,IAAI;QAAE,6KAAM,CAAC,MAAM,CAAC,KAAK;KAAC,CAAA;AACpC,CAAC;AAEK,SAAU,QAAQ,CAAE,GAAW,EAAE,MAAkB,EAAE,MAAM,GAAG,CAAC;IACnE,6KAAM,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,EAAE,MAAM,CAAC,CAAA;IAClC,OAAO,MAAM,CAAA;AACf,CAAC;AAEK,SAAU,cAAc,CAAE,GAAW;IACzC,OAAO,6KAAM,CAAC,cAAc,CAAC,GAAG,CAAC,CAAA;AACnC,CAAC"}},
    {"offset": {"line": 2070, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/hashes/digest.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/hashes/digest.ts"],"sourcesContent":["import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\nimport type { MultihashDigest } from './interface.js'\n\n/**\n * Creates a multihash digest.\n */\nexport function create <Code extends number> (code: Code, digest: Uint8Array): Digest<Code, number> {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n */\nexport function decode (multihash: Uint8Array): MultihashDigest {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\nexport function equals (a: MultihashDigest, b: unknown): b is MultihashDigest {\n  if (a === b) {\n    return true\n  } else {\n    const data = b as { code?: unknown, size?: unknown, bytes?: unknown }\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n */\nexport class Digest<Code extends number, Size extends number> implements MultihashDigest {\n  readonly code: Code\n  readonly size: Size\n  readonly digest: Uint8Array\n  readonly bytes: Uint8Array\n\n  /**\n   * Creates a multihash digest.\n   */\n  constructor (code: Code, size: Size, digest: Uint8Array, bytes: Uint8Array) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n\n/**\n * Used to check that the passed multihash has the passed code\n */\nexport function hasCode <T extends number> (digest: MultihashDigest, code: T): digest is MultihashDigest<T> {\n  return digest.code === code\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,IAAI,UAAU,EAAE,MAAM,aAAa,CAAA;AAC1D,OAAO,KAAK,MAAM,MAAM,cAAc,CAAA;;;AAMhC,SAAU,MAAM,CAAwB,IAAU,EAAE,MAAkB;IAC1E,MAAM,IAAI,GAAG,MAAM,CAAC,UAAU,CAAA;IAC9B,MAAM,UAAU,GAAG,MAAM,CAAC,mKAAc,CAAC,IAAI,CAAC,CAAA;IAC9C,MAAM,YAAY,GAAG,UAAU,GAAG,MAAM,CAAC,mKAAc,CAAC,IAAI,CAAC,CAAA;IAE7D,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC,CAAA;IACjD,MAAM,CAAC,6JAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAA;IAC/B,MAAM,CAAC,6JAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,UAAU,CAAC,CAAA;IACxC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,YAAY,CAAC,CAAA;IAE/B,OAAO,IAAI,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAA;AAC9C,CAAC;AAKK,SAAU,MAAM,CAAE,SAAqB;IAC3C,MAAM,KAAK,OAAG,iKAAM,EAAC,SAAS,CAAC,CAAA;IAC/B,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,GAAG,MAAM,CAAC,2JAAM,CAAC,KAAK,CAAC,CAAA;IAC/C,MAAM,CAAC,IAAI,EAAE,YAAY,CAAC,GAAG,MAAM,CAAC,2JAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAA;IACtE,MAAM,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,UAAU,GAAG,YAAY,CAAC,CAAA;IAExD,IAAI,MAAM,CAAC,UAAU,KAAK,IAAI,EAAE,CAAC;QAC/B,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAA;IACrC,CAAC;IAED,OAAO,IAAI,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAA;AAC9C,CAAC;AAEK,SAAU,MAAM,CAAE,CAAkB,EAAE,CAAU;IACpD,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;QACZ,OAAO,IAAI,CAAA;IACb,CAAC,MAAM,CAAC;QACN,MAAM,IAAI,GAAG,CAAwD,CAAA;QAErE,OAAO,AACL,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,IACpB,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,IACpB,IAAI,CAAC,KAAK,YAAY,UAAU,QAChC,iKAAU,EAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAChC,CAAA;IACH,CAAC;AACH,CAAC;AAMK,MAAO,MAAM;IACR,IAAI,CAAM;IACV,IAAI,CAAM;IACV,MAAM,CAAY;IAClB,KAAK,CAAY;IAE1B;;OAEG,CACH,YAAa,IAAU,EAAE,IAAU,EAAE,MAAkB,EAAE,KAAiB,CAAA;QACxE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;IACpB,CAAC;CACF;AAKK,SAAU,OAAO,CAAqB,MAAuB,EAAE,IAAO;IAC1E,OAAO,MAAM,CAAC,IAAI,KAAK,IAAI,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 2135, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/link/interface.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/link/interface.ts"],"sourcesContent":["import type { MultibaseEncoder, MultibaseDecoder, Multibase } from '../bases/interface.js'\nimport type { Phantom, ByteView } from '../block/interface.js'\nimport type { MultihashDigest } from '../hashes/interface.js'\n\nexport type { MultihashDigest, MultibaseEncoder, MultibaseDecoder }\nexport type Version = 0 | 1\n\nexport type DAG_PB = 0x70\nexport type SHA_256 = 0x12\n\n/**\n * Represents an IPLD link to a specific data of type `T`.\n *\n * @template T - Logical type of the data being linked to.\n * @template C - multicodec code corresponding to a codec linked data is encoded with\n * @template A - multicodec code corresponding to the hashing algorithm of the CID\n * @template V - CID version\n */\nexport interface Link<\n  Data extends unknown = unknown,\n  Format extends number = number,\n  Alg extends number = number,\n  V extends Version = 1\n  > extends Phantom<Data> {\n  readonly version: V\n  readonly code: Format\n  readonly multihash: MultihashDigest<Alg>\n\n  readonly byteOffset: number\n  readonly byteLength: number\n  readonly bytes: ByteView<Link<Data, Format, Alg, V>>\n\n  equals(other: unknown): other is Link<Data, Format, Alg, Version>\n\n  toString<Prefix extends string>(base?: MultibaseEncoder<Prefix>): ToString<Link<Data, Format, Alg, Version>, Prefix>\n  link(): Link<Data, Format, Alg, V>\n\n  toV1(): Link<Data, Format, Alg, 1>\n}\n\nexport interface LinkJSON<T extends UnknownLink = UnknownLink> {\n  '/': ToString<T>\n}\n\nexport interface LegacyLink<T extends unknown = unknown> extends Link<T, DAG_PB, SHA_256, 0> {\n}\n\nexport type UnknownLink =\n  | LegacyLink<unknown>\n  | Link<unknown, number, number, Version>\n\nexport type ToString<T, Prefix extends string = string> = Multibase<Prefix> & Phantom<T>\n\nexport type { ByteView }\n"],"names":[],"mappings":""}},
    {"offset": {"line": 2142, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/cid.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/cid.ts"],"sourcesContent":["import { base32 } from './bases/base32.js'\nimport { base36 } from './bases/base36.js'\nimport { base58btc } from './bases/base58.js'\nimport { coerce } from './bytes.js'\nimport * as Digest from './hashes/digest.js'\nimport * as varint from './varint.js'\nimport type * as API from './link/interface.js'\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\nexport function format <T extends API.Link<unknown, number, number, API.Version>, Prefix extends string> (link: T, base?: API.MultibaseEncoder<Prefix>): API.ToString<T, Prefix> {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        base as API.MultibaseEncoder<'z'> ?? base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        (base ?? base32.encoder) as API.MultibaseEncoder<Prefix>\n      )\n  }\n}\n\nexport function toJSON <Link extends API.UnknownLink> (link: Link): API.LinkJSON<Link> {\n  return {\n    '/': format(link)\n  }\n}\n\nexport function fromJSON <Link extends API.UnknownLink> (json: API.LinkJSON<Link>): CID<unknown, number, number, API.Version> {\n  return CID.parse(json['/'])\n}\n\nconst cache = new WeakMap<API.UnknownLink, Map<string, string>>()\n\nfunction baseCache (cid: API.UnknownLink): Map<string, string> {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\nexport class CID<Data = unknown, Format extends number = number, Alg extends number = number, Version extends API.Version = API.Version> implements API.Link<Data, Format, Alg, Version> {\n  readonly code: Format\n  readonly version: Version\n  readonly multihash: API.MultihashDigest<Alg>\n  readonly bytes: Uint8Array\n  readonly '/': Uint8Array\n\n  /**\n   * @param version - Version of the CID\n   * @param code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param multihash - (Multi)hash of the of the content.\n   */\n  constructor (version: Version, code: Format, multihash: API.MultihashDigest<Alg>, bytes: Uint8Array) {\n    this.code = code\n    this.version = version\n    this.multihash = multihash\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID (): this {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset (): number {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength (): number {\n    return this.bytes.byteLength\n  }\n\n  toV0 (): CID<Data, API.DAG_PB, API.SHA_256, 0> {\n    switch (this.version) {\n      case 0: {\n        return this as CID<Data, API.DAG_PB, API.SHA_256, 0>\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return (\n          CID.createV0(\n            multihash as API.MultihashDigest<API.SHA_256>\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  toV1 (): CID<Data, Format, Alg, 1> {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return this as CID<Data, Format, Alg, 1>\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  equals (other: unknown): other is CID<Data, Format, Alg, Version> {\n    return CID.equals(this, other)\n  }\n\n  static equals <Data, Format extends number, Alg extends number, Version extends API.Version>(self: API.Link<Data, Format, Alg, Version>, other: unknown): other is CID {\n    const unknown = other as { code?: unknown, version?: unknown, multihash?: unknown }\n    return (\n      unknown != null &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  toString (base?: API.MultibaseEncoder<string>): string {\n    return format(this, base)\n  }\n\n  toJSON (): API.LinkJSON<this> {\n    return { '/': format(this) }\n  }\n\n  link (): this {\n    return this\n  }\n\n  readonly [Symbol.toStringTag] = 'CID';\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] (): string {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   */\n  static asCID <Data, Format extends number, Alg extends number, Version extends API.Version, U>(input: API.Link<Data, Format, Alg, Version> | U): CID<Data, Format, Alg, Version> | null {\n    if (input == null) {\n      return null\n    }\n\n    const value = input as any\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        multihash as API.MultihashDigest<Alg>,\n        bytes ?? encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest = Digest.decode(multihash) as API.MultihashDigest<Alg>\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   * @param version - Version of the CID\n   * @param code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param digest - (Multi)hash of the of the content.\n   */\n  static create <Data, Format extends number, Alg extends number, Version extends API.Version>(version: Version, code: Format, digest: API.MultihashDigest<Alg>): CID<Data, Format, Alg, Version> {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   */\n  static createV0 <T = unknown>(digest: API.MultihashDigest<typeof SHA_256_CODE>): CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0> {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @param code - Content encoding format code.\n   * @param digest - Multihash of the content.\n   */\n  static createV1 <Data, Code extends number, Alg extends number>(code: Code, digest: API.MultihashDigest<Alg>): CID<Data, Code, Alg, 1> {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   */\n  static decode <Data, Code extends number, Alg extends number, Version extends API.Version>(bytes: API.ByteView<API.Link<Data, Code, Alg, Version>>): CID<Data, Code, Alg, Version> {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length !== 0) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   */\n  static decodeFirst <T, C extends number, A extends number, V extends API.Version>(bytes: API.ByteView<API.Link<T, C, A, V>>): [CID<T, C, A, V>, Uint8Array] {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(digest as API.MultihashDigest<API.SHA_256>)\n        : CID.createV1(specs.codec, digest)\n    return [cid as CID<T, C, A, V>, bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   */\n  static inspectBytes <T, C extends number, A extends number, V extends API.Version>(initialBytes: API.ByteView<API.Link<T, C, A, V>>): { version: V, codec: C, multihashCode: A, digestSize: number, multihashSize: number, size: number } {\n    let offset = 0\n    const next = (): number => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = next() as V\n    let codec = DAG_PB_CODE as C\n    if (version as number === 18) {\n      // CIDv0\n      version = 0 as V\n      offset = 0\n    } else {\n      codec = next() as C\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = next() as A // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   */\n  static parse <Prefix extends string, Data, Code extends number, Alg extends number, Version extends API.Version>(source: API.ToString<API.Link<Data, Code, Alg, Version>, Prefix>, base?: API.MultibaseDecoder<Prefix>): CID<Data, Code, Alg, Version> {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\nfunction parseCIDtoBytes <Prefix extends string, Data, Code extends number, Alg extends number, Version extends API.Version> (source: API.ToString<API.Link<Data, Code, Alg, Version>, Prefix>, base?: API.MultibaseDecoder<Prefix>): [Prefix, API.ByteView<API.Link<Data, Code, Alg, Version>>] {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base ?? base58btc\n      return [\n        base58btc.prefix as Prefix,\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base ?? base58btc\n      return [base58btc.prefix as Prefix, decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base ?? base32\n      return [base32.prefix as Prefix, decoder.decode(source)]\n    }\n    case base36.prefix: {\n      const decoder = base ?? base36\n      return [base36.prefix as Prefix, decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [source[0] as Prefix, base.decode(source)]\n    }\n  }\n}\n\nfunction toStringV0 (bytes: Uint8Array, cache: Map<string, string>, base: API.MultibaseEncoder<'z'>): string {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nfunction toStringV1 <Prefix extends string> (bytes: Uint8Array, cache: Map<string, string>, base: API.MultibaseEncoder<Prefix>): string {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\nfunction encodeCID (version: API.Version, code: number, multihash: Uint8Array): Uint8Array {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2557, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/link.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/link.ts"],"sourcesContent":["import { CID, format, toJSON, fromJSON } from './cid.js'\nimport type * as API from './link/interface.js'\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\nconst DAG_PB_CODE = 0x70\n// eslint-disable-next-line\nconst SHA_256_CODE = 0x12\n\n/**\n * Simplified version of `create` for CIDv0.\n */\nexport function createLegacy (digest: API.MultihashDigest<typeof SHA_256_CODE>): API.LegacyLink {\n  return CID.create(0, DAG_PB_CODE, digest)\n}\n\n/**\n * Simplified version of `create` for CIDv1.\n *\n * @param code - Content encoding format code.\n * @param digest - Miltihash of the content.\n */\nexport function create <Data, Code extends number, Alg extends number> (code: Code, digest: API.MultihashDigest<Alg>): API.Link<Data, Code, Alg> {\n  return CID.create(1, code, digest)\n}\n\n/**\n * Type predicate returns true if value is the link.\n */\nexport function isLink <L extends API.Link<unknown, number, number, 0 | 1>> (value: unknown | L): value is L & CID {\n  if (value == null) {\n    return false\n  }\n\n  const withSlash = value as { '/'?: Uint8Array, bytes: Uint8Array }\n\n  if (withSlash['/'] != null && withSlash['/'] === withSlash.bytes) {\n    return true\n  }\n\n  const withAsCID = value as { asCID?: unknown }\n\n  if (withAsCID.asCID === value) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Takes cid in a string representation and creates an instance. If `base`\n * decoder is not provided will use a default from the configuration. It will\n * throw an error if encoding of the CID is not compatible with supplied (or\n * a default decoder).\n */\nexport function parse <Prefix extends string, Data, Code extends number, Alg extends number, Ver extends API.Version> (source: API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>, base?: API.MultibaseDecoder<Prefix>): API.Link<Data, Code, Alg, Ver> {\n  return CID.parse(source, base)\n}\n\nexport { format, toJSON, fromJSON }\n\n/**\n * Decoded a CID from its binary representation. The byte array must contain\n * only the CID with no additional bytes.\n *\n * An error will be thrown if the bytes provided do not contain a valid\n * binary representation of a CID.\n */\nexport function decode <Data, Code extends number, Alg extends number, Ver extends API.Version> (bytes: API.ByteView<API.Link<Data, Code, Alg, Ver>>): API.Link<Data, Code, Alg, Ver> {\n  return CID.decode(bytes)\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,UAAU,CAAA;AAExD,yDAAyD;AACzD,cAAc,qBAAqB,CAAA;;;AAEnC,MAAM,WAAW,GAAG,IAAI,CAAA;AACxB,2BAA2B;AAC3B,MAAM,YAAY,GAAG,IAAI,CAAA;AAKnB,SAAU,YAAY,CAAE,MAAgD;IAC5E,OAAO,4KAAG,CAAC,MAAM,CAAC,CAAC,EAAE,WAAW,EAAE,MAAM,CAAC,CAAA;AAC3C,CAAC;AAQK,SAAU,MAAM,CAAkD,IAAU,EAAE,MAAgC;IAClH,OAAO,4KAAG,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,CAAA;AACpC,CAAC;AAKK,SAAU,MAAM,CAAuD,KAAkB;IAC7F,IAAI,KAAK,IAAI,IAAI,EAAE,CAAC;QAClB,OAAO,KAAK,CAAA;IACd,CAAC;IAED,MAAM,SAAS,GAAG,KAAgD,CAAA;IAElE,IAAI,SAAS,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,SAAS,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,KAAK,EAAE,CAAC;QACjE,OAAO,IAAI,CAAA;IACb,CAAC;IAED,MAAM,SAAS,GAAG,KAA4B,CAAA;IAE9C,IAAI,SAAS,CAAC,KAAK,KAAK,KAAK,EAAE,CAAC;QAC9B,OAAO,IAAI,CAAA;IACb,CAAC;IAED,OAAO,KAAK,CAAA;AACd,CAAC;AAQK,SAAU,KAAK,CAAkG,MAA4D,EAAE,IAAmC;IACtN,OAAO,4KAAG,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;AAChC,CAAC;;AAWK,SAAU,MAAM,CAA2E,KAAmD;IAClJ,OAAO,4KAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AAC1B,CAAC"}},
    {"offset": {"line": 2608, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/hashes/identity.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/hashes/identity.ts"],"sourcesContent":["import { coerce } from '../bytes.js'\nimport * as Digest from './digest.js'\nimport type { DigestOptions } from './hasher.js'\n\nconst code: 0x0 = 0x0\nconst name = 'identity'\n\nconst encode: (input: Uint8Array) => Uint8Array = coerce\n\nfunction digest (input: Uint8Array, options?: DigestOptions): Digest.Digest<typeof code, number> {\n  if (options?.truncate != null && options.truncate !== input.byteLength) {\n    if (options.truncate < 0 || options.truncate > input.byteLength) {\n      throw new Error(`Invalid truncate option, must be less than or equal to ${input.byteLength}`)\n    }\n\n    input = input.subarray(0, options.truncate)\n  }\n\n  return Digest.create(code, encode(input))\n}\n\nexport const identity = { code, name, encode, digest }\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAA;AACpC,OAAO,KAAK,MAAM,MAAM,aAAa,CAAA;;;AAGrC,MAAM,IAAI,GAAQ,GAAG,CAAA;AACrB,MAAM,IAAI,GAAG,UAAU,CAAA;AAEvB,MAAM,MAAM,GAAsC,iKAAM,CAAA;AAExD,SAAS,MAAM,CAAE,KAAiB,EAAE,OAAuB;IACzD,IAAI,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI,OAAO,CAAC,QAAQ,KAAK,KAAK,CAAC,UAAU,EAAE,CAAC;QACvE,IAAI,OAAO,CAAC,QAAQ,GAAG,CAAC,IAAI,OAAO,CAAC,QAAQ,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC;YAChE,MAAM,IAAI,KAAK,CAAC,CAAA,uDAAA,EAA0D,KAAK,CAAC,UAAU,EAAE,CAAC,CAAA;QAC/F,CAAC;QAED,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAA;IAC7C,CAAC;IAED,OAAO,MAAM,CAAC,qKAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAA;AAC3C,CAAC;AAEM,MAAM,QAAQ,GAAG;IAAE,IAAI;IAAE,IAAI;IAAE,MAAM;IAAE,MAAM;AAAA,CAAE,CAAA"}},
    {"offset": {"line": 2638, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/hashes/hasher.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/hashes/hasher.ts"],"sourcesContent":["import * as Digest from './digest.js'\nimport type { MultihashHasher } from './interface.js'\n\ntype Await<T> = Promise<T> | T\n\nconst DEFAULT_MIN_DIGEST_LENGTH = 20\n\nexport interface HasherInit <Name extends string, Code extends number> {\n  name: Name\n  code: Code\n  encode(input: Uint8Array): Await<Uint8Array>\n\n  /**\n   * The minimum length a hash is allowed to be truncated to in bytes\n   *\n   * @default 20\n   */\n  minDigestLength?: number\n\n  /**\n   * The maximum length a hash is allowed to be truncated to in bytes. If not\n   * specified it will be inferred from the length of the digest.\n   */\n  maxDigestLength?: number\n}\n\nexport function from <Name extends string, Code extends number> ({ name, code, encode, minDigestLength, maxDigestLength }: HasherInit<Name, Code>): Hasher<Name, Code> {\n  return new Hasher(name, code, encode, minDigestLength, maxDigestLength)\n}\n\nexport interface DigestOptions {\n  /**\n   * Truncate the returned digest to this number of bytes.\n   *\n   * This may cause the digest method to throw/reject if the passed value is\n   * greater than the digest length or below a threshold under which the risk of\n   * hash collisions is significant.\n   *\n   * The actual value of this threshold can depend on the hashing algorithm in\n   * use.\n   */\n  truncate?: number\n}\n\n/**\n * Hasher represents a hashing algorithm implementation that produces as\n * `MultihashDigest`.\n */\nexport class Hasher<Name extends string, Code extends number> implements MultihashHasher<Code> {\n  readonly name: Name\n  readonly code: Code\n  readonly encode: (input: Uint8Array) => Await<Uint8Array>\n  readonly minDigestLength: number\n  readonly maxDigestLength?: number\n\n  constructor (name: Name, code: Code, encode: (input: Uint8Array) => Await<Uint8Array>, minDigestLength?: number, maxDigestLength?: number) {\n    this.name = name\n    this.code = code\n    this.encode = encode\n    this.minDigestLength = minDigestLength ?? DEFAULT_MIN_DIGEST_LENGTH\n    this.maxDigestLength = maxDigestLength\n  }\n\n  digest (input: Uint8Array, options?: DigestOptions): Await<Digest.Digest<Code, number>> {\n    if (options?.truncate != null) {\n      if (options.truncate < this.minDigestLength) {\n        throw new Error(`Invalid truncate option, must be greater than or equal to ${this.minDigestLength}`)\n      }\n\n      if (this.maxDigestLength != null && options.truncate > this.maxDigestLength) {\n        throw new Error(`Invalid truncate option, must be less than or equal to ${this.maxDigestLength}`)\n      }\n    }\n\n    if (input instanceof Uint8Array) {\n      const result = this.encode(input)\n\n      if (result instanceof Uint8Array) {\n        return createDigest(result, this.code, options?.truncate)\n      }\n\n      return result.then(digest => createDigest(digest, this.code, options?.truncate))\n    } else {\n      throw Error('Unknown type, must be binary type')\n      /* c8 ignore next 1 */\n    }\n  }\n}\n\n/**\n * Create a Digest from the passed uint8array and code, optionally truncating it\n * first.\n */\nfunction createDigest <Code extends number> (digest: Uint8Array, code: Code, truncate?: number): Digest.Digest<Code, number> {\n  if (truncate != null && truncate !== digest.byteLength) {\n    if (truncate > digest.byteLength) {\n      throw new Error(`Invalid truncate option, must be less than or equal to ${digest.byteLength}`)\n    }\n\n    digest = digest.subarray(0, truncate)\n  }\n\n  return Digest.create(code, digest)\n}\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,KAAK,MAAM,MAAM,aAAa,CAAA;;AAKrC,MAAM,yBAAyB,GAAG,EAAE,CAAA;AAqB9B,SAAU,IAAI,CAA6C,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,eAAe,EAAE,eAAe,EAA0B;IAC/I,OAAO,IAAI,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,eAAe,EAAE,eAAe,CAAC,CAAA;AACzE,CAAC;AAoBK,MAAO,MAAM;IACR,IAAI,CAAM;IACV,IAAI,CAAM;IACV,MAAM,CAA0C;IAChD,eAAe,CAAQ;IACvB,eAAe,CAAS;IAEjC,YAAa,IAAU,EAAE,IAAU,EAAE,MAAgD,EAAE,eAAwB,EAAE,eAAwB,CAAA;QACvI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,eAAe,GAAG,eAAe,IAAI,yBAAyB,CAAA;QACnE,IAAI,CAAC,eAAe,GAAG,eAAe,CAAA;IACxC,CAAC;IAED,MAAM,CAAE,KAAiB,EAAE,OAAuB,EAAA;QAChD,IAAI,OAAO,EAAE,QAAQ,IAAI,IAAI,EAAE,CAAC;YAC9B,IAAI,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;gBAC5C,MAAM,IAAI,KAAK,CAAC,CAAA,0DAAA,EAA6D,IAAI,CAAC,eAAe,EAAE,CAAC,CAAA;YACtG,CAAC;YAED,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,IAAI,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;gBAC5E,MAAM,IAAI,KAAK,CAAC,CAAA,uDAAA,EAA0D,IAAI,CAAC,eAAe,EAAE,CAAC,CAAA;YACnG,CAAC;QACH,CAAC;QAED,IAAI,KAAK,YAAY,UAAU,EAAE,CAAC;YAChC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;YAEjC,IAAI,MAAM,YAAY,UAAU,EAAE,CAAC;gBACjC,OAAO,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAA;YAC3D,CAAC;YAED,OAAO,MAAM,CAAC,IAAI,EAAC,MAAM,CAAC,EAAE,AAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAA;QAClF,CAAC,MAAM,CAAC;YACN,MAAM,KAAK,CAAC,mCAAmC,CAAC,CAAA;QAChD,oBAAA,EAAsB,CACxB,CAAC;IACH,CAAC;CACF;AAED;;;GAGG,CACH,SAAS,YAAY,CAAwB,MAAkB,EAAE,IAAU,EAAE,QAAiB;IAC5F,IAAI,QAAQ,IAAI,IAAI,IAAI,QAAQ,KAAK,MAAM,CAAC,UAAU,EAAE,CAAC;QACvD,IAAI,QAAQ,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;YACjC,MAAM,IAAI,KAAK,CAAC,CAAA,uDAAA,EAA0D,MAAM,CAAC,UAAU,EAAE,CAAC,CAAA;QAChG,CAAC;QAED,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAA;IACvC,CAAC;IAED,OAAO,MAAM,CAAC,qKAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;AACpC,CAAC"}},
    {"offset": {"line": 2699, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/interface.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/interface.ts"],"sourcesContent":["// Base encoders / decoders just base encode / decode between binary and\n// textual representation. They are unaware of multibase.\n\n/**\n * Base encoder just encodes bytes into base encoded string.\n */\nexport interface BaseEncoder {\n  /**\n   * Base encodes to a **plain** (and not a multibase) string. Unlike\n   * `encode` no multibase prefix is added.\n   */\n  baseEncode(bytes: Uint8Array): string\n}\n\n/**\n * Base decoder decodes encoded with matching base encoding into bytes.\n */\nexport interface BaseDecoder {\n  /**\n   * Decodes **plain** (and not a multibase) string. Unlike\n   * decode\n   */\n  baseDecode(text: string): Uint8Array\n}\n\n/**\n * Base codec is just dual of encoder and decoder.\n */\nexport interface BaseCodec {\n  encoder: BaseEncoder\n  decoder: BaseDecoder\n}\n\n/**\n * Multibase represents base encoded strings with a prefix first character\n * describing it's encoding.\n */\nexport type Multibase<Prefix extends string> =\n  | string\n  | string & { [0]: Prefix }\n\n/**\n * Multibase encoder for the specific base encoding encodes bytes into\n * multibase of that encoding.\n */\nexport interface MultibaseEncoder<Prefix extends string> {\n  /**\n   * Name of the encoding.\n   */\n  name: string\n  /**\n   * Prefix character for that base encoding.\n   */\n  prefix: Prefix\n  /**\n   * Encodes binary data into **multibase** string (which will have a\n   * prefix added).\n   */\n  encode(bytes: Uint8Array): Multibase<Prefix>\n}\n\n/**\n * Interface implemented by multibase decoder, that takes multibase strings\n * to bytes. It may support single encoding like base32 or multiple encodings\n * like base32, base58btc, base64. If passed multibase is incompatible it will\n * throw an exception.\n */\nexport interface MultibaseDecoder<Prefix extends string> {\n  /**\n   * Decodes **multibase** string (which must have a multibase prefix added).\n   * If prefix does not match\n   */\n  decode(multibase: Multibase<Prefix>): Uint8Array\n}\n\n/**\n * Dual of multibase encoder and decoder.\n */\nexport interface MultibaseCodec<Prefix extends string> {\n  name: string\n  prefix: Prefix\n  encoder: MultibaseEncoder<Prefix>\n  decoder: MultibaseDecoder<Prefix>\n}\n\nexport interface UnibaseDecoder<Prefix extends string> extends MultibaseDecoder<Prefix> {\n  // Reserve this property so it can be used to derive type.\n  readonly decoders?: null\n\n  readonly prefix: Prefix\n}\n\nexport interface CombobaseDecoder<Prefix extends string> extends MultibaseDecoder<Prefix> {\n  readonly decoders: Record<Prefix, UnibaseDecoder<Prefix>>\n}\n"],"names":[],"mappings":"AAAA,wEAAwE;AACxE,yDAAyD"}},
    {"offset": {"line": 2708, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/hashes/interface.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/hashes/interface.ts"],"sourcesContent":["// # Multihash\n\nimport type { DigestOptions } from './hasher.js'\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n */\n// Note: In the current version there is no first class multihash\n// representation (plain Uint8Array is used instead) instead there seems to be\n// a bunch of places that parse it to extract (code, digest, size). By creating\n// this first class representation we avoid reparsing and things generally fit\n// really nicely.\nexport interface MultihashDigest<Code extends number = number> {\n  /**\n   * Code of the multihash\n   */\n  code: Code\n\n  /**\n   * Raw digest (without a hashing algorithm info)\n   */\n  digest: Uint8Array\n\n  /**\n   * byte length of the `this.digest`\n   */\n  size: number\n\n  /**\n   * Binary representation of this multihash digest.\n   */\n  bytes: Uint8Array\n}\n\n/**\n * Hasher represents a hashing algorithm implementation that produces as\n * `MultihashDigest`.\n */\nexport interface MultihashHasher<Code extends number = number> {\n  /**\n   * Takes binary `input` and returns it (multi) hash digest. Return value is\n   * either promise of a digest or a digest. This way general use can `await`\n   * while performance critical code may asses return value to decide whether\n   * await is needed.\n   */\n  digest(input: Uint8Array, options?: DigestOptions): Promise<MultihashDigest<Code>> | MultihashDigest<Code>\n\n  /**\n   * Name of the multihash\n   */\n  name: string\n\n  /**\n   * Code of the multihash\n   */\n  code: Code\n}\n\n/**\n * Sync variant of `MultihashHasher` that refines return type of the `digest`\n * to `MultihashDigest`. It is subtype of `MultihashHasher` so implementations\n * of this interface can be passed anywhere `MultihashHasher` is expected,\n * allowing consumer to either `await` or check the return type to decide\n * whether to await or proceed with return value.\n *\n * `SyncMultihashHasher` is useful in certain APIs where async hashing would be\n * impractical e.g. implementation of Hash Array Mapped Trie (HAMT).\n */\nexport interface SyncMultihashHasher<Code extends number = number> extends MultihashHasher<Code> {\n  digest(input: Uint8Array, options?: DigestOptions): MultihashDigest<Code>\n}\n"],"names":[],"mappings":"AAAA,cAAc"}},
    {"offset": {"line": 2716, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/codecs/interface.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/codecs/interface.ts"],"sourcesContent":["import type { ArrayBufferView, ByteView } from '../block/interface.js'\n\n/**\n * IPLD encoder part of the codec.\n */\nexport interface BlockEncoder<Code extends number, T> {\n  name: string\n  code: Code\n  encode(data: T): ByteView<T>\n}\n\n/**\n * IPLD decoder part of the codec.\n */\nexport interface BlockDecoder<Code extends number, T> {\n  code: Code\n  decode(bytes: ByteView<T> | ArrayBufferView<T>): T\n}\n\n/**\n * An IPLD codec is a combination of both encoder and decoder.\n */\nexport interface BlockCodec<Code extends number, T> extends BlockEncoder<Code, T>, BlockDecoder<Code, T> {}\n\nexport type { ArrayBufferView, ByteView }\n"],"names":[],"mappings":""}},
    {"offset": {"line": 2723, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/block/interface.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/block/interface.ts"],"sourcesContent":["import type { CID } from '../cid.js'\nimport type { Link, Version } from '../link/interface.js'\n\n/**\n * A byte-encoded representation of some type of `Data`.\n *\n * A `ByteView` is essentially a `Uint8Array` that's been \"tagged\" with\n * a `Data` type parameter indicating the type of encoded data.\n *\n * For example, a `ByteView<{ hello: \"world\" }>` is a `Uint8Array` containing a\n * binary representation of a `{hello: \"world\"}`.\n */\nexport interface ByteView<Data> extends Uint8Array, Phantom<Data> {}\n\n/**\n * Similar to ByteView but extends ArrayBuffer.\n */\nexport interface ArrayBufferView<Data> extends ArrayBuffer, Phantom<Data> {}\n\ndeclare const Marker: unique symbol\n\n/**\n * A utility type to retain an unused type parameter `T`.\n * Similar to [phantom type parameters in Rust](https://doc.rust-lang.org/rust-by-example/generics/phantom.html).\n *\n * Capturing unused type parameters allows us to define \"nominal types,\" which\n * TypeScript does not natively support. Nominal types in turn allow us to capture\n * semantics not represented in the actual type structure, without requiring us to define\n * new classes or pay additional runtime costs.\n *\n * For a concrete example, see {@link ByteView}, which extends the `Uint8Array` type to capture\n * type information about the structure of the data encoded into the array.\n */\nexport interface Phantom<T> {\n  // This field can not be represented because field name is non-existent\n  // unique symbol. But given that field is optional any object will valid\n  // type constraint.\n  [Marker]?: T\n}\n\n/**\n * Represents an IPLD block (including its CID) that can be decoded to data of\n * type `T`.\n *\n * @template T - Logical type of the data encoded in the block\n * @template C - multicodec code corresponding to codec used to encode the block\n * @template A - multicodec code corresponding to the hashing algorithm used in CID creation.\n * @template V - CID version\n */\nexport interface Block<\n  T = unknown,\n  C extends number = number,\n  A extends number = number,\n  V extends Version = 1\n> {\n  bytes: ByteView<T>\n  cid: Link<T, C, A, V>\n}\n\nexport type BlockCursorView<T = unknown> =\n  | { value: T, remaining?: undefined }\n  | { value: CID, remaining: string }\n\nexport interface BlockView<\n  T = unknown,\n  C extends number = number,\n  A extends number = number,\n  V extends Version = 1\n> extends Block<T, C, A, V> {\n  cid: CID<T, C, A, V>\n  value: T\n\n  links(): Iterable<[string, CID]>\n  tree(): Iterable<string>\n  get(path: string): BlockCursorView<unknown>\n}\n"],"names":[],"mappings":""}},
    {"offset": {"line": 2730, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/interface.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/interface.ts"],"sourcesContent":["export * from './bases/interface.js'\nexport * from './hashes/interface.js'\nexport * from './codecs/interface.js'\nexport * from './link/interface.js'\nexport * from './block/interface.js'\n"],"names":[],"mappings":";AAAA,cAAc,sBAAsB,CAAA;AACpC,cAAc,uBAAuB,CAAA;AACrC,cAAc,uBAAuB,CAAA;AACrC,cAAc,qBAAqB,CAAA;AACnC,cAAc,sBAAsB,CAAA"}},
    {"offset": {"line": 2745, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/index.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/index.ts"],"sourcesContent":["/**\n * @packageDocumentation\n *\n * This library defines common interfaces and low level building blocks for various interrelated multiformat technologies (multicodec, multihash, multibase, and CID). They can be used to implement custom base encoders / decoders / codecs, codec encoders /decoders and multihash hashers that comply to the interface that layers above assume.\n *\n * This library provides implementations for most basics and many others can be found in linked repositories.\n *\n * ```TypeScript\n * import { CID } from 'multiformats/cid'\n * import * as json from 'multiformats/codecs/json'\n * import { sha256 } from 'multiformats/hashes/sha2'\n *\n * const bytes = json.encode({ hello: 'world' })\n *\n * const hash = await sha256.digest(bytes)\n * const cid = CID.create(1, json.code, hash)\n * //> CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)\n * ```\n *\n * ## Creating Blocks\n *\n * ```TypeScript\n * import * as Block from 'multiformats/block'\n * import * as codec from '@ipld/dag-cbor'\n * import { sha256 as hasher } from 'multiformats/hashes/sha2'\n *\n * const value = { hello: 'world' }\n *\n * // encode a block\n * let block = await Block.encode({ value, codec, hasher })\n *\n * block.value // { hello: 'world' }\n * block.bytes // Uint8Array\n * block.cid   // CID() w/ sha2-256 hash address and dag-cbor codec\n *\n * // you can also decode blocks from their binary state\n * block = await Block.decode({ bytes: block.bytes, codec, hasher })\n *\n * // if you have the cid you can also verify the hash on decode\n * block = await Block.create({ bytes: block.bytes, cid: block.cid, codec, hasher })\n * ```\n *\n * ## Multibase Encoders / Decoders / Codecs\n *\n * CIDs can be serialized to string representation using multibase encoders that implement [`MultibaseEncoder`](https://github.com/multiformats/js-multiformats/blob/master/src/bases/interface.ts) interface. This library provides quite a few implementations that can be imported:\n *\n * ```TypeScript\n * import { base64 } from \"multiformats/bases/base64\"\n * cid.toString(base64.encoder)\n * //> 'mAYAEEiCTojlxqRTl6svwqNJRVM2jCcPBxy+7mRTUfGDzy2gViA'\n * ```\n *\n * Parsing CID string serialized CIDs requires multibase decoder that implements [`MultibaseDecoder`](https://github.com/multiformats/js-multiformats/blob/master/src/bases/interface.ts) interface. This library provides a decoder for every encoder it provides:\n *\n * ```TypeScript\n * CID.parse('mAYAEEiCTojlxqRTl6svwqNJRVM2jCcPBxy+7mRTUfGDzy2gViA', base64.decoder)\n * //> CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)\n * ```\n *\n * Dual of multibase encoder & decoder is defined as multibase codec and it exposes\n * them as `encoder` and `decoder` properties. For added convenience codecs also\n * implement `MultibaseEncoder` and `MultibaseDecoder` interfaces so they could be\n * used as either or both:\n *\n * ```TypeScript\n * cid.toString(base64)\n * CID.parse(cid.toString(base64), base64)\n * ```\n *\n * **Note:** CID implementation comes bundled with `base32` and `base58btc`\n * multibase codecs so that CIDs can be base serialized to (version specific)\n * default base encoding and parsed without having to supply base encoders/decoders:\n *\n * ```TypeScript\n * const v1 = CID.parse('bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea')\n * v1.toString()\n * //> 'bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea'\n *\n * const v0 = CID.parse('QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n')\n * v0.toString()\n * //> 'QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n'\n * v0.toV1().toString()\n * //> 'bafybeihdwdcefgh4dqkjv67uzcmw7ojee6xedzdetojuzjevtenxquvyku'\n * ```\n *\n * ## Multicodec Encoders / Decoders / Codecs\n *\n * This library defines [`BlockEncoder`, `BlockDecoder` and `BlockCodec` interfaces](https://github.com/multiformats/js-multiformats/blob/master/src/codecs/interface.ts).\n * Codec implementations should conform to the `BlockCodec` interface which implements both `BlockEncoder` and `BlockDecoder`.\n * Here is an example implementation of JSON `BlockCodec`.\n *\n * ```TypeScript\n * export const { name, code, encode, decode } = {\n *   name: 'json',\n *   code: 0x0200,\n *   encode: json => new TextEncoder().encode(JSON.stringify(json)),\n *   decode: bytes => JSON.parse(new TextDecoder().decode(bytes))\n * }\n * ```\n *\n * ## Multihash Hashers\n *\n * This library defines [`MultihashHasher` and `MultihashDigest` interfaces](https://github.com/multiformats/js-multiformats/blob/master/src/hashes/interface.ts) and convinient function for implementing them:\n *\n * ```TypeScript\n * import * as hasher from 'multiformats/hashes/hasher'\n *\n * const sha256 = hasher.from({\n *   // As per multiformats table\n *   // https://github.com/multiformats/multicodec/blob/master/table.csv#L9\n *   name: 'sha2-256',\n *   code: 0x12,\n *\n *   encode: (input) => new Uint8Array(crypto.createHash('sha256').update(input).digest())\n * })\n *\n * const hash = await sha256.digest(json.encode({ hello: 'world' }))\n * CID.create(1, json.code, hash)\n *\n * //> CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)\n * ```\n *\n * ## Traversal\n *\n * This library contains higher-order functions for traversing graphs of data easily.\n *\n * `walk()` walks through the links in each block of a DAG calling a user-supplied loader function for each one, in depth-first order with no duplicate block visits. The loader should return a `Block` object and can be used to inspect and collect block ordering for a full DAG walk. The loader should `throw` on error, and return `null` if a block should be skipped by `walk()`.\n *\n * ```TypeScript\n * import { walk } from 'multiformats/traversal'\n * import * as Block from 'multiformats/block'\n * import * as codec from 'multiformats/codecs/json'\n * import { sha256 as hasher } from 'multiformats/hashes/sha2'\n *\n * // build a DAG (a single block for this simple example)\n * const value = { hello: 'world' }\n * const block = await Block.encode({ value, codec, hasher })\n * const { cid } = block\n * console.log(cid)\n * //> CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)\n *\n * // create a loader function that also collects CIDs of blocks in\n * // their traversal order\n * const load = (cid, blocks) => async (cid) => {\n *   // fetch a block using its cid\n *   // e.g.: const block = await fetchBlockByCID(cid)\n *   blocks.push(cid)\n *   return block\n * }\n *\n * // collect blocks in this DAG starting from the root `cid`\n * const blocks = []\n * await walk({ cid, load: load(cid, blocks) })\n *\n * console.log(blocks)\n * //> [CID(bagaaierasords4njcts6vs7qvdjfcvgnume4hqohf65zsfguprqphs3icwea)]\n * ```\n *\n * ## Legacy interface\n *\n * [`blockcodec-to-ipld-format`](https://github.com/ipld/js-blockcodec-to-ipld-format) converts a multiformats [`BlockCodec`](https://github.com/multiformats/js-multiformats/blob/master/src/codecs/interface.ts#L21) into an\n * [`interface-ipld-format`](https://github.com/ipld/interface-ipld-format) for use with the [`ipld`](https://github.com/ipld/ipld) package. This can help bridge IPLD codecs implemented using the structure and interfaces defined here to existing code that assumes, or requires `interface-ipld-format`. This bridge also includes the relevant TypeScript definitions.\n *\n * ## Implementations\n *\n * By default, no base encodings (other than base32 & base58btc), hash functions,\n * or codec implementations are exposed by `multiformats`, you need to\n * import the ones you need yourself.\n *\n * ### Multibase codecs\n *\n * | bases                                                         | import                      | repo                                                                                              |\n * | ------------------------------------------------------------- | --------------------------- | ------------------------------------------------------------------------------------------------- |\n * | `base16`                                                      | `multiformats/bases/base16` | [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/bases) |\n * | `base32`, `base32pad`, `base32hex`, `base32hexpad`, `base32z` | `multiformats/bases/base32` | [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/bases) |\n * | `base64`, `base64pad`, `base64url`, `base64urlpad`            | `multiformats/bases/base64` | [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/bases) |\n * | `base58btc`, `base58flick4`                                   | `multiformats/bases/base58` | [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/bases) |\n *\n * Other (less useful) bases implemented in [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/bases) include: `base2`, `base8`, `base10`, `base36` and `base256emoji`.\n *\n * ### Multihash hashers\n *\n * | hashes                                                                                                                          | import                         | repo                                                                                                               |\n * | ------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ | ------------------------------------------------------------------------------------------------------------------ |\n * | `sha2-256`, `sha2-512`                                                                                                          | `multiformats/hashes/sha2`     | [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/src/hashes)             |\n * | `sha3-224`, `sha3-256`, `sha3-384`,`sha3-512`, `shake-128`, `shake-256`, `keccak-224`, `keccak-256`, `keccak-384`, `keccak-512` | `@multiformats/sha3`           | [multiformats/js-sha3](https://github.com/multiformats/js-sha3)                                                    |\n * | `identity`                                                                                                                      | `multiformats/hashes/identity` | [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/src/hashes/identity.js) |\n * | `murmur3-128`, `murmur3-32`                                                                                                     | `@multiformats/murmur3`        | [multiformats/js-murmur3](https://github.com/multiformats/js-murmur3)                                              |\n * | `blake2b-*`, `blake2s-*`                                                                                                        | `@multiformats/blake2`         | [multiformats/js-blake2](https://github.com/multiformats/js-blake2)                                                |\n *\n * ### IPLD codecs (multicodec)\n *\n * | codec      | import                     | repo                                                                                                   |\n * | ---------- | -------------------------- | ------------------------------------------------------------------------------------------------------ |\n * | `raw`      | `multiformats/codecs/raw`  | [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/src/codecs) |\n * | `json`     | `multiformats/codecs/json` | [multiformats/js-multiformats](https://github.com/multiformats/js-multiformats/tree/master/src/codecs) |\n * | `dag-cbor` | `@ipld/dag-cbor`           | [ipld/js-dag-cbor](https://github.com/ipld/js-dag-cbor)                                                |\n * | `dag-json` | `@ipld/dag-json`           | [ipld/js-dag-json](https://github.com/ipld/js-dag-json)                                                |\n * | `dag-pb`   | `@ipld/dag-pb`             | [ipld/js-dag-pb](https://github.com/ipld/js-dag-pb)                                                    |\n * | `dag-jose` | `dag-jose`                 | [ceramicnetwork/js-dag-jose](https://github.com/ceramicnetwork/js-dag-jose)                            |\n */\n\nimport * as bytes from './bytes.js'\nimport { CID } from './cid.js'\nimport * as digest from './hashes/digest.js'\nimport * as hasher from './hashes/hasher.js'\nimport * as varint from './varint.js'\n\n// This way TS will also expose all the types from module\nexport * from './interface.js'\n\nexport { CID, hasher, digest, varint, bytes }\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAwMG;AAEH,OAAO,KAAK,KAAK,MAAM,YAAY,CAAA;AACnC,OAAO,EAAE,GAAG,EAAE,MAAM,UAAU,CAAA;AAC9B,OAAO,KAAK,MAAM,MAAM,oBAAoB,CAAA;AAC5C,OAAO,KAAK,MAAM,MAAM,oBAAoB,CAAA;AAC5C,OAAO,KAAK,MAAM,MAAM,aAAa,CAAA;AAErC,yDAAyD;AACzD,cAAc,gBAAgB,CAAA"}},
    {"offset": {"line": 2974, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/codecs/raw.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/codecs/raw.ts"],"sourcesContent":["import { coerce } from '../bytes.js'\nimport type { ArrayBufferView, ByteView } from './interface.js'\n\nexport const name = 'raw'\nexport const code = 0x55\n\nexport function encode (node: Uint8Array): ByteView<Uint8Array> {\n  return coerce(node)\n}\n\nexport function decode (data: ByteView<Uint8Array> | ArrayBufferView<Uint8Array>): Uint8Array {\n  return coerce(data)\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAA;;AAG7B,MAAM,IAAI,GAAG,KAAK,CAAA;AAClB,MAAM,IAAI,GAAG,IAAI,CAAA;AAElB,SAAU,MAAM,CAAE,IAAgB;IACtC,WAAO,iKAAM,EAAC,IAAI,CAAC,CAAA;AACrB,CAAC;AAEK,SAAU,MAAM,CAAE,IAAwD;IAC9E,WAAO,iKAAM,EAAC,IAAI,CAAC,CAAA;AACrB,CAAC"}},
    {"offset": {"line": 2998, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base64.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base64.ts"],"sourcesContent":["import { rfc4648 } from './base.js'\n\nexport const base64 = rfc4648({\n  prefix: 'm',\n  name: 'base64',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n  bitsPerChar: 6\n})\n\nexport const base64pad = rfc4648({\n  prefix: 'M',\n  name: 'base64pad',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n  bitsPerChar: 6\n})\n\nexport const base64url = rfc4648({\n  prefix: 'u',\n  name: 'base64url',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_',\n  bitsPerChar: 6\n})\n\nexport const base64urlpad = rfc4648({\n  prefix: 'U',\n  name: 'base64urlpad',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=',\n  bitsPerChar: 6\n})\n"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAA;;AAE5B,MAAM,MAAM,OAAG,0KAAO,EAAC;IAC5B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,QAAQ;IACd,QAAQ,EAAE,kEAAkE;IAC5E,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,SAAS,OAAG,0KAAO,EAAC;IAC/B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,WAAW;IACjB,QAAQ,EAAE,mEAAmE;IAC7E,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,SAAS,OAAG,0KAAO,EAAC;IAC/B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,WAAW;IACjB,QAAQ,EAAE,kEAAkE;IAC5E,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,YAAY,OAAG,0KAAO,EAAC;IAClC,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,cAAc;IACpB,QAAQ,EAAE,mEAAmE;IAC7E,WAAW,EAAE,CAAC;CACf,CAAC,CAAA"}},
    {"offset": {"line": 3038, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/hashes/sha2-browser.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/hashes/sha2-browser.ts"],"sourcesContent":["/* global crypto */\n\nimport { from } from './hasher.js'\n\nfunction sha (name: AlgorithmIdentifier): (data: Uint8Array) => Promise<Uint8Array> {\n  return async data => new Uint8Array(await crypto.subtle.digest(name, data))\n}\n\nexport const sha256 = from({\n  name: 'sha2-256',\n  code: 0x12,\n  encode: sha('SHA-256')\n})\n\nexport const sha512 = from({\n  name: 'sha2-512',\n  code: 0x13,\n  encode: sha('SHA-512')\n})\n"],"names":[],"mappings":"AAAA,iBAAA,EAAmB;;;;;;AAEnB,OAAO,EAAE,IAAI,EAAE,MAAM,aAAa,CAAA;;AAElC,SAAS,GAAG,CAAE,IAAyB;IACrC,OAAO,KAAK,EAAC,IAAI,EAAC,CAAG,CAAD,GAAK,UAAU,CAAC,MAAM,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAA;AAC7E,CAAC;AAEM,MAAM,MAAM,OAAG,0KAAI,EAAC;IACzB,IAAI,EAAE,UAAU;IAChB,IAAI,EAAE,IAAI;IACV,MAAM,EAAE,GAAG,CAAC,SAAS,CAAC;CACvB,CAAC,CAAA;AAEK,MAAM,MAAM,OAAG,0KAAI,EAAC;IACzB,IAAI,EAAE,UAAU;IAChB,IAAI,EAAE,IAAI;IACV,MAAM,EAAE,GAAG,CAAC,SAAS,CAAC;CACvB,CAAC,CAAA"}},
    {"offset": {"line": 3088, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base10.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base10.ts"],"sourcesContent":["import { baseX } from './base.js'\n\nexport const base10 = baseX({\n  prefix: '9',\n  name: 'base10',\n  alphabet: '0123456789'\n})\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,WAAW,CAAA;;AAE1B,MAAM,MAAM,OAAG,wKAAK,EAAC;IAC1B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,QAAQ;IACd,QAAQ,EAAE,YAAY;CACvB,CAAC,CAAA"}},
    {"offset": {"line": 3103, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base16.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base16.ts"],"sourcesContent":["import { rfc4648 } from './base.js'\n\nexport const base16 = rfc4648({\n  prefix: 'f',\n  name: 'base16',\n  alphabet: '0123456789abcdef',\n  bitsPerChar: 4\n})\n\nexport const base16upper = rfc4648({\n  prefix: 'F',\n  name: 'base16upper',\n  alphabet: '0123456789ABCDEF',\n  bitsPerChar: 4\n})\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAA;;AAE5B,MAAM,MAAM,OAAG,0KAAO,EAAC;IAC5B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,QAAQ;IACd,QAAQ,EAAE,kBAAkB;IAC5B,WAAW,EAAE,CAAC;CACf,CAAC,CAAA;AAEK,MAAM,WAAW,OAAG,0KAAO,EAAC;IACjC,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,aAAa;IACnB,QAAQ,EAAE,kBAAkB;IAC5B,WAAW,EAAE,CAAC;CACf,CAAC,CAAA"}},
    {"offset": {"line": 3127, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base2.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base2.ts"],"sourcesContent":["import { rfc4648 } from './base.js'\n\nexport const base2 = rfc4648({\n  prefix: '0',\n  name: 'base2',\n  alphabet: '01',\n  bitsPerChar: 1\n})\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAA;;AAE5B,MAAM,KAAK,OAAG,0KAAO,EAAC;IAC3B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,OAAO;IACb,QAAQ,EAAE,IAAI;IACd,WAAW,EAAE,CAAC;CACf,CAAC,CAAA"}},
    {"offset": {"line": 3143, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base256emoji.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base256emoji.ts"],"sourcesContent":["import { from } from './base.js'\n\nconst alphabet = Array.from('')\nconst alphabetBytesToChars: string[] = (alphabet.reduce<string[]>((p, c, i) => { p[i] = c; return p }, ([])))\nconst alphabetCharsToBytes: number[] = (alphabet.reduce<number[]>((p, c, i) => {\n  const codePoint = c.codePointAt(0)\n  if (codePoint == null) {\n    throw new Error(`Invalid character: ${c}`)\n  }\n  p[codePoint] = i\n  return p\n}, ([])))\n\nfunction encode (data: Uint8Array): string {\n  return data.reduce((p, c) => {\n    p += alphabetBytesToChars[c]\n    return p\n  }, '')\n}\n\nfunction decode (str: string): Uint8Array {\n  const byts = []\n  for (const char of str) {\n    const codePoint = char.codePointAt(0)\n    if (codePoint == null) {\n      throw new Error(`Invalid character: ${char}`)\n    }\n    const byt = alphabetCharsToBytes[codePoint]\n    if (byt == null) {\n      throw new Error(`Non-base256emoji character: ${char}`)\n    }\n    byts.push(byt)\n  }\n  return new Uint8Array(byts)\n}\n\nexport const base256emoji = from({\n  prefix: '',\n  name: 'base256emoji',\n  encode,\n  decode\n})\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAA;;AAEhC,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,weAAwe,CAAC,CAAA;AACrgB,MAAM,oBAAoB,GAAa,AAAC,QAAQ,CAAC,MAAM,CAAW,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IAAC,OAAO,CAAC,CAAA;AAAC,CAAC,EAAE,AAAC,EAAE,CAAC,CAAC,CAAC,CAAA;AAC7G,MAAM,oBAAoB,GAAa,AAAC,QAAQ,CAAC,MAAM,CAAW,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC5E,MAAM,SAAS,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAA;IAClC,IAAI,SAAS,IAAI,IAAI,EAAE,CAAC;QACtB,MAAM,IAAI,KAAK,CAAC,CAAA,mBAAA,EAAsB,CAAC,EAAE,CAAC,CAAA;IAC5C,CAAC;IACD,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAA;IAChB,OAAO,CAAC,CAAA;AACV,CAAC,EAAE,AAAC,EAAE,CAAC,CAAC,CAAC,CAAA;AAET,SAAS,MAAM,CAAE,IAAgB;IAC/B,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;QAC1B,CAAC,IAAI,oBAAoB,CAAC,CAAC,CAAC,CAAA;QAC5B,OAAO,CAAC,CAAA;IACV,CAAC,EAAE,EAAE,CAAC,CAAA;AACR,CAAC;AAED,SAAS,MAAM,CAAE,GAAW;IAC1B,MAAM,IAAI,GAAG,EAAE,CAAA;IACf,KAAK,MAAM,IAAI,IAAI,GAAG,CAAE,CAAC;QACvB,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAA;QACrC,IAAI,SAAS,IAAI,IAAI,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CAAC,CAAA,mBAAA,EAAsB,IAAI,EAAE,CAAC,CAAA;QAC/C,CAAC;QACD,MAAM,GAAG,GAAG,oBAAoB,CAAC,SAAS,CAAC,CAAA;QAC3C,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CAAC,CAAA,4BAAA,EAA+B,IAAI,EAAE,CAAC,CAAA;QACxD,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IAChB,CAAC;IACD,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,CAAA;AAC7B,CAAC;AAEM,MAAM,YAAY,OAAG,uKAAI,EAAC;IAC/B,MAAM,EAAE,IAAI;IACZ,IAAI,EAAE,cAAc;IACpB,MAAM;IACN,MAAM;CACP,CAAC,CAAA"}},
    {"offset": {"line": 3193, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/base8.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/base8.ts"],"sourcesContent":["import { rfc4648 } from './base.js'\n\nexport const base8 = rfc4648({\n  prefix: '7',\n  name: 'base8',\n  alphabet: '01234567',\n  bitsPerChar: 3\n})\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAA;;AAE5B,MAAM,KAAK,OAAG,0KAAO,EAAC;IAC3B,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,OAAO;IACb,QAAQ,EAAE,UAAU;IACpB,WAAW,EAAE,CAAC;CACf,CAAC,CAAA"}},
    {"offset": {"line": 3209, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/bases/identity.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/bases/identity.ts"],"sourcesContent":["import { fromString, toString } from '../bytes.js'\nimport { from } from './base.js'\n\nexport const identity = from({\n  prefix: '\\x00',\n  name: 'identity',\n  encode: (buf) => toString(buf),\n  decode: (str) => fromString(str)\n})\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAA;AAClD,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAA;;;AAEzB,MAAM,QAAQ,OAAG,uKAAI,EAAC;IAC3B,MAAM,EAAE,MAAM;IACd,IAAI,EAAE,UAAU;IAChB,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,GAAC,mKAAQ,EAAC,GAAG,CAAC;IAC9B,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,GAAC,qKAAU,EAAC,GAAG,CAAC;CACjC,CAAC,CAAA"}},
    {"offset": {"line": 3227, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/codecs/json.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/codecs/json.ts"],"sourcesContent":["import type { ArrayBufferView, ByteView } from './interface.js'\n\nconst textEncoder = new TextEncoder()\nconst textDecoder = new TextDecoder()\n\nexport const name = 'json'\nexport const code = 0x0200\n\nexport function encode <T> (node: T): ByteView<T> {\n  return textEncoder.encode(JSON.stringify(node))\n}\n\nexport function decode <T> (data: ByteView<T> | ArrayBufferView<T>): T {\n  return JSON.parse(textDecoder.decode(data))\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA,MAAM,WAAW,GAAG,IAAI,WAAW,EAAE,CAAA;AACrC,MAAM,WAAW,GAAG,IAAI,WAAW,EAAE,CAAA;AAE9B,MAAM,IAAI,GAAG,MAAM,CAAA;AACnB,MAAM,IAAI,GAAG,MAAM,CAAA;AAEpB,SAAU,MAAM,CAAM,IAAO;IACjC,OAAO,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA;AACjD,CAAC;AAEK,SAAU,MAAM,CAAM,IAAsC;IAChE,OAAO,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAA;AAC7C,CAAC"}},
    {"offset": {"line": 3278, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/basics.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/basics.ts"],"sourcesContent":["import * as base10 from './bases/base10.js'\nimport * as base16 from './bases/base16.js'\nimport * as base2 from './bases/base2.js'\nimport * as base256emoji from './bases/base256emoji.js'\nimport * as base32 from './bases/base32.js'\nimport * as base36 from './bases/base36.js'\nimport * as base58 from './bases/base58.js'\nimport * as base64 from './bases/base64.js'\nimport * as base8 from './bases/base8.js'\nimport * as identityBase from './bases/identity.js'\nimport * as json from './codecs/json.js'\nimport * as raw from './codecs/raw.js'\nimport * as identity from './hashes/identity.js'\nimport * as sha2 from './hashes/sha2.js'\nimport { CID, hasher, digest, varint, bytes } from './index.js'\n\nexport const bases = { ...identityBase, ...base2, ...base8, ...base10, ...base16, ...base32, ...base36, ...base58, ...base64, ...base256emoji }\nexport const hashes = { ...sha2, ...identity }\nexport const codecs = { raw, json }\n\nexport { CID, hasher, digest, varint, bytes }\n"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,KAAK,MAAM,MAAM,mBAAmB,CAAA;AAC3C,OAAO,KAAK,MAAM,MAAM,mBAAmB,CAAA;AAC3C,OAAO,KAAK,KAAK,MAAM,kBAAkB,CAAA;AACzC,OAAO,KAAK,YAAY,MAAM,yBAAyB,CAAA;AACvD,OAAO,KAAK,MAAM,MAAM,mBAAmB,CAAA;AAC3C,OAAO,KAAK,MAAM,MAAM,mBAAmB,CAAA;AAC3C,OAAO,KAAK,MAAM,MAAM,mBAAmB,CAAA;AAC3C,OAAO,KAAK,MAAM,MAAM,mBAAmB,CAAA;AAC3C,OAAO,KAAK,KAAK,MAAM,kBAAkB,CAAA;AACzC,OAAO,KAAK,YAAY,MAAM,qBAAqB,CAAA;AACnD,OAAO,KAAK,IAAI,MAAM,kBAAkB,CAAA;AACxC,OAAO,KAAK,GAAG,MAAM,iBAAiB,CAAA;AACtC,OAAO,KAAK,QAAQ,MAAM,sBAAsB,CAAA;AAChD,OAAO,KAAK,IAAI,MAAM,kBAAkB,CAAA;;;;;;AACxC,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,YAAY,CAAA;;;;;;;;;;;;;;;;AAExD,MAAM,KAAK,GAAG;IAAE,GAAG,mKAAY;IAAE,GAAG,gKAAK;IAAE,GAAG,gKAAK;IAAE,GAAG,iKAAM;IAAE,GAAG,iKAAM;IAAE,GAAG,iKAAM;IAAE,GAAG,iKAAM;IAAE,GAAG,iKAAM;IAAE,GAAG,iKAAM;IAAE,GAAG,uKAAY;AAAA,CAAE,CAAA;AACxI,MAAM,MAAM,GAAG;IAAE,GAAG,2KAAI;IAAE,GAAG,oKAAQ;AAAA,CAAE,CAAA;AACvC,MAAM,MAAM,GAAG;SAAE,GAAG;UAAE,IAAI;AAAA,CAAE,CAAA"}},
    {"offset": {"line": 3347, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/multiformats/dist/src/block.js","sources":["file:///home/driemworks/fangorn/website/node_modules/multiformats/src/block.ts"],"sourcesContent":["import { bytes as binary, CID } from './index.js'\nimport type * as API from './interface.js'\n\nfunction readonly ({ enumerable = true, configurable = false } = {}): { enumerable: boolean, configurable: boolean, writable: false } {\n  return { enumerable, configurable, writable: false }\n}\n\nfunction * linksWithin (path: [string | number, string], value: any): Iterable<[string, CID]> {\n  if (value != null && typeof value === 'object') {\n    if (Array.isArray(value)) {\n      for (const [index, element] of value.entries()) {\n        const elementPath = [...path, index]\n        const cid = CID.asCID(element)\n        if (cid != null) {\n          yield [elementPath.join('/'), cid]\n        } else if (typeof element === 'object') {\n          yield * links(element, elementPath)\n        }\n      }\n    } else {\n      const cid = CID.asCID(value)\n      if (cid != null) {\n        yield [path.join('/'), cid]\n      } else {\n        yield * links(value, path)\n      }\n    }\n  }\n}\n\nfunction * links <T> (source: T, base: Array<string | number>): Iterable<[string, CID]> {\n  if (source == null || source instanceof Uint8Array) {\n    return\n  }\n  const cid = CID.asCID(source)\n  if (cid != null) {\n    yield [base.join('/'), cid]\n  }\n  for (const [key, value] of Object.entries(source)) {\n    const path = [...base, key] as [string | number, string]\n    yield * linksWithin(path, value)\n  }\n}\n\nfunction * treeWithin (path: [string | number, string], value: any): Iterable<string> {\n  if (Array.isArray(value)) {\n    for (const [index, element] of value.entries()) {\n      const elementPath = [...path, index]\n      yield elementPath.join('/')\n      if (typeof element === 'object' && (CID.asCID(element) == null)) {\n        yield * tree(element, elementPath)\n      }\n    }\n  } else {\n    yield * tree(value, path)\n  }\n}\n\nfunction * tree <T> (source: T, base: Array<string | number>): Iterable<string> {\n  if (source == null || typeof source !== 'object') {\n    return\n  }\n  for (const [key, value] of Object.entries(source)) {\n    const path = [...base, key] as [string | number, string]\n    yield path.join('/')\n    if (value != null && !(value instanceof Uint8Array) && typeof value === 'object' && (CID.asCID(value) == null)) {\n      yield * treeWithin(path, value)\n    }\n  }\n}\n\nfunction get <T> (source: T, path: string[]): API.BlockCursorView<unknown> {\n  let node = source as Record<string, any>\n  for (const [index, key] of path.entries()) {\n    node = node[key]\n    if (node == null) {\n      throw new Error(`Object has no property at ${path.slice(0, index + 1).map(part => `[${JSON.stringify(part)}]`).join('')}`)\n    }\n    const cid = CID.asCID(node)\n    if (cid != null) {\n      return { value: cid, remaining: path.slice(index + 1).join('/') }\n    }\n  }\n  return { value: node }\n}\n\n/**\n * @template T - Logical type of the data encoded in the block\n * @template C - multicodec code corresponding to codec used to encode the block\n * @template A - multicodec code corresponding to the hashing algorithm used in CID creation.\n * @template V - CID version\n */\nexport class Block<T, C extends number, A extends number, V extends API.Version> implements API.BlockView<T, C, A, V> {\n  readonly cid: CID<T, C, A, V>\n  readonly bytes: API.ByteView<T>\n  readonly value: T\n  readonly asBlock: this\n\n  constructor ({ cid, bytes, value }: { cid: CID<T, C, A, V>, bytes: API.ByteView<T>, value: T }) {\n    if (cid == null || bytes == null || typeof value === 'undefined') { throw new Error('Missing required argument') }\n\n    this.cid = cid\n    this.bytes = bytes\n    this.value = value\n    this.asBlock = this\n\n    // Mark all the properties immutable\n    Object.defineProperties(this, {\n      cid: readonly(),\n      bytes: readonly(),\n      value: readonly(),\n      asBlock: readonly()\n    })\n  }\n\n  links (): Iterable<[string, CID<unknown, number, number, API.Version>]> {\n    return links(this.value, [])\n  }\n\n  tree (): Iterable<string> {\n    return tree(this.value, [])\n  }\n\n  get (path = '/'): API.BlockCursorView<unknown> {\n    return get(this.value, path.split('/').filter(Boolean))\n  }\n}\n\ninterface EncodeInput <T, Code extends number, Alg extends number> {\n  value: T\n  codec: API.BlockEncoder<Code, T>\n  hasher: API.MultihashHasher<Alg>\n}\n\n/**\n * @template T - Logical type of the data encoded in the block\n * @template Code - multicodec code corresponding to codec used to encode the block\n * @template Alg - multicodec code corresponding to the hashing algorithm used in CID creation.\n */\nexport async function encode <T, Code extends number, Alg extends number> ({ value, codec, hasher }: EncodeInput<T, Code, Alg>): Promise<API.BlockView<T, Code, Alg>> {\n  if (typeof value === 'undefined') { throw new Error('Missing required argument \"value\"') }\n  if (codec == null || hasher == null) { throw new Error('Missing required argument: codec or hasher') }\n\n  const bytes = codec.encode(value)\n  const hash = await hasher.digest(bytes)\n\n  const cid = CID.create(\n    1,\n    codec.code,\n    hash\n  ) as CID<T, Code, Alg, 1>\n\n  return new Block({ value, bytes, cid })\n}\n\ninterface DecodeInput <T, Code extends number, Alg extends number> {\n  bytes: API.ByteView<T>\n  codec: API.BlockDecoder<Code, T>\n  hasher: API.MultihashHasher<Alg>\n}\n\n/**\n * @template T - Logical type of the data encoded in the block\n * @template Code - multicodec code corresponding to codec used to encode the block\n * @template Alg - multicodec code corresponding to the hashing algorithm used in CID creation.\n */\nexport async function decode <T, Code extends number, Alg extends number> ({ bytes, codec, hasher }: DecodeInput<T, Code, Alg>): Promise<API.BlockView<T, Code, Alg>> {\n  if (bytes == null) { throw new Error('Missing required argument \"bytes\"') }\n  if (codec == null || hasher == null) { throw new Error('Missing required argument: codec or hasher') }\n\n  const value = codec.decode(bytes)\n  const hash = await hasher.digest(bytes)\n\n  const cid = CID.create(1, codec.code, hash) as CID<T, Code, Alg, 1>\n\n  return new Block({ value, bytes, cid })\n}\n\ntype CreateUnsafeInput <T, Code extends number, Alg extends number, V extends API.Version> = {\n  cid: API.Link<T, Code, Alg, V>\n  value: T\n  codec?: API.BlockDecoder<Code, T>\n  bytes: API.ByteView<T>\n} | {\n  cid: API.Link<T, Code, Alg, V>\n  value?: undefined\n  codec: API.BlockDecoder<Code, T>\n  bytes: API.ByteView<T>\n}\n\n/**\n * @template T - Logical type of the data encoded in the block\n * @template Code - multicodec code corresponding to codec used to encode the block\n * @template Alg - multicodec code corresponding to the hashing algorithm used in CID creation.\n * @template V - CID version\n */\nexport function createUnsafe <T, Code extends number, Alg extends number, V extends API.Version> ({ bytes, cid, value: maybeValue, codec }: CreateUnsafeInput<T, Code, Alg, V>): API.BlockView<T, Code, Alg, V> {\n  const value = maybeValue !== undefined\n    ? maybeValue\n    : (codec?.decode(bytes))\n\n  if (value === undefined) { throw new Error('Missing required argument, must either provide \"value\" or \"codec\"') }\n\n  return new Block({\n    cid: cid as CID<T, Code, Alg, V>,\n    bytes,\n    value\n  })\n}\n\ninterface CreateInput <T, Code extends number, Alg extends number, V extends API.Version> {\n  bytes: API.ByteView<T>\n  cid: API.Link<T, Code, Alg, V>\n  hasher: API.MultihashHasher<Alg>\n  codec: API.BlockDecoder<Code, T>\n}\n\n/**\n * @template T - Logical type of the data encoded in the block\n * @template Code - multicodec code corresponding to codec used to encode the block\n * @template Alg - multicodec code corresponding to the hashing algorithm used in CID creation.\n * @template V - CID version\n */\nexport async function create <T, Code extends number, Alg extends number, V extends API.Version> ({ bytes, cid, hasher, codec }: CreateInput<T, Code, Alg, V>): Promise<API.BlockView<T, Code, Alg, V>> {\n  if (bytes == null) { throw new Error('Missing required argument \"bytes\"') }\n  if (hasher == null) { throw new Error('Missing required argument \"hasher\"') }\n  const value = codec.decode(bytes)\n  const hash = await hasher.digest(bytes)\n  if (!binary.equals(cid.multihash.bytes, hash.bytes)) {\n    throw new Error('CID hash does not match bytes')\n  }\n\n  return createUnsafe({\n    bytes,\n    cid,\n    value,\n    codec\n  })\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3567, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-cbor/src/index.js"],"sourcesContent":["import * as cborg from 'cborg'\nimport { CID } from 'multiformats/cid'\n\n// https://github.com/ipfs/go-ipfs/issues/3570#issuecomment-273931692\nconst CID_CBOR_TAG = 42\n\n/**\n * @template T\n * @typedef {import('multiformats/codecs/interface').ByteView<T>} ByteView\n */\n\n/**\n * @template T\n * @typedef {import('multiformats/codecs/interface').ArrayBufferView<T>} ArrayBufferView\n */\n\n/**\n * @template T\n * @param {ByteView<T> | ArrayBufferView<T>} buf\n * @returns {ByteView<T>}\n */\nexport function toByteView (buf) {\n  if (buf instanceof ArrayBuffer) {\n    return new Uint8Array(buf, 0, buf.byteLength)\n  }\n\n  return buf\n}\n\n/**\n * cidEncoder will receive all Objects during encode, it needs to filter out\n * anything that's not a CID and return `null` for that so it's encoded as\n * normal.\n *\n * @param {any} obj\n * @returns {cborg.Token[]|null}\n */\nfunction cidEncoder (obj) {\n  if (obj.asCID !== obj && obj['/'] !== obj.bytes) {\n    return null // any other kind of object\n  }\n  const cid = CID.asCID(obj)\n  /* c8 ignore next 4 */\n  // very unlikely case, and it'll probably throw a recursion error in cborg\n  if (!cid) {\n    return null\n  }\n  const bytes = new Uint8Array(cid.bytes.byteLength + 1)\n  bytes.set(cid.bytes, 1) // prefix is 0x00, for historical reasons\n  return [\n    new cborg.Token(cborg.Type.tag, CID_CBOR_TAG),\n    new cborg.Token(cborg.Type.bytes, bytes)\n  ]\n}\n\n// eslint-disable-next-line jsdoc/require-returns-check\n/**\n * Intercept all `undefined` values from an object walk and reject the entire\n * object if we find one.\n *\n * @returns {null}\n */\nfunction undefinedEncoder () {\n  throw new Error('`undefined` is not supported by the IPLD Data Model and cannot be encoded')\n}\n\n/**\n * Intercept all `number` values from an object walk and reject the entire\n * object if we find something that doesn't fit the IPLD data model (NaN &\n * Infinity).\n *\n * @param {number} num\n * @returns {null}\n */\nfunction numberEncoder (num) {\n  if (Number.isNaN(num)) {\n    throw new Error('`NaN` is not supported by the IPLD Data Model and cannot be encoded')\n  }\n  if (num === Infinity || num === -Infinity) {\n    throw new Error('`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded')\n  }\n  return null\n}\n\n/**\n * @param {Map<any, any>} map\n * @returns {null}\n */\nfunction mapEncoder (map) {\n  for (const key of map.keys()) {\n    if (typeof key !== 'string' || key.length === 0) {\n      throw new Error('Non-string Map keys are not supported by the IPLD Data Model and cannot be encoded')\n    }\n  }\n  return null\n}\n\nconst _encodeOptions = {\n  float64: true,\n  typeEncoders: {\n    Map: mapEncoder,\n    Object: cidEncoder,\n    undefined: undefinedEncoder,\n    number: numberEncoder\n  }\n}\n\nexport const encodeOptions = {\n  ..._encodeOptions,\n  typeEncoders: {\n    ..._encodeOptions.typeEncoders\n  }\n}\n\n/**\n * @param {Uint8Array} bytes\n * @returns {CID}\n */\nfunction cidDecoder (bytes) {\n  if (bytes[0] !== 0) {\n    throw new Error('Invalid CID for CBOR tag 42; expected leading 0x00')\n  }\n  return CID.decode(bytes.subarray(1)) // ignore leading 0x00\n}\n\nconst _decodeOptions = {\n  allowIndefinite: false,\n  coerceUndefinedToNull: true,\n  allowNaN: false,\n  allowInfinity: false,\n  allowBigInt: true, // this will lead to BigInt for ints outside of\n  // safe-integer range, which may surprise users\n  strict: true,\n  useMaps: false,\n  rejectDuplicateMapKeys: true,\n  /** @type {import('cborg').TagDecoder[]} */\n  tags: []\n}\n_decodeOptions.tags[CID_CBOR_TAG] = cidDecoder\n\nexport const decodeOptions = {\n  ..._decodeOptions,\n  tags: _decodeOptions.tags.slice()\n}\n\nexport const name = 'dag-cbor'\nexport const code = 0x71\n\n/**\n * @template T\n * @param {T} node\n * @returns {ByteView<T>}\n */\nexport const encode = (node) => cborg.encode(node, _encodeOptions)\n\n/**\n * @template T\n * @param {ByteView<T> | ArrayBufferView<T>} data\n * @returns {T}\n */\nexport const decode = (data) => cborg.decode(toByteView(data), _decodeOptions)\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA,qEAAqE;AACrE,MAAM,eAAe;AAiBd,SAAS,WAAY,GAAG;IAC7B,IAAI,eAAe,aAAa;QAC9B,OAAO,IAAI,WAAW,KAAK,GAAG,IAAI,UAAU;IAC9C;IAEA,OAAO;AACT;AAEA;;;;;;;CAOC,GACD,SAAS,WAAY,GAAG;IACtB,IAAI,IAAI,KAAK,KAAK,OAAO,GAAG,CAAC,IAAI,KAAK,IAAI,KAAK,EAAE;QAC/C,OAAO,KAAK,2BAA2B;;IACzC;IACA,MAAM,MAAM,4KAAG,CAAC,KAAK,CAAC;IACtB,oBAAoB,GACpB,0EAA0E;IAC1E,IAAI,CAAC,KAAK;QACR,OAAO;IACT;IACA,MAAM,QAAQ,IAAI,WAAW,IAAI,KAAK,CAAC,UAAU,GAAG;IACpD,MAAM,GAAG,CAAC,IAAI,KAAK,EAAE,IAAG,yCAAyC;IACjE,OAAO;QACL,IAAI,iJAAW,CAAC,gJAAU,CAAC,GAAG,EAAE;QAChC,IAAI,iJAAW,CAAC,gJAAU,CAAC,KAAK,EAAE;KACnC;AACH;AAEA,uDAAuD;AACvD;;;;;CAKC,GACD,SAAS;IACP,MAAM,IAAI,MAAM;AAClB;AAEA;;;;;;;CAOC,GACD,SAAS,cAAe,GAAG;IACzB,IAAI,OAAO,KAAK,CAAC,MAAM;QACrB,MAAM,IAAI,MAAM;IAClB;IACA,IAAI,QAAQ,YAAY,QAAQ,CAAC,UAAU;QACzC,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEA;;;CAGC,GACD,SAAS,WAAY,GAAG;IACtB,KAAK,MAAM,OAAO,IAAI,IAAI,GAAI;QAC5B,IAAI,OAAO,QAAQ,YAAY,IAAI,MAAM,KAAK,GAAG;YAC/C,MAAM,IAAI,MAAM;QAClB;IACF;IACA,OAAO;AACT;AAEA,MAAM,iBAAiB;IACrB,SAAS;IACT,cAAc;QACZ,KAAK;QACL,QAAQ;QACR,WAAW;QACX,QAAQ;IACV;AACF;AAEO,MAAM,gBAAgB;IAC3B,GAAG,cAAc;IACjB,cAAc;QACZ,GAAG,eAAe,YAAY;IAChC;AACF;AAEA;;;CAGC,GACD,SAAS,WAAY,KAAK;IACxB,IAAI,KAAK,CAAC,EAAE,KAAK,GAAG;QAClB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,4KAAG,CAAC,MAAM,CAAC,MAAM,QAAQ,CAAC,IAAI,sBAAsB;;AAC7D;AAEA,MAAM,iBAAiB;IACrB,iBAAiB;IACjB,uBAAuB;IACvB,UAAU;IACV,eAAe;IACf,aAAa;IACb,+CAA+C;IAC/C,QAAQ;IACR,SAAS;IACT,wBAAwB;IACxB,yCAAyC,GACzC,MAAM,EAAE;AACV;AACA,eAAe,IAAI,CAAC,aAAa,GAAG;AAE7B,MAAM,gBAAgB;IAC3B,GAAG,cAAc;IACjB,MAAM,eAAe,IAAI,CAAC,KAAK;AACjC;AAEO,MAAM,OAAO;AACb,MAAM,OAAO;AAOb,MAAM,SAAS,CAAC,OAAS,mJAAY,CAAC,MAAM;AAO5C,MAAM,SAAS,CAAC,OAAS,mJAAY,CAAC,WAAW,OAAO","ignoreList":[0]}},
    {"offset": {"line": 3708, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-json/src/index.js"],"sourcesContent":["/* eslint max-depth: [\"error\", 7] */\nimport { Token, Type } from 'cborg'\nimport * as cborgJson from 'cborg/json'\nimport { CID } from 'multiformats'\nimport { base64 } from 'multiformats/bases/base64'\n\n/**\n * @template T\n * @typedef {import('multiformats/codecs/interface').ByteView<T>} ByteView\n */\n/**\n * @template T\n * @typedef {import('multiformats/codecs/interface').ArrayBufferView<T>} ArrayBufferView\n */\n/**\n * @template T\n * @typedef {import('multiformats').ToString<T>} ToString\n */\n/**\n * @typedef {import('cborg/interface').DecodeTokenizer} DecodeTokenizer\n */\n\n/**\n * @template T\n * @param {ByteView<T> | ArrayBufferView<T>} buf\n * @returns {ByteView<T>}\n */\nfunction toByteView (buf) {\n  if (buf instanceof ArrayBuffer) {\n    return new Uint8Array(buf, 0, buf.byteLength)\n  }\n\n  return buf\n}\n\n/**\n * cidEncoder will receive all Objects during encode, it needs to filter out\n * anything that's not a CID and return `null` for that so it's encoded as\n * normal. Encoding a CID means replacing it with a `{\"/\":\"<CidString>}`\n * object as per the DAG-JSON spec.\n *\n * @param {any} obj\n * @returns {Token[]|null}\n */\nfunction cidEncoder (obj) {\n  if (obj.asCID !== obj && obj['/'] !== obj.bytes) {\n    return null // any other kind of object\n  }\n  const cid = CID.asCID(obj)\n  /* c8 ignore next 4 */\n  // very unlikely case, and it'll probably throw a recursion error in cborg\n  if (!cid) {\n    return null\n  }\n  const cidString = cid.toString()\n\n  return [\n    new Token(Type.map, Infinity, 1),\n    new Token(Type.string, '/', 1), // key\n    new Token(Type.string, cidString, cidString.length), // value\n    new Token(Type.break, undefined, 1)\n  ]\n}\n\n/**\n * bytesEncoder will receive all Uint8Arrays (and friends) during encode, it\n * needs to replace it with a `{\"/\":{\"bytes\":\"Base64ByteString\"}}` object as\n * per the DAG-JSON spec.\n *\n * @param {Uint8Array} bytes\n * @returns {Token[]|null}\n */\nfunction bytesEncoder (bytes) {\n  const bytesString = base64.encode(bytes).slice(1) // no mbase prefix\n  return [\n    new Token(Type.map, Infinity, 1),\n    new Token(Type.string, '/', 1), // key\n    new Token(Type.map, Infinity, 1), // value\n    new Token(Type.string, 'bytes', 5), // inner key\n    new Token(Type.string, bytesString, bytesString.length), // inner value\n    new Token(Type.break, undefined, 1),\n    new Token(Type.break, undefined, 1)\n  ]\n}\n\n/**\n * taBytesEncoder wraps bytesEncoder() but for the more exotic typed arrays so\n * that we access the underlying ArrayBuffer data\n *\n * @param {Int8Array|Uint16Array|Int16Array|Uint32Array|Int32Array|Float32Array|Float64Array|Uint8ClampedArray|BigInt64Array|BigUint64Array} obj\n * @returns {Token[]|null}\n */\nfunction taBytesEncoder (obj) {\n  return bytesEncoder(new Uint8Array(obj.buffer, obj.byteOffset, obj.byteLength))\n}\n\n/**\n * abBytesEncoder wraps bytesEncoder() but for plain ArrayBuffers\n *\n * @param {ArrayBuffer} ab\n * @returns {Token[]|null}\n */\nfunction abBytesEncoder (ab) {\n  return bytesEncoder(new Uint8Array(ab))\n}\n\n// eslint-disable-next-line jsdoc/require-returns-check\n/**\n * Intercept all `undefined` values from an object walk and reject the entire\n * object if we find one.\n *\n * @returns {null}\n */\nfunction undefinedEncoder () {\n  throw new Error('`undefined` is not supported by the IPLD Data Model and cannot be encoded')\n}\n\n/**\n * Intercept all `number` values from an object walk and reject the entire\n * object if we find something that doesn't fit the IPLD data model (NaN &\n * Infinity).\n *\n * @param {number} num\n * @returns {null}\n */\nfunction numberEncoder (num) {\n  if (Number.isNaN(num)) {\n    throw new Error('`NaN` is not supported by the IPLD Data Model and cannot be encoded')\n  }\n  if (num === Infinity || num === -Infinity) {\n    throw new Error('`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded')\n  }\n  return null // process with standard number encoder\n}\n\nconst encodeOptions = {\n  typeEncoders: {\n    Object: cidEncoder,\n    Buffer: bytesEncoder,\n    Uint8Array: bytesEncoder,\n    Int8Array: taBytesEncoder,\n    Uint16Array: taBytesEncoder,\n    Int16Array: taBytesEncoder,\n    Uint32Array: taBytesEncoder,\n    Int32Array: taBytesEncoder,\n    Float32Array: taBytesEncoder,\n    Float64Array: taBytesEncoder,\n    Uint8ClampedArray: taBytesEncoder,\n    BigInt64Array: taBytesEncoder,\n    BigUint64Array: taBytesEncoder,\n    DataView: taBytesEncoder,\n    ArrayBuffer: abBytesEncoder,\n    undefined: undefinedEncoder,\n    number: numberEncoder\n  }\n}\n\n/**\n * @implements {DecodeTokenizer}\n */\nclass DagJsonTokenizer extends cborgJson.Tokenizer {\n  /**\n   * @param {Uint8Array} data\n   * @param {object} [options]\n   */\n  constructor (data, options) {\n    super(data, options)\n    /** @type {Token[]} */\n    this.tokenBuffer = []\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  done () {\n    return this.tokenBuffer.length === 0 && super.done()\n  }\n\n  /**\n   * @returns {Token}\n   */\n  _next () {\n    if (this.tokenBuffer.length > 0) {\n      // @ts-ignore https://github.com/Microsoft/TypeScript/issues/30406\n      return this.tokenBuffer.pop()\n    }\n    return super.next()\n  }\n\n  /**\n   * Implements rules outlined in https://github.com/ipld/specs/pull/356\n   *\n   * @returns {Token}\n   */\n  next () {\n    const token = this._next()\n\n    if (token.type === Type.map) {\n      const keyToken = this._next()\n      if (keyToken.type === Type.string && keyToken.value === '/') {\n        const valueToken = this._next()\n        if (valueToken.type === Type.string) { // *must* be a CID\n          const breakToken = this._next() // swallow the end-of-map token\n          if (breakToken.type !== Type.break) {\n            throw new Error('Invalid encoded CID form')\n          }\n          this.tokenBuffer.push(valueToken) // CID.parse will pick this up after our tag token\n          return new Token(Type.tag, 42, 0)\n        }\n        if (valueToken.type === Type.map) {\n          const innerKeyToken = this._next()\n          if (innerKeyToken.type === Type.string && innerKeyToken.value === 'bytes') {\n            const innerValueToken = this._next()\n            if (innerValueToken.type === Type.string) { // *must* be Bytes\n              for (let i = 0; i < 2; i++) {\n                const breakToken = this._next() // swallow two end-of-map tokens\n                if (breakToken.type !== Type.break) {\n                  throw new Error('Invalid encoded Bytes form')\n                }\n              }\n              const bytes = base64.decode(`m${innerValueToken.value}`)\n              return new Token(Type.bytes, bytes, innerValueToken.value.length)\n            }\n            this.tokenBuffer.push(innerValueToken) // bail\n          }\n          this.tokenBuffer.push(innerKeyToken) // bail\n        }\n        this.tokenBuffer.push(valueToken) // bail\n      }\n      this.tokenBuffer.push(keyToken) // bail\n    }\n    return token\n  }\n}\n\nconst decodeOptions = {\n  allowIndefinite: false,\n  allowUndefined: false,\n  allowNaN: false,\n  allowInfinity: false,\n  allowBigInt: true, // this will lead to BigInt for ints outside of\n  // safe-integer range, which may surprise users\n  strict: true,\n  useMaps: false,\n  rejectDuplicateMapKeys: true,\n  /** @type {import('cborg').TagDecoder[]} */\n  tags: []\n}\n\n// we're going to get TAG(42)STRING(\"bafy...\") from the tokenizer so we only need\n// to deal with the STRING(\"bafy...\") at this point\ndecodeOptions.tags[42] = CID.parse\n\nexport const name = 'dag-json'\nexport const code = 0x0129\n\n/**\n * @template T\n * @param {T} node\n * @returns {ByteView<T>}\n */\nexport const encode = (node) => cborgJson.encode(node, encodeOptions)\n\n/**\n * @template T\n * @param {ByteView<T> | ArrayBufferView<T>} data\n * @returns {T}\n */\nexport const decode = (data) => {\n  const buf = toByteView(data)\n  // the tokenizer is stateful so we need a single instance of it\n  const options = Object.assign(decodeOptions, { tokenizer: new DagJsonTokenizer(buf, decodeOptions) })\n  return cborgJson.decode(buf, options)\n}\n\n/**\n * @template T\n * @param {T} node\n * @returns {ToString<T>}\n */\nexport const format = (node) => utf8Decoder.decode(encode(node))\nexport { format as stringify }\nconst utf8Decoder = new TextDecoder()\n\n/**\n * @template T\n * @param {ToString<T>} data\n * @returns {T}\n */\nexport const parse = (data) => decode(utf8Encoder.encode(data))\nconst utf8Encoder = new TextEncoder()\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3970, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/varint/encode.js"],"sourcesContent":["module.exports = encode\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31)\n\nfunction encode(num, out, offset) {\n  if (Number.MAX_SAFE_INTEGER && num > Number.MAX_SAFE_INTEGER) {\n    encode.bytes = 0\n    throw new RangeError('Could not encode varint')\n  }\n  out = out || []\n  offset = offset || 0\n  var oldOffset = offset\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB\n    num /= 128\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB\n    num >>>= 7\n  }\n  out[offset] = num | 0\n  \n  encode.bytes = offset - oldOffset + 1\n  \n  return out\n}\n"],"names":[],"mappings":"AAAA,OAAO,OAAO,GAAG;AAEjB,IAAI,MAAM,MACN,OAAO,MACP,SAAS,CAAC,MACV,MAAM,KAAK,GAAG,CAAC,GAAG;AAEtB,SAAS,OAAO,GAAG,EAAE,GAAG,EAAE,MAAM;IAC9B,IAAI,OAAO,gBAAgB,IAAI,MAAM,OAAO,gBAAgB,EAAE;QAC5D,OAAO,KAAK,GAAG;QACf,MAAM,IAAI,WAAW;IACvB;IACA,MAAM,OAAO,EAAE;IACf,SAAS,UAAU;IACnB,IAAI,YAAY;IAEhB,MAAM,OAAO,IAAK;QAChB,GAAG,CAAC,SAAS,GAAG,AAAC,MAAM,OAAQ;QAC/B,OAAO;IACT;IACA,MAAM,MAAM,OAAQ;QAClB,GAAG,CAAC,SAAS,GAAG,AAAC,MAAM,OAAQ;QAC/B,SAAS;IACX;IACA,GAAG,CAAC,OAAO,GAAG,MAAM;IAEpB,OAAO,KAAK,GAAG,SAAS,YAAY;IAEpC,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 3995, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/varint/decode.js"],"sourcesContent":["module.exports = read\n\nvar MSB = 0x80\n  , REST = 0x7F\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length\n\n  do {\n    if (counter >= l || shift > 49) {\n      read.bytes = 0\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++]\n    res += shift < 28\n      ? (b & REST) << shift\n      : (b & REST) * Math.pow(2, shift)\n    shift += 7\n  } while (b >= MSB)\n\n  read.bytes = counter - offset\n\n  return res\n}\n"],"names":[],"mappings":"AAAA,OAAO,OAAO,GAAG;AAEjB,IAAI,MAAM,MACN,OAAO;AAEX,SAAS,KAAK,GAAG,EAAE,MAAM;IACvB,IAAI,MAAS,GACT,SAAS,UAAU,GACnB,QAAS,GACT,UAAU,QACV,GACA,IAAI,IAAI,MAAM;IAElB,GAAG;QACD,IAAI,WAAW,KAAK,QAAQ,IAAI;YAC9B,KAAK,KAAK,GAAG;YACb,MAAM,IAAI,WAAW;QACvB;QACA,IAAI,GAAG,CAAC,UAAU;QAClB,OAAO,QAAQ,KACX,CAAC,IAAI,IAAI,KAAK,QACd,CAAC,IAAI,IAAI,IAAI,KAAK,GAAG,CAAC,GAAG;QAC7B,SAAS;IACX,QAAS,KAAK,IAAI;IAElB,KAAK,KAAK,GAAG,UAAU;IAEvB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 4014, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/varint/length.js"],"sourcesContent":["\nvar N1 = Math.pow(2,  7)\nvar N2 = Math.pow(2, 14)\nvar N3 = Math.pow(2, 21)\nvar N4 = Math.pow(2, 28)\nvar N5 = Math.pow(2, 35)\nvar N6 = Math.pow(2, 42)\nvar N7 = Math.pow(2, 49)\nvar N8 = Math.pow(2, 56)\nvar N9 = Math.pow(2, 63)\n\nmodule.exports = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n}\n"],"names":[],"mappings":"AACA,IAAI,KAAK,KAAK,GAAG,CAAC,GAAI;AACtB,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG;AACrB,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG;AACrB,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG;AACrB,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG;AACrB,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG;AACrB,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG;AACrB,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG;AACrB,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG;AAErB,OAAO,OAAO,GAAG,SAAU,KAAK;IAC9B,OACE,QAAQ,KAAK,IACb,QAAQ,KAAK,IACb,QAAQ,KAAK,IACb,QAAQ,KAAK,IACb,QAAQ,KAAK,IACb,QAAQ,KAAK,IACb,QAAQ,KAAK,IACb,QAAQ,KAAK,IACb,QAAQ,KAAK,IACA;AAEjB","ignoreList":[0]}},
    {"offset": {"line": 4029, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/varint/index.js"],"sourcesContent":["module.exports = {\n    encode: require('./encode.js')\n  , decode: require('./decode.js')\n  , encodingLength: require('./length.js')\n}\n"],"names":[],"mappings":"AAAA,OAAO,OAAO,GAAG;IACb,MAAM;IACN,MAAM;IACN,cAAc;AAClB","ignoreList":[0]}},
    {"offset": {"line": 4038, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/decoder-common.js"],"sourcesContent":["import varint from 'varint'\n\nexport const CIDV0_BYTES = {\n  SHA2_256: 0x12,\n  LENGTH: 0x20,\n  DAG_PB: 0x70\n}\n\nexport const V2_HEADER_LENGTH = /* characteristics */ 16 /* v1 offset */ + 8 /* v1 size */ + 8 /* index offset */ + 8\n\n/**\n * Decodes varint and seeks the buffer\n *\n * ```js\n * // needs bytes to be read first\n * const bytes = reader.upTo(8) // maybe async\n * ```\n *\n * @param {Uint8Array} bytes\n * @param {import('./coding.js').Seekable} seeker\n * @returns {number}\n */\nexport function decodeVarint (bytes, seeker) {\n  if (!bytes.length) {\n    throw new Error('Unexpected end of data')\n  }\n  const i = varint.decode(bytes)\n  seeker.seek(/** @type {number} */(varint.decode.bytes))\n  return i\n}\n\n/**\n * Decode v2 header\n *\n * ```js\n * // needs bytes to be read first\n * const bytes = reader.exactly(V2_HEADER_LENGTH, true) // maybe async\n * ```\n *\n * @param {Uint8Array} bytes\n * @returns {import('./coding.js').CarV2FixedHeader}\n */\nexport function decodeV2Header (bytes) {\n  const dv = new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength)\n  let offset = 0\n  const header = {\n    version: 2,\n    /** @type {[bigint, bigint]} */\n    characteristics: [\n      dv.getBigUint64(offset, true),\n      dv.getBigUint64(offset += 8, true)\n    ],\n    dataOffset: Number(dv.getBigUint64(offset += 8, true)),\n    dataSize: Number(dv.getBigUint64(offset += 8, true)),\n    indexOffset: Number(dv.getBigUint64(offset += 8, true))\n  }\n  return header\n}\n\n/**\n * Checks the length of the multihash to be read afterwards\n *\n * ```js\n * // needs bytes to be read first\n * const bytes = reader.upTo(8) // maybe async\n * ```\n *\n * @param {Uint8Array} bytes\n */\nexport function getMultihashLength (bytes) {\n  // | code | length | .... |\n  // where both code and length are varints, so we have to decode\n  // them first before we can know total length\n\n  varint.decode(bytes) // code\n  const codeLength = /** @type {number} */(varint.decode.bytes)\n  const length = varint.decode(bytes.subarray(varint.decode.bytes))\n  const lengthLength = /** @type {number} */(varint.decode.bytes)\n  const mhLength = codeLength + lengthLength + length\n\n  return mhLength\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,MAAM,cAAc;IACzB,UAAU;IACV,QAAQ;IACR,QAAQ;AACV;AAEO,MAAM,mBAAmB,mBAAmB,GAAG,GAAG,aAAa,MAAK,EAAE,WAAW,MAAK,EAAE,gBAAgB,MAAK;AAc7G,SAAS,aAAc,KAAK,EAAE,MAAM;IACzC,IAAI,CAAC,MAAM,MAAM,EAAE;QACjB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,IAAI,6IAAM,CAAC,MAAM,CAAC;IACxB,OAAO,IAAI,CAAuB,6IAAM,CAAC,MAAM,CAAC,KAAK;IACrD,OAAO;AACT;AAaO,SAAS,eAAgB,KAAK;IACnC,MAAM,KAAK,IAAI,SAAS,MAAM,MAAM,EAAE,MAAM,UAAU,EAAE,MAAM,UAAU;IACxE,IAAI,SAAS;IACb,MAAM,SAAS;QACb,SAAS;QACT,6BAA6B,GAC7B,iBAAiB;YACf,GAAG,YAAY,CAAC,QAAQ;YACxB,GAAG,YAAY,CAAC,UAAU,GAAG;SAC9B;QACD,YAAY,OAAO,GAAG,YAAY,CAAC,UAAU,GAAG;QAChD,UAAU,OAAO,GAAG,YAAY,CAAC,UAAU,GAAG;QAC9C,aAAa,OAAO,GAAG,YAAY,CAAC,UAAU,GAAG;IACnD;IACA,OAAO;AACT;AAYO,SAAS,mBAAoB,KAAK;IACvC,2BAA2B;IAC3B,+DAA+D;IAC/D,6CAA6C;IAE7C,6IAAM,CAAC,MAAM,CAAC,QAAO,OAAO;IAC5B,MAAM,aAAmC,6IAAM,CAAC,MAAM,CAAC,KAAK;IAC5D,MAAM,SAAS,6IAAM,CAAC,MAAM,CAAC,MAAM,QAAQ,CAAC,6IAAM,CAAC,MAAM,CAAC,KAAK;IAC/D,MAAM,eAAqC,6IAAM,CAAC,MAAM,CAAC,KAAK;IAC9D,MAAM,WAAW,aAAa,eAAe;IAE7C,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 4096, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/header-validator.js"],"sourcesContent":["/* eslint-disable jsdoc/check-indentation, max-depth */\n\n/**\n * Auto-generated with @ipld/schema@v4.2.0 at Thu Sep 14 2023 from IPLD Schema:\n *\n * # CarV1HeaderOrV2Pragma is a more relaxed form, and can parse {version:x} where\n * # roots are optional. This is typically useful for the {verison:2} CARv2\n * # pragma.\n *\n * type CarV1HeaderOrV2Pragma struct {\n *   roots optional [&Any]\n *   # roots is _not_ optional for CarV1 but we defer that check within code to\n *   # gracefully handle the V2 case where it's just {version:X}\n *   version Int\n * }\n *\n * # CarV1Header is the strict form of the header, and requires roots to be\n * # present. This is compatible with the CARv1 specification.\n *\n * # type CarV1Header struct {\n * #   roots [&Any]\n * #   version Int\n * # }\n *\n */\n\nconst Kinds = {\n  Null: /**\n         * @param obj\n         * @returns {undefined|null}\n         */ (/** @type {any} */ obj) => obj === null ? obj : undefined,\n  Int: /**\n        * @param obj\n        * @returns {undefined|number}\n        */ (/** @type {any} */ obj) => Number.isInteger(obj) ? obj : undefined,\n  Float: /**\n          * @param obj\n          * @returns {undefined|number}\n          */ (/** @type {any} */ obj) => typeof obj === 'number' && Number.isFinite(obj) ? obj : undefined,\n  String: /**\n           * @param obj\n           * @returns {undefined|string}\n           */ (/** @type {any} */ obj) => typeof obj === 'string' ? obj : undefined,\n  Bool: /**\n         * @param obj\n         * @returns {undefined|boolean}\n         */ (/** @type {any} */ obj) => typeof obj === 'boolean' ? obj : undefined,\n  Bytes: /**\n          * @param obj\n          * @returns {undefined|Uint8Array}\n          */ (/** @type {any} */ obj) => obj instanceof Uint8Array ? obj : undefined,\n  Link: /**\n         * @param obj\n         * @returns {undefined|object}\n         */ (/** @type {any} */ obj) => obj !== null && typeof obj === 'object' && obj.asCID === obj ? obj : undefined,\n  List: /**\n         * @param obj\n         * @returns {undefined|Array<any>}\n         */ (/** @type {any} */ obj) => Array.isArray(obj) ? obj : undefined,\n  Map: /**\n        * @param obj\n        * @returns {undefined|object}\n        */ (/** @type {any} */ obj) => obj !== null && typeof obj === 'object' && obj.asCID !== obj && !Array.isArray(obj) && !(obj instanceof Uint8Array) ? obj : undefined\n}\n/** @type {{ [k in string]: (obj:any)=>undefined|any}} */\nconst Types = {\n  'CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)': Kinds.Link,\n  'CarV1HeaderOrV2Pragma > roots (anon)': /**\n                                           * @param obj\n                                           * @returns {undefined|any}\n                                           */ (/** @type {any} */ obj) => {\n    if (Kinds.List(obj) === undefined) {\n      return undefined\n    }\n    for (let i = 0; i < obj.length; i++) {\n      let v = obj[i]\n      v = Types['CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)'](v)\n      if (v === undefined) {\n        return undefined\n      }\n      if (v !== obj[i]) {\n        const ret = obj.slice(0, i)\n        for (let j = i; j < obj.length; j++) {\n          let v = obj[j]\n          v = Types['CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)'](v)\n          if (v === undefined) {\n            return undefined\n          }\n          ret.push(v)\n        }\n        return ret\n      }\n    }\n    return obj\n  },\n  Int: Kinds.Int,\n  CarV1HeaderOrV2Pragma: /**\n                          * @param obj\n                          * @returns {undefined|any}\n                          */ (/** @type {any} */ obj) => {\n    if (Kinds.Map(obj) === undefined) {\n      return undefined\n    }\n    const entries = Object.entries(obj)\n    /** @type {{[k in string]: any}} */\n    let ret = obj\n    let requiredCount = 1\n    for (let i = 0; i < entries.length; i++) {\n      const [key, value] = entries[i]\n      switch (key) {\n        case 'roots':\n          {\n            const v = Types['CarV1HeaderOrV2Pragma > roots (anon)'](obj[key])\n            if (v === undefined) {\n              return undefined\n            }\n            if (v !== value || ret !== obj) {\n              if (ret === obj) {\n                /** @type {{[k in string]: any}} */\n                ret = {}\n                for (let j = 0; j < i; j++) {\n                  ret[entries[j][0]] = entries[j][1]\n                }\n              }\n              ret.roots = v\n            }\n          }\n          break\n        case 'version':\n          {\n            requiredCount--\n            const v = Types.Int(obj[key])\n            if (v === undefined) {\n              return undefined\n            }\n            if (v !== value || ret !== obj) {\n              if (ret === obj) {\n                /** @type {{[k in string]: any}} */\n                ret = {}\n                for (let j = 0; j < i; j++) {\n                  ret[entries[j][0]] = entries[j][1]\n                }\n              }\n              ret.version = v\n            }\n          }\n          break\n        default:\n          return undefined\n      }\n    }\n\n    if (requiredCount > 0) {\n      return undefined\n    }\n    return ret\n  }\n}\n/** @type {{ [k in string]: (obj:any)=>undefined|any}} */\nconst Reprs = {\n  'CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)': Kinds.Link,\n  'CarV1HeaderOrV2Pragma > roots (anon)': /**\n                                           * @param obj\n                                           * @returns {undefined|any}\n                                           */ (/** @type {any} */ obj) => {\n    if (Kinds.List(obj) === undefined) {\n      return undefined\n    }\n    for (let i = 0; i < obj.length; i++) {\n      let v = obj[i]\n      v = Reprs['CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)'](v)\n      if (v === undefined) {\n        return undefined\n      }\n      if (v !== obj[i]) {\n        const ret = obj.slice(0, i)\n        for (let j = i; j < obj.length; j++) {\n          let v = obj[j]\n          v = Reprs['CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)'](v)\n          if (v === undefined) {\n            return undefined\n          }\n          ret.push(v)\n        }\n        return ret\n      }\n    }\n    return obj\n  },\n  Int: Kinds.Int,\n  CarV1HeaderOrV2Pragma: /**\n                          * @param obj\n                          * @returns {undefined|any}\n                          */ (/** @type {any} */ obj) => {\n    if (Kinds.Map(obj) === undefined) {\n      return undefined\n    }\n    const entries = Object.entries(obj)\n    /** @type {{[k in string]: any}} */\n    let ret = obj\n    let requiredCount = 1\n    for (let i = 0; i < entries.length; i++) {\n      const [key, value] = entries[i]\n      switch (key) {\n        case 'roots':\n          {\n            const v = Reprs['CarV1HeaderOrV2Pragma > roots (anon)'](value)\n            if (v === undefined) {\n              return undefined\n            }\n            if (v !== value || ret !== obj) {\n              if (ret === obj) {\n                /** @type {{[k in string]: any}} */\n                ret = {}\n                for (let j = 0; j < i; j++) {\n                  ret[entries[j][0]] = entries[j][1]\n                }\n              }\n              ret.roots = v\n            }\n          }\n          break\n        case 'version':\n          {\n            requiredCount--\n            const v = Reprs.Int(value)\n            if (v === undefined) {\n              return undefined\n            }\n            if (v !== value || ret !== obj) {\n              if (ret === obj) {\n                /** @type {{[k in string]: any}} */\n                ret = {}\n                for (let j = 0; j < i; j++) {\n                  ret[entries[j][0]] = entries[j][1]\n                }\n              }\n              ret.version = v\n            }\n          }\n          break\n        default:\n          return undefined\n      }\n    }\n    if (requiredCount > 0) {\n      return undefined\n    }\n    return ret\n  }\n}\n\nexport const CarV1HeaderOrV2Pragma = {\n  toTyped: Types.CarV1HeaderOrV2Pragma,\n  toRepresentation: Reprs.CarV1HeaderOrV2Pragma\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4346, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/buffer-decoder.js"],"sourcesContent":["import { decode as decodeDagCbor } from '@ipld/dag-cbor'\nimport { CID } from 'multiformats/cid'\nimport * as Digest from 'multiformats/hashes/digest'\nimport { CIDV0_BYTES, decodeV2Header, decodeVarint, getMultihashLength, V2_HEADER_LENGTH } from './decoder-common.js'\nimport { CarV1HeaderOrV2Pragma } from './header-validator.js'\n\n/**\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./api.js').BlockHeader} BlockHeader\n * @typedef {import('./api.js').BlockIndex} BlockIndex\n * @typedef {import('./coding.js').BytesBufferReader} BytesBufferReader\n * @typedef {import('./coding.js').CarHeader} CarHeader\n * @typedef {import('./coding.js').CarV2Header} CarV2Header\n * @typedef {import('./coding.js').CarV2FixedHeader} CarV2FixedHeader\n */\n\n/**\n * Reads header data from a `BytesReader`. The header may either be in the form\n * of a `CarHeader` or `CarV2Header` depending on the CAR being read.\n *\n * @name decoder.readHeader(reader)\n * @param {BytesBufferReader} reader\n * @param {number} [strictVersion]\n * @returns {CarHeader | CarV2Header}\n */\nexport function readHeader (reader, strictVersion) {\n  const length = decodeVarint(reader.upTo(8), reader)\n  if (length === 0) {\n    throw new Error('Invalid CAR header (zero length)')\n  }\n  const header = reader.exactly(length, true)\n  const block = decodeDagCbor(header)\n  if (CarV1HeaderOrV2Pragma.toTyped(block) === undefined) {\n    throw new Error('Invalid CAR header format')\n  }\n  if ((block.version !== 1 && block.version !== 2) || (strictVersion !== undefined && block.version !== strictVersion)) {\n    throw new Error(`Invalid CAR version: ${block.version}${strictVersion !== undefined ? ` (expected ${strictVersion})` : ''}`)\n  }\n  if (block.version === 1) {\n    // CarV1HeaderOrV2Pragma makes roots optional, let's make it mandatory\n    if (!Array.isArray(block.roots)) {\n      throw new Error('Invalid CAR header format')\n    }\n    return block\n  }\n  // version 2\n  if (block.roots !== undefined) {\n    throw new Error('Invalid CAR header format')\n  }\n  const v2Header = decodeV2Header(reader.exactly(V2_HEADER_LENGTH, true))\n  reader.seek(v2Header.dataOffset - reader.pos)\n  const v1Header = readHeader(reader, 1)\n  return Object.assign(v1Header, v2Header)\n}\n\n/**\n * Reads CID sync\n *\n * @param {BytesBufferReader} reader\n * @returns {CID}\n */\nfunction readCid (reader) {\n  const first = reader.exactly(2, false)\n  if (first[0] === CIDV0_BYTES.SHA2_256 && first[1] === CIDV0_BYTES.LENGTH) {\n    // cidv0 32-byte sha2-256\n    const bytes = reader.exactly(34, true)\n    const multihash = Digest.decode(bytes)\n    return CID.create(0, CIDV0_BYTES.DAG_PB, multihash)\n  }\n\n  const version = decodeVarint(reader.upTo(8), reader)\n  if (version !== 1) {\n    throw new Error(`Unexpected CID version (${version})`)\n  }\n  const codec = decodeVarint(reader.upTo(8), reader)\n  const bytes = reader.exactly(getMultihashLength(reader.upTo(8)), true)\n  const multihash = Digest.decode(bytes)\n  return CID.create(version, codec, multihash)\n}\n\n/**\n * Reads the leading data of an individual block from CAR data from a\n * `BytesBufferReader`. Returns a `BlockHeader` object which contains\n * `{ cid, length, blockLength }` which can be used to either index the block\n * or read the block binary data.\n *\n * @name async decoder.readBlockHead(reader)\n * @param {BytesBufferReader} reader\n * @returns {BlockHeader}\n */\nexport function readBlockHead (reader) {\n  // length includes a CID + Binary, where CID has a variable length\n  // we have to deal with\n  const start = reader.pos\n  let length = decodeVarint(reader.upTo(8), reader)\n  if (length === 0) {\n    throw new Error('Invalid CAR section (zero length)')\n  }\n  length += (reader.pos - start)\n  const cid = readCid(reader)\n  const blockLength = length - Number(reader.pos - start) // subtract CID length\n\n  return { cid, length, blockLength }\n}\n\n/**\n * Returns Car header and blocks from a Uint8Array\n *\n * @param {Uint8Array} bytes\n * @returns {{ header : CarHeader | CarV2Header , blocks: Block[]}}\n */\nexport function fromBytes (bytes) {\n  let reader = bytesReader(bytes)\n  const header = readHeader(reader)\n  if (header.version === 2) {\n    const v1length = reader.pos - header.dataOffset\n    reader = limitReader(reader, header.dataSize - v1length)\n  }\n\n  const blocks = []\n  while (reader.upTo(8).length > 0) {\n    const { cid, blockLength } = readBlockHead(reader)\n\n    blocks.push({ cid, bytes: reader.exactly(blockLength, true) })\n  }\n\n  return {\n    header, blocks\n  }\n}\n\n/**\n * Creates a `BytesBufferReader` from a `Uint8Array`.\n *\n * @name decoder.bytesReader(bytes)\n * @param {Uint8Array} bytes\n * @returns {BytesBufferReader}\n */\nexport function bytesReader (bytes) {\n  let pos = 0\n\n  /** @type {BytesBufferReader} */\n  return {\n    upTo (length) {\n      return bytes.subarray(pos, pos + Math.min(length, bytes.length - pos))\n    },\n\n    exactly (length, seek = false) {\n      if (length > bytes.length - pos) {\n        throw new Error('Unexpected end of data')\n      }\n\n      const out = bytes.subarray(pos, pos + length)\n      if (seek) {\n        pos += length\n      }\n      return out\n    },\n\n    seek (length) {\n      pos += length\n    },\n\n    get pos () {\n      return pos\n    }\n  }\n}\n\n/**\n * Wraps a `BytesBufferReader` in a limiting `BytesBufferReader` which limits maximum read\n * to `byteLimit` bytes. It _does not_ update `pos` of the original\n * `BytesBufferReader`.\n *\n * @name decoder.limitReader(reader, byteLimit)\n * @param {BytesBufferReader} reader\n * @param {number} byteLimit\n * @returns {BytesBufferReader}\n */\nexport function limitReader (reader, byteLimit) {\n  let bytesRead = 0\n\n  /** @type {BytesBufferReader} */\n  return {\n    upTo (length) {\n      let bytes = reader.upTo(length)\n      if (bytes.length + bytesRead > byteLimit) {\n        bytes = bytes.subarray(0, byteLimit - bytesRead)\n      }\n      return bytes\n    },\n\n    exactly (length, seek = false) {\n      const bytes = reader.exactly(length, seek)\n      if (bytes.length + bytesRead > byteLimit) {\n        throw new Error('Unexpected end of data')\n      }\n      if (seek) {\n        bytesRead += length\n      }\n      return bytes\n    },\n\n    seek (length) {\n      bytesRead += length\n      reader.seek(length)\n    },\n\n    get pos () {\n      return reader.pos\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4514, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/buffer-reader-browser.js"],"sourcesContent":["import * as BufferDecoder from './buffer-decoder.js'\n\n/**\n * @typedef {import('multiformats').CID} CID\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./api.js').CarBufferReader} ICarBufferReader\n * @typedef {import('./coding.js').CarHeader} CarHeader\n * @typedef {import('./coding.js').CarV2Header} CarV2Header\n */\n\n/**\n * Provides blockstore-like access to a CAR.\n *\n * Implements the `RootsBufferReader` interface:\n * {@link ICarBufferReader.getRoots `getRoots()`}. And the `BlockBufferReader` interface:\n * {@link ICarBufferReader.get `get()`}, {@link ICarBufferReader.has `has()`},\n * {@link ICarBufferReader.blocks `blocks()`} and\n * {@link ICarBufferReader.cids `cids()`}.\n *\n * Load this class with either `import { CarBufferReader } from '@ipld/car/buffer-reader'`\n * (`const { CarBufferReader } = require('@ipld/car/buffer-reader')`). Or\n * `import { CarBufferReader } from '@ipld/car'` (`const { CarBufferReader } = require('@ipld/car')`).\n * The former will likely result in smaller bundle sizes where this is\n * important.\n *\n * @name CarBufferReader\n * @class\n * @implements {ICarBufferReader}\n * @property {number} version The version number of the CAR referenced by this\n * reader (should be `1` or `2`).\n */\nexport class CarBufferReader {\n  /**\n   * @constructs CarBufferReader\n   * @param {CarHeader|CarV2Header} header\n   * @param {Block[]} blocks\n   */\n  constructor (header, blocks) {\n    this._header = header\n    this._blocks = blocks\n    this._cids = undefined\n  }\n\n  /**\n   * @property {number} version of the CAR\n   * @memberof CarBufferReader\n   * @instance\n   */\n  get version () {\n    return this._header.version\n  }\n\n  /**\n   * Get the list of roots defined by the CAR referenced by this reader. May be\n   * zero or more `CID`s.\n   *\n   * @function\n   * @memberof CarBufferReader\n   * @instance\n   * @returns {CID[]}\n   */\n  getRoots () {\n    return this._header.roots\n  }\n\n  /**\n   * Check whether a given `CID` exists within the CAR referenced by this\n   * reader.\n   *\n   * @function\n   * @memberof CarBufferReader\n   * @instance\n   * @param {CID} key\n   * @returns {boolean}\n   */\n  has (key) {\n    return this._blocks.some(b => b.cid.equals(key))\n  }\n\n  /**\n   * Fetch a `Block` (a `{ cid:CID, bytes:Uint8Array }` pair) from the CAR\n   * referenced by this reader matching the provided `CID`. In the case where\n   * the provided `CID` doesn't exist within the CAR, `undefined` will be\n   * returned.\n   *\n   * @function\n   * @memberof CarBufferReader\n   * @instance\n   * @param {CID} key\n   * @returns {Block | undefined}\n   */\n  get (key) {\n    return this._blocks.find(b => b.cid.equals(key))\n  }\n\n  /**\n   * Returns a `Block[]` of the `Block`s (`{ cid:CID, bytes:Uint8Array }` pairs) contained within\n   * the CAR referenced by this reader.\n   *\n   * @function\n   * @memberof CarBufferReader\n   * @instance\n   * @returns {Block[]}\n   */\n  blocks () {\n    return this._blocks\n  }\n\n  /**\n   * Returns a `CID[]` of the `CID`s contained within the CAR referenced by this reader.\n   *\n   * @function\n   * @memberof CarBufferReader\n   * @instance\n   * @returns {CID[]}\n   */\n  cids () {\n    if (!this._cids) {\n      this._cids = this._blocks.map(b => b.cid)\n    }\n    return this._cids\n  }\n\n  /**\n   * Instantiate a {@link CarBufferReader} from a `Uint8Array` blob. This performs a\n   * decode fully in memory and maintains the decoded state in memory for full\n   * access to the data via the `CarReader` API.\n   *\n   * @static\n   * @memberof CarBufferReader\n   * @param {Uint8Array} bytes\n   * @returns {CarBufferReader}\n   */\n  static fromBytes (bytes) {\n    if (!(bytes instanceof Uint8Array)) {\n      throw new TypeError('fromBytes() requires a Uint8Array')\n    }\n\n    const { header, blocks } = BufferDecoder.fromBytes(bytes)\n    return new CarBufferReader(header, blocks)\n  }\n}\n\nexport const __browser = true\n"],"names":[],"mappings":";;;;;;AAAA;;AA+BO,MAAM;IACX;;;;GAIC,GACD,YAAa,MAAM,EAAE,MAAM,CAAE;QAC3B,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,KAAK,GAAG;IACf;IAEA;;;;GAIC,GACD,IAAI,UAAW;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO;IAC7B;IAEA;;;;;;;;GAQC,GACD,WAAY;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK;IAC3B;IAEA;;;;;;;;;GASC,GACD,IAAK,GAAG,EAAE;QACR,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,CAAC,MAAM,CAAC;IAC7C;IAEA;;;;;;;;;;;GAWC,GACD,IAAK,GAAG,EAAE;QACR,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,CAAC,MAAM,CAAC;IAC7C;IAEA;;;;;;;;GAQC,GACD,SAAU;QACR,OAAO,IAAI,CAAC,OAAO;IACrB;IAEA;;;;;;;GAOC,GACD,OAAQ;QACN,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,GAAG;QAC1C;QACA,OAAO,IAAI,CAAC,KAAK;IACnB;IAEA;;;;;;;;;GASC,GACD,OAAO,UAAW,KAAK,EAAE;QACvB,IAAI,CAAC,CAAC,iBAAiB,UAAU,GAAG;YAClC,MAAM,IAAI,UAAU;QACtB;QAEA,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,yKAAuB,CAAC;QACnD,OAAO,IAAI,gBAAgB,QAAQ;IACrC;AACF;AAEO,MAAM,YAAY","ignoreList":[0]}},
    {"offset": {"line": 4622, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/buffer-writer.js"],"sourcesContent":["import * as CBOR from '@ipld/dag-cbor'\nimport { Token, Type } from 'cborg'\nimport { tokensToLength } from 'cborg/length'\nimport varint from 'varint'\n\n/**\n * @typedef {import('./api.js').CID} CID\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./api.js').CarBufferWriter} Writer\n * @typedef {import('./api.js').CarBufferWriterOptions} Options\n * @typedef {import('./coding.js').CarEncoder} CarEncoder\n */\n\n/**\n * A simple CAR writer that writes to a pre-allocated buffer.\n *\n * @class\n * @name CarBufferWriter\n * @implements {Writer}\n */\nclass CarBufferWriter {\n  /**\n   * @param {Uint8Array} bytes\n   * @param {number} headerSize\n   */\n  constructor (bytes, headerSize) {\n    /** @readonly */\n    this.bytes = bytes\n    this.byteOffset = headerSize\n\n    /**\n     * @readonly\n     * @type {CID[]}\n     */\n    this.roots = []\n    this.headerSize = headerSize\n  }\n\n  /**\n   * Add a root to this writer, to be used to create a header when the CAR is\n   * finalized with {@link CarBufferWriter.close `close()`}\n   *\n   * @param {CID} root\n   * @param {{resize?:boolean}} [options]\n   * @returns {CarBufferWriter}\n   */\n  addRoot (root, options) {\n    addRoot(this, root, options)\n    return this\n  }\n\n  /**\n   * Write a `Block` (a `{ cid:CID, bytes:Uint8Array }` pair) to the archive.\n   * Throws if there is not enough capacity.\n   *\n   * @param {Block} block - A `{ cid:CID, bytes:Uint8Array }` pair.\n   * @returns {CarBufferWriter}\n   */\n  write (block) {\n    addBlock(this, block)\n    return this\n  }\n\n  /**\n   * Finalize the CAR and return it as a `Uint8Array`.\n   *\n   * @param {object} [options]\n   * @param {boolean} [options.resize]\n   * @returns {Uint8Array}\n   */\n  close (options) {\n    return close(this, options)\n  }\n}\n\n/**\n * @param {CarBufferWriter} writer\n * @param {CID} root\n * @param {{resize?:boolean}} [options]\n */\nexport const addRoot = (writer, root, options = {}) => {\n  const { resize = false } = options\n  const { bytes, headerSize, byteOffset, roots } = writer\n  writer.roots.push(root)\n  const size = headerLength(writer)\n  // If there is not enough space for the new root\n  if (size > headerSize) {\n    // Check if we root would fit if we were to resize the head.\n    if (size - headerSize + byteOffset < bytes.byteLength) {\n      // If resize is enabled resize head\n      if (resize) {\n        resizeHeader(writer, size)\n      // otherwise remove head and throw an error suggesting to resize\n      } else {\n        roots.pop()\n        throw new RangeError(`Header of size ${headerSize} has no capacity for new root ${root}.\n  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`)\n      }\n    // If head would not fit even with resize pop new root and throw error\n    } else {\n      roots.pop()\n      throw new RangeError(`Buffer has no capacity for a new root ${root}`)\n    }\n  }\n}\n\n/**\n * Calculates number of bytes required for storing given block in CAR. Useful in\n * estimating size of an `ArrayBuffer` for the `CarBufferWriter`.\n *\n * @name CarBufferWriter.blockLength(Block)\n * @param {Block} block\n * @returns {number}\n */\nexport const blockLength = ({ cid, bytes }) => {\n  const size = cid.bytes.byteLength + bytes.byteLength\n  return varint.encodingLength(size) + size\n}\n\n/**\n * @param {CarBufferWriter} writer\n * @param {Block} block\n */\nexport const addBlock = (writer, { cid, bytes }) => {\n  const byteLength = cid.bytes.byteLength + bytes.byteLength\n  const size = varint.encode(byteLength)\n  if (writer.byteOffset + size.length + byteLength > writer.bytes.byteLength) {\n    throw new RangeError('Buffer has no capacity for this block')\n  } else {\n    writeBytes(writer, size)\n    writeBytes(writer, cid.bytes)\n    writeBytes(writer, bytes)\n  }\n}\n\n/**\n * @param {CarBufferWriter} writer\n * @param {object} [options]\n * @param {boolean} [options.resize]\n */\nexport const close = (writer, options = {}) => {\n  const { resize = false } = options\n  const { roots, bytes, byteOffset, headerSize } = writer\n\n  const headerBytes = CBOR.encode({ version: 1, roots })\n  const varintBytes = varint.encode(headerBytes.length)\n\n  const size = varintBytes.length + headerBytes.byteLength\n  const offset = headerSize - size\n\n  // If header size estimate was accurate we just write header and return\n  // view into buffer.\n  if (offset === 0) {\n    writeHeader(writer, varintBytes, headerBytes)\n    return bytes.subarray(0, byteOffset)\n    // If header was overestimated and `{resize: true}` is passed resize header\n  } else if (resize) {\n    resizeHeader(writer, size)\n    writeHeader(writer, varintBytes, headerBytes)\n    return bytes.subarray(0, writer.byteOffset)\n  } else {\n    throw new RangeError(`Header size was overestimated.\nYou can use close({ resize: true }) to resize header`)\n  }\n}\n\n/**\n * @param {CarBufferWriter} writer\n * @param {number} byteLength\n */\nexport const resizeHeader = (writer, byteLength) => {\n  const { bytes, headerSize } = writer\n  // Move data section to a new offset\n  bytes.set(bytes.subarray(headerSize, writer.byteOffset), byteLength)\n  // Update header size & byteOffset\n  writer.byteOffset += byteLength - headerSize\n  writer.headerSize = byteLength\n}\n\n/**\n * @param {CarBufferWriter} writer\n * @param {number[]|Uint8Array} bytes\n */\n\nconst writeBytes = (writer, bytes) => {\n  writer.bytes.set(bytes, writer.byteOffset)\n  writer.byteOffset += bytes.length\n}\n/**\n * @param {{bytes:Uint8Array}} writer\n * @param {number[]} varint\n * @param {Uint8Array} header\n */\nconst writeHeader = ({ bytes }, varint, header) => {\n  bytes.set(varint)\n  bytes.set(header, varint.length)\n}\n\nconst headerPreludeTokens = [\n  new Token(Type.map, 2),\n  new Token(Type.string, 'version'),\n  new Token(Type.uint, 1),\n  new Token(Type.string, 'roots')\n]\n\nconst CID_TAG = new Token(Type.tag, 42)\n\n/**\n * Calculates header size given the array of byteLength for roots.\n *\n * @name CarBufferWriter.calculateHeaderLength(rootLengths)\n * @param {number[]} rootLengths\n * @returns {number}\n */\nexport const calculateHeaderLength = (rootLengths) => {\n  const tokens = [...headerPreludeTokens]\n  tokens.push(new Token(Type.array, rootLengths.length))\n  for (const rootLength of rootLengths) {\n    tokens.push(CID_TAG)\n    tokens.push(new Token(Type.bytes, { length: rootLength + 1 }))\n  }\n  const length = tokensToLength(tokens) // no options needed here because we have simple tokens\n  return varint.encodingLength(length) + length\n}\n\n/**\n * Calculates header size given the array of roots.\n *\n * @name CarBufferWriter.headerLength({ roots })\n * @param {object} options\n * @param {CID[]} options.roots\n * @returns {number}\n */\nexport const headerLength = ({ roots }) =>\n  calculateHeaderLength(roots.map(cid => cid.bytes.byteLength))\n\n/**\n * Estimates header size given a count of the roots and the expected byte length\n * of the root CIDs. The default length works for a standard CIDv1 with a\n * single-byte multihash code, such as SHA2-256 (i.e. the most common CIDv1).\n *\n * @name CarBufferWriter.estimateHeaderLength(rootCount[, rootByteLength])\n * @param {number} rootCount\n * @param {number} [rootByteLength]\n * @returns {number}\n */\nexport const estimateHeaderLength = (rootCount, rootByteLength = 36) =>\n  calculateHeaderLength(new Array(rootCount).fill(rootByteLength))\n\n/**\n * Creates synchronous CAR writer that can be used to encode blocks into a given\n * buffer. Optionally you could pass `byteOffset` and `byteLength` to specify a\n * range inside buffer to write into. If car file is going to have `roots` you\n * need to either pass them under `options.roots` (from which header size will\n * be calculated) or provide `options.headerSize` to allocate required space\n * in the buffer. You may also provide known `roots` and `headerSize` to\n * allocate space for the roots that may not be known ahead of time.\n *\n * Note: Incorrect `headerSize` may lead to copying bytes inside a buffer\n * which will have a negative impact on performance.\n *\n * @name CarBufferWriter.createWriter(buffer[, options])\n * @param {ArrayBuffer} buffer\n * @param {object} [options]\n * @param {CID[]} [options.roots]\n * @param {number} [options.byteOffset]\n * @param {number} [options.byteLength]\n * @param {number} [options.headerSize]\n * @returns {CarBufferWriter}\n */\nexport const createWriter = (buffer, options = {}) => {\n  const {\n    roots = [],\n    byteOffset = 0,\n    byteLength = buffer.byteLength,\n    headerSize = headerLength({ roots })\n  } = options\n  const bytes = new Uint8Array(buffer, byteOffset, byteLength)\n\n  const writer = new CarBufferWriter(bytes, headerSize)\n  for (const root of roots) {\n    writer.addRoot(root)\n  }\n\n  return writer\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4834, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/indexed-reader-browser.js"],"sourcesContent":["export class CarIndexedReader {\n  static async fromFile () {\n    throw new Error('Unsupported in this environment')\n  }\n}\n\nexport const __browser = true\n"],"names":[],"mappings":";;;;;;AAAO,MAAM;IACX,aAAa,WAAY;QACvB,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,MAAM,YAAY","ignoreList":[0]}},
    {"offset": {"line": 4850, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/decoder.js"],"sourcesContent":["import { decode as decodeDagCbor } from '@ipld/dag-cbor'\nimport { CID } from 'multiformats/cid'\nimport * as Digest from 'multiformats/hashes/digest'\nimport { CIDV0_BYTES, decodeV2Header, decodeVarint, getMultihashLength, V2_HEADER_LENGTH } from './decoder-common.js'\nimport { CarV1HeaderOrV2Pragma } from './header-validator.js'\n\n/**\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./api.js').BlockHeader} BlockHeader\n * @typedef {import('./api.js').BlockIndex} BlockIndex\n * @typedef {import('./coding.js').BytesReader} BytesReader\n * @typedef {import('./coding.js').CarHeader} CarHeader\n * @typedef {import('./coding.js').CarV2Header} CarV2Header\n * @typedef {import('./coding.js').CarV2FixedHeader} CarV2FixedHeader\n * @typedef {import('./coding.js').CarDecoder} CarDecoder\n */\n\n/**\n * Reads header data from a `BytesReader`. The header may either be in the form\n * of a `CarHeader` or `CarV2Header` depending on the CAR being read.\n *\n * @name async decoder.readHeader(reader)\n * @param {BytesReader} reader\n * @param {number} [strictVersion]\n * @returns {Promise<CarHeader|CarV2Header>}\n */\nexport async function readHeader (reader, strictVersion) {\n  const length = decodeVarint(await reader.upTo(8), reader)\n  if (length === 0) {\n    throw new Error('Invalid CAR header (zero length)')\n  }\n  const header = await reader.exactly(length, true)\n  const block = decodeDagCbor(header)\n  if (CarV1HeaderOrV2Pragma.toTyped(block) === undefined) {\n    throw new Error('Invalid CAR header format')\n  }\n  if ((block.version !== 1 && block.version !== 2) || (strictVersion !== undefined && block.version !== strictVersion)) {\n    throw new Error(`Invalid CAR version: ${block.version}${strictVersion !== undefined ? ` (expected ${strictVersion})` : ''}`)\n  }\n  if (block.version === 1) {\n    // CarV1HeaderOrV2Pragma makes roots optional, let's make it mandatory\n    if (!Array.isArray(block.roots)) {\n      throw new Error('Invalid CAR header format')\n    }\n    return block\n  }\n  // version 2\n  if (block.roots !== undefined) {\n    throw new Error('Invalid CAR header format')\n  }\n  const v2Header = decodeV2Header(await reader.exactly(V2_HEADER_LENGTH, true))\n  reader.seek(v2Header.dataOffset - reader.pos)\n  const v1Header = await readHeader(reader, 1)\n  return Object.assign(v1Header, v2Header)\n}\n\n/**\n * @param {BytesReader} reader\n * @returns {Promise<CID>}\n */\nasync function readCid (reader) {\n  const first = await reader.exactly(2, false)\n  if (first[0] === CIDV0_BYTES.SHA2_256 && first[1] === CIDV0_BYTES.LENGTH) {\n    // cidv0 32-byte sha2-256\n    const bytes = await reader.exactly(34, true)\n    const multihash = Digest.decode(bytes)\n    return CID.create(0, CIDV0_BYTES.DAG_PB, multihash)\n  }\n\n  const version = decodeVarint(await reader.upTo(8), reader)\n  if (version !== 1) {\n    throw new Error(`Unexpected CID version (${version})`)\n  }\n  const codec = decodeVarint(await reader.upTo(8), reader)\n  const bytes = await reader.exactly(getMultihashLength(await reader.upTo(8)), true)\n  const multihash = Digest.decode(bytes)\n  return CID.create(version, codec, multihash)\n}\n\n/**\n * Reads the leading data of an individual block from CAR data from a\n * `BytesReader`. Returns a `BlockHeader` object which contains\n * `{ cid, length, blockLength }` which can be used to either index the block\n * or read the block binary data.\n *\n * @name async decoder.readBlockHead(reader)\n * @param {BytesReader} reader\n * @returns {Promise<BlockHeader>}\n */\nexport async function readBlockHead (reader) {\n  // length includes a CID + Binary, where CID has a variable length\n  // we have to deal with\n  const start = reader.pos\n  let length = decodeVarint(await reader.upTo(8), reader)\n  if (length === 0) {\n    throw new Error('Invalid CAR section (zero length)')\n  }\n  length += (reader.pos - start)\n  const cid = await readCid(reader)\n  const blockLength = length - Number(reader.pos - start) // subtract CID length\n\n  return { cid, length, blockLength }\n}\n\n/**\n * @param {BytesReader} reader\n * @returns {Promise<Block>}\n */\nasync function readBlock (reader) {\n  const { cid, blockLength } = await readBlockHead(reader)\n  const bytes = await reader.exactly(blockLength, true)\n  return { bytes, cid }\n}\n\n/**\n * @param {BytesReader} reader\n * @returns {Promise<BlockIndex>}\n */\nasync function readBlockIndex (reader) {\n  const offset = reader.pos\n  const { cid, length, blockLength } = await readBlockHead(reader)\n  const index = { cid, length, blockLength, offset, blockOffset: reader.pos }\n  reader.seek(index.blockLength)\n  return index\n}\n\n/**\n * Creates a `CarDecoder` from a `BytesReader`. The `CarDecoder` is as async\n * interface that will consume the bytes from the `BytesReader` to yield a\n * `header()` and either `blocks()` or `blocksIndex()` data.\n *\n * @name decoder.createDecoder(reader)\n * @param {BytesReader} reader\n * @returns {CarDecoder}\n */\nexport function createDecoder (reader) {\n  const headerPromise = (async () => {\n    const header = await readHeader(reader)\n    if (header.version === 2) {\n      const v1length = reader.pos - header.dataOffset\n      reader = limitReader(reader, header.dataSize - v1length)\n    }\n    return header\n  })()\n\n  return {\n    header: () => headerPromise,\n\n    async * blocks () {\n      await headerPromise\n      while ((await reader.upTo(8)).length > 0) {\n        yield await readBlock(reader)\n      }\n    },\n\n    async * blocksIndex () {\n      await headerPromise\n      while ((await reader.upTo(8)).length > 0) {\n        yield await readBlockIndex(reader)\n      }\n    }\n  }\n}\n\n/**\n * Creates a `BytesReader` from a `Uint8Array`.\n *\n * @name decoder.bytesReader(bytes)\n * @param {Uint8Array} bytes\n * @returns {BytesReader}\n */\nexport function bytesReader (bytes) {\n  let pos = 0\n\n  /** @type {BytesReader} */\n  return {\n    async upTo (length) {\n      const out = bytes.subarray(pos, pos + Math.min(length, bytes.length - pos))\n      return out\n    },\n\n    async exactly (length, seek = false) {\n      if (length > bytes.length - pos) {\n        throw new Error('Unexpected end of data')\n      }\n      const out = bytes.subarray(pos, pos + length)\n      if (seek) {\n        pos += length\n      }\n      return out\n    },\n\n    seek (length) {\n      pos += length\n    },\n\n    get pos () {\n      return pos\n    }\n  }\n}\n\n/**\n * reusable reader for streams and files, we just need a way to read an\n * additional chunk (of some undetermined size) and a way to close the\n * reader when finished\n *\n * @param {() => Promise<Uint8Array|null>} readChunk\n * @returns {BytesReader}\n */\nexport function chunkReader (readChunk /*, closer */) {\n  let pos = 0\n  let have = 0\n  let offset = 0\n  let currentChunk = new Uint8Array(0)\n\n  const read = async (/** @type {number} */ length) => {\n    have = currentChunk.length - offset\n    const bufa = /** @type {Uint8Array<ArrayBufferLike>[]} */([currentChunk.subarray(offset)])\n    while (have < length) {\n      const chunk = await readChunk()\n      if (chunk == null) {\n        break\n      }\n      /* c8 ignore next 8 */\n      // undo this ignore ^ when we have a fd implementation that can seek()\n      if (have < 0) { // because of a seek()\n        /* c8 ignore next 4 */\n        // toohard to test the else\n        if (chunk.length > have) {\n          bufa.push(chunk.subarray(-have))\n        } // else discard\n      } else {\n        bufa.push(chunk)\n      }\n      have += chunk.length\n    }\n    currentChunk = new Uint8Array(bufa.reduce((p, c) => p + c.length, 0))\n    let off = 0\n    for (const b of bufa) {\n      currentChunk.set(b, off)\n      off += b.length\n    }\n    offset = 0\n  }\n\n  /** @type {BytesReader} */\n  return {\n    async upTo (length) {\n      if (currentChunk.length - offset < length) {\n        await read(length)\n      }\n      return currentChunk.subarray(offset, offset + Math.min(currentChunk.length - offset, length))\n    },\n\n    async exactly (length, seek = false) {\n      if (currentChunk.length - offset < length) {\n        await read(length)\n      }\n      if (currentChunk.length - offset < length) {\n        throw new Error('Unexpected end of data')\n      }\n      const out = currentChunk.subarray(offset, offset + length)\n      if (seek) {\n        pos += length\n        offset += length\n      }\n      return out\n    },\n\n    seek (length) {\n      pos += length\n      offset += length\n    },\n\n    get pos () {\n      return pos\n    }\n  }\n}\n\n/**\n * Creates a `BytesReader` from an `AsyncIterable<Uint8Array>`, which allows for\n * consumption of CAR data from a streaming source.\n *\n * @name decoder.asyncIterableReader(asyncIterable)\n * @param {AsyncIterable<Uint8Array>} asyncIterable\n * @returns {BytesReader}\n */\nexport function asyncIterableReader (asyncIterable) {\n  const iterator = asyncIterable[Symbol.asyncIterator]()\n\n  async function readChunk () {\n    const next = await iterator.next()\n    if (next.done) {\n      return null\n    }\n    return next.value\n  }\n\n  return chunkReader(readChunk)\n}\n\n/**\n * Wraps a `BytesReader` in a limiting `BytesReader` which limits maximum read\n * to `byteLimit` bytes. It _does not_ update `pos` of the original\n * `BytesReader`.\n *\n * @name decoder.limitReader(reader, byteLimit)\n * @param {BytesReader} reader\n * @param {number} byteLimit\n * @returns {BytesReader}\n */\nexport function limitReader (reader, byteLimit) {\n  let bytesRead = 0\n\n  /** @type {BytesReader} */\n  return {\n    async upTo (length) {\n      let bytes = await reader.upTo(length)\n      if (bytes.length + bytesRead > byteLimit) {\n        bytes = bytes.subarray(0, byteLimit - bytesRead)\n      }\n      return bytes\n    },\n\n    async exactly (length, seek = false) {\n      const bytes = await reader.exactly(length, seek)\n      if (bytes.length + bytesRead > byteLimit) {\n        throw new Error('Unexpected end of data')\n      }\n      if (seek) {\n        bytesRead += length\n      }\n      return bytes\n    },\n\n    seek (length) {\n      bytesRead += length\n      reader.seek(length)\n    },\n\n    get pos () {\n      return reader.pos\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAsBO,eAAe,WAAY,MAAM,EAAE,aAAa;IACrD,MAAM,SAAS,IAAA,4KAAY,EAAC,MAAM,OAAO,IAAI,CAAC,IAAI;IAClD,IAAI,WAAW,GAAG;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,SAAS,MAAM,OAAO,OAAO,CAAC,QAAQ;IAC5C,MAAM,QAAQ,IAAA,kKAAa,EAAC;IAC5B,IAAI,uLAAqB,CAAC,OAAO,CAAC,WAAW,WAAW;QACtD,MAAM,IAAI,MAAM;IAClB;IACA,IAAI,AAAC,MAAM,OAAO,KAAK,KAAK,MAAM,OAAO,KAAK,KAAO,kBAAkB,aAAa,MAAM,OAAO,KAAK,eAAgB;QACpH,MAAM,IAAI,MAAM,CAAC,qBAAqB,EAAE,MAAM,OAAO,GAAG,kBAAkB,YAAY,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC,GAAG,IAAI;IAC7H;IACA,IAAI,MAAM,OAAO,KAAK,GAAG;QACvB,sEAAsE;QACtE,IAAI,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,GAAG;YAC/B,MAAM,IAAI,MAAM;QAClB;QACA,OAAO;IACT;IACA,YAAY;IACZ,IAAI,MAAM,KAAK,KAAK,WAAW;QAC7B,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,WAAW,IAAA,8KAAc,EAAC,MAAM,OAAO,OAAO,CAAC,gLAAgB,EAAE;IACvE,OAAO,IAAI,CAAC,SAAS,UAAU,GAAG,OAAO,GAAG;IAC5C,MAAM,WAAW,MAAM,WAAW,QAAQ;IAC1C,OAAO,OAAO,MAAM,CAAC,UAAU;AACjC;AAEA;;;CAGC,GACD,eAAe,QAAS,MAAM;IAC5B,MAAM,QAAQ,MAAM,OAAO,OAAO,CAAC,GAAG;IACtC,IAAI,KAAK,CAAC,EAAE,KAAK,2KAAW,CAAC,QAAQ,IAAI,KAAK,CAAC,EAAE,KAAK,2KAAW,CAAC,MAAM,EAAE;QACxE,yBAAyB;QACzB,MAAM,QAAQ,MAAM,OAAO,OAAO,CAAC,IAAI;QACvC,MAAM,YAAY,4KAAa,CAAC;QAChC,OAAO,4KAAG,CAAC,MAAM,CAAC,GAAG,2KAAW,CAAC,MAAM,EAAE;IAC3C;IAEA,MAAM,UAAU,IAAA,4KAAY,EAAC,MAAM,OAAO,IAAI,CAAC,IAAI;IACnD,IAAI,YAAY,GAAG;QACjB,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,QAAQ,CAAC,CAAC;IACvD;IACA,MAAM,QAAQ,IAAA,4KAAY,EAAC,MAAM,OAAO,IAAI,CAAC,IAAI;IACjD,MAAM,QAAQ,MAAM,OAAO,OAAO,CAAC,IAAA,kLAAkB,EAAC,MAAM,OAAO,IAAI,CAAC,KAAK;IAC7E,MAAM,YAAY,4KAAa,CAAC;IAChC,OAAO,4KAAG,CAAC,MAAM,CAAC,SAAS,OAAO;AACpC;AAYO,eAAe,cAAe,MAAM;IACzC,kEAAkE;IAClE,uBAAuB;IACvB,MAAM,QAAQ,OAAO,GAAG;IACxB,IAAI,SAAS,IAAA,4KAAY,EAAC,MAAM,OAAO,IAAI,CAAC,IAAI;IAChD,IAAI,WAAW,GAAG;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,UAAW,OAAO,GAAG,GAAG;IACxB,MAAM,MAAM,MAAM,QAAQ;IAC1B,MAAM,cAAc,SAAS,OAAO,OAAO,GAAG,GAAG,OAAO,sBAAsB;;IAE9E,OAAO;QAAE;QAAK;QAAQ;IAAY;AACpC;AAEA;;;CAGC,GACD,eAAe,UAAW,MAAM;IAC9B,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,GAAG,MAAM,cAAc;IACjD,MAAM,QAAQ,MAAM,OAAO,OAAO,CAAC,aAAa;IAChD,OAAO;QAAE;QAAO;IAAI;AACtB;AAEA;;;CAGC,GACD,eAAe,eAAgB,MAAM;IACnC,MAAM,SAAS,OAAO,GAAG;IACzB,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,MAAM,cAAc;IACzD,MAAM,QAAQ;QAAE;QAAK;QAAQ;QAAa;QAAQ,aAAa,OAAO,GAAG;IAAC;IAC1E,OAAO,IAAI,CAAC,MAAM,WAAW;IAC7B,OAAO;AACT;AAWO,SAAS,cAAe,MAAM;IACnC,MAAM,gBAAgB,CAAC;QACrB,MAAM,SAAS,MAAM,WAAW;QAChC,IAAI,OAAO,OAAO,KAAK,GAAG;YACxB,MAAM,WAAW,OAAO,GAAG,GAAG,OAAO,UAAU;YAC/C,SAAS,YAAY,QAAQ,OAAO,QAAQ,GAAG;QACjD;QACA,OAAO;IACT,CAAC;IAED,OAAO;QACL,QAAQ,IAAM;QAEd,OAAQ;YACN,MAAM;YACN,MAAO,CAAC,MAAM,OAAO,IAAI,CAAC,EAAE,EAAE,MAAM,GAAG,EAAG;gBACxC,MAAM,MAAM,UAAU;YACxB;QACF;QAEA,OAAQ;YACN,MAAM;YACN,MAAO,CAAC,MAAM,OAAO,IAAI,CAAC,EAAE,EAAE,MAAM,GAAG,EAAG;gBACxC,MAAM,MAAM,eAAe;YAC7B;QACF;IACF;AACF;AASO,SAAS,YAAa,KAAK;IAChC,IAAI,MAAM;IAEV,wBAAwB,GACxB,OAAO;QACL,MAAM,MAAM,MAAM;YAChB,MAAM,MAAM,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK,GAAG,CAAC,QAAQ,MAAM,MAAM,GAAG;YACtE,OAAO;QACT;QAEA,MAAM,SAAS,MAAM,EAAE,OAAO,KAAK;YACjC,IAAI,SAAS,MAAM,MAAM,GAAG,KAAK;gBAC/B,MAAM,IAAI,MAAM;YAClB;YACA,MAAM,MAAM,MAAM,QAAQ,CAAC,KAAK,MAAM;YACtC,IAAI,MAAM;gBACR,OAAO;YACT;YACA,OAAO;QACT;QAEA,MAAM,MAAM;YACV,OAAO;QACT;QAEA,IAAI,OAAO;YACT,OAAO;QACT;IACF;AACF;AAUO,SAAS,YAAa,UAAU,WAAW,GAAZ;IACpC,IAAI,MAAM;IACV,IAAI,OAAO;IACX,IAAI,SAAS;IACb,IAAI,eAAe,IAAI,WAAW;IAElC,MAAM,OAAO,OAAO,mBAAmB,GAAG;QACxC,OAAO,aAAa,MAAM,GAAG;QAC7B,MAAM,OAAoD;YAAC,aAAa,QAAQ,CAAC;SAAQ;QACzF,MAAO,OAAO,OAAQ;YACpB,MAAM,QAAQ,MAAM;YACpB,IAAI,SAAS,MAAM;gBACjB;YACF;YACA,oBAAoB,GACpB,sEAAsE;YACtE,IAAI,OAAO,GAAG;gBACZ,oBAAoB,GACpB,2BAA2B;gBAC3B,IAAI,MAAM,MAAM,GAAG,MAAM;oBACvB,KAAK,IAAI,CAAC,MAAM,QAAQ,CAAC,CAAC;gBAC5B,EAAE,eAAe;YACnB,OAAO;gBACL,KAAK,IAAI,CAAC;YACZ;YACA,QAAQ,MAAM,MAAM;QACtB;QACA,eAAe,IAAI,WAAW,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,MAAM,EAAE;QAClE,IAAI,MAAM;QACV,KAAK,MAAM,KAAK,KAAM;YACpB,aAAa,GAAG,CAAC,GAAG;YACpB,OAAO,EAAE,MAAM;QACjB;QACA,SAAS;IACX;IAEA,wBAAwB,GACxB,OAAO;QACL,MAAM,MAAM,MAAM;YAChB,IAAI,aAAa,MAAM,GAAG,SAAS,QAAQ;gBACzC,MAAM,KAAK;YACb;YACA,OAAO,aAAa,QAAQ,CAAC,QAAQ,SAAS,KAAK,GAAG,CAAC,aAAa,MAAM,GAAG,QAAQ;QACvF;QAEA,MAAM,SAAS,MAAM,EAAE,OAAO,KAAK;YACjC,IAAI,aAAa,MAAM,GAAG,SAAS,QAAQ;gBACzC,MAAM,KAAK;YACb;YACA,IAAI,aAAa,MAAM,GAAG,SAAS,QAAQ;gBACzC,MAAM,IAAI,MAAM;YAClB;YACA,MAAM,MAAM,aAAa,QAAQ,CAAC,QAAQ,SAAS;YACnD,IAAI,MAAM;gBACR,OAAO;gBACP,UAAU;YACZ;YACA,OAAO;QACT;QAEA,MAAM,MAAM;YACV,OAAO;YACP,UAAU;QACZ;QAEA,IAAI,OAAO;YACT,OAAO;QACT;IACF;AACF;AAUO,SAAS,oBAAqB,aAAa;IAChD,MAAM,WAAW,aAAa,CAAC,OAAO,aAAa,CAAC;IAEpD,eAAe;QACb,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,IAAI,KAAK,IAAI,EAAE;YACb,OAAO;QACT;QACA,OAAO,KAAK,KAAK;IACnB;IAEA,OAAO,YAAY;AACrB;AAYO,SAAS,YAAa,MAAM,EAAE,SAAS;IAC5C,IAAI,YAAY;IAEhB,wBAAwB,GACxB,OAAO;QACL,MAAM,MAAM,MAAM;YAChB,IAAI,QAAQ,MAAM,OAAO,IAAI,CAAC;YAC9B,IAAI,MAAM,MAAM,GAAG,YAAY,WAAW;gBACxC,QAAQ,MAAM,QAAQ,CAAC,GAAG,YAAY;YACxC;YACA,OAAO;QACT;QAEA,MAAM,SAAS,MAAM,EAAE,OAAO,KAAK;YACjC,MAAM,QAAQ,MAAM,OAAO,OAAO,CAAC,QAAQ;YAC3C,IAAI,MAAM,MAAM,GAAG,YAAY,WAAW;gBACxC,MAAM,IAAI,MAAM;YAClB;YACA,IAAI,MAAM;gBACR,aAAa;YACf;YACA,OAAO;QACT;QAEA,MAAM,MAAM;YACV,aAAa;YACb,OAAO,IAAI,CAAC;QACd;QAEA,IAAI,OAAO;YACT,OAAO,OAAO,GAAG;QACnB;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 5128, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/indexer.js"],"sourcesContent":["import {\n  asyncIterableReader,\n  bytesReader,\n  createDecoder\n} from './decoder.js'\n\n/**\n * @typedef {import('multiformats').CID} CID\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./api.js').RootsReader} RootsReader\n * @typedef {import('./api.js').BlockIndex} BlockIndex\n * @typedef {import('./coding.js').BytesReader} BytesReader\n */\n\n/**\n * Provides an iterator over all of the `Block`s in a CAR, returning their CIDs\n * and byte-location information. Implements an `AsyncIterable<BlockIndex>`.\n * Where a `BlockIndex` is a\n * `{ cid:CID, length:number, offset:number, blockLength:number, blockOffset:number }`.\n *\n * As an implementer of `AsyncIterable`, this class can be used directly in a\n * `for await (const blockIndex of iterator) {}` loop. Where the `iterator` is\n * constructed using {@link CarIndexer.fromBytes} or\n * {@link CarIndexer.fromIterable}.\n *\n * An iteration can only be performce _once_ per instantiation.\n *\n * `CarIndexer` also implements the `RootsReader` interface and provides\n * the {@link CarIndexer.getRoots `getRoots()`} method.\n *\n * Load this class with either\n * `import { CarIndexer } from '@ipld/car/indexer'`\n * (`const { CarIndexer } = require('@ipld/car/indexer')`). Or\n * `import { CarIndexer } from '@ipld/car'`\n * (`const { CarIndexer } = require('@ipld/car')`). The former will likely\n * result in smaller bundle sizes where this is important.\n *\n * @name CarIndexer\n * @class\n * @implements {RootsReader}\n * @implements {AsyncIterable<BlockIndex>}\n * @property {number} version The version number of the CAR referenced by this\n * reader (should be `1`).\n */\nexport class CarIndexer {\n  /**\n   * @param {number} version\n   * @param {CID[]} roots\n   * @param {AsyncGenerator<BlockIndex>} iterator\n   */\n  constructor (version, roots, iterator) {\n    this._version = version\n    this._roots = roots\n    this._iterator = iterator\n  }\n\n  get version () {\n    return this._version\n  }\n\n  /**\n   * Get the list of roots defined by the CAR referenced by this indexer. May be\n   * zero or more `CID`s.\n   *\n   * @function\n   * @memberof CarIndexer\n   * @instance\n   * @async\n   * @returns {Promise<CID[]>}\n   */\n  async getRoots () {\n    return this._roots\n  }\n\n  /**\n   * @returns {AsyncIterator<BlockIndex>}\n   */\n  [Symbol.asyncIterator] () {\n    return this._iterator\n  }\n\n  /**\n   * Instantiate a {@link CarIndexer} from a `Uint8Array` blob. Only the header\n   * is decoded initially, the remainder is processed and emitted via the\n   * iterator as it is consumed.\n   *\n   * @async\n   * @static\n   * @memberof CarIndexer\n   * @param {Uint8Array} bytes\n   * @returns {Promise<CarIndexer>}\n   */\n  static async fromBytes (bytes) {\n    if (!(bytes instanceof Uint8Array)) {\n      throw new TypeError('fromBytes() requires a Uint8Array')\n    }\n    return decodeIndexerComplete(bytesReader(bytes))\n  }\n\n  /**\n   * Instantiate a {@link CarIndexer} from a `AsyncIterable<Uint8Array>`,\n   * such as a [modern Node.js stream](https://nodejs.org/api/stream.html#stream_streams_compatibility_with_async_generators_and_async_iterators).\n   * is decoded initially, the remainder is processed and emitted via the\n   * iterator as it is consumed.\n   *\n   * @async\n   * @static\n   * @memberof CarIndexer\n   * @param {AsyncIterable<Uint8Array>} asyncIterable\n   * @returns {Promise<CarIndexer>}\n   */\n  static async fromIterable (asyncIterable) {\n    if (!asyncIterable || !(typeof asyncIterable[Symbol.asyncIterator] === 'function')) {\n      throw new TypeError('fromIterable() requires an async iterable')\n    }\n    return decodeIndexerComplete(asyncIterableReader(asyncIterable))\n  }\n}\n\n/**\n * @private\n * @param {BytesReader} reader\n * @returns {Promise<CarIndexer>}\n */\nasync function decodeIndexerComplete (reader) {\n  const decoder = createDecoder(reader)\n  const { version, roots } = await decoder.header()\n\n  return new CarIndexer(version, roots, decoder.blocksIndex())\n}\n"],"names":[],"mappings":";;;;AAAA;;AA4CO,MAAM;IACX;;;;GAIC,GACD,YAAa,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAE;QACrC,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,SAAS,GAAG;IACnB;IAEA,IAAI,UAAW;QACb,OAAO,IAAI,CAAC,QAAQ;IACtB;IAEA;;;;;;;;;GASC,GACD,MAAM,WAAY;QAChB,OAAO,IAAI,CAAC,MAAM;IACpB;IAEA;;GAEC,GACD,CAAC,OAAO,aAAa,CAAC,GAAI;QACxB,OAAO,IAAI,CAAC,SAAS;IACvB;IAEA;;;;;;;;;;GAUC,GACD,aAAa,UAAW,KAAK,EAAE;QAC7B,IAAI,CAAC,CAAC,iBAAiB,UAAU,GAAG;YAClC,MAAM,IAAI,UAAU;QACtB;QACA,OAAO,sBAAsB,IAAA,iKAAW,EAAC;IAC3C;IAEA;;;;;;;;;;;GAWC,GACD,aAAa,aAAc,aAAa,EAAE;QACxC,IAAI,CAAC,iBAAiB,CAAC,CAAC,OAAO,aAAa,CAAC,OAAO,aAAa,CAAC,KAAK,UAAU,GAAG;YAClF,MAAM,IAAI,UAAU;QACtB;QACA,OAAO,sBAAsB,IAAA,yKAAmB,EAAC;IACnD;AACF;AAEA;;;;CAIC,GACD,eAAe,sBAAuB,MAAM;IAC1C,MAAM,UAAU,IAAA,mKAAa,EAAC;IAC9B,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,MAAM;IAE/C,OAAO,IAAI,WAAW,SAAS,OAAO,QAAQ,WAAW;AAC3D","ignoreList":[0]}},
    {"offset": {"line": 5211, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/iterator.js"],"sourcesContent":["import {\n  asyncIterableReader,\n  bytesReader,\n  createDecoder\n} from './decoder.js'\n\n/**\n * @typedef {import('multiformats').CID} CID\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./api.js').RootsReader} RootsReader\n * @typedef {import('./coding.js').BytesReader} BytesReader\n */\n\n/**\n * @class\n * @implements {RootsReader}\n * @property {number} version The version number of the CAR referenced by this reader (should be `1`).\n */\nexport class CarIteratorBase {\n  /**\n   * @param {number} version\n   * @param {CID[]} roots\n   * @param {AsyncIterable<Block>|void} iterable\n   */\n  constructor (version, roots, iterable) {\n    this._version = version\n    this._roots = roots\n    this._iterable = iterable\n    this._decoded = false\n  }\n\n  get version () {\n    return this._version\n  }\n\n  /**\n   * @returns {Promise<CID[]>}\n   */\n  async getRoots () {\n    return this._roots\n  }\n}\n\n/**\n * Provides an iterator over all of the `Block`s in a CAR. Implements a\n * `BlockIterator` interface, or `AsyncIterable<Block>`. Where a `Block` is\n * a `{ cid:CID, bytes:Uint8Array }` pair.\n *\n * As an implementer of `AsyncIterable`, this class can be used directly in a\n * `for await (const block of iterator) {}` loop. Where the `iterator` is\n * constructed using {@link CarBlockiterator.fromBytes} or\n * {@link CarBlockiterator.fromIterable}.\n *\n * An iteration can only be performce _once_ per instantiation.\n *\n * `CarBlockIterator` also implements the `RootsReader` interface and provides\n * the {@link CarBlockiterator.getRoots `getRoots()`} method.\n *\n * Load this class with either\n * `import { CarBlockIterator } from '@ipld/car/iterator'`\n * (`const { CarBlockIterator } = require('@ipld/car/iterator')`). Or\n * `import { CarBlockIterator } from '@ipld/car'`\n * (`const { CarBlockIterator } = require('@ipld/car')`).\n *\n * @name CarBlockIterator\n * @class\n * @implements {RootsReader}\n * @implements {AsyncIterable<Block>}\n * @property {number} version The version number of the CAR referenced by this\n * iterator (should be `1`).\n */\nexport class CarBlockIterator extends CarIteratorBase {\n  // inherited method\n  /**\n   * Get the list of roots defined by the CAR referenced by this iterator. May be\n   * zero or more `CID`s.\n   *\n   * @function getRoots\n   * @memberof CarBlockIterator\n   * @instance\n   * @async\n   * @returns {Promise<CID[]>}\n   */\n\n  /**\n   * @returns {AsyncIterator<Block>}\n   */\n  [Symbol.asyncIterator] () {\n    if (this._decoded) {\n      throw new Error('Cannot decode more than once')\n    }\n    /* c8 ignore next 3 */\n    if (!this._iterable) {\n      throw new Error('Block iterable not found')\n    }\n    this._decoded = true\n    return this._iterable[Symbol.asyncIterator]()\n  }\n\n  /**\n   * Instantiate a {@link CarBlockIterator} from a `Uint8Array` blob. Rather\n   * than decoding the entire byte array prior to returning the iterator, as in\n   * {@link CarReader.fromBytes}, only the header is decoded and the remainder\n   * of the CAR is parsed as the `Block`s as yielded.\n   *\n   * @async\n   * @static\n   * @memberof CarBlockIterator\n   * @param {Uint8Array} bytes\n   * @returns {Promise<CarBlockIterator>}\n   */\n  static async fromBytes (bytes) {\n    const { version, roots, iterator } = await fromBytes(bytes)\n    return new CarBlockIterator(version, roots, iterator)\n  }\n\n  /**\n   * Instantiate a {@link CarBlockIterator} from a `AsyncIterable<Uint8Array>`,\n   * such as a [modern Node.js stream](https://nodejs.org/api/stream.html#stream_streams_compatibility_with_async_generators_and_async_iterators).\n   * Rather than decoding the entire byte array prior to returning the iterator,\n   * as in {@link CarReader.fromIterable}, only the header is decoded and the\n   * remainder of the CAR is parsed as the `Block`s as yielded.\n   *\n   * @async\n   * @static\n   * @param {AsyncIterable<Uint8Array>} asyncIterable\n   * @returns {Promise<CarBlockIterator>}\n   */\n  static async fromIterable (asyncIterable) {\n    const { version, roots, iterator } = await fromIterable(asyncIterable)\n    return new CarBlockIterator(version, roots, iterator)\n  }\n}\n\n/**\n * Provides an iterator over all of the `CID`s in a CAR. Implements a\n * `CIDIterator` interface, or `AsyncIterable<CID>`. Similar to\n * {@link CarBlockIterator} but only yields the CIDs in the CAR.\n *\n * As an implementer of `AsyncIterable`, this class can be used directly in a\n * `for await (const cid of iterator) {}` loop. Where the `iterator` is\n * constructed using {@link CarCIDiterator.fromBytes} or\n * {@link CarCIDiterator.fromIterable}.\n *\n * An iteration can only be performce _once_ per instantiation.\n *\n * `CarCIDIterator` also implements the `RootsReader` interface and provides\n * the {@link CarCIDiterator.getRoots `getRoots()`} method.\n *\n * Load this class with either\n * `import { CarCIDIterator } from '@ipld/car/iterator'`\n * (`const { CarCIDIterator } = require('@ipld/car/iterator')`). Or\n * `import { CarCIDIterator } from '@ipld/car'`\n * (`const { CarCIDIterator } = require('@ipld/car')`).\n *\n * @name CarCIDIterator\n * @class\n * @implements {RootsReader}\n * @implements {AsyncIterable<CID>}\n * @property {number} version The version number of the CAR referenced by this\n * iterator (should be `1`).\n */\nexport class CarCIDIterator extends CarIteratorBase {\n  // inherited method\n  /**\n   * Get the list of roots defined by the CAR referenced by this iterator. May be\n   * zero or more `CID`s.\n   *\n   * @function getRoots\n   * @memberof CarCIDIterator\n   * @instance\n   * @async\n   * @returns {Promise<CID[]>}\n   */\n\n  /**\n   * @returns {AsyncIterator<CID>}\n   */\n  [Symbol.asyncIterator] () {\n    if (this._decoded) {\n      throw new Error('Cannot decode more than once')\n    }\n    /* c8 ignore next 3 */\n    if (!this._iterable) {\n      throw new Error('Block iterable not found')\n    }\n    this._decoded = true\n    const iterable = this._iterable[Symbol.asyncIterator]()\n    return {\n      async next () {\n        const next = await iterable.next()\n        if (next.done) {\n          return next\n        }\n        return { done: false, value: next.value.cid }\n      }\n    }\n  }\n\n  /**\n   * Instantiate a {@link CarCIDIterator} from a `Uint8Array` blob. Rather\n   * than decoding the entire byte array prior to returning the iterator, as in\n   * {@link CarReader.fromBytes}, only the header is decoded and the remainder\n   * of the CAR is parsed as the `CID`s as yielded.\n   *\n   * @async\n   * @static\n   * @memberof CarCIDIterator\n   * @param {Uint8Array} bytes\n   * @returns {Promise<CarCIDIterator>}\n   */\n  static async fromBytes (bytes) {\n    const { version, roots, iterator } = await fromBytes(bytes)\n    return new CarCIDIterator(version, roots, iterator)\n  }\n\n  /**\n   * Instantiate a {@link CarCIDIterator} from a `AsyncIterable<Uint8Array>`,\n   * such as a [modern Node.js stream](https://nodejs.org/api/stream.html#stream_streams_compatibility_with_async_generators_and_async_iterators).\n   * Rather than decoding the entire byte array prior to returning the iterator,\n   * as in {@link CarReader.fromIterable}, only the header is decoded and the\n   * remainder of the CAR is parsed as the `CID`s as yielded.\n   *\n   * @async\n   * @static\n   * @memberof CarCIDIterator\n   * @param {AsyncIterable<Uint8Array>} asyncIterable\n   * @returns {Promise<CarCIDIterator>}\n   */\n  static async fromIterable (asyncIterable) {\n    const { version, roots, iterator } = await fromIterable(asyncIterable)\n    return new CarCIDIterator(version, roots, iterator)\n  }\n}\n\n/**\n * @param {Uint8Array} bytes\n * @returns {Promise<{ version:number, roots:CID[], iterator:AsyncIterable<Block>}>}\n */\nasync function fromBytes (bytes) {\n  if (!(bytes instanceof Uint8Array)) {\n    throw new TypeError('fromBytes() requires a Uint8Array')\n  }\n  return decodeIterator(bytesReader(bytes))\n}\n\n/**\n * @param {AsyncIterable<Uint8Array>} asyncIterable\n * @returns {Promise<{ version:number, roots:CID[], iterator:AsyncIterable<Block>}>}\n */\nasync function fromIterable (asyncIterable) {\n  if (!asyncIterable || !(typeof asyncIterable[Symbol.asyncIterator] === 'function')) {\n    throw new TypeError('fromIterable() requires an async iterable')\n  }\n  return decodeIterator(asyncIterableReader(asyncIterable))\n}\n\n/**\n * @private\n * @param {BytesReader} reader\n * @returns {Promise<{ version:number, roots:CID[], iterator:AsyncIterable<Block>}>}\n */\nasync function decodeIterator (reader) {\n  const decoder = createDecoder(reader)\n  const { version, roots } = await decoder.header()\n  return { version, roots, iterator: decoder.blocks() }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5397, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/reader-browser.js"],"sourcesContent":["import { asyncIterableReader, bytesReader, createDecoder } from './decoder.js'\n\n/**\n * @typedef {import('multiformats').CID} CID\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./api.js').CarReader} CarReaderIface\n * @typedef {import('./coding.js').BytesReader} BytesReader\n * @typedef {import('./coding.js').CarHeader} CarHeader\n * @typedef {import('./coding.js').CarV2Header} CarV2Header\n */\n\n/**\n * Provides blockstore-like access to a CAR.\n *\n * Implements the `RootsReader` interface:\n * {@link CarReader.getRoots `getRoots()`}. And the `BlockReader` interface:\n * {@link CarReader.get `get()`}, {@link CarReader.has `has()`},\n * {@link CarReader.blocks `blocks()`} (defined as a `BlockIterator`) and\n * {@link CarReader.cids `cids()`} (defined as a `CIDIterator`).\n *\n * Load this class with either `import { CarReader } from '@ipld/car/reader'`\n * (`const { CarReader } = require('@ipld/car/reader')`). Or\n * `import { CarReader } from '@ipld/car'` (`const { CarReader } = require('@ipld/car')`).\n * The former will likely result in smaller bundle sizes where this is\n * important.\n *\n * @name CarReader\n * @class\n * @implements {CarReaderIface}\n * @property {number} version The version number of the CAR referenced by this\n * reader (should be `1` or `2`).\n */\nexport class CarReader {\n  /**\n   * @constructs CarReader\n   * @param {CarHeader|CarV2Header} header\n   * @param {Block[]} blocks\n   */\n  constructor (header, blocks) {\n    this._header = header\n    this._blocks = blocks\n    this._keys = blocks.map((b) => b.cid.toString())\n  }\n\n  /**\n   * @property\n   * @memberof CarReader\n   * @instance\n   */\n  get version () {\n    return this._header.version\n  }\n\n  /**\n   * Get the list of roots defined by the CAR referenced by this reader. May be\n   * zero or more `CID`s.\n   *\n   * @function\n   * @memberof CarReader\n   * @instance\n   * @async\n   * @returns {Promise<CID[]>}\n   */\n  async getRoots () {\n    return this._header.roots\n  }\n\n  /**\n   * Check whether a given `CID` exists within the CAR referenced by this\n   * reader.\n   *\n   * @function\n   * @memberof CarReader\n   * @instance\n   * @async\n   * @param {CID} key\n   * @returns {Promise<boolean>}\n   */\n  async has (key) {\n    return this._keys.indexOf(key.toString()) > -1\n  }\n\n  /**\n   * Fetch a `Block` (a `{ cid:CID, bytes:Uint8Array }` pair) from the CAR\n   * referenced by this reader matching the provided `CID`. In the case where\n   * the provided `CID` doesn't exist within the CAR, `undefined` will be\n   * returned.\n   *\n   * @function\n   * @memberof CarReader\n   * @instance\n   * @async\n   * @param {CID} key\n   * @returns {Promise<Block | undefined>}\n   */\n  async get (key) {\n    const index = this._keys.indexOf(key.toString())\n    return index > -1 ? this._blocks[index] : undefined\n  }\n\n  /**\n   * Returns a `BlockIterator` (`AsyncIterable<Block>`) that iterates over all\n   * of the `Block`s (`{ cid:CID, bytes:Uint8Array }` pairs) contained within\n   * the CAR referenced by this reader.\n   *\n   * @function\n   * @memberof CarReader\n   * @instance\n   * @async\n   * @generator\n   * @returns {AsyncGenerator<Block>}\n   */\n  async * blocks () {\n    for (const block of this._blocks) {\n      yield block\n    }\n  }\n\n  /**\n   * Returns a `CIDIterator` (`AsyncIterable<CID>`) that iterates over all of\n   * the `CID`s contained within the CAR referenced by this reader.\n   *\n   * @function\n   * @memberof CarReader\n   * @instance\n   * @async\n   * @generator\n   * @returns {AsyncGenerator<CID>}\n   */\n  async * cids () {\n    for (const block of this._blocks) {\n      yield block.cid\n    }\n  }\n\n  /**\n   * Instantiate a {@link CarReader} from a `Uint8Array` blob. This performs a\n   * decode fully in memory and maintains the decoded state in memory for full\n   * access to the data via the `CarReader` API.\n   *\n   * @async\n   * @static\n   * @memberof CarReader\n   * @param {Uint8Array} bytes\n   * @returns {Promise<CarReader>}\n   */\n  static async fromBytes (bytes) {\n    if (!(bytes instanceof Uint8Array)) {\n      throw new TypeError('fromBytes() requires a Uint8Array')\n    }\n    return decodeReaderComplete(bytesReader(bytes))\n  }\n\n  /**\n   * Instantiate a {@link CarReader} from a `AsyncIterable<Uint8Array>`, such as\n   * a [modern Node.js stream](https://nodejs.org/api/stream.html#stream_streams_compatibility_with_async_generators_and_async_iterators).\n   * This performs a decode fully in memory and maintains the decoded state in\n   * memory for full access to the data via the `CarReader` API.\n   *\n   * Care should be taken for large archives; this API may not be appropriate\n   * where memory is a concern or the archive is potentially larger than the\n   * amount of memory that the runtime can handle.\n   *\n   * @async\n   * @static\n   * @memberof CarReader\n   * @param {AsyncIterable<Uint8Array>} asyncIterable\n   * @returns {Promise<CarReader>}\n   */\n  static async fromIterable (asyncIterable) {\n    if (!asyncIterable || !(typeof asyncIterable[Symbol.asyncIterator] === 'function')) {\n      throw new TypeError('fromIterable() requires an async iterable')\n    }\n    return decodeReaderComplete(asyncIterableReader(asyncIterable))\n  }\n}\n\n/**\n * @private\n * @param {BytesReader} reader\n * @returns {Promise<CarReader>}\n */\nexport async function decodeReaderComplete (reader) {\n  const decoder = createDecoder(reader)\n  const header = await decoder.header()\n  const blocks = []\n  for await (const block of decoder.blocks()) {\n    blocks.push(block)\n  }\n\n  return new CarReader(header, blocks)\n}\n\nexport const __browser = true\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAgCO,MAAM;IACX;;;;GAIC,GACD,YAAa,MAAM,EAAE,MAAM,CAAE;QAC3B,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,KAAK,GAAG,OAAO,GAAG,CAAC,CAAC,IAAM,EAAE,GAAG,CAAC,QAAQ;IAC/C;IAEA;;;;GAIC,GACD,IAAI,UAAW;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO;IAC7B;IAEA;;;;;;;;;GASC,GACD,MAAM,WAAY;QAChB,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK;IAC3B;IAEA;;;;;;;;;;GAUC,GACD,MAAM,IAAK,GAAG,EAAE;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,QAAQ,MAAM,CAAC;IAC/C;IAEA;;;;;;;;;;;;GAYC,GACD,MAAM,IAAK,GAAG,EAAE;QACd,MAAM,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,QAAQ;QAC7C,OAAO,QAAQ,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG;IAC5C;IAEA;;;;;;;;;;;GAWC,GACD,OAAQ,SAAU;QAChB,KAAK,MAAM,SAAS,IAAI,CAAC,OAAO,CAAE;YAChC,MAAM;QACR;IACF;IAEA;;;;;;;;;;GAUC,GACD,OAAQ,OAAQ;QACd,KAAK,MAAM,SAAS,IAAI,CAAC,OAAO,CAAE;YAChC,MAAM,MAAM,GAAG;QACjB;IACF;IAEA;;;;;;;;;;GAUC,GACD,aAAa,UAAW,KAAK,EAAE;QAC7B,IAAI,CAAC,CAAC,iBAAiB,UAAU,GAAG;YAClC,MAAM,IAAI,UAAU;QACtB;QACA,OAAO,qBAAqB,IAAA,iKAAW,EAAC;IAC1C;IAEA;;;;;;;;;;;;;;;GAeC,GACD,aAAa,aAAc,aAAa,EAAE;QACxC,IAAI,CAAC,iBAAiB,CAAC,CAAC,OAAO,aAAa,CAAC,OAAO,aAAa,CAAC,KAAK,UAAU,GAAG;YAClF,MAAM,IAAI,UAAU;QACtB;QACA,OAAO,qBAAqB,IAAA,yKAAmB,EAAC;IAClD;AACF;AAOO,eAAe,qBAAsB,MAAM;IAChD,MAAM,UAAU,IAAA,mKAAa,EAAC;IAC9B,MAAM,SAAS,MAAM,QAAQ,MAAM;IACnC,MAAM,SAAS,EAAE;IACjB,WAAW,MAAM,SAAS,QAAQ,MAAM,GAAI;QAC1C,OAAO,IAAI,CAAC;IACd;IAEA,OAAO,IAAI,UAAU,QAAQ;AAC/B;AAEO,MAAM,YAAY","ignoreList":[0]}},
    {"offset": {"line": 5548, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/encoder.js"],"sourcesContent":["import { encode as dagCborEncode } from '@ipld/dag-cbor'\nimport varint from 'varint'\n\n/**\n * @typedef {import('multiformats').CID} CID\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./coding.js').CarEncoder} CarEncoder\n * @typedef {import('./coding.js').IteratorChannel_Writer<Uint8Array>} IteratorChannel_Writer\n */\n\nconst CAR_V1_VERSION = 1\n\n/**\n * Create a header from an array of roots.\n *\n * @param {CID[]} roots\n * @returns {Uint8Array}\n */\nexport function createHeader (roots) {\n  const headerBytes = dagCborEncode({ version: CAR_V1_VERSION, roots })\n  const varintBytes = varint.encode(headerBytes.length)\n  const header = new Uint8Array(varintBytes.length + headerBytes.length)\n  header.set(varintBytes, 0)\n  header.set(headerBytes, varintBytes.length)\n  return header\n}\n\n/**\n * @param {IteratorChannel_Writer} writer\n * @returns {CarEncoder}\n */\nfunction createEncoder (writer) {\n  // none of this is wrapped in a mutex, that needs to happen above this to\n  // avoid overwrites\n\n  return {\n    /**\n     * @param {CID[]} roots\n     * @returns {Promise<void>}\n     */\n    async setRoots (roots) {\n      const bytes = createHeader(roots)\n      await writer.write(bytes)\n    },\n\n    /**\n     * @param {Block} block\n     * @returns {Promise<void>}\n     */\n    async writeBlock (block) {\n      const { cid, bytes } = block\n      await writer.write(new Uint8Array(varint.encode(cid.bytes.length + bytes.length)))\n      await writer.write(cid.bytes)\n      if (bytes.length) {\n        // zero-length blocks are valid, but it'd be safer if we didn't write them\n        await writer.write(bytes)\n      }\n    },\n\n    /**\n     * @returns {Promise<void>}\n     */\n    async close () {\n      await writer.end()\n    },\n\n    /**\n     * @returns {number}\n     */\n    version () {\n      return CAR_V1_VERSION\n    }\n  }\n}\n\nexport { createEncoder }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA;;;;;CAKC,GAED,MAAM,iBAAiB;AAQhB,SAAS,aAAc,KAAK;IACjC,MAAM,cAAc,IAAA,kKAAa,EAAC;QAAE,SAAS;QAAgB;IAAM;IACnE,MAAM,cAAc,6IAAM,CAAC,MAAM,CAAC,YAAY,MAAM;IACpD,MAAM,SAAS,IAAI,WAAW,YAAY,MAAM,GAAG,YAAY,MAAM;IACrE,OAAO,GAAG,CAAC,aAAa;IACxB,OAAO,GAAG,CAAC,aAAa,YAAY,MAAM;IAC1C,OAAO;AACT;AAEA;;;CAGC,GACD,SAAS,cAAe,MAAM;IAC5B,yEAAyE;IACzE,mBAAmB;IAEnB,OAAO;QACL;;;KAGC,GACD,MAAM,UAAU,KAAK;YACnB,MAAM,QAAQ,aAAa;YAC3B,MAAM,OAAO,KAAK,CAAC;QACrB;QAEA;;;KAGC,GACD,MAAM,YAAY,KAAK;YACrB,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG;YACvB,MAAM,OAAO,KAAK,CAAC,IAAI,WAAW,6IAAM,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,MAAM,GAAG,MAAM,MAAM;YAC/E,MAAM,OAAO,KAAK,CAAC,IAAI,KAAK;YAC5B,IAAI,MAAM,MAAM,EAAE;gBAChB,0EAA0E;gBAC1E,MAAM,OAAO,KAAK,CAAC;YACrB;QACF;QAEA;;KAEC,GACD,MAAM;YACJ,MAAM,OAAO,GAAG;QAClB;QAEA;;KAEC,GACD;YACE,OAAO;QACT;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 5618, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/iterator-channel.js"],"sourcesContent":["/**\n * @template {any} T\n * @typedef {import('./coding.js').IteratorChannel<T>} IteratorChannel\n */\n\nfunction noop () {}\n\n/**\n * @template {any} T\n * @returns {IteratorChannel<T>}\n */\nexport function create () {\n  /** @type {T[]} */\n  const chunkQueue = []\n  /** @type {Promise<void> | null} */\n  let drainer = null\n  let drainerResolver = noop\n  let ended = false\n  /** @type {Promise<IteratorResult<T>> | null} */\n  let outWait = null\n  let outWaitResolver = noop\n\n  const makeDrainer = () => {\n    if (!drainer) {\n      drainer = new Promise((resolve) => {\n        drainerResolver = () => {\n          drainer = null\n          drainerResolver = noop\n          resolve()\n        }\n      })\n    }\n    return drainer\n  }\n\n  /**\n   * @returns {IteratorChannel<T>}\n   */\n  const writer = {\n    /**\n     * @param {T} chunk\n     * @returns {Promise<void>}\n     */\n    write (chunk) {\n      chunkQueue.push(chunk)\n      const drainer = makeDrainer()\n      outWaitResolver()\n      return drainer\n    },\n\n    async end () {\n      ended = true\n      const drainer = makeDrainer()\n      outWaitResolver()\n      await drainer\n    }\n  }\n\n  /** @type {AsyncIterator<T>} */\n  const iterator = {\n    /** @returns {Promise<IteratorResult<T>>} */\n    async next () {\n      const chunk = chunkQueue.shift()\n      if (chunk) {\n        if (chunkQueue.length === 0) {\n          drainerResolver()\n        }\n        return { done: false, value: chunk }\n      }\n\n      if (ended) {\n        drainerResolver()\n        return { done: true, value: undefined }\n      }\n\n      if (!outWait) {\n        outWait = new Promise((resolve) => {\n          outWaitResolver = () => {\n            outWait = null\n            outWaitResolver = noop\n            return resolve(iterator.next())\n          }\n        })\n      }\n\n      return outWait\n    }\n  }\n\n  return { writer, iterator }\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AAED,SAAS,QAAS;AAMX,SAAS;IACd,gBAAgB,GAChB,MAAM,aAAa,EAAE;IACrB,iCAAiC,GACjC,IAAI,UAAU;IACd,IAAI,kBAAkB;IACtB,IAAI,QAAQ;IACZ,8CAA8C,GAC9C,IAAI,UAAU;IACd,IAAI,kBAAkB;IAEtB,MAAM,cAAc;QAClB,IAAI,CAAC,SAAS;YACZ,UAAU,IAAI,QAAQ,CAAC;gBACrB,kBAAkB;oBAChB,UAAU;oBACV,kBAAkB;oBAClB;gBACF;YACF;QACF;QACA,OAAO;IACT;IAEA;;GAEC,GACD,MAAM,SAAS;QACb;;;KAGC,GACD,OAAO,KAAK;YACV,WAAW,IAAI,CAAC;YAChB,MAAM,UAAU;YAChB;YACA,OAAO;QACT;QAEA,MAAM;YACJ,QAAQ;YACR,MAAM,UAAU;YAChB;YACA,MAAM;QACR;IACF;IAEA,6BAA6B,GAC7B,MAAM,WAAW;QACf,0CAA0C,GAC1C,MAAM;YACJ,MAAM,QAAQ,WAAW,KAAK;YAC9B,IAAI,OAAO;gBACT,IAAI,WAAW,MAAM,KAAK,GAAG;oBAC3B;gBACF;gBACA,OAAO;oBAAE,MAAM;oBAAO,OAAO;gBAAM;YACrC;YAEA,IAAI,OAAO;gBACT;gBACA,OAAO;oBAAE,MAAM;oBAAM,OAAO;gBAAU;YACxC;YAEA,IAAI,CAAC,SAAS;gBACZ,UAAU,IAAI,QAAQ,CAAC;oBACrB,kBAAkB;wBAChB,UAAU;wBACV,kBAAkB;wBAClB,OAAO,QAAQ,SAAS,IAAI;oBAC9B;gBACF;YACF;YAEA,OAAO;QACT;IACF;IAEA,OAAO;QAAE;QAAQ;IAAS;AAC5B","ignoreList":[0]}},
    {"offset": {"line": 5704, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/writer-browser.js"],"sourcesContent":["import { CID } from 'multiformats/cid'\nimport { bytesReader, readHeader } from './decoder.js'\nimport { createEncoder, createHeader } from './encoder.js'\nimport { create as iteratorChannel } from './iterator-channel.js'\n\n/**\n * @typedef {import('./api.js').Block} Block\n * @typedef {import('./api.js').BlockWriter} BlockWriter\n * @typedef {import('./api.js').WriterChannel} WriterChannel\n * @typedef {import('./coding.js').CarEncoder} CarEncoder\n * @typedef {import('./coding.js').IteratorChannel<Uint8Array>} IteratorChannel\n */\n\n/**\n * Provides a writer interface for the creation of CAR files.\n *\n * Creation of a `CarWriter` involves the instatiation of an input / output pair\n * in the form of a `WriterChannel`, which is a\n * `{ writer:CarWriter, out:AsyncIterable<Uint8Array> }` pair. These two\n * components form what can be thought of as a stream-like interface. The\n * `writer` component (an instantiated `CarWriter`), has methods to\n * {@link CarWriter.put `put()`} new blocks and {@link CarWriter.put `close()`}\n * the writing operation (finalising the CAR archive). The `out` component is\n * an `AsyncIterable` that yields the bytes of the archive. This can be\n * redirected to a file or other sink. In Node.js, you can use the\n * [`Readable.from()`](https://nodejs.org/api/stream.html#stream_stream_readable_from_iterable_options)\n * API to convert this to a standard Node.js stream, or it can be directly fed\n * to a\n * [`stream.pipeline()`](https://nodejs.org/api/stream.html#stream_stream_pipeline_source_transforms_destination_callback).\n *\n * The channel will provide a form of backpressure. The `Promise` from a\n * `write()` won't resolve until the resulting data is drained from the `out`\n * iterable.\n *\n * It is also possible to ignore the `Promise` from `write()` calls and allow\n * the generated data to queue in memory. This should be avoided for large CAR\n * archives of course due to the memory costs and potential for memory overflow.\n *\n * Load this class with either\n * `import { CarWriter } from '@ipld/car/writer'`\n * (`const { CarWriter } = require('@ipld/car/writer')`). Or\n * `import { CarWriter } from '@ipld/car'`\n * (`const { CarWriter } = require('@ipld/car')`). The former will likely\n * result in smaller bundle sizes where this is important.\n *\n * @name CarWriter\n * @class\n * @implements {BlockWriter}\n */\nexport class CarWriter {\n  /**\n   * @param {CID[]} roots\n   * @param {CarEncoder} encoder\n   */\n  constructor (roots, encoder) {\n    this._encoder = encoder\n    /** @type {Promise<void>} */\n    this._mutex = encoder.setRoots(roots)\n    this._ended = false\n  }\n\n  /**\n   * Write a `Block` (a `{ cid:CID, bytes:Uint8Array }` pair) to the archive.\n   *\n   * @function\n   * @memberof CarWriter\n   * @instance\n   * @async\n   * @param {Block} block - A `{ cid:CID, bytes:Uint8Array }` pair.\n   * @returns {Promise<void>} The returned promise will only resolve once the\n   * bytes this block generates are written to the `out` iterable.\n   */\n  async put (block) {\n    if (!(block.bytes instanceof Uint8Array) || !block.cid) {\n      throw new TypeError('Can only write {cid, bytes} objects')\n    }\n    if (this._ended) {\n      throw new Error('Already closed')\n    }\n    const cid = CID.asCID(block.cid)\n    if (!cid) {\n      throw new TypeError('Can only write {cid, bytes} objects')\n    }\n    this._mutex = this._mutex.then(() => this._encoder.writeBlock({ cid, bytes: block.bytes }))\n    return this._mutex\n  }\n\n  /**\n   * Finalise the CAR archive and signal that the `out` iterable should end once\n   * any remaining bytes are written.\n   *\n   * @function\n   * @memberof CarWriter\n   * @instance\n   * @async\n   * @returns {Promise<void>}\n   */\n  async close () {\n    if (this._ended) {\n      throw new Error('Already closed')\n    }\n    await this._mutex\n    this._ended = true\n    return this._encoder.close()\n  }\n\n  /**\n   * Returns the version number of the CAR file being written\n   *\n   * @returns {number}\n   */\n  version () {\n    return this._encoder.version()\n  }\n\n  /**\n   * Create a new CAR writer \"channel\" which consists of a\n   * `{ writer:CarWriter, out:AsyncIterable<Uint8Array> }` pair.\n   *\n   * @async\n   * @static\n   * @memberof CarWriter\n   * @param {CID[] | CID | void} roots\n   * @returns {WriterChannel} The channel takes the form of\n   * `{ writer:CarWriter, out:AsyncIterable<Uint8Array> }`.\n   */\n  static create (roots) {\n    roots = toRoots(roots)\n    const { encoder, iterator } = encodeWriter()\n    const writer = new CarWriter(roots, encoder)\n    const out = new CarWriterOut(iterator)\n    return { writer, out }\n  }\n\n  /**\n   * Create a new CAR appender \"channel\" which consists of a\n   * `{ writer:CarWriter, out:AsyncIterable<Uint8Array> }` pair.\n   * This appender does not consider roots and does not produce a CAR header.\n   * It is designed to append blocks to an _existing_ CAR archive. It is\n   * expected that `out` will be concatenated onto the end of an existing\n   * archive that already has a properly formatted header.\n   *\n   * @async\n   * @static\n   * @memberof CarWriter\n   * @returns {WriterChannel} The channel takes the form of\n   * `{ writer:CarWriter, out:AsyncIterable<Uint8Array> }`.\n   */\n  static createAppender () {\n    const { encoder, iterator } = encodeWriter()\n    encoder.setRoots = () => Promise.resolve()\n    const writer = new CarWriter([], encoder)\n    const out = new CarWriterOut(iterator)\n    return { writer, out }\n  }\n\n  /**\n   * Update the list of roots in the header of an existing CAR as represented\n   * in a Uint8Array.\n   *\n   * This operation is an _overwrite_, the total length of the CAR will not be\n   * modified. A rejection will occur if the new header will not be the same\n   * length as the existing header, in which case the CAR will not be modified.\n   * It is the responsibility of the user to ensure that the roots being\n   * replaced encode as the same length as the new roots.\n   *\n   * The byte array passed in an argument will be modified and also returned\n   * upon successful modification.\n   *\n   * @async\n   * @static\n   * @memberof CarWriter\n   * @param {Uint8Array} bytes\n   * @param {CID[]} roots - A new list of roots to replace the existing list in\n   * the CAR header. The new header must take up the same number of bytes as the\n   * existing header, so the roots should collectively be the same byte length\n   * as the existing roots.\n   * @returns {Promise<Uint8Array>}\n   */\n  static async updateRootsInBytes (bytes, roots) {\n    const reader = bytesReader(bytes)\n    await readHeader(reader)\n    const newHeader = createHeader(roots)\n    if (Number(reader.pos) !== newHeader.length) {\n      throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${reader.pos} bytes, new header is ${newHeader.length} bytes)`)\n    }\n    bytes.set(newHeader, 0)\n    return bytes\n  }\n}\n\n/**\n * @class\n * @implements {AsyncIterable<Uint8Array>}\n */\nexport class CarWriterOut {\n  /**\n   * @param {AsyncIterator<Uint8Array>} iterator\n   */\n  constructor (iterator) {\n    this._iterator = iterator\n  }\n\n  [Symbol.asyncIterator] () {\n    if (this._iterating) {\n      throw new Error('Multiple iterator not supported')\n    }\n    this._iterating = true\n    return this._iterator\n  }\n}\n\nfunction encodeWriter () {\n  /** @type {IteratorChannel} */\n  const iw = iteratorChannel()\n  const { writer, iterator } = iw\n  const encoder = createEncoder(writer)\n  return { encoder, iterator }\n}\n\n/**\n * @private\n * @param {CID[] | CID | void} roots\n * @returns {CID[]}\n */\nfunction toRoots (roots) {\n  if (roots === undefined) {\n    return []\n  }\n\n  if (!Array.isArray(roots)) {\n    const cid = CID.asCID(roots)\n    if (!cid) {\n      throw new TypeError('roots must be a single CID or an array of CIDs')\n    }\n    return [cid]\n  }\n\n  const _roots = []\n  for (const root of roots) {\n    const _root = CID.asCID(root)\n    if (!_root) {\n      throw new TypeError('roots must be a single CID or an array of CIDs')\n    }\n    _roots.push(_root)\n  }\n  return _roots\n}\n\nexport const __browser = true\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5911, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/car/src/index-browser.js"],"sourcesContent":["import { CarBufferReader } from './buffer-reader.js'\nimport * as CarBufferWriter from './buffer-writer.js'\nimport { CarIndexedReader } from './indexed-reader-browser.js'\nimport { CarIndexer } from './indexer.js'\nimport { CarBlockIterator, CarCIDIterator } from './iterator.js'\nimport { CarReader } from './reader-browser.js'\nimport { CarWriter } from './writer-browser.js'\n\nexport {\n  CarReader,\n  CarIndexer,\n  CarBlockIterator,\n  CarCIDIterator,\n  CarWriter,\n  CarIndexedReader,\n  CarBufferReader,\n  CarBufferWriter\n}\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 5931, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/client/src/connection.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { Signature, Message, Receipt, sha256 } from '@ucanto/core'\n\n/**\n * Creates a connection to a service.\n *\n * @template {Record<string, any>} T\n * @param {API.ConnectionOptions<T>} options\n * @returns {API.ConnectionView<T>}\n */\nexport const connect = options => new Connection(options)\n\n/**\n * @template {Record<string, any>} T\n * @implements {API.ConnectionView<T>}\n */\nclass Connection {\n  /**\n   * @param {API.ConnectionOptions<T>} options\n   */\n  constructor(options) {\n    this.id = options.id\n    this.options = options\n    this.codec = options.codec\n    this.channel = options.channel\n    this.hasher = options.hasher || sha256\n  }\n  /**\n   * Execute invocations.\n   *\n   * @template {API.Capability} C\n   * @template {API.Tuple<API.ServiceInvocation<C, T>>} I\n   * @param {I} invocations\n   * @returns {Promise<API.InferReceipts<I, T>>}\n   */\n  async execute(...invocations) {\n    return execute(invocations, this)\n  }\n}\n\n/**\n * @template {API.Capability} C\n * @template {Record<string, any>} T\n * @template {API.Tuple<API.ServiceInvocation<C, T>>} I\n * @param {API.Connection<T>} connection\n * @param {I} invocations\n * @returns {Promise<API.InferReceipts<I, T>>}\n */\nexport const execute = async (invocations, connection) => {\n  const input = await Message.build({ invocations })\n  const request = await connection.codec.encode(input, connection)\n  const response = await connection.channel.request(request)\n  // We may fail to decode the response if content type is not supported\n  // or if data was corrupted. We do not want to throw in such case however,\n  // because client will get an Error object as opposed to a receipt, to retain\n  // consistent client API with two kinds of errors we encode caught error as\n  // a receipts per workflow invocation.\n  try {\n    const output = await connection.codec.decode(response)\n    const receipts = input.invocationLinks.map(link => output.get(link))\n    return /** @type {API.InferReceipts<I, T>} */ (receipts)\n  } catch (error) {\n    // No third party code is run during decode and we know\n    // we only throw an Error\n    const { message, name = 'Error', ...cause } = /** @type {Error} */ (error)\n    const receipts = []\n    for await (const ran of input.invocationLinks) {\n      const receipt = await Receipt.issue({\n        ran,\n        result: { error: { ...cause, name, message } },\n        // @ts-expect-error - we can not really sign a receipt without having\n        // an access to a signer which client does not have. In the future\n        // we will change client API requiring a signer to be passed in but\n        // for now we just use a dummy signer.\n        issuer: {\n          did() {\n            return connection.id.did()\n          },\n          sign() {\n            return Signature.createNonStandard('', new Uint8Array())\n          },\n        },\n      })\n\n      receipts.push(receipt)\n    }\n\n    return /** @type {API.InferReceipts<I, T>} */ (receipts)\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;AASO,MAAM,UAAU,CAAA,UAAW,IAAI,WAAW;AAEjD;;;CAGC,GACD,MAAM;IACJ;;GAEC,GACD,YAAY,OAAO,CAAE;QACnB,IAAI,CAAC,EAAE,GAAG,QAAQ,EAAE;QACpB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,KAAK,GAAG,QAAQ,KAAK;QAC1B,IAAI,CAAC,OAAO,GAAG,QAAQ,OAAO;QAC9B,IAAI,CAAC,MAAM,GAAG,QAAQ,MAAM,IAAI,qLAAM;IACxC;IACA;;;;;;;GAOC,GACD,MAAM,QAAQ,GAAG,WAAW,EAAE;QAC5B,OAAO,QAAQ,aAAa,IAAI;IAClC;AACF;AAUO,MAAM,UAAU,OAAO,aAAa;IACzC,MAAM,QAAQ,MAAM,mMAAO,CAAC,KAAK,CAAC;QAAE;IAAY;IAChD,MAAM,UAAU,MAAM,WAAW,KAAK,CAAC,MAAM,CAAC,OAAO;IACrD,MAAM,WAAW,MAAM,WAAW,OAAO,CAAC,OAAO,CAAC;IAClD,sEAAsE;IACtE,0EAA0E;IAC1E,6EAA6E;IAC7E,2EAA2E;IAC3E,sCAAsC;IACtC,IAAI;QACF,MAAM,SAAS,MAAM,WAAW,KAAK,CAAC,MAAM,CAAC;QAC7C,MAAM,WAAW,MAAM,eAAe,CAAC,GAAG,CAAC,CAAA,OAAQ,OAAO,GAAG,CAAC;QAC9D,OAA+C;IACjD,EAAE,OAAO,OAAO;QACd,uDAAuD;QACvD,yBAAyB;QACzB,MAAM,EAAE,OAAO,EAAE,OAAO,OAAO,EAAE,GAAG,OAAO,GAAyB;QACpE,MAAM,WAAW,EAAE;QACnB,WAAW,MAAM,OAAO,MAAM,eAAe,CAAE;YAC7C,MAAM,UAAU,MAAM,mMAAO,CAAC,KAAK,CAAC;gBAClC;gBACA,QAAQ;oBAAE,OAAO;wBAAE,GAAG,KAAK;wBAAE;wBAAM;oBAAQ;gBAAE;gBAC7C,qEAAqE;gBACrE,kEAAkE;gBAClE,mEAAmE;gBACnE,sCAAsC;gBACtC,QAAQ;oBACN;wBACE,OAAO,WAAW,EAAE,CAAC,GAAG;oBAC1B;oBACA;wBACE,OAAO,8MAAS,CAAC,iBAAiB,CAAC,IAAI,IAAI;oBAC7C;gBACF;YACF;YAEA,SAAS,IAAI,CAAC;QAChB;QAEA,OAA+C;IACjD;AACF","ignoreList":[0]}},
    {"offset": {"line": 6022, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/client/src/lib.js"],"sourcesContent":["export * from './connection.js'\n\nexport * from '@ucanto/interface'\nimport { Delegation, invoke, Schema, DAG, ok, error } from '@ucanto/core'\n\nexport const delegate = Delegation.delegate\nexport { invoke, ok, error, Schema, DAG }\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAEO,MAAM,WAAW,4MAAU,CAAC,QAAQ","ignoreList":[0]}},
    {"offset": {"line": 6043, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/car/request.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { CAR, Message } from '@ucanto/core'\n\nexport { CAR as codec }\n\nexport const contentType = CAR.contentType\n\nconst HEADERS = Object.freeze({\n  'content-type': contentType,\n  // We will signal that we want to receive a CAR file in the response\n  accept: contentType,\n})\n\n/**\n * Encodes `AgentMessage` into an `HTTPRequest`.\n *\n * @template {API.AgentMessage} Message\n * @param {Message} message\n * @param {API.EncodeOptions & { headers?: Record<string, string> }} [options]\n * @returns {API.HTTPRequest<Message>}\n */\nexport const encode = (message, options) => {\n  const blocks = new Map()\n  for (const block of message.iterateIPLDBlocks()) {\n    blocks.set(`${block.cid}`, block)\n  }\n\n  /**\n   * Cast to Uint8Array to remove phantom type set by the\n   * CAR encoder which is too specific.\n   *\n   * @type {Uint8Array}\n   */\n  const body = CAR.encode({\n    roots: [message.root],\n    blocks,\n  })\n\n  return {\n    headers: options?.headers || { ...HEADERS },\n    body,\n  }\n}\n\n/**\n * Decodes `AgentMessage` from the received `HTTPRequest`.\n *\n * @template {API.AgentMessage} Message\n * @param {API.HTTPRequest<Message>} request\n * @returns {Promise<Message>}\n */\nexport const decode = async ({ headers, body }) => {\n  const { roots, blocks } = CAR.decode(/** @type {Uint8Array} */ (body))\n  const message = Message.view({ root: roots[0].cid, store: blocks })\n  return /** @type {Message} */ (message)\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAAA;AAAA;;;;AAIO,MAAM,cAAc,uLAAG,CAAC,WAAW;AAE1C,MAAM,UAAU,OAAO,MAAM,CAAC;IAC5B,gBAAgB;IAChB,oEAAoE;IACpE,QAAQ;AACV;AAUO,MAAM,SAAS,CAAC,SAAS;IAC9B,MAAM,SAAS,IAAI;IACnB,KAAK,MAAM,SAAS,QAAQ,iBAAiB,GAAI;QAC/C,OAAO,GAAG,CAAC,GAAG,MAAM,GAAG,EAAE,EAAE;IAC7B;IAEA;;;;;GAKC,GACD,MAAM,OAAO,uLAAG,CAAC,MAAM,CAAC;QACtB,OAAO;YAAC,QAAQ,IAAI;SAAC;QACrB;IACF;IAEA,OAAO;QACL,SAAS,SAAS,WAAW;YAAE,GAAG,OAAO;QAAC;QAC1C;IACF;AACF;AASO,MAAM,SAAS,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;IAC5C,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,uLAAG,CAAC,MAAM,CAA4B;IAChE,MAAM,UAAU,mMAAO,CAAC,IAAI,CAAC;QAAE,MAAM,KAAK,CAAC,EAAE,CAAC,GAAG;QAAE,OAAO;IAAO;IACjE,OAA+B;AACjC","ignoreList":[0]}},
    {"offset": {"line": 6115, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/car/response.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { CAR, Message } from '@ucanto/core'\nexport { CAR as codec }\n\nexport const contentType = CAR.contentType\n\nconst HEADERS = Object.freeze({\n  'content-type': contentType,\n})\n\n/**\n * Encodes `AgentMessage` into an `HTTPRequest`.\n *\n * @template {API.AgentMessage} Message\n * @param {Message} message\n * @param {API.EncodeOptions} [options]\n * @returns {API.HTTPResponse<Message>}\n */\nexport const encode = (message, options) => {\n  const blocks = new Map()\n  for (const block of message.iterateIPLDBlocks()) {\n    blocks.set(`${block.cid}`, block)\n  }\n\n  /**\n   * Cast to Uint8Array to remove phantom type set by the\n   * CAR encoder which is too specific.\n   *\n   * @type {Uint8Array}\n   */\n  const body = CAR.encode({\n    roots: [message.root],\n    blocks,\n  })\n\n  return {\n    headers: { ...HEADERS },\n    body,\n  }\n}\n\n/**\n * Decodes `AgentMessage` from the received `HTTPResponse`.\n *\n * @template {API.AgentMessage} Message\n * @param {API.HTTPResponse<Message>} response\n * @returns {Promise<Message>}\n */\nexport const decode = async ({ headers, body }) => {\n  const { roots, blocks } = CAR.decode(/** @type {Uint8Array} */ (body))\n  const message = Message.view({ root: roots[0].cid, store: blocks })\n  return /** @type {Message} */ (message)\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAAA;AAAA;;;;AAGO,MAAM,cAAc,uLAAG,CAAC,WAAW;AAE1C,MAAM,UAAU,OAAO,MAAM,CAAC;IAC5B,gBAAgB;AAClB;AAUO,MAAM,SAAS,CAAC,SAAS;IAC9B,MAAM,SAAS,IAAI;IACnB,KAAK,MAAM,SAAS,QAAQ,iBAAiB,GAAI;QAC/C,OAAO,GAAG,CAAC,GAAG,MAAM,GAAG,EAAE,EAAE;IAC7B;IAEA;;;;;GAKC,GACD,MAAM,OAAO,uLAAG,CAAC,MAAM,CAAC;QACtB,OAAO;YAAC,QAAQ,IAAI;SAAC;QACrB;IACF;IAEA,OAAO;QACL,SAAS;YAAE,GAAG,OAAO;QAAC;QACtB;IACF;AACF;AASO,MAAM,SAAS,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;IAC5C,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,uLAAG,CAAC,MAAM,CAA4B;IAChE,MAAM,UAAU,mMAAO,CAAC,IAAI,CAAC;QAAE,MAAM,KAAK,CAAC,EAAE,CAAC,GAAG;QAAE,OAAO;IAAO;IACjE,OAA+B;AACjC","ignoreList":[0]}},
    {"offset": {"line": 6185, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/codec.js"],"sourcesContent":["import * as API from '@ucanto/interface'\n\n/**\n * @typedef {`${Lowercase<string>}/${Lowercase<string>}`|`${Lowercase<string>}/${Lowercase<string>}+${Lowercase<string>}`} ContentType\n * @typedef {`${Lowercase<string>}/${Lowercase<string>}`|`${Lowercase<string>}/${Lowercase<string>};q=${number}.${number}`} MediaType\n * @param {object} source\n * @param {Record<ContentType, API.Transport.RequestDecoder>} source.decoders\n * @param {Record<MediaType, API.Transport.ResponseEncoder>} source.encoders\n * @returns {API.InboundCodec}\n */\nexport const inbound = source => new Inbound(source)\n\n/**\n * @implements {API.InboundCodec}\n */\nclass Inbound {\n  /**\n   * @param {API.HTTPRequest} request\n   * @returns {API.Result<API.InboundAcceptCodec, API.HTTPError>} transport\n   */\n  accept({ headers }) {\n    const contentType = headers['content-type'] || headers['Content-Type']\n    const decoder = this.decoders[contentType]\n    if (!decoder) {\n      return {\n        error: {\n          status: 415,\n          message: `The server cannot process the request because the payload format is not supported. Please check the content-type header and try again with a supported media type.`,\n          headers: {\n            accept: Object.keys(this.decoders).join(', '),\n          },\n        },\n      }\n    }\n\n    const accept = parseAcceptHeader(headers.accept || headers.Accept || '*/*')\n    for (const { category, type } of accept) {\n      for (const encoder of this.encoders) {\n        const select =\n          (category === '*' || category === encoder.category) &&\n          (type === '*' || type === encoder.type)\n\n        if (select) {\n          return { ok: { ...encoder, decoder } }\n        }\n      }\n    }\n\n    return {\n      error: {\n        status: 406,\n        message: `The requested resource cannot be served in the requested content type. Please specify a supported content type using the Accept header.`,\n        headers: {\n          accept: formatAcceptHeader(Object.values(this.encoders)),\n        },\n      },\n    }\n  }\n\n  /**\n   * @param {object} source\n   * @param {Record<string, API.Transport.RequestDecoder>} source.decoders\n   * @param {Record<string, API.Transport.ResponseEncoder>} source.encoders\n   */\n  constructor({ decoders = {}, encoders = {} }) {\n    this.decoders = decoders\n\n    if (Object.keys(decoders).length === 0) {\n      throw new Error('At least one decoder MUST be provided')\n    }\n\n    // We sort the encoders by preference, so that we can pick the most\n    // preferred one when client accepts multiple content types.\n    this.encoders = Object.entries(encoders)\n      .map(([mediaType, encoder]) => {\n        return { ...parseMediaType(mediaType), encoder }\n      })\n      .sort((a, b) => b.preference - a.preference)\n\n    if (this.encoders.length === 0) {\n      throw new Error('At least one encoder MUST be provided')\n    }\n  }\n}\n\n/**\n * @param {object} source\n * @param {Record<MediaType, API.Transport.RequestEncoder>} source.encoders\n * @param {Record<ContentType, API.Transport.ResponseDecoder>} source.decoders\n * @returns {API.OutboundCodec}\n */\nexport const outbound = source => new Outbound(source)\n\n/**\n * @implements {API.OutboundCodec}\n */\nclass Outbound {\n  /**\n   * @param {object} source\n   * @param {Record<string, API.Transport.RequestEncoder>} source.encoders\n   * @param {Record<string, API.Transport.ResponseDecoder>} source.decoders\n   */\n  constructor({ decoders = {}, encoders = {} }) {\n    this.decoders = decoders\n\n    if (Object.keys(decoders).length === 0) {\n      throw new Error('At least one decoder MUST be provided')\n    }\n\n    // We sort the encoders by preference, so that we can pick the most\n    // preferred one when client accepts multiple content types.\n    this.encoders = Object.entries(encoders)\n      .map(([mediaType, encoder]) => {\n        return { ...parseMediaType(mediaType), encoder }\n      })\n      .sort((a, b) => b.preference - a.preference)\n\n    this.acceptType = formatAcceptHeader(this.encoders)\n\n    if (this.encoders.length === 0) {\n      throw new Error('At least one encoder MUST be provided')\n    }\n\n    this.encoder = this.encoders[0].encoder\n  }\n\n  /**\n   * @template {API.AgentMessage} Message\n   * @param {Message} message\n   */\n  encode(message) {\n    return this.encoder.encode(message, {\n      accept: this.acceptType,\n    })\n  }\n  /**\n   * @template {API.AgentMessage} Message\n   * @param {API.HTTPResponse<Message>} response\n   * @returns {API.Await<Message>}\n   */\n  decode(response) {\n    const { headers } = response\n    const contentType = headers['content-type'] || headers['Content-Type']\n    const decoder = this.decoders[contentType] || this.decoders['*/*']\n    switch (response.status) {\n      case 415:\n      case 406:\n        throw Object.assign(\n          new RangeError(new TextDecoder().decode(response.body)),\n          {\n            status: response.status,\n            headers: response.headers,\n          }\n        )\n    }\n    if (!decoder) {\n      throw Object.assign(\n        TypeError(\n          `Can not decode response with content-type '${contentType}' because no matching transport decoder is configured.`\n        ),\n        {\n          error: true,\n        }\n      )\n    }\n\n    return decoder.decode(response)\n  }\n}\n\n/**\n * @typedef {{ category: string, type: string, preference: number }} Media\n * @param {string} source\n * @returns {Media}\n */\nexport const parseMediaType = source => {\n  const [mediaType = '*/*', mediaRange = ''] = source.trim().split(';')\n  const [category = '*', type = '*'] = mediaType.split('/')\n  const params = new URLSearchParams(mediaRange)\n  const preference = parseFloat(params.get('q') || '0')\n  return {\n    category,\n    type,\n    /* c8 ignore next */\n    preference: isNaN(preference) ? 0 : preference,\n  }\n}\n\n/**\n * @param {Media} media\n */\nexport const formatMediaType = ({ category, type, preference }) =>\n  /** @type {MediaType}  */ (\n    `${category}/${type}${preference ? `;q=${preference}` : ''}`\n  )\n\n/**\n * @param {string} source\n */\nexport const parseAcceptHeader = source =>\n  source\n    .split(',')\n    .map(parseMediaType)\n    .sort((a, b) => b.preference - a.preference)\n\n/**\n * @param {Media[]} source\n */\nexport const formatAcceptHeader = source =>\n  source.map(formatMediaType).join(', ')\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 6345, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/car.js"],"sourcesContent":["import { CAR } from '@ucanto/core'\nimport * as request from './car/request.js'\nimport * as response from './car/response.js'\nimport * as Codec from './codec.js'\n\nexport { CAR as codec, request, response }\n\nexport const contentType = CAR.contentType\n\nexport const inbound = Codec.inbound({\n  decoders: {\n    [request.contentType]: request,\n  },\n  encoders: {\n    [response.contentType]: response,\n  },\n})\n\nexport const outbound = Codec.outbound({\n  encoders: {\n    [request.contentType]: request,\n  },\n  decoders: {\n    [response.contentType]: response,\n  },\n})\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;;AAIO,MAAM,cAAc,uLAAG,CAAC,WAAW;AAEnC,MAAM,UAAU,mKAAa,CAAC;IACnC,UAAU;QACR,CAAC,kKAAQ,WAAW,CAAC,EAAE;IACzB;IACA,UAAU;QACR,CAAC,mKAAS,WAAW,CAAC,EAAE;IAC1B;AACF;AAEO,MAAM,WAAW,oKAAc,CAAC;IACrC,UAAU;QACR,CAAC,kKAAQ,WAAW,CAAC,EAAE;IACzB;IACA,UAAU;QACR,CAAC,mKAAS,WAAW,CAAC,EAAE;IAC1B;AACF","ignoreList":[0]}},
    {"offset": {"line": 6386, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/http.js"],"sourcesContent":["import * as API from '@ucanto/interface'\n\n/**\n * @typedef {{\n * ok: boolean\n * arrayBuffer():API.Await<ArrayBuffer>\n * headers: {\n *  entries?: () => Iterable<[string, string]>\n * } | Headers\n * status?: number\n * statusText?: string\n * url?: string\n * }} FetchResponse\n * @typedef {(url:string, init:API.HTTPRequest) => API.Await<FetchResponse>} Fetcher\n */\n/**\n * @template S\n * @param {object} options\n * @param {URL} options.url\n * @param {(url:string, init:API.HTTPRequest) => API.Await<FetchResponse>} [options.fetch]\n * @param {string} [options.method]\n * @param {Record<string, string>} [options.headers]\n * @returns {API.Channel<S>}\n */\nexport const open = ({ url, method = 'POST', fetch, headers }) => {\n  /* c8 ignore next 9 */\n  if (!fetch) {\n    if (typeof globalThis.fetch !== 'undefined') {\n      fetch = globalThis.fetch.bind(globalThis)\n    } else {\n      throw new TypeError(\n        `ucanto HTTP transport got undefined \\`fetch\\`. Try passing in a \\`fetch\\` implementation explicitly.`\n      )\n    }\n  }\n  return new Channel({ url, method, fetch, headers })\n}\n\n/**\n * @template {Record<string, any>} S\n * @implements {API.Channel<S>}\n */\nclass Channel {\n  /**\n   * @param {object} options\n   * @param {URL} options.url\n   * @param {Fetcher} options.fetch\n   * @param {string} [options.method]\n   * @param {Record<string, string>} [options.headers]\n   */\n  constructor({ url, fetch, method, headers }) {\n    this.fetch = fetch\n    this.method = method\n    this.url = url\n    this.headers = headers\n  }\n  /**\n   * @template {API.Tuple<API.ServiceInvocation<API.Capability, S>>} I\n   * @param {API.HTTPRequest<API.AgentMessage<{ In: API.InferInvocations<I>, Out: API.Tuple<API.Receipt> }>>} request\n   * @returns {Promise<API.HTTPResponse<API.AgentMessage<{ Out: API.InferReceipts<I, S>, In: API.Tuple<API.Invocation> }>>>}\n   */\n  async request({ headers, body }) {\n    const response = await this.fetch(this.url.href, {\n      headers: { ...this.headers, ...headers },\n      body,\n      method: this.method,\n    })\n\n    const buffer = response.ok\n      ? await response.arrayBuffer()\n      : HTTPError.throw(`HTTP Request failed. ${this.method} ${this.url.href}  ${response.status}`, response)\n\n    return {\n      headers: response.headers.entries\n        ? Object.fromEntries(response.headers.entries())\n        : /* c8 ignore next */\n          {},\n      body: new Uint8Array(buffer),\n    }\n  }\n}\n\n/**\n * @typedef {{\n * status?: number\n * statusText?: string\n * url?: string\n * }} Options\n */\nclass HTTPError extends Error {\n  /**\n   * @param {string} message\n   * @param {Options} options\n   * @returns {never}\n   */\n  static throw(message, options) {\n    throw new this(message, options)\n  }\n  /**\n   * @param {string} message\n   * @param {Options} options\n   */\n  constructor(message, { url, status = 500, statusText = 'Server error' }) {\n    super(message)\n    /** @type {'HTTPError'} */\n    this.name = 'HTTPError'\n    this.url = url\n    this.status = status\n    this.statusText = statusText\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAwBO,MAAM,OAAO,CAAC,EAAE,GAAG,EAAE,SAAS,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE;IAC3D,oBAAoB,GACpB,IAAI,CAAC,OAAO;QACV,IAAI,OAAO,WAAW,KAAK,KAAK,aAAa;YAC3C,QAAQ,WAAW,KAAK,CAAC,IAAI,CAAC;QAChC,OAAO;YACL,MAAM,IAAI,UACR,CAAC,oGAAoG,CAAC;QAE1G;IACF;IACA,OAAO,IAAI,QAAQ;QAAE;QAAK;QAAQ;QAAO;IAAQ;AACnD;AAEA;;;CAGC,GACD,MAAM;IACJ;;;;;;GAMC,GACD,YAAY,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,CAAE;QAC3C,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,GAAG,GAAG;QACX,IAAI,CAAC,OAAO,GAAG;IACjB;IACA;;;;GAIC,GACD,MAAM,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE;QAC/B,MAAM,WAAW,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;YAC/C,SAAS;gBAAE,GAAG,IAAI,CAAC,OAAO;gBAAE,GAAG,OAAO;YAAC;YACvC;YACA,QAAQ,IAAI,CAAC,MAAM;QACrB;QAEA,MAAM,SAAS,SAAS,EAAE,GACtB,MAAM,SAAS,WAAW,KAC1B,UAAU,KAAK,CAAC,CAAC,qBAAqB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,SAAS,MAAM,EAAE,EAAE;QAEjG,OAAO;YACL,SAAS,SAAS,OAAO,CAAC,OAAO,GAC7B,OAAO,WAAW,CAAC,SAAS,OAAO,CAAC,OAAO,MAC3C,kBAAkB,GAClB,CAAC;YACL,MAAM,IAAI,WAAW;QACvB;IACF;AACF;AAEA;;;;;;CAMC,GACD,MAAM,kBAAkB;IACtB;;;;GAIC,GACD,OAAO,MAAM,OAAO,EAAE,OAAO,EAAE;QAC7B,MAAM,IAAI,IAAI,CAAC,SAAS;IAC1B;IACA;;;GAGC,GACD,YAAY,OAAO,EAAE,EAAE,GAAG,EAAE,SAAS,GAAG,EAAE,aAAa,cAAc,EAAE,CAAE;QACvE,KAAK,CAAC;QACN,wBAAwB,GACxB,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,GAAG,GAAG;QACX,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,UAAU,GAAG;IACpB;AACF","ignoreList":[0]}},
    {"offset": {"line": 6472, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/utf8.js"],"sourcesContent":["export const encoder = new TextEncoder()\nexport const decoder = new TextDecoder()\n\n/**\n * @param {string} text\n * @returns {Uint8Array}\n */\nexport const encode = text => encoder.encode(text)\n\n/**\n *\n * @param {Uint8Array} bytes\n * @returns {string}\n */\nexport const decode = bytes => decoder.decode(bytes)\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,UAAU,IAAI;AACpB,MAAM,UAAU,IAAI;AAMpB,MAAM,SAAS,CAAA,OAAQ,QAAQ,MAAM,CAAC;AAOtC,MAAM,SAAS,CAAA,QAAS,QAAQ,MAAM,CAAC","ignoreList":[0]}},
    {"offset": {"line": 6508, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/legacy/response.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport * as CBOR from '@ucanto/core/cbor'\nexport const contentType = 'application/cbor'\n\nconst HEADERS = Object.freeze({\n  'content-type': contentType,\n})\n\n/**\n * Encodes `AgentMessage` into a legacy CBOR representation.\n *\n * @template {API.AgentMessage} Message\n * @param {Message} message\n * @param {API.EncodeOptions} [options]\n * @returns {API.HTTPResponse<Message>}\n */\nexport const encode = (message, options) => {\n  const legacyResults = []\n  for (const receipt of message.receipts.values()) {\n    const result = receipt.out\n    if (result.ok) {\n      legacyResults.push(result.ok)\n    } else {\n      legacyResults.push({\n        ...result.error,\n        error: true,\n      })\n    }\n  }\n\n  /** @type {Uint8Array} */\n  const body = CBOR.encode(legacyResults)\n\n  return /** @type {API.HTTPResponse<Message>} */ ({\n    headers: HEADERS,\n    body,\n  })\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AACO,MAAM,cAAc;AAE3B,MAAM,UAAU,OAAO,MAAM,CAAC;IAC5B,gBAAgB;AAClB;AAUO,MAAM,SAAS,CAAC,SAAS;IAC9B,MAAM,gBAAgB,EAAE;IACxB,KAAK,MAAM,WAAW,QAAQ,QAAQ,CAAC,MAAM,GAAI;QAC/C,MAAM,SAAS,QAAQ,GAAG;QAC1B,IAAI,OAAO,EAAE,EAAE;YACb,cAAc,IAAI,CAAC,OAAO,EAAE;QAC9B,OAAO;YACL,cAAc,IAAI,CAAC;gBACjB,GAAG,OAAO,KAAK;gBACf,OAAO;YACT;QACF;IACF;IAEA,uBAAuB,GACvB,MAAM,OAAO,4KAAW,CAAC;IAEzB,OAAiD;QAC/C,SAAS;QACT;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 6545, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/legacy/request.js"],"sourcesContent":["import * as CAR from '@ucanto/core/car'\nimport * as API from '@ucanto/interface'\nimport { Invocation, Message } from '@ucanto/core'\n\nexport const contentType = 'application/car'\n\n/**\n * @template {API.AgentMessage} Message\n * @param {API.HTTPRequest<Message>} request\n */\nexport const decode = async ({ body }) => {\n  const { roots, blocks } = CAR.decode(/** @type {Uint8Array} */ (body))\n  /** @type {API.IssuedInvocation[]} */\n  const run = []\n  for (const { cid } of roots) {\n    // We don't have a way to know if the root matches a ucan link.\n    const invocation = Invocation.view({\n      root: /** @type {API.Link} */ (cid),\n      blocks,\n    })\n    run.push(invocation)\n  }\n\n  const message = await Message.build({\n    invocations: /** @type {API.Tuple<API.IssuedInvocation>} */ (run),\n  })\n\n  return /** @type {Message} */ (message)\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AAAA;AAAA;;;;AAEO,MAAM,cAAc;AAMpB,MAAM,SAAS,OAAO,EAAE,IAAI,EAAE;IACnC,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,2JAAU,CAA4B;IAChE,mCAAmC,GACnC,MAAM,MAAM,EAAE;IACd,KAAK,MAAM,EAAE,GAAG,EAAE,IAAI,MAAO;QAC3B,+DAA+D;QAC/D,MAAM,aAAa,4MAAU,CAAC,IAAI,CAAC;YACjC,MAA+B;YAC/B;QACF;QACA,IAAI,IAAI,CAAC;IACX;IAEA,MAAM,UAAU,MAAM,mMAAO,CAAC,KAAK,CAAC;QAClC,aAA6D;IAC/D;IAEA,OAA+B;AACjC","ignoreList":[0]}},
    {"offset": {"line": 6580, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/legacy.js"],"sourcesContent":["import * as Codec from './codec.js'\nimport * as CAR from './car.js'\nimport * as response from './legacy/response.js'\nimport * as request from './legacy/request.js'\n\nexport const { contentType } = request\nexport { request, response }\n\n/**\n * This is an inbound codec designed to support legacy clients and encode\n * responses in a legacy (CBOR) format.\n */\nexport const inbound = Codec.inbound({\n  decoders: {\n    [contentType]: request,\n    [CAR.contentType]: CAR.request,\n  },\n  encoders: {\n    // Here we configure encoders such that if accept header is `*/*` (which is\n    // the default if omitted) we will encode the response in CBOR. If\n    // `application/vnd.ipld.car` is set we will encode the response in current\n    // format.\n    // Here we exploit the fact that legacy clients do not send an accept header\n    // and therefore will get response in legacy format. New clients on the other\n    // hand will send `application/vnd.ipld.car` and consequently get response\n    // in current format.\n    '*/*;q=0.1': response,\n    [CAR.contentType]: CAR.response,\n  },\n})\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;AAEO,MAAM,EAAE,WAAW,EAAE,GAAG;;AAOxB,MAAM,UAAU,mKAAa,CAAC;IACnC,UAAU;QACR,CAAC,YAAY,EAAE;QACf,CAAC,qLAAe,CAAC,EAAE,+MAAW;IAChC;IACA,UAAU;QACR,2EAA2E;QAC3E,kEAAkE;QAClE,2EAA2E;QAC3E,UAAU;QACV,4EAA4E;QAC5E,6EAA6E;QAC7E,0EAA0E;QAC1E,qBAAqB;QACrB,aAAa;QACb,CAAC,qLAAe,CAAC,EAAE,kNAAY;IACjC;AACF","ignoreList":[0]}},
    {"offset": {"line": 6620, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/transport/src/lib.js"],"sourcesContent":["// top level exports\nexport * as CAR from './car.js'\nexport * as HTTP from './http.js'\nexport * as UTF8 from './utf8.js'\nexport * as Legacy from './legacy.js'\nexport * as Codec from './codec.js'\nexport * from './codec.js'\n"],"names":[],"mappings":"AAAA,oBAAoB;;AACpB;AACA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 6677, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/validator/src/util.js"],"sourcesContent":["/**\n * @template {string|boolean|number|[unknown, ...unknown[]]} T\n * @param {T} value\n * @returns {T}\n */\nexport const the = value => value\n\n/**\n * @template {{}} O\n * @param {O} object\n * @returns {({ [K in keyof O]: [K, O[K]][] }[keyof O])|[[never, never]]}\n */\n\nexport const entries = object => /** @type {any} */ (Object.entries(object))\n\n/**\n * @template T\n * @param {T[][]} dataset\n * @returns {T[][]}\n */\nexport const combine = ([first, ...rest]) => {\n  const results = first.map(value => [value])\n  for (const values of rest) {\n    const tuples = results.splice(0)\n    for (const value of values) {\n      for (const tuple of tuples) {\n        results.push([...tuple, value])\n      }\n    }\n  }\n  return results\n}\n\n/**\n * @template T\n * @param {T[]} left\n * @param {T[]} right\n * @returns {T[]}\n */\nexport const intersection = (left, right) => {\n  const [result, other] =\n    left.length < right.length\n      ? [new Set(left), new Set(right)]\n      : [new Set(right), new Set(left)]\n\n  for (const item of result) {\n    if (!other.has(item)) {\n      result.delete(item)\n    }\n  }\n\n  return [...result]\n}\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;;;AACM,MAAM,MAAM,CAAA,QAAS;AAQrB,MAAM,UAAU,CAAA,SAA8B,OAAO,OAAO,CAAC;AAO7D,MAAM,UAAU,CAAC,CAAC,OAAO,GAAG,KAAK;IACtC,MAAM,UAAU,MAAM,GAAG,CAAC,CAAA,QAAS;YAAC;SAAM;IAC1C,KAAK,MAAM,UAAU,KAAM;QACzB,MAAM,SAAS,QAAQ,MAAM,CAAC;QAC9B,KAAK,MAAM,SAAS,OAAQ;YAC1B,KAAK,MAAM,SAAS,OAAQ;gBAC1B,QAAQ,IAAI,CAAC;uBAAI;oBAAO;iBAAM;YAChC;QACF;IACF;IACA,OAAO;AACT;AAQO,MAAM,eAAe,CAAC,MAAM;IACjC,MAAM,CAAC,QAAQ,MAAM,GACnB,KAAK,MAAM,GAAG,MAAM,MAAM,GACtB;QAAC,IAAI,IAAI;QAAO,IAAI,IAAI;KAAO,GAC/B;QAAC,IAAI,IAAI;QAAQ,IAAI,IAAI;KAAM;IAErC,KAAK,MAAM,QAAQ,OAAQ;QACzB,IAAI,CAAC,MAAM,GAAG,CAAC,OAAO;YACpB,OAAO,MAAM,CAAC;QAChB;IACF;IAEA,OAAO;WAAI;KAAO;AACpB","ignoreList":[0]}},
    {"offset": {"line": 6731, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/validator/src/error.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { the } from './util.js'\nimport { isLink } from '@ucanto/core/link'\nimport { fail, Failure } from '@ucanto/core/result'\n\nexport { Failure, fail }\n\nexport class EscalatedCapability extends Failure {\n  /**\n   * @param {API.ParsedCapability} claimed\n   * @param {object} delegated\n   * @param {API.Failure} cause\n   */\n  constructor(claimed, delegated, cause) {\n    super()\n    this.claimed = claimed\n    this.delegated = delegated\n    this.cause = cause\n    this.name = the('EscalatedCapability')\n  }\n  describe() {\n    return `Constraint violation: ${this.cause.message}`\n  }\n}\n\n/**\n * @implements {API.DelegationError}\n */\nexport class DelegationError extends Failure {\n  /**\n   * @param {(API.InvalidCapability | API.EscalatedDelegation | API.DelegationError)[]} causes\n   * @param {object} context\n   */\n  constructor(causes, context) {\n    super()\n    this.name = the('InvalidClaim')\n    this.causes = causes\n    this.context = context\n  }\n  describe() {\n    return [\n      `Can not derive ${this.context} from delegated capabilities:`,\n      ...this.causes.map(cause => li(cause.message)),\n    ].join('\\n')\n  }\n\n  /**\n   * @type {API.InvalidCapability | API.EscalatedDelegation | API.DelegationError}\n   */\n  get cause() {\n    /* c8 ignore next 9 */\n    if (this.causes.length !== 1) {\n      return this\n    } else {\n      const [cause] = this.causes\n      const value = cause.name === 'InvalidClaim' ? cause.cause : cause\n      Object.defineProperties(this, { cause: { value } })\n      return value\n    }\n  }\n}\n\n/**\n * @implements {API.SessionEscalation}\n */\nexport class SessionEscalation extends Failure {\n  /**\n   * @param {object} source\n   * @param {API.Delegation} source.delegation\n   * @param {API.Failure} source.cause\n   */\n  constructor({ delegation, cause }) {\n    super()\n    this.name = the('SessionEscalation')\n    this.delegation = delegation\n    this.cause = cause\n  }\n  describe() {\n    const issuer = this.delegation.issuer.did()\n    return [\n      `Delegation ${this.delegation.cid} issued by ${issuer} has an invalid session`,\n      li(this.cause.message),\n    ].join('\\n')\n  }\n}\n\n/**\n * @implements {API.InvalidSignature}\n */\nexport class InvalidSignature extends Failure {\n  /**\n   * @param {API.Delegation} delegation\n   * @param {API.Verifier} verifier\n   */\n  constructor(delegation, verifier) {\n    super()\n    this.name = the('InvalidSignature')\n    this.delegation = delegation\n    this.verifier = verifier\n  }\n  get issuer() {\n    return this.delegation.issuer\n  }\n  get audience() {\n    return this.delegation.audience\n  }\n  get key() {\n    return this.verifier.toDIDKey()\n  }\n  describe() {\n    const issuer = this.issuer.did()\n    const key = this.key\n    return (\n      issuer.startsWith('did:key')\n        ? [\n            `Proof ${this.delegation.cid} does not has a valid signature from ${key}`,\n          ]\n        : [\n            `Proof ${this.delegation.cid} issued by ${issuer} does not has a valid signature from ${key}`,\n            `   Probably issuer signed with a different key, which got rotated, invalidating delegations that were issued with prior keys`,\n          ]\n    ).join('\\n')\n  }\n}\n\n/**\n * @implements {API.UnavailableProof}\n */\nexport class UnavailableProof extends Failure {\n  /**\n   * @param {API.UCAN.Link} link\n   * @param {Error} [cause]\n   */\n  constructor(link, cause) {\n    super()\n    this.name = the('UnavailableProof')\n    this.link = link\n    this.cause = cause\n  }\n  describe() {\n    return [\n      `Linked proof '${this.link}' is not included and could not be resolved`,\n      ...(this.cause\n        ? [li(`Proof resolution failed with: ${this.cause.message}`)]\n        : []),\n    ].join('\\n')\n  }\n}\n\nexport class DIDKeyResolutionError extends Failure {\n  /**\n   * @param {API.UCAN.DID} did\n   * @param {API.Failure} [cause]\n   */\n  constructor(did, cause) {\n    super()\n    this.name = the('DIDKeyResolutionError')\n    this.did = did\n    this.cause = cause\n  }\n  describe() {\n    return `Unable to resolve '${this.did}' key`\n  }\n}\n\n/**\n * @implements {API.InvalidAudience}\n */\nexport class PrincipalAlignmentError extends Failure {\n  /**\n   * @param {API.UCAN.Principal} audience\n   * @param {API.Delegation} delegation\n   */\n  constructor(audience, delegation) {\n    super()\n    this.name = the('InvalidAudience')\n    this.audience = audience\n    this.delegation = delegation\n  }\n  describe() {\n    return `Delegation audience is '${this.delegation.audience.did()}' instead of '${this.audience.did()}'`\n  }\n  toJSON() {\n    const { name, audience, message, stack } = this\n    return {\n      name,\n      audience: audience.did(),\n      delegation: { audience: this.delegation.audience.did() },\n      message,\n      stack,\n    }\n  }\n}\n\n/**\n * @implements {API.MalformedCapability}\n */\nexport class MalformedCapability extends Failure {\n  /**\n   * @param {API.Capability} capability\n   * @param {API.Failure} cause\n   */\n  constructor(capability, cause) {\n    super()\n    this.name = the('MalformedCapability')\n    this.capability = capability\n    this.cause = cause\n  }\n  describe() {\n    return [\n      `Encountered malformed '${this.capability.can}' capability: ${format(\n        this.capability\n      )}`,\n      li(this.cause.message),\n    ].join('\\n')\n  }\n}\n\nexport class UnknownCapability extends Failure {\n  /**\n   * @param {API.Capability} capability\n   */\n  constructor(capability) {\n    super()\n    this.name = the('UnknownCapability')\n    this.capability = capability\n  }\n  /* c8 ignore next 3 */\n  describe() {\n    return `Encountered unknown capability: ${format(this.capability)}`\n  }\n}\n\nexport class Expired extends Failure {\n  /**\n   * @param {API.Delegation & { expiration: number }} delegation\n   */\n  constructor(delegation) {\n    super()\n    this.name = the('Expired')\n    this.delegation = delegation\n  }\n  describe() {\n    return `Proof ${this.delegation.cid} has expired on ${new Date(\n      this.delegation.expiration * 1000\n    )}`\n  }\n  get expiredAt() {\n    return this.delegation.expiration\n  }\n  toJSON() {\n    const { name, expiredAt, message, stack } = this\n    return {\n      name,\n      message,\n      expiredAt,\n      stack,\n    }\n  }\n}\n\n/**\n * @implements {API.Revoked}\n */\nexport class Revoked extends Failure {\n  /**\n   * @param {API.Delegation} delegation\n   */\n  constructor(delegation) {\n    super()\n    this.name = the('Revoked')\n    this.delegation = delegation\n  }\n  describe() {\n    return `Proof ${this.delegation.cid} has been revoked`\n  }\n  toJSON() {\n    const { name, message, stack } = this\n    return {\n      name,\n      message,\n      stack,\n    }\n  }\n}\n\nexport class NotValidBefore extends Failure {\n  /**\n   * @param {API.Delegation & { notBefore: number }} delegation\n   */\n  constructor(delegation) {\n    super()\n    this.name = the('NotValidBefore')\n    this.delegation = delegation\n  }\n  describe() {\n    return `Proof ${this.delegation.cid} is not valid before ${new Date(\n      this.delegation.notBefore * 1000\n    )}`\n  }\n  get validAt() {\n    return this.delegation.notBefore\n  }\n  toJSON() {\n    const { name, validAt, message, stack } = this\n    return {\n      name,\n      message,\n      validAt,\n      stack,\n    }\n  }\n}\n\n/**\n * @implements {API.Unauthorized}\n */\n\nexport class Unauthorized extends Failure {\n  /**\n   * @param {{\n   * capability: API.CapabilityParser\n   * delegationErrors: API.DelegationError[]\n   * unknownCapabilities: API.Capability[]\n   * invalidProofs: API.InvalidProof[]\n   * failedProofs: API.InvalidClaim[]\n   * }} cause\n   */\n  constructor({\n    capability,\n    delegationErrors,\n    unknownCapabilities,\n    invalidProofs,\n    failedProofs,\n  }) {\n    super()\n    this.name = /** @type {const} */  ('Unauthorized')\n    this.capability = capability\n    this.delegationErrors = delegationErrors\n    this.unknownCapabilities = unknownCapabilities\n    this.invalidProofs = invalidProofs\n    this.failedProofs = failedProofs\n  }\n\n  describe() {\n    const errors = [\n      ...this.failedProofs.map(error => li(error.message)),\n      ...this.delegationErrors.map(error => li(error.message)),\n      ...this.invalidProofs.map(error => li(error.message)),\n    ]\n\n    const unknown = this.unknownCapabilities.map(c => li(JSON.stringify(c)))\n\n    return [\n      `Claim ${this.capability} is not authorized`,\n      ...(errors.length > 0\n        ? errors\n        : [li(`No matching delegated capability found`)]),\n      ...(unknown.length > 0\n        ? [li(`Encountered unknown capabilities\\n${unknown.join('\\n')}`)]\n        : []),\n    ].join('\\n')\n  }\n}\n\n/**\n * @param {unknown} capability\n * @param {string|number} [space]\n */\n\nconst format = (capability, space) =>\n  JSON.stringify(\n    capability,\n    (_key, value) => {\n      /* c8 ignore next 2 */\n      if (isLink(value)) {\n        return value.toString()\n      } else {\n        return value\n      }\n    },\n    space\n  )\n\n/**\n * @param {string} message\n */\nexport const indent = (message, indent = '  ') =>\n  `${indent}${message.split('\\n').join(`\\n${indent}`)}`\n\n/**\n * @param {string} message\n */\nexport const li = message => indent(`- ${message}`)\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7079, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/validator/src/capability.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { entries, combine, intersection } from './util.js'\nimport {\n  EscalatedCapability,\n  MalformedCapability,\n  UnknownCapability,\n  DelegationError as MatchError,\n} from './error.js'\nimport { invoke, delegate, Schema } from '@ucanto/core'\n\n/**\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template {API.Caveats} C\n * @typedef {{\n * can: A\n * with: API.Reader<R, API.Resource, API.Failure>\n * nb?: Schema.MapRepresentation<C, unknown>\n * derives?: (claim: {can:A, with: R, nb: C}, proof:{can:A, with:R, nb:C}) => API.Result<{}, API.Failure>\n * }} Descriptor\n */\n\n/**\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template {API.Caveats} [C={}]\n * @param {Descriptor<A, R, C>} descriptor\n \n * @returns {API.TheCapabilityParser<API.CapabilityMatch<A, R, C>>}\n */\nexport const capability = ({\n  derives = defaultDerives,\n  nb = defaultNBSchema,\n  ...etc\n}) => new Capability({ derives, nb, ...etc })\n\nconst defaultNBSchema =\n  /** @type {Schema.MapRepresentation<any>} */\n  (Schema.struct({}))\n\n/**\n * @template {API.Match} M\n * @template {API.Match} W\n * @param {API.Matcher<M>} left\n * @param {API.Matcher<W>} right\n * @returns {API.CapabilityParser<M|W>}\n */\nexport const or = (left, right) => new Or(left, right)\n\n/**\n * @template {API.MatchSelector<API.Match>[]} Selectors\n * @param {Selectors} selectors\n * @returns {API.CapabilitiesParser<API.InferMembers<Selectors>>}\n */\nexport const and = (...selectors) => new And(selectors)\n\n/**\n * @template {API.Match} M\n * @template {API.ParsedCapability} T\n * @param {object} source\n * @param {API.MatchSelector<M>} source.from\n * @param {API.TheCapabilityParser<API.DirectMatch<T>>} source.to\n * @param {API.Derives<T, API.InferDeriveProof<M['value']>>} source.derives\n \n * @returns {API.TheCapabilityParser<API.DerivedMatch<T, M>>}\n */\nexport const derive = ({ from, to, derives }) => new Derive(from, to, derives)\n\n/**\n * @template {API.Match} M\n * @implements {API.View<M>}\n */\nclass View {\n  /**\n   * @param {API.Source} source\n   * @returns {API.MatchResult<M>}\n   */\n  /* c8 ignore next 3 */\n  match(source) {\n    return { error: new UnknownCapability(source.capability) }\n  }\n\n  /**\n   * @param {API.Source[]} capabilities\n   * @returns {API.Select<M>}\n   */\n  select(capabilities) {\n    return select(this, capabilities)\n  }\n\n  /**\n   * @template {API.ParsedCapability} U\n   * @param {object} source\n   * @param {API.TheCapabilityParser<API.DirectMatch<U>>} source.to\n   * @param {API.Derives<U, API.InferDeriveProof<M['value']>>} source.derives\n   * @returns {API.TheCapabilityParser<API.DerivedMatch<U, M>>}\n   */\n  derive({ derives, to }) {\n    return derive({ derives, to, from: this })\n  }\n}\n\n/**\n * @template {API.Match} M\n * @implements {API.CapabilityParser<M>}\n * @extends {View<M>}\n */\nclass Unit extends View {\n  /**\n   * @template {API.Match} W\n   * @param {API.MatchSelector<W>} other\n   * @returns {API.CapabilityParser<M | W>}\n   */\n  or(other) {\n    return or(this, other)\n  }\n\n  /**\n   * @template {API.Match} W\n   * @param {API.CapabilityParser<W>} other\n   * @returns {API.CapabilitiesParser<[M, W]>}\n   */\n  and(other) {\n    return and(/** @type {API.CapabilityParser<M>} */ (this), other)\n  }\n}\n\n/**\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template {API.Caveats} C\n * @implements {API.TheCapabilityParser<API.DirectMatch<API.ParsedCapability<A, R, C>>>}\n * @extends {Unit<API.DirectMatch<API.ParsedCapability<A, R, C>>>}\n */\nclass Capability extends Unit {\n  /**\n   * @param {Required<Descriptor<A, R, C>>} descriptor\n   */\n  constructor(descriptor) {\n    super()\n    this.descriptor = descriptor\n    this.schema = Schema.struct({\n      can: Schema.literal(descriptor.can),\n      with: descriptor.with,\n      nb: descriptor.nb,\n    })\n  }\n\n  /**\n   * @param {API.InferCreateOptions<R, C>} options\n   */\n  create(options) {\n    const { descriptor, can } = this\n    const decoders = descriptor.nb\n    const data = /** @type {C} */ (options.nb || {})\n\n    const resource = descriptor.with.read(options.with)\n    if (resource.error) {\n      throw Object.assign(\n        new Error(`Invalid 'with' - ${resource.error.message}`),\n        {\n          cause: resource,\n        }\n      )\n    }\n\n    const nb = descriptor.nb.read(data)\n    if (nb.error) {\n      throw Object.assign(new Error(`Invalid 'nb' - ${nb.error.message}`), {\n        cause: nb,\n      })\n    }\n\n    return createCapability({ can, with: resource.ok, nb: nb.ok })\n  }\n\n  /**\n   * @param {API.InferInvokeOptions<R, C>} options\n   */\n  invoke({ with: with_, nb, ...options }) {\n    return invoke({\n      ...options,\n      capability: this.create(\n        /** @type {API.InferCreateOptions<R, C>} */\n        ({ with: with_, nb })\n      ),\n    })\n  }\n\n  /**\n   * @param {API.InferDelegationOptions<R, C>} options\n   * @returns {Promise<API.Delegation<[API.InferDelegatedCapability<API.ParsedCapability<A, R, C>>]>>}\n   */\n  async delegate({ nb: input = {}, with: with_, ...options }) {\n    const { descriptor, can } = this\n    const readers = descriptor.nb\n\n    const resource = descriptor.with.read(with_)\n    if (resource.error) {\n      throw Object.assign(\n        new Error(`Invalid 'with' - ${resource.error.message}`),\n        {\n          cause: resource,\n        }\n      )\n    }\n\n    const nb = descriptor.nb.partial().read(input)\n    if (nb.error) {\n      throw Object.assign(new Error(`Invalid 'nb' - ${nb.error.message}`), {\n        cause: nb,\n      })\n    }\n\n    return delegate({\n      capabilities: [createCapability({ can, with: resource.ok, nb: nb.ok })],\n      ...options,\n    })\n  }\n\n  get can() {\n    return this.descriptor.can\n  }\n\n  /**\n   * @param {API.Source} source\n   * @returns {API.MatchResult<API.DirectMatch<API.ParsedCapability<A, R, C>>>}\n   */\n  match(source) {\n    const result = parseCapability(this.descriptor, source)\n    return result.error\n      ? result\n      : { ok: new Match(source, result.ok, this.descriptor) }\n  }\n  toString() {\n    return JSON.stringify({ can: this.descriptor.can })\n  }\n}\n\n/**\n * Normalizes capability by removing empty nb field.\n *\n * @template {API.ParsedCapability} T\n * @param {T} source\n */\n\nconst createCapability = ({ can, with: with_, nb }) =>\n  /** @type {API.InferCapability<T>} */ ({\n    can,\n    with: with_,\n    ...(isEmpty(nb) ? {} : { nb }),\n  })\n\n/**\n * @param {object} object\n * @returns {object is {}}\n */\nconst isEmpty = object => {\n  for (const _ in object) {\n    return false\n  }\n  return true\n}\n\n/**\n * @template {API.Match} M\n * @template {API.Match} W\n * @implements {API.CapabilityParser<M|W>}\n * @extends {Unit<M|W>}\n */\nclass Or extends Unit {\n  /**\n   * @param {API.Matcher<M>} left\n   * @param {API.Matcher<W>} right\n   */\n  constructor(left, right) {\n    super()\n    this.left = left\n    this.right = right\n  }\n\n  /**\n   * @param {API.Source} capability\n   * @return {API.MatchResult<M|W>}\n   */\n  match(capability) {\n    const left = this.left.match(capability)\n    if (left.error) {\n      const right = this.right.match(capability)\n      if (right.error) {\n        return right.error.name === 'MalformedCapability'\n          ? //\n            right\n          : //\n            left\n      } else {\n        return right\n      }\n    } else {\n      return left\n    }\n  }\n\n  toString() {\n    return `${this.left.toString()}|${this.right.toString()}`\n  }\n}\n\n/**\n * @template {API.MatchSelector<API.Match>[]} Selectors\n * @implements {API.CapabilitiesParser<API.InferMembers<Selectors>>}\n * @extends {View<API.Amplify<API.InferMembers<Selectors>>>}\n */\nclass And extends View {\n  /**\n   * @param {Selectors} selectors\n   */\n  constructor(selectors) {\n    super()\n    this.selectors = selectors\n  }\n  /**\n   * @param {API.Source} capability\n   * @returns {API.MatchResult<API.Amplify<API.InferMembers<Selectors>>>}\n   */\n  match(capability) {\n    const group = []\n    for (const selector of this.selectors) {\n      const result = selector.match(capability)\n      if (result.error) {\n        return result\n      } else {\n        group.push(result.ok)\n      }\n    }\n\n    return {\n      ok: new AndMatch(/** @type {API.InferMembers<Selectors>} */ (group)),\n    }\n  }\n\n  /**\n   * @param {API.Source[]} capabilities\n   */\n  select(capabilities) {\n    return selectGroup(this, capabilities)\n  }\n  /**\n   * @template E\n   * @template {API.Match} X\n   * @param {API.MatchSelector<API.Match<E, X>>} other\n   * @returns {API.CapabilitiesParser<[...API.InferMembers<Selectors>, API.Match<E, X>]>}\n   */\n  and(other) {\n    return new And([...this.selectors, other])\n  }\n  toString() {\n    return `[${this.selectors.map(String).join(', ')}]`\n  }\n}\n\n/**\n * @template {API.ParsedCapability} T\n * @template {API.Match} M\n * @implements {API.TheCapabilityParser<API.DerivedMatch<T, M>>}\n * @extends {Unit<API.DerivedMatch<T, M>>}\n */\n\nclass Derive extends Unit {\n  /**\n   * @param {API.MatchSelector<M>} from\n   * @param {API.TheCapabilityParser<API.DirectMatch<T>>} to\n   * @param {API.Derives<T, API.InferDeriveProof<M['value']>>} derives\n   */\n  constructor(from, to, derives) {\n    super()\n    this.from = from\n    this.to = to\n    this.derives = derives\n  }\n\n  /**\n   * @type {typeof this.to['create']}\n   */\n  create(options) {\n    return this.to.create(options)\n  }\n  /**\n   * @type {typeof this.to['invoke']}\n   */\n  invoke(options) {\n    return this.to.invoke(options)\n  }\n  /**\n   * @type {typeof this.to['delegate']}\n   */\n  delegate(options) {\n    return this.to.delegate(options)\n  }\n  get can() {\n    return this.to.can\n  }\n  /**\n   * @param {API.Source} capability\n   * @returns {API.MatchResult<API.DerivedMatch<T, M>>}\n   */\n  match(capability) {\n    const match = this.to.match(capability)\n    if (match.error) {\n      return match\n    } else {\n      return { ok: new DerivedMatch(match.ok, this.from, this.derives) }\n    }\n  }\n  toString() {\n    return this.to.toString()\n  }\n}\n\n/**\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template {API.Caveats} C\n * @implements {API.DirectMatch<API.ParsedCapability<A, R, C>>}\n */\nclass Match {\n  /**\n   * @param {API.Source} source\n   * @param {API.ParsedCapability<A, R, C>} value\n   * @param {Required<Descriptor<A, R, C>>} descriptor\n   */\n  constructor(source, value, descriptor) {\n    this.source = [source]\n    this.value = value\n    this.descriptor = descriptor\n  }\n  get can() {\n    return this.value.can\n  }\n\n  get proofs() {\n    const proofs = [this.source[0].delegation]\n    Object.defineProperties(this, {\n      proofs: { value: proofs },\n    })\n    return proofs\n  }\n\n  /**\n   * @param {API.CanIssue} context\n   * @returns {API.DirectMatch<API.ParsedCapability<A, R, C>>|null}\n   */\n  prune(context) {\n    if (context.canIssue(this.value, this.source[0].delegation.issuer.did())) {\n      return null\n    } else {\n      return this\n    }\n  }\n\n  /**\n   * @param {API.Source[]} capabilities\n   * @returns {API.Select<API.DirectMatch<API.ParsedCapability<A, R, C>>>}\n   */\n  select(capabilities) {\n    const unknown = []\n    const errors = []\n    const matches = []\n    for (const capability of capabilities) {\n      const result = resolveCapability(this.descriptor, this.value, capability)\n      if (result.ok) {\n        const claim = this.descriptor.derives(this.value, result.ok)\n        if (claim.error) {\n          errors.push(\n            new MatchError(\n              [new EscalatedCapability(this.value, result.ok, claim.error)],\n              this\n            )\n          )\n        } else {\n          matches.push(new Match(capability, result.ok, this.descriptor))\n        }\n      } else {\n        switch (result.error.name) {\n          case 'UnknownCapability':\n            unknown.push(result.error.capability)\n            break\n          case 'MalformedCapability':\n          default:\n            errors.push(new MatchError([result.error], this))\n        }\n      }\n    }\n\n    return { matches, unknown, errors }\n  }\n  toString() {\n    const { nb } = this.value\n    return JSON.stringify({\n      can: this.descriptor.can,\n      with: this.value.with,\n      nb: nb && Object.keys(nb).length > 0 ? nb : undefined,\n    })\n  }\n}\n\n/**\n * @template {API.ParsedCapability} T\n * @template {API.Match} M\n * @implements {API.DerivedMatch<T, M>}\n */\n\nclass DerivedMatch {\n  /**\n   * @param {API.DirectMatch<T>} selected\n   * @param {API.MatchSelector<M>} from\n   * @param {API.Derives<T, API.InferDeriveProof<M['value']>>} derives\n   */\n  constructor(selected, from, derives) {\n    this.selected = selected\n    this.from = from\n    this.derives = derives\n  }\n  get can() {\n    return this.value.can\n  }\n  get source() {\n    return this.selected.source\n  }\n  get proofs() {\n    const proofs = []\n    for (const { delegation } of this.selected.source) {\n      proofs.push(delegation)\n    }\n    Object.defineProperties(this, { proofs: { value: proofs } })\n    return proofs\n  }\n  get value() {\n    return this.selected.value\n  }\n\n  /**\n   * @param {API.CanIssue} context\n   */\n  prune(context) {\n    const selected =\n      /** @type {API.DirectMatch<T>|null} */\n      (this.selected.prune(context))\n    return selected ? new DerivedMatch(selected, this.from, this.derives) : null\n  }\n\n  /**\n   * @param {API.Source[]} capabilities\n   */\n  select(capabilities) {\n    const { derives, selected, from } = this\n    const { value } = selected\n\n    const direct = selected.select(capabilities)\n\n    const derived = from.select(capabilities)\n    const matches = []\n    const errors = []\n    for (const match of derived.matches) {\n      // If capability can not be derived it escalates\n      const result = derives(value, match.value)\n      if (result.error) {\n        errors.push(\n          new MatchError(\n            [new EscalatedCapability(value, match.value, result.error)],\n            this\n          )\n        )\n      } else {\n        matches.push(match)\n      }\n    }\n\n    return {\n      unknown: intersection(direct.unknown, derived.unknown),\n      errors: [\n        ...errors,\n        ...direct.errors,\n        ...derived.errors.map(error => new MatchError([error], this)),\n      ],\n      matches: [\n        ...direct.matches.map(match => new DerivedMatch(match, from, derives)),\n        ...matches,\n      ],\n    }\n  }\n\n  toString() {\n    return this.selected.toString()\n  }\n}\n\n/**\n * @template {API.MatchSelector<API.Match>[]} Selectors\n * @implements {API.Amplify<API.InferMembers<Selectors>>}\n */\nclass AndMatch {\n  /**\n   * @param {API.Match[]} matches\n   */\n  constructor(matches) {\n    this.matches = matches\n  }\n  get selectors() {\n    return this.matches\n  }\n  /**\n   * @returns {API.Source[]}\n   */\n  get source() {\n    const source = []\n\n    for (const match of this.matches) {\n      source.push(...match.source)\n    }\n    Object.defineProperties(this, { source: { value: source } })\n    return source\n  }\n\n  /**\n   * @param {API.CanIssue} context\n   */\n  prune(context) {\n    const matches = []\n    for (const match of this.matches) {\n      const pruned = match.prune(context)\n      if (pruned) {\n        matches.push(pruned)\n      }\n    }\n    return matches.length === 0 ? null : new AndMatch(matches)\n  }\n\n  get proofs() {\n    const proofs = []\n\n    for (const { delegation } of this.source) {\n      proofs.push(delegation)\n    }\n\n    Object.defineProperties(this, { proofs: { value: proofs } })\n    return proofs\n  }\n  /**\n   * @type {API.InferValue<API.InferMembers<Selectors>>}\n   */\n  get value() {\n    const value = []\n\n    for (const match of this.matches) {\n      value.push(match.value)\n    }\n    Object.defineProperties(this, { value: { value } })\n    return /** @type {any} */ (value)\n  }\n  /**\n   * @param {API.Source[]} capabilities\n   */\n  select(capabilities) {\n    return selectGroup(this, capabilities)\n  }\n  toString() {\n    return `[${this.matches.map(match => match.toString()).join(', ')}]`\n  }\n}\n\n/**\n * Resolves ability `pattern` of the delegated capability from the ability\n * of the claimed capability. If pattern matches returns claimed ability\n * otherwise returns given `fallback`.\n *\n * @example\n * ```js\n * resolveAbility('*', 'store/add', null) // => 'store/add'\n * resolveAbility('store/*', 'store/add', null) // => 'store/add'\n * resolveAbility('store/add', 'store/add', null) // => 'store/add'\n * resolveAbility('store/', 'store/add', null) // => null\n * resolveAbility('store/a*', 'store/add', null) // => null\n * resolveAbility('store/list', 'store/add', null) // => null\n * ```\n *\n * @template {API.Ability} T\n * @template U\n * @param {string} pattern\n * @param {T} can\n * @param {U} fallback\n * @returns {T|U}\n */\nconst resolveAbility = (pattern, can, fallback) => {\n  switch (pattern) {\n    case can:\n    case '*':\n      return can\n    default:\n      return pattern.endsWith('/*') && can.startsWith(pattern.slice(0, -1))\n        ? can\n        : fallback\n  }\n}\n\n/**\n * Resolves `source` resource of the delegated capability from the resource\n * `uri` of the claimed capability. If `source` is `\"ucan:*\"\"` or matches `uri`\n * then it returns `uri` back otherwise it returns `fallback`.\n *\n * @example\n * ```js\n * resolveResource('ucan:*', 'did:key:zAlice', null) // => 'did:key:zAlice'\n * resolveAbility('ucan:*', 'https://example.com', null) // => 'https://example.com'\n * resolveAbility('did:*', 'did:key:zAlice', null) // => null\n * resolveAbility('did:key:zAlice', 'did:key:zAlice', null) // => did:key:zAlice\n * ```\n * @template {string} T\n * @template U\n * @param {T} uri\n * @param {string} source\n * @param {U} fallback\n * @returns {T|U}\n */\nconst resolveResource = (source, uri, fallback) => {\n  switch (source) {\n    case uri:\n    case 'ucan:*':\n      return uri\n    default:\n      return fallback\n  }\n}\n\n/**\n * Parses capability from the `source` using a provided `parser`.\n *\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template {API.Caveats} C\n * @param {Required<Descriptor<A, R, C>>} descriptor\n * @param {API.Source} source\n * @returns {API.Result<API.ParsedCapability<A, R, C>, API.InvalidCapability>}\n */\nconst parseCapability = (descriptor, source) => {\n  const { delegation } = source\n  const capability = /** @type {API.Capability<A, R, C>} */ (source.capability)\n\n  if (descriptor.can !== capability.can) {\n    return { error: new UnknownCapability(capability) }\n  }\n\n  const uri = descriptor.with.read(capability.with)\n  if (uri.error) {\n    return { error: new MalformedCapability(capability, uri.error) }\n  }\n\n  const nb = descriptor.nb.read(capability.nb || {})\n  if (nb.error) {\n    return { error: new MalformedCapability(capability, nb.error) }\n  }\n\n  return { ok: new CapabilityView(descriptor.can, uri.ok, nb.ok, delegation) }\n}\n\n/**\n * Resolves delegated capability `source` from the `claimed` capability using\n * provided capability `parser`. It is similar to `parseCapability` except\n * `source` here is treated as capability pattern which is matched against the\n * `claimed` capability. This means we resolve `can` and `with` fields from the\n * `claimed` capability and inherit all missing `nb` fields from the claimed\n * capability.\n *\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template {API.Caveats} C\n * @param {Required<Descriptor<A, R, C>>} descriptor\n * @param {API.ParsedCapability<A, R, C>} claimed\n * @param {API.Source} source\n * @returns {API.Result<API.ParsedCapability<A, R, C>, API.InvalidCapability>}\n */\n\nconst resolveCapability = (descriptor, claimed, { capability, delegation }) => {\n  const can = resolveAbility(capability.can, claimed.can, null)\n  if (can == null) {\n    return { error: new UnknownCapability(capability) }\n  }\n\n  const resource = resolveResource(\n    capability.with,\n    claimed.with,\n    capability.with\n  )\n  const uri = descriptor.with.read(resource)\n  if (uri.error) {\n    return { error: new MalformedCapability(capability, uri.error) }\n  }\n\n  const nb = descriptor.nb.read({\n    ...claimed.nb,\n    ...capability.nb,\n  })\n\n  if (nb.error) {\n    return { error: new MalformedCapability(capability, nb.error) }\n  }\n\n  return { ok: new CapabilityView(can, uri.ok, nb.ok, delegation) }\n}\n\n/**\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template C\n */\nclass CapabilityView {\n  /**\n   * @param {A} can\n   * @param {R} with_\n   * @param {C} nb\n   * @param {API.Delegation} delegation\n   */\n  constructor(can, with_, nb, delegation) {\n    this.can = can\n    this.with = with_\n    this.delegation = delegation\n    this.nb = nb\n  }\n}\n\n/**\n * @template {API.Match} M\n * @param {API.Matcher<M>} matcher\n * @param {API.Source[]} capabilities\n * @returns {API.Select<M>}\n */\n\nconst select = (matcher, capabilities) => {\n  const unknown = []\n  const matches = []\n  const errors = []\n  for (const capability of capabilities) {\n    const result = matcher.match(capability)\n    if (result.error) {\n      switch (result.error.name) {\n        case 'UnknownCapability':\n          unknown.push(result.error.capability)\n          break\n        case 'MalformedCapability':\n        default:\n          errors.push(new MatchError([result.error], result.error.capability))\n      }\n    } else {\n      matches.push(result.ok)\n    }\n  }\n\n  return { matches, errors, unknown }\n}\n\n/**\n * @template {API.Selector<API.Match>[]} S\n * @param {{selectors:S}} self\n * @param {API.Source[]} capabilities\n */\n\nconst selectGroup = (self, capabilities) => {\n  let unknown\n  const data = []\n  const errors = []\n  for (const selector of self.selectors) {\n    const selected = selector.select(capabilities)\n    unknown = unknown\n      ? intersection(unknown, selected.unknown)\n      : selected.unknown\n\n    for (const error of selected.errors) {\n      errors.push(new MatchError([error], self))\n    }\n\n    data.push(selected.matches)\n  }\n\n  const matches = combine(data).map(group => new AndMatch(group))\n\n  return {\n    unknown:\n      /* c8 ignore next */\n      unknown || [],\n    errors,\n    matches,\n  }\n}\n\n/**\n * @template {API.ParsedCapability} T\n * @template {API.ParsedCapability} U\n * @param {T} claimed\n * @param {U} delegated\n * @return {API.Result<true, API.Failure>}\n */\nconst defaultDerives = (claimed, delegated) => {\n  if (delegated.with.endsWith('*')) {\n    if (!claimed.with.startsWith(delegated.with.slice(0, -1))) {\n      return Schema.error(\n        `Resource ${claimed.with} does not match delegated ${delegated.with} `\n      )\n    }\n  } else if (delegated.with !== claimed.with) {\n    return Schema.error(\n      `Resource ${claimed.with} is not contained by ${delegated.with}`\n    )\n  }\n\n  /* c8 ignore next 2 */\n  const caveats = delegated.nb || {}\n  const nb = claimed.nb || {}\n  const kv = entries(caveats)\n\n  for (const [name, value] of kv) {\n    if (nb[name] != value) {\n      return Schema.error(`${String(name)}: ${nb[name]} violates ${value}`)\n    }\n  }\n\n  return { ok: true }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7891, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/validator/src/authorization.js"],"sourcesContent":["import * as API from '@ucanto/interface'\n\n/**\n * @template {API.ParsedCapability} C\n * @implements {API.Authorization<C>}\n */\nclass Authorization {\n  /**\n   * @param {API.Match<C>} match\n   * @param {API.Authorization<API.ParsedCapability>[]} proofs\n   */\n  constructor(match, proofs) {\n    this.match = match\n    this.proofs = proofs\n  }\n  get capability() {\n    return this.match.value\n  }\n  get delegation() {\n    return this.match.source[0].delegation\n  }\n  get issuer() {\n    return this.delegation.issuer\n  }\n  get audience() {\n    return this.delegation.audience\n  }\n}\n\n/**\n * @template {API.ParsedCapability} C\n * @param {API.Match<C>} match\n * @param {API.Authorization<API.ParsedCapability>[]} proofs\n * @returns {API.Authorization<C>}\n */\nexport const create = (match, proofs = []) => new Authorization(match, proofs)\n\n/**\n *\n * @param {API.Authorization} authorization\n * @returns {Iterable<API.UCANLink>}\n */\nexport const iterate = function* ({ delegation, proofs }) {\n  yield delegation.cid\n  for (const proof of proofs) {\n    yield* iterate(proof)\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA;;;CAGC,GACD,MAAM;IACJ;;;GAGC,GACD,YAAY,KAAK,EAAE,MAAM,CAAE;QACzB,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,MAAM,GAAG;IAChB;IACA,IAAI,aAAa;QACf,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK;IACzB;IACA,IAAI,aAAa;QACf,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU;IACxC;IACA,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM;IAC/B;IACA,IAAI,WAAW;QACb,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ;IACjC;AACF;AAQO,MAAM,SAAS,CAAC,OAAO,SAAS,EAAE,GAAK,IAAI,cAAc,OAAO;AAOhE,MAAM,UAAU,UAAW,EAAE,UAAU,EAAE,MAAM,EAAE;IACtD,MAAM,WAAW,GAAG;IACpB,KAAK,MAAM,SAAS,OAAQ;QAC1B,OAAO,QAAQ;IACjB;AACF","ignoreList":[0]}},
    {"offset": {"line": 7934, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/validator/src/lib.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { isDelegation, UCAN, ok, fail } from '@ucanto/core'\nimport { capability } from './capability.js'\nimport * as Schema from '@ucanto/core/schema'\nimport * as Authorization from './authorization.js'\nimport {\n  UnavailableProof,\n  Unauthorized,\n  PrincipalAlignmentError,\n  Expired,\n  Revoked,\n  NotValidBefore,\n  InvalidSignature,\n  SessionEscalation,\n  Failure,\n  MalformedCapability,\n  DIDKeyResolutionError,\n  li,\n} from './error.js'\n\nexport { capability } from './capability.js'\nexport * from '@ucanto/core/schema'\n\nexport {\n  Schema,\n  Authorization,\n  Failure,\n  fail,\n  ok,\n  Revoked,\n  UnavailableProof,\n  Unauthorized,\n  MalformedCapability,\n  DIDKeyResolutionError as DIDResolutionError,\n}\n\n/**\n * @param {UCAN.Link} proof\n * @returns {{error:API.UnavailableProof}}\n */\nconst unavailable = proof => ({ error: new UnavailableProof(proof) })\n\n/**\n *\n * @param {UCAN.DID} did\n * @returns {{error:API.DIDKeyResolutionError}}\n */\nconst failDIDKeyResolution = did => ({ error: new DIDKeyResolutionError(did) })\n\n/**\n * @param {Required<API.ClaimOptions>} config\n * @param {API.Match<unknown, API.Match>} match\n */\n\nconst resolveMatch = async (match, config) => {\n  const promises = []\n  const includes = new Set()\n  for (const source of match.source) {\n    const id = source.delegation.cid.toString()\n    if (!includes.has(id)) {\n      promises.push(await resolveSources(source, config))\n    }\n  }\n  const groups = await Promise.all(promises)\n  const sources = []\n  const errors = []\n  for (const group of groups) {\n    sources.push(...group.sources)\n    errors.push(...group.errors)\n  }\n\n  return { sources, errors }\n}\n\n/**\n * Takes `proofs` from the delegation which may contain `Delegation` or a link\n * to one and attempts to resolve links by side loading them. Returns set of\n * resolved `Delegation`s and errors for the proofs that could not be resolved.\n *\n * @param {API.Proof[]} proofs\n * @param {Required<API.ProofResolver>} config\n */\nconst resolveProofs = async (proofs, config) => {\n  /** @type {API.Delegation[]} */\n  const delegations = []\n  /** @type {API.UnavailableProof[]} */\n  const errors = []\n  const promises = []\n  for (const proof of proofs) {\n    // If it is a delegation we can just add it to the resolved set.\n    if (isDelegation(proof)) {\n      delegations.push(proof)\n    }\n    // otherwise we attempt to resolve the link asynchronously. To avoid doing\n    // sequential requests we create promise for each link and then wait for\n    // all of them at the end.\n    else {\n      promises.push(\n        new Promise(async resolve => {\n          // config.resolve is not supposed to throw, but we catch it just in\n          // case it does and consider proof resolution failed.\n          try {\n            const result = await config.resolve(proof)\n            if (result.error) {\n              errors.push(result.error)\n            } else {\n              delegations.push(result.ok)\n            }\n          } catch (error) {\n            errors.push(\n              new UnavailableProof(proof, /** @type {Error} */(error))\n            )\n          }\n\n          // we don't care about the result, we just need to signal that we are\n          // done with this promise.\n          resolve(null)\n        })\n      )\n    }\n  }\n\n  // Wait for all the promises to resolve. At this point we have collected all\n  // the resolved delegations and errors.\n  await Promise.all(promises)\n  return { delegations, errors }\n}\n\n/**\n * Takes a delegation source and attempts to resolve all the linked proofs.\n *\n * @param {API.Source} from\n * @param {Required<API.ClaimOptions>} config\n * @return {Promise<{sources:API.Source[], errors:ProofError[]}>}\n */\nconst resolveSources = async ({ delegation }, config) => {\n  const errors = []\n  const sources = []\n  const proofs = []\n  // First we attempt to resolve all the linked proofs.\n  const { delegations, errors: failedProofs } = await resolveProofs(\n    delegation.proofs,\n    config\n  )\n\n  // All the proofs that failed to resolve are saved as proof errors.\n  for (const error of failedProofs) {\n    errors.push(new ProofError(error.link, error))\n  }\n\n  // All the proofs that resolved are checked for principal alignment. Ones that\n  // do not align are saved as proof errors.\n  for (const proof of delegations) {\n    // If proof does not delegate to a matching audience save an proof error.\n    if (delegation.issuer.did() !== proof.audience.did()) {\n      errors.push(\n        new ProofError(\n          proof.cid,\n          new PrincipalAlignmentError(delegation.issuer, proof)\n        )\n      )\n    } else {\n      proofs.push(proof)\n    }\n  }\n  // In the second pass we attempt to proofs that were resolved and are aligned.\n  for (const proof of proofs) {\n    // If proof is not valid (expired, not active yet or has incorrect\n    // signature) save a corresponding proof error.\n    const validation = await validate(proof, proofs, config)\n    if (validation.error) {\n      errors.push(new ProofError(proof.cid, validation.error))\n    } else {\n      // otherwise create source objects for it's capabilities, so we could\n      // track which proof in which capability the are from.\n      for (const capability of proof.capabilities) {\n        sources.push(\n          /** @type {API.Source} */({\n            capability,\n            delegation: proof,\n          })\n        )\n      }\n    }\n  }\n\n  return { sources, errors }\n}\n\n/**\n * @param {API.ParsedCapability} capability\n * @param {API.DID} issuer\n */\nconst isSelfIssued = (capability, issuer) => capability.with === issuer\n\n/**\n * Finds a valid path in a proof chain of the given `invocation` by exploring\n * every possible option. On success an `Authorization` object is returned that\n * illustrates the valid path. If no valid path is found `Unauthorized` error\n * is returned detailing all explored paths and where they proved to fail.\n *\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template {R} URI\n * @template {API.Caveats} C\n * @param {API.Invocation<API.Capability<A, URI, C>>} invocation\n * @param {API.ValidationOptions<API.ParsedCapability<A, R, C>>} options\n * @returns {Promise<API.Result<API.Authorization<API.ParsedCapability<A, R, C>>, API.Unauthorized>>}\n */\nexport const access = async (invocation, { capability, ...config }) =>\n  claim(capability, [invocation], config)\n\n/**\n * Attempts to find a valid proof chain for the claimed `capability` given set\n * of `proofs`. On success an `Authorization` object with detailed proof chain\n * is returned and on failure `Unauthorized` error is returned with details on\n * paths explored and why they have failed.\n *\n * @template {API.Ability} A\n * @template {API.URI} R\n * @template {API.Caveats} C\n * @param {API.CapabilityParser<API.Match<API.ParsedCapability<A, R, C>>>} capability\n * @param {API.Proof[]} proofs\n * @param {API.ClaimOptions} config\n * @returns {Promise<API.Result<API.Authorization<API.ParsedCapability<A, R, C>>, API.Unauthorized>>}\n */\nexport const claim = async (\n  capability,\n  proofs,\n  {\n    authority,\n    principal,\n    validateAuthorization,\n    resolveDIDKey = failDIDKeyResolution,\n    canIssue = isSelfIssued,\n    resolve = unavailable,\n    proofs: localProofs = [],\n  }\n) => {\n  const config = {\n    canIssue,\n    resolve,\n    principal,\n    capability,\n    authority,\n    validateAuthorization,\n    resolveDIDKey,\n    proofs: localProofs,\n  }\n\n  const invalidProofs = []\n\n  /** @type {API.Source[]} */\n  const sources = []\n\n  const { delegations, errors } = await resolveProofs(proofs, config)\n  invalidProofs.push(...errors)\n\n  for (const proof of delegations) {\n    // Validate each proof if valid add ech capability to the list of sources.\n    // otherwise collect the error.\n    const validation = await validate(proof, delegations, config)\n    if (validation.ok) {\n      for (const capability of validation.ok.capabilities.values()) {\n        sources.push(\n          /** @type {API.Source} */({\n            capability,\n            delegation: validation.ok,\n          })\n        )\n      }\n    } else {\n      invalidProofs.push(validation.error)\n    }\n  }\n  // look for the matching capability\n  const selection = capability.select(sources)\n\n  const { errors: delegationErrors, unknown: unknownCapabilities } = selection\n  const failedProofs = []\n  for (const matched of selection.matches) {\n    const selector = matched.prune(config)\n    if (selector == null) {\n      const authorization = Authorization.create(matched, [])\n      const result = await validateAuthorization(authorization)\n      if (result.error) {\n        invalidProofs.push(result.error)\n      } else {\n        return { ok: authorization }\n      }\n    } else {\n      const result = await authorize(selector, config)\n      if (result.error) {\n        failedProofs.push(result.error)\n      } else {\n        const authorization = Authorization.create(matched, [result.ok])\n        const approval = await validateAuthorization(authorization)\n        if (approval.error) {\n          invalidProofs.push(approval.error)\n        } else {\n          return { ok: authorization }\n        }\n      }\n    }\n  }\n\n  return {\n    error: new Unauthorized({\n      capability,\n      delegationErrors,\n      unknownCapabilities,\n      invalidProofs,\n      failedProofs,\n    }),\n  }\n}\n\n/**\n * Verifies whether any of the delegated proofs grant give capability.\n *\n * @template {API.Match} Match\n * @param {Match} match\n * @param {Required<API.ClaimOptions>} config\n * @returns {Promise<API.Result<API.Authorization<API.ParsedCapability>, API.InvalidClaim>>}\n */\n\nexport const authorize = async (match, config) => {\n  // load proofs from all delegations\n  const { sources, errors: invalidProofs } = await resolveMatch(match, config)\n\n  const selection = match.select(sources)\n  const { errors: delegationErrors, unknown: unknownCapabilities } = selection\n\n  const failedProofs = []\n  for (const matched of selection.matches) {\n    const selector = matched.prune(config)\n    if (selector == null) {\n      return {\n        ok: Authorization.create(\n          // @ts-expect-error - it may not be a parsed capability but rather a\n          // group of capabilities but we can deal with that in the future.\n          matched,\n          []\n        ),\n      }\n    } else {\n      const result = await authorize(selector, config)\n      if (result.error) {\n        failedProofs.push(result.error)\n      } else {\n        return {\n          ok: Authorization.create(\n            // @ts-expect-error - it may not be a parsed capability but rather a\n            // group of capabilities but we can deal with that in the future.\n            matched,\n            [result.ok]\n          ),\n        }\n      }\n    }\n  }\n\n  return {\n    error: new InvalidClaim({\n      match,\n      delegationErrors,\n      unknownCapabilities,\n      invalidProofs,\n      failedProofs,\n    }),\n  }\n}\n\nclass ProofError extends Failure {\n  /**\n   * @param {API.UCANLink} proof\n   * @param {API.Failure} cause\n   */\n  constructor(proof, cause) {\n    super()\n    this.name = 'ProofError'\n    this.proof = proof\n    this.cause = cause\n  }\n  describe() {\n    return [\n      `Capability can not be derived from prf:${this.proof} because:`,\n      li(this.cause.message),\n    ].join(`\\n`)\n  }\n}\n\n/**\n * @implements {API.InvalidClaim}\n */\nclass InvalidClaim extends Failure {\n  /**\n   * @param {{\n   * match: API.Match\n   * delegationErrors: API.DelegationError[]\n   * unknownCapabilities: API.Capability[]\n   * invalidProofs: ProofError[]\n   * failedProofs: API.InvalidClaim[]\n   * }} info\n   */\n  constructor(info) {\n    super()\n    this.info = info\n    this.name = /** @type {const} */ ('InvalidClaim')\n  }\n  get issuer() {\n    return this.delegation.issuer\n  }\n  get delegation() {\n    return this.info.match.source[0].delegation\n  }\n  describe() {\n    const errors = [\n      ...this.info.failedProofs.map(error => li(error.message)),\n      ...this.info.delegationErrors.map(error => li(error.message)),\n      ...this.info.invalidProofs.map(error => li(error.message)),\n    ]\n\n    const unknown = this.info.unknownCapabilities.map(c =>\n      li(JSON.stringify(c))\n    )\n\n    return [\n      `Capability ${this.info.match} is not authorized because:`,\n      li(`Capability can not be (self) issued by '${this.issuer.did()}'`),\n      ...(errors.length > 0 ? errors : [li(`Delegated capability not found`)]),\n      ...(unknown.length > 0\n        ? [li(`Encountered unknown capabilities\\n${unknown.join('\\n')}`)]\n        : []),\n    ].join('\\n')\n  }\n}\n\n/**\n * Validate a delegation to check it is within the time bound and that it is\n * authorized by the issuer.\n *\n * @template {API.Delegation} T\n * @param {T} delegation\n * @param {API.Delegation[]} proofs\n * @param {Required<API.ClaimOptions>} config\n * @returns {Promise<API.Result<T, API.InvalidProof|API.SessionEscalation|API.DIDKeyResolutionError>>}\n */\nconst validate = async (delegation, proofs, config) => {\n  if (UCAN.isExpired(delegation.data)) {\n    return {\n      error: new Expired(\n        /** @type {API.Delegation & {expiration: number}} */(delegation)\n      ),\n    }\n  }\n\n  if (UCAN.isTooEarly(delegation.data)) {\n    return {\n      error: new NotValidBefore(\n        /** @type {API.Delegation & {notBefore: number}} */(delegation)\n      ),\n    }\n  }\n\n  return await verifyAuthorization(delegation, proofs, config)\n}\n\n/**\n * Verifies that delegation has been authorized by the issuer. If issued by the\n * did:key principal checks that the signature is valid. If issued by the root\n * authority checks that the signature is valid. If issued by the principal\n * identified by other DID method attempts to resolve a valid `ucan/attest`\n * attestation from the authority, if attestation is not found falls back to\n * resolving did:key for the issuer and verifying its signature.\n *\n * @template {API.Delegation} T\n * @param {T} delegation\n * @param {API.Delegation[]} proofs\n * @param {Required<API.ClaimOptions>} config\n * @returns {Promise<API.Result<T, API.InvalidSignature|API.SessionEscalation|API.DIDKeyResolutionError>>}\n */\nconst verifyAuthorization = async (delegation, proofs, config) => {\n  const issuer = delegation.issuer.did()\n  // If the issuer is a did:key we just verify a signature\n  if (issuer.startsWith('did:key:')) {\n    return verifySignature(delegation, config.principal.parse(issuer))\n  }\n\n  // If the issuer is the root authority we use authority itself to verify\n  else if (issuer === config.authority.did()) {\n    return verifySignature(delegation, config.authority)\n  } else {\n    // If issuer is not a did:key principal nor configured authority, we\n    // attempt to resolve embedded authorization session from the authority.\n    const session = await verifySession(delegation, proofs, config)\n    // If we have valid session we consider authorization valid\n    if (session.ok) {\n      return { ok: delegation }\n    } else if (session.error.failedProofs.length > 0) {\n      return {\n        error: new SessionEscalation({ delegation, cause: session.error }),\n      }\n    }\n    // Otherwise we try to resolve did:key from the DID instead\n    // and use that to verify the signature\n    else {\n      const result = await config.resolveDIDKey(issuer)\n      if (result.error) {\n        return result\n      }\n\n      const verifiers = result.ok\n      /** @type {(API.InvalidSignature | API.DIDKeyResolutionError)[]} */\n      const verificationErrResults = []\n      for (const verifier of verifiers) {\n        const verificationResult = await verifySignature(\n          delegation,\n          config.principal.parse(verifier).withDID(issuer)\n        )\n        if (verificationResult.ok) {\n          return verificationResult\n        }\n        if (verificationResult.error) {\n          verificationErrResults.push(verificationResult.error)\n        }\n      }\n      \n      // If no verifiers were found, there is no way to verify the signature\n      if (verificationErrResults.length === 0) {\n        return { error: new DIDKeyResolutionError(issuer) }\n      }\n\n      const combinedError = verificationErrResults[0]\n      const combinedMessage = verificationErrResults\n        .map(err => err.message)\n        .join('\\n  ')\n      \n      // @ts-expect-error - both error types have describe method, override it to return the concatenated message\n      combinedError.describe = () => combinedMessage\n\n      return { error: combinedError }\n    }\n  }\n}\n\n/**\n * @template {API.Delegation} T\n * @param {T} delegation\n * @param {API.Verifier} verifier\n * @returns {Promise<API.Result<T, API.InvalidSignature|API.DIDKeyResolutionError>>}\n */\nconst verifySignature = async (delegation, verifier) => {\n  const valid = await UCAN.verifySignature(delegation.data, verifier)\n  return valid\n    ? { ok: delegation }\n    : { error: new InvalidSignature(delegation, verifier) }\n}\n\n/**\n * Attempts to find an authorization session - an `ucan/attest` capability\n * delegation where `with` matches `config.authority` and `nb.proof`\n * matches given delegation.\n * @see https://github.com/storacha/specs/blob/feat/auth+account/w3-session.md#authorization-session\n *\n * @param {API.Delegation} delegation\n * @param {API.Delegation[]} proofs\n * @param {Required<API.ClaimOptions>} config\n */\nconst verifySession = async (delegation, proofs, config) => {\n  // Recognize attestations from all authorized principals, not just authority\n  const withSchemas = config.proofs\n    .filter(\n      p =>\n        p.capabilities[0].can === 'ucan/attest' &&\n        p.capabilities[0].with === config.authority.did()\n    )\n    .map(p => Schema.literal(p.audience.did()))\n\n  const withSchema = withSchemas.length\n    ? Schema.union([Schema.literal(config.authority.did()), ...withSchemas])\n    : Schema.literal(config.authority.did())\n\n  // Create a schema that will match an authorization for this exact delegation\n  const attestation = capability({\n    with: withSchema,\n    can: 'ucan/attest',\n    nb: Schema.struct({\n      proof: Schema.link(delegation.cid),\n    }),\n  })\n\n  return await claim(\n    attestation,\n    proofs\n      // We only consider attestations otherwise we will end up doing an\n      // exponential scan if there are other proofs that require attestations.\n      .filter(isAttestation)\n      // Also filter any proofs that _are_ the delegation we're verifying so\n      // we don't recurse indefinitely.\n      .filter(p => p.cid.toString() !== delegation.cid.toString()),\n    config\n  )\n}\n\n/**\n * Checks if the delegation is an attestation.\n *\n * @param {API.Delegation} proof\n */\nconst isAttestation = proof => proof.capabilities[0]?.can === 'ucan/attest'\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8413, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/errors.js"],"sourcesContent":["export {};\n//# sourceMappingURL=errors.js.map"],"names":[],"mappings":";;CACA,kCAAkC","ignoreList":[0]}},
    {"offset": {"line": 8420, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/types.js"],"sourcesContent":["// export other types\nexport * from '@ucanto/interface';\nexport * from '@storacha/capabilities/types';\nexport * from './errors.js';\nexport * from '@storacha/did-mailto';\nexport var AppName;\n(function (AppName) {\n    AppName[\"BskyBackups\"] = \"bsky-backups\";\n    AppName[\"TGMiniapp\"] = \"tg-miniapp\";\n    AppName[\"Console\"] = \"console\";\n})(AppName || (AppName = {}));\n//# sourceMappingURL=types.js.map"],"names":[],"mappings":"AAAA,qBAAqB;;;;;AACrB;AACA;AACA;AACA;;;;;AACO,IAAI;AACX,CAAC,SAAU,OAAO;IACd,OAAO,CAAC,cAAc,GAAG;IACzB,OAAO,CAAC,YAAY,GAAG;IACvB,OAAO,CAAC,UAAU,GAAG;AACzB,CAAC,EAAE,WAAW,CAAC,UAAU,CAAC,CAAC,IAC3B,iCAAiC","ignoreList":[0]}},
    {"offset": {"line": 8443, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/encoding.js"],"sourcesContent":["/**\n * Encoding utilities\n *\n * It is recommended that you import directly with:\n * ```js\n * import * as Encoding from '@storacha/access/encoding'\n *\n * // or\n *\n * import { encodeDelegations } from '@storacha/access/encoding'\n * ```\n *\n * @module\n */\nimport { CarBufferReader } from '@ipld/car/buffer-reader';\nimport * as CarBufferWriter from '@ipld/car/buffer-writer';\nimport { Delegation } from '@ucanto/core/delegation';\nimport * as u8 from 'uint8arrays';\n// eslint-disable-next-line no-unused-vars\nimport * as Types from '@ucanto/interface';\n/**\n * Encode delegations as bytes\n *\n * @param {Types.Delegation[]} delegations\n */\nexport function delegationsToBytes(delegations) {\n    if (!Array.isArray(delegations) || delegations.length === 0) {\n        throw new Error('Delegations required to be an non empty array.');\n    }\n    const roots = delegations.map((d) => /** @type {CarBufferWriter.CID} */ (d.root.cid));\n    const cids = new Set();\n    /** @type {CarBufferWriter.Block[]} */\n    const blocks = [];\n    let byteLength = 0;\n    for (const delegation of delegations) {\n        for (const block of delegation.export()) {\n            const cid = block.cid.toV1().toString();\n            if (!cids.has(cid)) {\n                byteLength += CarBufferWriter.blockLength(\n                /** @type {CarBufferWriter.Block} */ (block));\n                blocks.push(/** @type {CarBufferWriter.Block} */ (block));\n                cids.add(cid);\n            }\n        }\n    }\n    const headerLength = CarBufferWriter.estimateHeaderLength(roots.length);\n    const writer = CarBufferWriter.createWriter(new ArrayBuffer(headerLength + byteLength), { roots });\n    for (const block of blocks) {\n        writer.write(block);\n    }\n    return writer.close();\n}\n/**\n * Decode bytes into Delegations\n *\n * @template {Types.Capabilities} [T=Types.Capabilities]\n * @param {import('./types.js').BytesDelegation<T>} bytes\n */\nexport function bytesToDelegations(bytes) {\n    if (!(bytes instanceof Uint8Array) || bytes.length === 0) {\n        throw new TypeError('Input should be a non-empty Uint8Array.');\n    }\n    const reader = CarBufferReader.fromBytes(bytes);\n    const roots = reader.getRoots();\n    /** @type {Types.Delegation<T>[]} */\n    const delegations = [];\n    for (const root of roots) {\n        const rootBlock = reader.get(root);\n        if (rootBlock) {\n            const blocks = new Map();\n            for (const block of reader.blocks()) {\n                if (block.cid.toString() !== root.toString())\n                    blocks.set(block.cid.toString(), block);\n            }\n            // @ts-ignore\n            delegations.push(new Delegation(rootBlock, blocks));\n        }\n        else {\n            throw new Error('Failed to find root from raw delegation.');\n        }\n    }\n    return delegations;\n}\n/**\n * @param {Types.Delegation[]} delegations\n * @param {import('uint8arrays/to-string').SupportedEncodings} encoding\n */\nexport function delegationsToString(delegations, encoding = 'base64url') {\n    const bytes = delegationsToBytes(delegations);\n    return u8.toString(bytes, encoding);\n}\n/**\n * Encode one {@link Types.Delegation Delegation} into a string\n *\n * @param {Types.Delegation<Types.Capabilities>} delegation\n * @param {import('uint8arrays/to-string').SupportedEncodings} [encoding]\n */\nexport function delegationToString(delegation, encoding) {\n    return delegationsToString([delegation], encoding);\n}\n/**\n * Decode string into {@link Types.Delegation Delegation}\n *\n * @template {Types.Capabilities} [T=Types.Capabilities]\n * @param {import('./types.js').EncodedDelegation<T>} raw\n * @param {import('uint8arrays/to-string').SupportedEncodings} [encoding]\n */\nexport function stringToDelegations(raw, encoding = 'base64url') {\n    const bytes = u8.fromString(raw, encoding);\n    return bytesToDelegations(bytes);\n}\n/**\n * Decode string into a {@link Types.Delegation Delegation}\n *\n * @template {Types.Capabilities} [T=Types.Capabilities]\n * @param {import('./types.js').EncodedDelegation<T>} raw\n * @param {import('uint8arrays/to-string').SupportedEncodings} [encoding]\n */\nexport function stringToDelegation(raw, encoding) {\n    const delegations = stringToDelegations(raw, encoding);\n    return /** @type {Types.Delegation<T>} */ (delegations[0]);\n}\n/**\n * @param {number} [expiration]\n */\nexport function expirationToDate(expiration) {\n    const expires = expiration === Infinity || !expiration\n        ? undefined\n        : new Date(expiration * 1000);\n    return expires;\n}\n//# sourceMappingURL=encoding.js.map"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;CAaC;;;;;;;;;;;;;;;;AACD;AACA;AACA;AACA;AAAA;AAAA;AACA,0CAA0C;AAC1C;;;;;;AAMO,SAAS,mBAAmB,WAAW;IAC1C,IAAI,CAAC,MAAM,OAAO,CAAC,gBAAgB,YAAY,MAAM,KAAK,GAAG;QACzD,MAAM,IAAI,MAAM;IACpB;IACA,MAAM,QAAQ,YAAY,GAAG,CAAC,CAAC,IAA0C,EAAE,IAAI,CAAC,GAAG;IACnF,MAAM,OAAO,IAAI;IACjB,oCAAoC,GACpC,MAAM,SAAS,EAAE;IACjB,IAAI,aAAa;IACjB,KAAK,MAAM,cAAc,YAAa;QAClC,KAAK,MAAM,SAAS,WAAW,MAAM,GAAI;YACrC,MAAM,MAAM,MAAM,GAAG,CAAC,IAAI,GAAG,QAAQ;YACrC,IAAI,CAAC,KAAK,GAAG,CAAC,MAAM;gBAChB,cAAc,0KAA2B,CACH;gBACtC,OAAO,IAAI,CAAuC;gBAClD,KAAK,GAAG,CAAC;YACb;QACJ;IACJ;IACA,MAAM,eAAe,mLAAoC,CAAC,MAAM,MAAM;IACtE,MAAM,SAAS,2KAA4B,CAAC,IAAI,YAAY,eAAe,aAAa;QAAE;IAAM;IAChG,KAAK,MAAM,SAAS,OAAQ;QACxB,OAAO,KAAK,CAAC;IACjB;IACA,OAAO,OAAO,KAAK;AACvB;AAOO,SAAS,mBAAmB,KAAK;IACpC,IAAI,CAAC,CAAC,iBAAiB,UAAU,KAAK,MAAM,MAAM,KAAK,GAAG;QACtD,MAAM,IAAI,UAAU;IACxB;IACA,MAAM,SAAS,yLAAe,CAAC,SAAS,CAAC;IACzC,MAAM,QAAQ,OAAO,QAAQ;IAC7B,kCAAkC,GAClC,MAAM,cAAc,EAAE;IACtB,KAAK,MAAM,QAAQ,MAAO;QACtB,MAAM,YAAY,OAAO,GAAG,CAAC;QAC7B,IAAI,WAAW;YACX,MAAM,SAAS,IAAI;YACnB,KAAK,MAAM,SAAS,OAAO,MAAM,GAAI;gBACjC,IAAI,MAAM,GAAG,CAAC,QAAQ,OAAO,KAAK,QAAQ,IACtC,OAAO,GAAG,CAAC,MAAM,GAAG,CAAC,QAAQ,IAAI;YACzC;YACA,aAAa;YACb,YAAY,IAAI,CAAC,IAAI,sKAAU,CAAC,WAAW;QAC/C,OACK;YACD,MAAM,IAAI,MAAM;QACpB;IACJ;IACA,OAAO;AACX;AAKO,SAAS,oBAAoB,WAAW,EAAE,WAAW,WAAW;IACnE,MAAM,QAAQ,mBAAmB;IACjC,OAAO,iNAAW,CAAC,OAAO;AAC9B;AAOO,SAAS,mBAAmB,UAAU,EAAE,QAAQ;IACnD,OAAO,oBAAoB;QAAC;KAAW,EAAE;AAC7C;AAQO,SAAS,oBAAoB,GAAG,EAAE,WAAW,WAAW;IAC3D,MAAM,QAAQ,qNAAa,CAAC,KAAK;IACjC,OAAO,mBAAmB;AAC9B;AAQO,SAAS,mBAAmB,GAAG,EAAE,QAAQ;IAC5C,MAAM,cAAc,oBAAoB,KAAK;IAC7C,OAA2C,WAAW,CAAC,EAAE;AAC7D;AAIO,SAAS,iBAAiB,UAAU;IACvC,MAAM,UAAU,eAAe,YAAY,CAAC,aACtC,YACA,IAAI,KAAK,aAAa;IAC5B,OAAO;AACX,EACA,oCAAoC","ignoreList":[0]}},
    {"offset": {"line": 8559, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/access.js"],"sourcesContent":["import * as Access from '@storacha/capabilities/access';\nimport * as API from './types.js';\nimport { Failure, fail, DID } from '@ucanto/core';\nimport { Agent, importAuthorization } from './agent.js';\nimport { bytesToDelegations } from './encoding.js';\n/**\n * Takes array of delegations and propagates them to their respective audiences\n * through a given space (or the current space if none is provided).\n *\n * Returns error result if agent has no current space and no space was provided.\n * Also returns error result if invocation fails.\n *\n * @param {Agent} agent - Agent connected to the w3up service.\n * @param {object} input\n * @param {API.Delegation[]} input.delegations - Delegations to propagate.\n * @param {API.SpaceDID} [input.space] - Space to propagate through.\n * @param {API.Delegation[]} [input.proofs] - Optional set of proofs to be\n * included in the invocation.\n */\nexport const delegate = async (agent, { delegations, proofs = [], space = agent.currentSpace() }) => {\n    if (!space) {\n        return fail('Space must be specified');\n    }\n    const entries = Object.values(delegations).map((proof) => [\n        proof.cid.toString(),\n        proof.cid,\n    ]);\n    const { out } = await agent.invokeAndExecute(Access.delegate, {\n        with: space,\n        nb: {\n            delegations: Object.fromEntries(entries),\n        },\n        // must be embedded here because it's referenced by cid in .nb.delegations\n        proofs: [...delegations, ...proofs],\n    });\n    return out;\n};\n/**\n * Requests specified `access` level from specified `account`. It invokes\n * `access/authorize` capability, if invocation succeeds it will return a\n * `PendingAccessRequest` object that can be used to poll for the requested\n * delegation through `access/claim` capability.\n *\n * @param {API.Agent} agent\n * @param {object} input\n * @param {API.AccountDID} input.account - Account from which access is requested.\n * @param {API.ProviderDID} [input.provider] - Provider that will receive the invocation.\n * @param {API.DID} [input.audience] - Principal requesting an access.\n * @param {API.Access} [input.access] - Access been requested.\n * @param {API.AppName} [input.appName] - App name for the access request\n * @param {API.SSORequestParams} [input.sso] - SSO authentication request (all fields required if provided)\n * @returns {Promise<API.Result<PendingAccessRequest, API.AccessAuthorizeFailure|API.InvocationError>>}\n */\nexport const request = async (agent, { account, provider = /** @type {API.ProviderDID} */ (agent.connection.id.did()), audience: audience = agent.did(), access = spaceAccess, appName, sso, }) => {\n    // Build facts array with appName and SSO object\n    const facts = [];\n    if (appName) {\n        facts.push({ appName });\n    }\n    if (sso) {\n        if (typeof sso !== 'object') {\n            return fail('SSO parameter must be an object');\n        }\n        if (!sso.authProvider || typeof sso.authProvider !== 'string') {\n            return fail('SSO authProvider must be a non-empty string');\n        }\n        if (!sso.externalUserId || typeof sso.externalUserId !== 'string') {\n            return fail('SSO externalUserId must be a non-empty string');\n        }\n        if (!sso.externalSessionToken ||\n            typeof sso.externalSessionToken !== 'string') {\n            return fail('SSO externalSessionToken must be a non-empty string');\n        }\n        facts.push({\n            sso: {\n                authProvider: sso.authProvider,\n                externalUserId: sso.externalUserId,\n                externalSessionToken: sso.externalSessionToken,\n            },\n        });\n    }\n    // Request access from the account.\n    const { out: result } = await agent.invokeAndExecute(Access.authorize, {\n        audience: DID.parse(provider),\n        with: audience,\n        nb: {\n            iss: account,\n            // New ucan spec moved to recap style layout for capabilities and new\n            // `access/request` will use similar format as opposed to legacy one,\n            // in the meantime we translate new format to legacy format here.\n            att: [...toCapabilities(access)],\n        },\n        facts,\n    });\n    return result.error\n        ? result\n        : {\n            ok: new PendingAccessRequest({\n                ...result.ok,\n                agent,\n                audience,\n                provider,\n            }),\n        };\n};\n/**\n * Claims access that has been delegated to the given audience, which by\n * default is the agent's DID.\n *\n * @param {API.Agent} agent\n * @param {object} input\n * @param {API.DID} [input.audience] - Principal requesting an access.\n * @param {API.ProviderDID} [input.provider] - Provider handling the invocation.\n * @returns {Promise<API.Result<GrantedAccess, API.AccessClaimFailure|API.InvocationError>>}\n */\nexport const claim = async (agent, { provider = /** @type {API.ProviderDID} */ (agent.connection.id.did()), audience = agent.did(), } = {}) => {\n    const { out: result } = await agent.invokeAndExecute(Access.claim, {\n        audience: DID.parse(provider),\n        with: audience,\n    });\n    if (result.error) {\n        return result;\n    }\n    else {\n        const delegations = Object.values(result.ok.delegations);\n        const proofs = /** @type {API.Tuple<API.Delegation>} */ (delegations.flatMap((proof) => bytesToDelegations(proof)));\n        return { ok: new GrantedAccess({ agent, proofs }) };\n    }\n};\n/**\n * Creates a new `PendingAccessRequest` object that can be used to poll for the\n * requested delegation through `access/claim` capability.\n *\n * @param {API.Agent} agent\n * @param {object} input\n * @param {API.Link} input.request - Link to the `access/authorize` invocation.\n * @param {API.UTCUnixTimestamp} input.expiration - Seconds in UTC.\n * @param {API.DID} [input.audience] - Principal requesting an access.\n * @param {API.ProviderDID} [input.provider] - Provider handling request.\n */\nexport const createPendingAccessRequest = (agent, { request, expiration, provider = /** @type {API.ProviderDID} */ (agent.connection.id.did()), audience: audience = agent.did(), }) => new PendingAccessRequest({ agent, request, expiration, provider, audience });\n/**\n * Represents a pending access request. It can be used to poll for the requested\n * delegation.\n */\nclass PendingAccessRequest {\n    /**\n     * @typedef {object} PendingAccessRequestModel\n     * @property {API.Agent} agent - Agent handling interaction.\n     * @property {API.DID} audience - Principal requesting an access.\n     * @property {API.ProviderDID} provider - Provider handling request.\n     * @property {API.UTCUnixTimestamp} expiration - Seconds in UTC.\n     * @property {API.Link} request - Link to the `access/authorize` invocation.\n     *\n     * @param {PendingAccessRequestModel} model\n     */\n    constructor(model) {\n        this.model = model;\n    }\n    get agent() {\n        return this.model.agent;\n    }\n    get audience() {\n        return this.model.audience;\n    }\n    get expiration() {\n        return new Date(this.model.expiration * 1000);\n    }\n    get request() {\n        return this.model.request;\n    }\n    get provider() {\n        return this.model.provider;\n    }\n    /**\n     * Low level method and most likely you want to use `.claim` instead. This method will poll\n     * fetch delegations **just once** and will return proofs matching to this request. Please note\n     * that there may not be any matches in which case result will be `{ ok: [] }`.\n     *\n     * If you do want to continuously poll until request is approved or expired, you should use\n     * `.claim` method instead.\n     *\n     * @returns {Promise<API.Result<API.Delegation[], API.InvocationError|API.AccessClaimFailure|RequestExpired>>}\n     */\n    async poll() {\n        const { agent, audience, provider, expiration } = this.model;\n        const timeout = expiration * 1000 - Date.now();\n        if (timeout <= 0) {\n            return { error: new RequestExpired(this.model) };\n        }\n        else {\n            const result = await claim(agent, { audience, provider });\n            return result.error\n                ? result\n                : {\n                    ok: result.ok.proofs.filter((proof) => isRequestedAccess(proof, this.model)),\n                };\n        }\n    }\n    /**\n     * Continuously polls delegations until this request is approved or expired. Returns\n     * a `GrantedAccess` object (view over the delegations) that can be used in the\n     * invocations or can be saved in the agent (store) using `.save()` method.\n     *\n     * @param {object} options\n     * @param {number} [options.interval]\n     * @param {AbortSignal} [options.signal]\n     * @returns {Promise<API.Result<GrantedAccess, Error>>}\n     */\n    async claim({ signal, interval = 250 } = {}) {\n        while (signal?.aborted !== true) {\n            const result = await this.poll();\n            // If polling failed, return the error.\n            if (result.error) {\n                return result;\n            }\n            // If we got some matching proofs, return them.\n            else if (result.ok.length > 0) {\n                return {\n                    ok: new GrantedAccess({\n                        agent: this.agent,\n                        proofs: /** @type {API.Tuple<API.Delegation>} */ (result.ok),\n                    }),\n                };\n            }\n            await new Promise((resolve) => setTimeout(resolve, interval));\n        }\n        return {\n            error: Object.assign(new Error('Aborted'), { reason: signal.reason }),\n        };\n    }\n}\n/**\n * Error returned when pending access request expires.\n */\nclass RequestExpired extends Failure {\n    /**\n     * @param {PendingAccessRequestModel} model\n     */\n    constructor(model) {\n        super();\n        this.model = model;\n    }\n    get name() {\n        return 'RequestExpired';\n    }\n    get request() {\n        return this.model.request;\n    }\n    get expiredAt() {\n        return new Date(this.model.expiration * 1000);\n    }\n    describe() {\n        return `Access request expired at ${this.expiredAt} for ${this.request} request.`;\n    }\n}\n/**\n * View over the UCAN Delegations that grant access to a specific principal.\n */\nexport class GrantedAccess {\n    /**\n     * @typedef {object} GrantedAccessModel\n     * @property {API.Agent} agent - Agent that processed the request.\n     * @property {API.Tuple<API.Delegation>} proofs - Delegations that grant access.\n     *\n     * @param {GrantedAccessModel} model\n     */\n    constructor(model) {\n        this.model = model;\n    }\n    get proofs() {\n        return this.model.proofs;\n    }\n    /**\n     * Saves access into the agents proofs store so that it can be retained\n     * between sessions.\n     *\n     * @param {object} input\n     * @param {API.Agent} [input.agent]\n     */\n    save({ agent = this.model.agent } = {}) {\n        return importAuthorization(agent, this);\n    }\n}\n/**\n * Checks if the given delegation is caused by the passed `request` for access.\n *\n * @param {API.Delegation} delegation\n * @param {object} selector\n * @param {API.Link} selector.request\n * @returns\n */\nconst isRequestedAccess = (delegation, { request }) => \n// `access/confirm` handler adds facts to the delegation issued by the account\n// so that principal requesting access can identify correct delegation when\n// access is granted.\ndelegation.facts.some((fact) => `${fact['access/request']}` === `${request}`);\n/**\n * Maps access object that uses UCAN 0.10 capabilities format as opposed\n * to legacy UCAN 0.9 format used by w3up  which predates new format.\n *\n * @param {API.Access} access\n * @returns {{ can: API.Ability }[]}\n */\nexport const toCapabilities = (access) => {\n    const abilities = [];\n    const entries = /** @type {[API.Ability, API.Unit][]} */ (Object.entries(access));\n    for (const [can, details] of entries) {\n        if (details) {\n            abilities.push({ can });\n        }\n    }\n    return abilities;\n};\n/**\n * Set of capabilities required by the agent to manage a space.\n */\nexport const spaceAccess = {\n    'assert/*': {},\n    'space/*': {},\n    'blob/*': {},\n    'index/*': {},\n    'store/*': {},\n    'upload/*': {},\n    'access/*': {},\n    'filecoin/*': {},\n    'usage/*': {},\n};\n/**\n * Set of capabilities required for by the agent to manage an account.\n */\nexport const accountAccess = {\n    '*': {},\n};\n//# sourceMappingURL=access.js.map"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8863, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/provider.js"],"sourcesContent":["import * as API from './types.js';\nimport * as Provider from '@storacha/capabilities/provider';\nexport const { Provider: ProviderDID, AccountDID } = Provider;\n/**\n * Provisions specified `space` with the specified `account`. It is expected\n * that delegation from the account authorizing agent is either stored in the\n * agent proofs or provided explicitly.\n *\n * @template {Record<string, any>} [S=API.Service]\n * @param {API.Agent<S>} agent\n * @param {object} input\n * @param {API.AccountDID} input.account - Account provisioning the space.\n * @param {API.SpaceDID} input.consumer - Space been provisioned.\n * @param {API.ProviderDID} [input.provider] - Provider been provisioned.\n * @param {API.Delegation[]} [input.proofs] - Delegation from the account\n * authorizing agent to call `provider/add` capability.\n */\nexport const add = async (agent, { account, consumer, provider = /** @type {API.ProviderDID} */ (agent.connection.id.did()), proofs, }) => {\n    if (!ProviderDID.is(provider)) {\n        throw new Error(`Unable to determine provider from agent.connection.id did ${provider}. expected a did:web:`);\n    }\n    const { out } = await agent.invokeAndExecute(Provider.add, {\n        with: account,\n        nb: {\n            provider,\n            consumer,\n        },\n        proofs,\n    });\n    return out;\n};\n//# sourceMappingURL=provider.js.map"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAAA;;;AACO,MAAM,EAAE,UAAU,WAAW,EAAE,UAAU,EAAE,GAAG;AAe9C,MAAM,MAAM,OAAO,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,WAA2C,MAAM,UAAU,CAAC,EAAE,CAAC,GAAG,EAAG,EAAE,MAAM,EAAG;IAClI,IAAI,CAAC,YAAY,EAAE,CAAC,WAAW;QAC3B,MAAM,IAAI,MAAM,CAAC,0DAA0D,EAAE,SAAS,qBAAqB,CAAC;IAChH;IACA,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,MAAM,gBAAgB,CAAC,kKAAS,GAAG,EAAE;QACvD,MAAM;QACN,IAAI;YACA;YACA;QACJ;QACA;IACJ;IACA,OAAO;AACX,GACA,oCAAoC","ignoreList":[0]}},
    {"offset": {"line": 8895, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/space-access.js"],"sourcesContent":["import * as API from './types.js';\n/**\n * Known valid provider/algorithm combinations\n *\n * @type {Record<string, string[]>}\n */\nconst VALID_COMBINATIONS = {\n    'google-kms': ['RSA_DECRYPT_OAEP_3072_SHA256'],\n    // Add more providers and algorithms here as needed\n};\n/**\n * Space access utilities and validation\n */\nexport class SpaceAccess {\n    /**\n     * Creates and validates a space access configuration\n     *\n     * @template {API.SpaceAccessType} T\n     * @param {T} [access] - The access configuration to validate\n     * @returns {T}\n     * @throws {Error} When access configuration is invalid\n     */\n    static from(access) {\n        if (!access || access.type === 'public') {\n            return /** @type {T} */ ({ type: 'public' });\n        }\n        if (access.type === 'private') {\n            if (!access.encryption) {\n                throw new Error('Private access type requires encryption configuration');\n            }\n            const { provider, algorithm } = access.encryption;\n            if (!VALID_COMBINATIONS[provider]) {\n                throw new Error(`unknown encryption provider: ${provider}`);\n            }\n            if (!VALID_COMBINATIONS[provider].includes(algorithm)) {\n                throw new Error(`unknown encryption algorithm: ${algorithm} for provider: ${provider}`);\n            }\n            return /** @type {T} */ (access);\n        }\n        throw new Error(`unknown access type: ${ /** @type {any} */(access).type}`);\n    }\n    /**\n     * Creates a public space access configuration\n     *\n     * @returns {API.PublicAccess}\n     */\n    static public() {\n        return { type: 'public' };\n    }\n    /**\n     * Creates a private space access configuration with encryption provider\n     *\n     * @param {string} [provider] - The encryption provider. Defaults to `google-kms`.\n     * @param {string} [algorithm] - The encryption algorithm. Defaults to `RSA_DECRYPT_OAEP_3072_SHA256`.\n     * @returns {API.PrivateAccess<API.EncryptionProvider>}\n     * @throws {Error} When provider/algorithm combination is invalid\n     */\n    static private(provider = 'google-kms', algorithm = 'RSA_DECRYPT_OAEP_3072_SHA256') {\n        if (!VALID_COMBINATIONS[provider]) {\n            throw new Error(`unknown encryption provider: ${provider}`);\n        }\n        if (!VALID_COMBINATIONS[provider].includes(algorithm)) {\n            throw new Error(`unknown encryption algorithm: ${algorithm} for provider: ${provider}`);\n        }\n        return {\n            type: 'private',\n            encryption: { provider, algorithm },\n        };\n    }\n}\n//# sourceMappingURL=space-access.js.map"],"names":[],"mappings":";;;;AAAA;;AACA;;;;CAIC,GACD,MAAM,qBAAqB;IACvB,cAAc;QAAC;KAA+B;AAElD;AAIO,MAAM;IACT;;;;;;;KAOC,GACD,OAAO,KAAK,MAAM,EAAE;QAChB,IAAI,CAAC,UAAU,OAAO,IAAI,KAAK,UAAU;YACrC,OAAyB;gBAAE,MAAM;YAAS;QAC9C;QACA,IAAI,OAAO,IAAI,KAAK,WAAW;YAC3B,IAAI,CAAC,OAAO,UAAU,EAAE;gBACpB,MAAM,IAAI,MAAM;YACpB;YACA,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAO,UAAU;YACjD,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE;gBAC/B,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,UAAU;YAC9D;YACA,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,QAAQ,CAAC,YAAY;gBACnD,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,UAAU,eAAe,EAAE,UAAU;YAC1F;YACA,OAAyB;QAC7B;QACA,MAAM,IAAI,MAAM,CAAC,qBAAqB,EAAG,gBAAgB,GAAE,AAAC,OAAQ,IAAI,EAAE;IAC9E;IACA;;;;KAIC,GACD,OAAO,SAAS;QACZ,OAAO;YAAE,MAAM;QAAS;IAC5B;IACA;;;;;;;KAOC,GACD,OAAO,QAAQ,WAAW,YAAY,EAAE,YAAY,8BAA8B,EAAE;QAChF,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE;YAC/B,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,UAAU;QAC9D;QACA,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,QAAQ,CAAC,YAAY;YACnD,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,UAAU,eAAe,EAAE,UAAU;QAC1F;QACA,OAAO;YACH,MAAM;YACN,YAAY;gBAAE;gBAAU;YAAU;QACtC;IACJ;AACJ,EACA,wCAAwC","ignoreList":[0]}},
    {"offset": {"line": 8975, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/space.js"],"sourcesContent":["import * as ED25519 from '@ucanto/principal/ed25519';\nimport { delegate, Schema, UCAN, error, fail, DID } from '@ucanto/core';\nimport * as BIP39 from '@scure/bip39';\nimport { wordlist } from '@scure/bip39/wordlists/english';\nimport * as API from './types.js';\nimport * as Access from './access.js';\nimport * as Provider from './provider.js';\nimport { SpaceAccess } from './space-access.js';\n/**\n * Data model for the (owned) space.\n *\n * @typedef {{\n *  signer: ED25519.EdSigner;\n *   name: string;\n *   access?: API.SpaceAccessType;\n *   agent?: API.Agent<S>;\n * }} Model\n * @template {Record<string, any>} [S=API.Service]\n */\n/**\n * Generates a new space.\n *\n * @template {Record<string, any>} [S=API.Service]\n * @param {object} options\n * @param {string} options.name - The name of the space.\n * @param {API.SpaceAccessType} [options.access] - The access type for the space. Defaults to { type: 'public' }.\n * @param {API.Agent<S>} [options.agent]\n */\nexport const generate = async ({ name, access, agent }) => {\n    const { signer } = await ED25519.generate();\n    const normalizedAccess = SpaceAccess.from(access);\n    return new OwnedSpace({ signer, name, access: normalizedAccess, agent });\n};\n/**\n * Recovers space from the saved mnemonic.\n *\n * @param {string} mnemonic\n * @param {object} options\n * @param {string} options.name - Name to give to the recovered space.\n * @param {API.SpaceAccessType} [options.access] - The access type for the space. Defaults to { type: 'public' }.\n * @param {API.Agent} [options.agent]\n */\nexport const fromMnemonic = async (mnemonic, { name, access, agent }) => {\n    // TODO: Improve recovery UX by auto-detecting access type from existing space metadata\n    // or storing access type with space mnemonic. Should default to public if mnemonic\n    // doesn't contain access type information.\n    const secret = BIP39.mnemonicToEntropy(mnemonic, wordlist);\n    const signer = await ED25519.derive(secret);\n    const normalizedAccess = SpaceAccess.from(access);\n    return new OwnedSpace({ signer, name, access: normalizedAccess, agent });\n};\n/**\n * Turns (owned) space into a BIP39 mnemonic that later can be used to recover\n * the space using `fromMnemonic` function.\n *\n * @param {object} space\n * @param {ED25519.EdSigner} space.signer\n */\nexport const toMnemonic = ({ signer }) => {\n    /** @type {Uint8Array} */\n    // @ts-expect-error - Field is defined but not in the interface\n    const secret = signer.secret;\n    return BIP39.entropyToMnemonic(secret, wordlist);\n};\n/**\n * Creates a (UCAN) delegation that gives full access to the space to the\n * specified `account`. At the moment we only allow `did:mailto` principal\n * to be used as an `account`.\n *\n * @template {Record<string, any>} [S=API.Service]\n * @param {Model<S>} space\n * @param {API.AccountDID} account\n */\nexport const createRecovery = (space, account) => createAuthorization(space, {\n    audience: DID.parse(account),\n    access: Access.accountAccess,\n    expiration: Infinity,\n});\n// Default authorization session is valid for 1 year\nexport const SESSION_LIFETIME = 60 * 60 * 24 * 365;\n/**\n * Creates (UCAN) delegation that gives specified `agent` an access to\n * specified ability (passed as `access.can` field) on this space.\n * Optionally, you can specify `access.expiration` field to set the\n * expiration time for the authorization. By default the authorization\n * is valid for 1 year and gives access to all capabilities on the space\n * that are needed to use the space.\n *\n * @template {Record<string, any>} [S=API.Service]\n * @param {Model<S>} space\n * @param {object} options\n * @param {API.Principal} options.audience\n * @param {API.Access} [options.access]\n * @param {API.UTCUnixTimestamp} [options.expiration]\n */\nexport const createAuthorization = async ({ signer, name, access }, { audience, access: spaceAccess = Access.spaceAccess, expiration = UCAN.now() + SESSION_LIFETIME, }) => {\n    const normalizedAccess = SpaceAccess.from(access);\n    const facts = [{ space: { name, access: normalizedAccess } }];\n    return await delegate({\n        issuer: signer,\n        audience: audience,\n        capabilities: toCapabilities({\n            [signer.did()]: spaceAccess,\n        }),\n        ...(expiration ? { expiration } : {}),\n        facts,\n    });\n};\n/**\n * @param {Record<API.Resource, API.Access>} allow\n * @returns {API.Capabilities}\n */\nconst toCapabilities = (allow) => {\n    const capabilities = [];\n    for (const [subject, access] of Object.entries(allow)) {\n        const entries = /** @type {[API.Ability, API.Unit][]} */ (Object.entries(access));\n        for (const [can, details] of entries) {\n            if (details) {\n                capabilities.push({ can, with: subject });\n            }\n        }\n    }\n    return /** @type {API.Capabilities} */ (capabilities);\n};\n/**\n * Represents an owned space, meaning a space for which we have a private key\n * and consequently have full authority over.\n *\n * @template {Record<string, any>} [S=API.Service]\n */\nexport class OwnedSpace {\n    /**\n     * @param {Model<S>} model\n     */\n    constructor(model) {\n        this.model = model;\n    }\n    get signer() {\n        return this.model.signer;\n    }\n    get name() {\n        return this.model.name;\n    }\n    get access() {\n        return SpaceAccess.from(this.model.access);\n    }\n    did() {\n        return this.signer.did();\n    }\n    /**\n     * Creates a renamed version of this space.\n     *\n     * @param {string} name\n     */\n    withName(name) {\n        return new OwnedSpace({\n            signer: this.signer,\n            name,\n            access: this.access,\n        });\n    }\n    /**\n     * Saves account in the agent store so it can be accessed across sessions.\n     *\n     * @param {object} input\n     * @param {API.Agent<S>} [input.agent]\n     * @returns {Promise<API.Result<API.Unit, Error>>}\n     */\n    async save({ agent = this.model.agent } = {}) {\n        if (!agent) {\n            return fail('Please provide an agent to save the space into');\n        }\n        const proof = await createAuthorization(this, { audience: agent });\n        await agent.importSpaceFromDelegation(proof);\n        await agent.setCurrentSpace(this.did());\n        return { ok: {} };\n    }\n    /**\n     * @param {Authorization} authorization\n     * @param {object} options\n     * @param {API.Agent<S>} [options.agent]\n     */\n    provision({ proofs }, { agent = this.model.agent } = {}) {\n        if (!agent) {\n            return fail('Please provide an agent to save the space into');\n        }\n        return provision(this, { proofs, agent });\n    }\n    /**\n     * Creates a (UCAN) delegation that gives full access to the space to the\n     * specified `account`. At the moment we only allow `did:mailto` principal\n     * to be used as an `account`.\n     *\n     * @param {API.AccountDID} account\n     */\n    async createRecovery(account) {\n        return createRecovery(this, account);\n    }\n    /**\n     * Creates (UCAN) delegation that gives specified `agent` an access to\n     * specified ability (passed as `access.can` field) on the this space.\n     * Optionally, you can specify `access.expiration` field to set the\n     *\n     * @param {API.Principal} principal\n     * @param {object} [input]\n     * @param {API.Access} [input.access]\n     * @param {API.UCAN.UTCUnixTimestamp} [input.expiration]\n     */\n    createAuthorization(principal, input) {\n        return createAuthorization(this, { ...input, audience: principal });\n    }\n    /**\n     * Derives BIP39 mnemonic that can be used to recover the space.\n     *\n     * @returns {string}\n     */\n    toMnemonic() {\n        return toMnemonic(this);\n    }\n}\nconst SpaceDID = Schema.did({ method: 'key' });\n/**\n * Creates a (shared) space from given delegation.\n *\n * @param {API.Delegation} delegation\n */\nexport const fromDelegation = (delegation) => {\n    const result = SpaceDID.read(delegation.capabilities[0].with);\n    if (result.error) {\n        throw Object.assign(new Error(`Invalid delegation, expected capabilities[0].with to be DID, ${result.error}`), {\n            cause: result.error,\n        });\n    }\n    /** @type {{name?:string, access?:API.SpaceAccessType}} */\n    const meta = delegation.facts[0]?.space ?? {};\n    // Ensure access defaults to public for backwards compatibility\n    meta.access = SpaceAccess.from(meta.access);\n    return new SharedSpace({ id: result.ok, delegation, meta });\n};\n/**\n * @typedef {object} Authorization\n * @property {API.Delegation[]} proofs\n *\n * @typedef {object} Space\n * @property {() => API.SpaceDID} did\n */\n/**\n * @template {Record<string, any>} [S=API.Service]\n * @param {Space} space\n * @param {object} options\n * @param {API.Delegation[]} options.proofs\n * @param {API.Agent<S>} options.agent\n */\nexport const provision = async (space, { proofs, agent }) => {\n    const [capability] = proofs[0].capabilities;\n    const { ok: account, error: reason } = Provider.AccountDID.read(capability.with);\n    if (reason) {\n        return error(reason);\n    }\n    return await Provider.add(agent, {\n        consumer: space.did(),\n        account,\n        proofs,\n    });\n};\n/**\n * Represents a shared space, meaning a space for which we have a delegation\n * and consequently have limited authority over.\n */\nexport class SharedSpace {\n    /**\n     * @typedef {object} SharedSpaceModel\n     * @property {API.SpaceDID} id\n     * @property {API.Delegation} delegation\n     * @property {{name?:string, access?:API.SpaceAccessType}} meta\n     * @property {API.Agent} [agent]\n     *\n     * @param {SharedSpaceModel} model\n     */\n    constructor(model) {\n        this.model = model;\n    }\n    get delegation() {\n        return this.model.delegation;\n    }\n    get meta() {\n        return this.model.meta;\n    }\n    get name() {\n        return this.meta.name ?? '';\n    }\n    get access() {\n        return SpaceAccess.from(this.meta.access);\n    }\n    did() {\n        return this.model.id;\n    }\n    /**\n     * @param {string} name\n     */\n    withName(name) {\n        return new SharedSpace({\n            ...this.model,\n            meta: { ...this.meta, name, access: this.access },\n        });\n    }\n}\n//# sourceMappingURL=space.js.map"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9262, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/delegations.js"],"sourcesContent":["import * as ucanto from '@ucanto/core';\nimport * as API from './types.js';\nimport { canDelegateAbility } from '@storacha/capabilities/utils';\n/**\n *\n * @param {API.Delegation} delegation\n */\nexport function isExpired(delegation) {\n    if (delegation.expiration === undefined ||\n        delegation.expiration <= Math.floor(Date.now() / 1000)) {\n        return true;\n    }\n    return false;\n}\n/**\n *\n * @param {API.Delegation} delegation\n */\nexport function isTooEarly(delegation) {\n    if (!delegation.notBefore) {\n        return false;\n    }\n    return delegation.notBefore > Math.floor(Date.now() / 1000);\n}\n/**\n *\n * @param {API.Delegation} delegation\n * @param {object} [opts]\n * @param {API.Principal} [opts.checkAudience]\n * @param {boolean} [opts.checkIsExpired]\n * @param {boolean} [opts.checkIsTooEarly]\n */\nexport function validate(delegation, opts) {\n    const { checkAudience, checkIsExpired = true, checkIsTooEarly = true, } = opts ?? {};\n    if (checkAudience && delegation.audience.did() !== checkAudience.did()) {\n        throw new Error(`Delegation audience ${delegation.audience.did()} does not match required DID ${checkAudience.did()}`);\n    }\n    if (checkIsExpired && isExpired(delegation)) {\n        throw new Error(`Delegation expired.`);\n    }\n    if (checkIsTooEarly && isTooEarly(delegation)) {\n        throw new Error(`Delegation is not active yet (too early).`);\n    }\n}\n/**\n * Returns true if the delegation includes capability been queried.\n *\n * @param {API.Delegation} delegation\n * @param {API.CapabilityQuery} capability\n */\nexport function canDelegateCapability(delegation, capability) {\n    const allowsCapabilities = ucanto.Delegation.allows(delegation);\n    for (const [uri, abilities] of Object.entries(allowsCapabilities)) {\n        if (matchResource(/** @type {API.Resource} */ (uri), capability.with)) {\n            const cans = /** @type {API.Ability[]} */ (Object.keys(abilities));\n            for (const can of cans) {\n                if (canDelegateAbility(can, capability.can)) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\n/**\n * Returns true if given `resource` matches the resource query per UCAN\n * specification.\n *\n * @param {API.Resource} resource\n * @param {API.ResourceQuery} query\n */\nexport const matchResource = (resource, query) => {\n    if (query === 'ucan:*') {\n        return true;\n    }\n    else if (typeof query === 'string') {\n        return resource === query;\n    }\n    else {\n        return query.test(resource);\n    }\n};\n//# sourceMappingURL=delegations.js.map"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AACA;AACA;;;;AAKO,SAAS,UAAU,UAAU;IAChC,IAAI,WAAW,UAAU,KAAK,aAC1B,WAAW,UAAU,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK,OAAO;QACxD,OAAO;IACX;IACA,OAAO;AACX;AAKO,SAAS,WAAW,UAAU;IACjC,IAAI,CAAC,WAAW,SAAS,EAAE;QACvB,OAAO;IACX;IACA,OAAO,WAAW,SAAS,GAAG,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;AAC1D;AASO,SAAS,SAAS,UAAU,EAAE,IAAI;IACrC,MAAM,EAAE,aAAa,EAAE,iBAAiB,IAAI,EAAE,kBAAkB,IAAI,EAAG,GAAG,QAAQ,CAAC;IACnF,IAAI,iBAAiB,WAAW,QAAQ,CAAC,GAAG,OAAO,cAAc,GAAG,IAAI;QACpE,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,WAAW,QAAQ,CAAC,GAAG,GAAG,6BAA6B,EAAE,cAAc,GAAG,IAAI;IACzH;IACA,IAAI,kBAAkB,UAAU,aAAa;QACzC,MAAM,IAAI,MAAM,CAAC,mBAAmB,CAAC;IACzC;IACA,IAAI,mBAAmB,WAAW,aAAa;QAC3C,MAAM,IAAI,MAAM,CAAC,yCAAyC,CAAC;IAC/D;AACJ;AAOO,SAAS,sBAAsB,UAAU,EAAE,UAAU;IACxD,MAAM,qBAAqB,4MAAiB,CAAC,MAAM,CAAC;IACpD,KAAK,MAAM,CAAC,KAAK,UAAU,IAAI,OAAO,OAAO,CAAC,oBAAqB;QAC/D,IAAI,cAA2C,KAAM,WAAW,IAAI,GAAG;YACnE,MAAM,OAAqC,OAAO,IAAI,CAAC;YACvD,KAAK,MAAM,OAAO,KAAM;gBACpB,IAAI,IAAA,oLAAkB,EAAC,KAAK,WAAW,GAAG,GAAG;oBACzC,OAAO;gBACX;YACJ;QACJ;IACJ;IACA,OAAO;AACX;AAQO,MAAM,gBAAgB,CAAC,UAAU;IACpC,IAAI,UAAU,UAAU;QACpB,OAAO;IACX,OACK,IAAI,OAAO,UAAU,UAAU;QAChC,OAAO,aAAa;IACxB,OACK;QACD,OAAO,MAAM,IAAI,CAAC;IACtB;AACJ,GACA,uCAAuC","ignoreList":[0]}},
    {"offset": {"line": 9332, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/utils/buffers.js"],"sourcesContent":["/**\n * Convert a Uint8Array to an ArrayBuffer, taking into account\n * that we may be looking at a \"data view\".\n * thanks, https://stackoverflow.com/a/54646864\n *\n * If we aren't looking at a data view, simply returns the underlying ArrayBuffer\n * directly.\n *\n * @param {Uint8Array} array\n * @returns ArrayBuffer\n */\nexport function uint8ArrayToArrayBuffer(array) {\n    if (array.byteOffset === 0 && array.byteLength === array.buffer.byteLength) {\n        return array.buffer;\n    }\n    else {\n        return array.buffer.slice(array.byteOffset, array.byteLength + array.byteOffset);\n    }\n}\n//# sourceMappingURL=buffers.js.map"],"names":[],"mappings":"AAAA;;;;;;;;;;CAUC;;;;AACM,SAAS,wBAAwB,KAAK;IACzC,IAAI,MAAM,UAAU,KAAK,KAAK,MAAM,UAAU,KAAK,MAAM,MAAM,CAAC,UAAU,EAAE;QACxE,OAAO,MAAM,MAAM;IACvB,OACK;QACD,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC,MAAM,UAAU,EAAE,MAAM,UAAU,GAAG,MAAM,UAAU;IACnF;AACJ,EACA,mCAAmC","ignoreList":[0]}},
    {"offset": {"line": 9357, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/agent-data.js"],"sourcesContent":["import { Signer } from '@ucanto/principal';\nimport { Signer as EdSigner } from '@ucanto/principal/ed25519';\nimport { importDAG } from '@ucanto/core/delegation';\nimport * as Ucanto from '@ucanto/interface';\nimport { CID } from 'multiformats';\nimport { UCAN } from '@storacha/capabilities';\nimport { isExpired } from './delegations.js';\nimport { uint8ArrayToArrayBuffer } from './utils/buffers.js';\n/** @typedef {import('./types.js').AgentDataModel} AgentDataModel */\n/** @implements {AgentDataModel} */\nexport class AgentData {\n    /** @type {(data: import('./types.js').AgentDataExport) => Promise<void> | void} */\n    #save;\n    /**\n     * @param {import('./types.js').AgentDataModel} data\n     * @param {import('./types.js').AgentDataOptions} [options]\n     */\n    constructor(data, options = {}) {\n        this.meta = data.meta;\n        this.principal = data.principal;\n        this.spaces = data.spaces;\n        this.delegations = data.delegations;\n        this.currentSpace = data.currentSpace;\n        this.#save = (data) => options.store ? options.store.save(data) : undefined;\n    }\n    /**\n     * Create a new AgentData instance from the passed initialization data.\n     *\n     * @param {Partial<import('./types.js').AgentDataModel>} [init]\n     * @param {import('./types.js').AgentDataOptions} [options]\n     */\n    static async create(init = {}, options = {}) {\n        const agentData = new AgentData({\n            meta: { name: 'agent', type: 'device', ...init.meta },\n            principal: init.principal ?? (await EdSigner.generate()),\n            spaces: init.spaces ?? new Map(),\n            delegations: init.delegations ?? new Map(),\n            currentSpace: init.currentSpace,\n        }, options);\n        if (options.store) {\n            await options.store.save(agentData.export());\n        }\n        return agentData;\n    }\n    /**\n     * Instantiate AgentData from previously exported data.\n     *\n     * @param {import('./types.js').AgentDataExport} raw\n     * @param {import('./types.js').AgentDataOptions} [options]\n     */\n    static fromExport(raw, options) {\n        /** @type {import('./types.js').AgentDataModel['delegations']} */\n        const dels = new Map();\n        for (const [key, value] of raw.delegations) {\n            dels.set(key, {\n                delegation: importDAG(value.delegation.map((d) => ({\n                    cid: CID.parse(d.cid).toV1(),\n                    bytes: d.bytes instanceof Uint8Array ? d.bytes : new Uint8Array(d.bytes),\n                }))),\n                meta: value.meta,\n            });\n        }\n        return new AgentData({\n            meta: raw.meta,\n            // @ts-expect-error for some reason TS thinks this is a EdSigner\n            principal: Signer.from(raw.principal),\n            currentSpace: raw.currentSpace,\n            spaces: raw.spaces,\n            delegations: dels,\n        }, options);\n    }\n    /**\n     * Export data in a format safe to pass to `structuredClone()`.\n     */\n    export() {\n        /** @type {import('./types.js').AgentDataExport} */\n        const raw = {\n            meta: this.meta,\n            principal: this.principal.toArchive(),\n            currentSpace: this.currentSpace,\n            spaces: this.spaces,\n            delegations: new Map(),\n        };\n        for (const [key, value] of this.delegations) {\n            raw.delegations.set(key, {\n                meta: value.meta,\n                delegation: [...value.delegation.export()].map((b) => ({\n                    cid: b.cid.toString(),\n                    bytes: uint8ArrayToArrayBuffer(b.bytes),\n                })),\n            });\n        }\n        return raw;\n    }\n    /**\n     * @param {import('@ucanto/interface').DID} did\n     * @param {import('./types.js').SpaceMeta} meta\n     * @param {import('@ucanto/interface').Delegation} [proof]\n     */\n    async addSpace(did, meta, proof) {\n        this.spaces.set(did, meta);\n        await (proof ? this.addDelegation(proof) : this.#save(this.export()));\n    }\n    /**\n     * @deprecated\n     * @param {import('@ucanto/interface').DID<'key'>} did\n     */\n    async setCurrentSpace(did) {\n        this.currentSpace = did;\n        await this.#save(this.export());\n    }\n    /**\n     * @param {import('@ucanto/interface').Delegation} delegation\n     * @param {import('./types.js').DelegationMeta} [meta]\n     */\n    async addDelegation(delegation, meta) {\n        this.delegations.set(delegation.cid.toString(), {\n            delegation,\n            meta: meta ?? {},\n        });\n        await this.#save(this.export());\n    }\n    /**\n     * @param {import('@ucanto/interface').UCANLink} cid\n     */\n    async removeDelegation(cid) {\n        this.delegations.delete(cid.toString());\n        await this.#save(this.export());\n    }\n}\n/**\n * Is the given capability a session attestation?\n *\n * @param {Ucanto.Capability} cap\n * @returns {boolean}\n */\nconst isSessionCapability = (cap) => cap.can === UCAN.attest.can;\n/**\n * Is the given delegation a session proof?\n *\n * @param {Ucanto.Delegation} delegation\n * @returns {delegation is Ucanto.Delegation<[import('./types.js').UCANAttest]>}\n */\nexport const isSessionProof = (delegation) => delegation.capabilities.some((cap) => isSessionCapability(cap));\n/**\n * @typedef {string} SessionProofAuthorizationCid - the nb.proof CID of the ucan/attest in the session proof\n * @typedef {Ucanto.DID} SessionProofIssuer - issuer of ucan/attest session proof\n * @typedef {Record<SessionProofAuthorizationCid, Record<SessionProofIssuer, [Ucanto.Delegation, ...Ucanto.Delegation[]]>>} SessionProofIndexedByAuthorizationAndIssuer\n */\n/**\n * Get a map from CIDs to the session proofs that reference them\n *\n * @param {AgentData} data\n * @returns {SessionProofIndexedByAuthorizationAndIssuer}\n */\nexport function getSessionProofs(data) {\n    /** @type {SessionProofIndexedByAuthorizationAndIssuer} */\n    const proofs = {};\n    for (const { delegation } of data.delegations.values()) {\n        if (isSessionProof(delegation)) {\n            const cap = delegation.capabilities[0];\n            if (cap && !isExpired(delegation)) {\n                const proof = cap.nb.proof;\n                if (proof) {\n                    const proofCid = proof.toString();\n                    const issuerDid = delegation.issuer.did();\n                    proofs[proofCid] = proofs[proofCid] ?? {};\n                    proofs[proofCid][issuerDid] = proofs[proofCid][issuerDid] ?? [];\n                    proofs[proofCid][issuerDid].push(delegation);\n                }\n            }\n        }\n    }\n    return proofs;\n}\n//# sourceMappingURL=agent-data.js.map"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;AAGO,MAAM;IACT,iFAAiF,GACjF,CAAA,IAAK,CAAC;IACN;;;KAGC,GACD,YAAY,IAAI,EAAE,UAAU,CAAC,CAAC,CAAE;QAC5B,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QACrB,IAAI,CAAC,SAAS,GAAG,KAAK,SAAS;QAC/B,IAAI,CAAC,MAAM,GAAG,KAAK,MAAM;QACzB,IAAI,CAAC,WAAW,GAAG,KAAK,WAAW;QACnC,IAAI,CAAC,YAAY,GAAG,KAAK,YAAY;QACrC,IAAI,CAAC,CAAA,IAAK,GAAG,CAAC,OAAS,QAAQ,KAAK,GAAG,QAAQ,KAAK,CAAC,IAAI,CAAC,QAAQ;IACtE;IACA;;;;;KAKC,GACD,aAAa,OAAO,OAAO,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,EAAE;QACzC,MAAM,YAAY,IAAI,UAAU;YAC5B,MAAM;gBAAE,MAAM;gBAAS,MAAM;gBAAU,GAAG,KAAK,IAAI;YAAC;YACpD,WAAW,KAAK,SAAS,IAAK,MAAM,gNAAQ,CAAC,QAAQ;YACrD,QAAQ,KAAK,MAAM,IAAI,IAAI;YAC3B,aAAa,KAAK,WAAW,IAAI,IAAI;YACrC,cAAc,KAAK,YAAY;QACnC,GAAG;QACH,IAAI,QAAQ,KAAK,EAAE;YACf,MAAM,QAAQ,KAAK,CAAC,IAAI,CAAC,UAAU,MAAM;QAC7C;QACA,OAAO;IACX;IACA;;;;;KAKC,GACD,OAAO,WAAW,GAAG,EAAE,OAAO,EAAE;QAC5B,+DAA+D,GAC/D,MAAM,OAAO,IAAI;QACjB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,IAAI,WAAW,CAAE;YACxC,KAAK,GAAG,CAAC,KAAK;gBACV,YAAY,IAAA,qKAAS,EAAC,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;wBAC/C,KAAK,4KAAG,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,IAAI;wBAC1B,OAAO,EAAE,KAAK,YAAY,aAAa,EAAE,KAAK,GAAG,IAAI,WAAW,EAAE,KAAK;oBAC3E,CAAC;gBACD,MAAM,MAAM,IAAI;YACpB;QACJ;QACA,OAAO,IAAI,UAAU;YACjB,MAAM,IAAI,IAAI;YACd,gEAAgE;YAChE,WAAW,gLAAM,CAAC,IAAI,CAAC,IAAI,SAAS;YACpC,cAAc,IAAI,YAAY;YAC9B,QAAQ,IAAI,MAAM;YAClB,aAAa;QACjB,GAAG;IACP;IACA;;KAEC,GACD,SAAS;QACL,iDAAiD,GACjD,MAAM,MAAM;YACR,MAAM,IAAI,CAAC,IAAI;YACf,WAAW,IAAI,CAAC,SAAS,CAAC,SAAS;YACnC,cAAc,IAAI,CAAC,YAAY;YAC/B,QAAQ,IAAI,CAAC,MAAM;YACnB,aAAa,IAAI;QACrB;QACA,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,IAAI,CAAC,WAAW,CAAE;YACzC,IAAI,WAAW,CAAC,GAAG,CAAC,KAAK;gBACrB,MAAM,MAAM,IAAI;gBAChB,YAAY;uBAAI,MAAM,UAAU,CAAC,MAAM;iBAAG,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;wBACnD,KAAK,EAAE,GAAG,CAAC,QAAQ;wBACnB,OAAO,IAAA,8LAAuB,EAAC,EAAE,KAAK;oBAC1C,CAAC;YACL;QACJ;QACA,OAAO;IACX;IACA;;;;KAIC,GACD,MAAM,SAAS,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE;QAC7B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK;QACrB,MAAM,CAAC,QAAQ,IAAI,CAAC,aAAa,CAAC,SAAS,IAAI,CAAC,CAAA,IAAK,CAAC,IAAI,CAAC,MAAM,GAAG;IACxE;IACA;;;KAGC,GACD,MAAM,gBAAgB,GAAG,EAAE;QACvB,IAAI,CAAC,YAAY,GAAG;QACpB,MAAM,IAAI,CAAC,CAAA,IAAK,CAAC,IAAI,CAAC,MAAM;IAChC;IACA;;;KAGC,GACD,MAAM,cAAc,UAAU,EAAE,IAAI,EAAE;QAClC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,QAAQ,IAAI;YAC5C;YACA,MAAM,QAAQ,CAAC;QACnB;QACA,MAAM,IAAI,CAAC,CAAA,IAAK,CAAC,IAAI,CAAC,MAAM;IAChC;IACA;;KAEC,GACD,MAAM,iBAAiB,GAAG,EAAE;QACxB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,QAAQ;QACpC,MAAM,IAAI,CAAC,CAAA,IAAK,CAAC,IAAI,CAAC,MAAM;IAChC;AACJ;AACA;;;;;CAKC,GACD,MAAM,sBAAsB,CAAC,MAAQ,IAAI,GAAG,KAAK,qMAAI,CAAC,MAAM,CAAC,GAAG;AAOzD,MAAM,iBAAiB,CAAC,aAAe,WAAW,YAAY,CAAC,IAAI,CAAC,CAAC,MAAQ,oBAAoB;AAYjG,SAAS,iBAAiB,IAAI;IACjC,wDAAwD,GACxD,MAAM,SAAS,CAAC;IAChB,KAAK,MAAM,EAAE,UAAU,EAAE,IAAI,KAAK,WAAW,CAAC,MAAM,GAAI;QACpD,IAAI,eAAe,aAAa;YAC5B,MAAM,MAAM,WAAW,YAAY,CAAC,EAAE;YACtC,IAAI,OAAO,CAAC,IAAA,2KAAS,EAAC,aAAa;gBAC/B,MAAM,QAAQ,IAAI,EAAE,CAAC,KAAK;gBAC1B,IAAI,OAAO;oBACP,MAAM,WAAW,MAAM,QAAQ;oBAC/B,MAAM,YAAY,WAAW,MAAM,CAAC,GAAG;oBACvC,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,IAAI,CAAC;oBACxC,MAAM,CAAC,SAAS,CAAC,UAAU,GAAG,MAAM,CAAC,SAAS,CAAC,UAAU,IAAI,EAAE;oBAC/D,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC;gBACrC;YACJ;QACJ;IACJ;IACA,OAAO;AACX,EACA,sCAAsC","ignoreList":[0]}},
    {"offset": {"line": 9529, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/agent-use-cases.js"],"sourcesContent":["import { addSpacesFromDelegations, Agent as AccessAgent } from './agent.js';\nimport * as Access from '@storacha/capabilities/access';\nimport { bytesToDelegations } from './encoding.js';\nimport { Provider, Plan } from '@storacha/capabilities';\nimport * as w3caps from '@storacha/capabilities';\nimport { Schema, delegate } from '@ucanto/core';\nimport { AgentData, isSessionProof } from './agent-data.js';\nimport * as DidMailto from '@storacha/did-mailto';\nimport * as API from './types.js';\nconst DIDWeb = Schema.DID.match({ method: 'web' });\n/**\n * Request access by a session allowing this agent to issue UCANs\n * signed by the account.\n *\n * @param {AccessAgent} access\n * @param {API.Principal<API.AccountDID>} account\n * @param {Iterable<{ can: API.Ability }>} capabilities\n */\nexport async function requestAccess(access, account, capabilities) {\n    const res = await access.invokeAndExecute(Access.authorize, {\n        audience: access.connection.id,\n        with: access.issuer.did(),\n        nb: {\n            iss: account.did(),\n            att: [...capabilities],\n        },\n    });\n    if (res?.out.error) {\n        throw res.out.error;\n    }\n}\n/**\n * claim delegations delegated to an audience\n *\n * @param {AccessAgent} access\n * @param {API.DID} [audienceOfClaimedDelegations] - audience of claimed delegations. defaults to access.connection.id.did()\n * @param {object} opts\n * @param {string} [opts.nonce] - nonce to use for the claim\n * @param {boolean} [opts.addProofs] - whether to addProof to access agent\n */\nexport async function claimAccess(access, audienceOfClaimedDelegations = access.connection.id.did(), { addProofs = false, nonce } = {}) {\n    const res = await access.invokeAndExecute(Access.claim, {\n        audience: access.connection.id,\n        with: audienceOfClaimedDelegations,\n        nonce,\n    });\n    if (res.out.error) {\n        throw res.out.error;\n    }\n    const delegations = Object.values(res.out.ok.delegations).flatMap((bytes) => bytesToDelegations(bytes));\n    if (addProofs) {\n        for (const d of delegations) {\n            await access.addProof(d);\n        }\n        await addSpacesFromDelegations(access, delegations);\n    }\n    return delegations;\n}\n/**\n * @param {object} opts\n * @param {AccessAgent} opts.access\n * @param {API.SpaceDID} opts.space\n * @param {API.Principal<API.AccountDID>} opts.account\n * @param {API.ProviderDID} opts.provider - e.g. 'did:web:staging.storacha.network'\n */\nexport async function addProvider({ access, space, account, provider }) {\n    const result = await access.invokeAndExecute(Provider.add, {\n        audience: access.connection.id,\n        with: account.did(),\n        nb: {\n            provider,\n            consumer: space,\n        },\n    });\n    if (result.out.error) {\n        throw result.out.error;\n    }\n}\n/**\n * @typedef {(delegations: API.Delegation[]) => boolean} DelegationsChecker\n */\n/**\n * @type DelegationsChecker\n */\nexport function delegationsIncludeSessionProof(delegations) {\n    return delegations.some((d) => isSessionProof(d));\n}\n/**\n * @param {DelegationsChecker} delegationsMatch\n * @param {AccessAgent} access\n * @param {API.DID} delegee\n * @param {object} [opts]\n * @param {number} [opts.interval]\n * @param {AbortSignal} [opts.signal]\n * @returns {Promise<Iterable<API.Delegation>>}\n */\nexport async function pollAccessClaimUntil(delegationsMatch, access, delegee, opts) {\n    const interval = opts?.interval || 250;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        if (opts?.signal?.aborted)\n            throw opts.signal.reason ?? new Error('operation aborted');\n        const res = await access.invokeAndExecute(w3caps.Access.claim, {\n            with: delegee,\n        });\n        if (res.out.error)\n            throw res.out.error;\n        const claims = Object.values(res.out.ok.delegations).flatMap((d) => bytesToDelegations(d));\n        if (delegationsMatch(claims))\n            return claims;\n        await new Promise((resolve) => setTimeout(resolve, interval));\n    }\n}\n/**\n * @template [T={}]\n * @typedef {{ signal?: AbortSignal } & T} AuthorizationWaiterOpts\n */\n/**\n * @template [U={}]\n * @typedef {(accessAgent: AccessAgent, opts: AuthorizationWaiterOpts<U>) => Promise<Iterable<API.Delegation>>} AuthorizationWaiter\n */\n/**\n * Wait for authorization process to complete by polling executions of the\n * `access/claim` capability and waiting for the result to include\n * a session delegation.\n *\n * @type AuthorizationWaiter<{interval?: number}>\n */\nexport async function waitForAuthorizationByPolling(access, opts = {}) {\n    const claimed = await pollAccessClaimUntil(delegationsIncludeSessionProof, access, access.issuer.did(), {\n        signal: opts?.signal,\n        interval: opts?.interval,\n    });\n    return [...claimed];\n}\n/**\n * Request authorization of a session allowing this agent to issue UCANs\n * signed by the passed email address.\n *\n * @param {AccessAgent} access\n * @param {`${string}@${string}`} email\n * @param {object} [opts]\n * @param {AbortSignal} [opts.signal]\n * @param {boolean} [opts.dontAddProofs] - whether to skip adding proofs to the agent\n * @param {Iterable<{ can: API.Ability }>} [opts.capabilities]\n * @param {AuthorizationWaiter} [opts.expectAuthorization] - function that will resolve once account has confirmed the authorization request\n */\nexport async function authorizeAndWait(access, email, opts = {}) {\n    const expectAuthorization = opts.expectAuthorization || waitForAuthorizationByPolling;\n    const account = { did: () => DidMailto.fromEmail(email) };\n    await requestAccess(access, account, opts?.capabilities || [\n        { can: 'assert/*' },\n        { can: 'space/*' },\n        { can: 'store/*' },\n        { can: 'provider/add' },\n        { can: 'subscription/list' },\n        { can: 'upload/*' },\n        { can: 'ucan/*' },\n        { can: 'plan/*' },\n        { can: 'usage/*' },\n        { can: 'w3up/*' },\n    ]);\n    const sessionDelegations = [...(await expectAuthorization(access, opts))];\n    if (!opts?.dontAddProofs) {\n        await Promise.all(sessionDelegations.map(async (d) => access.addProof(d)));\n    }\n}\n/**\n * Request authorization of a session allowing this agent to issue UCANs\n * signed by the passed email address.\n *\n * @param {AccessAgent} accessAgent\n * @param {`${string}@${string}`} email\n * @param {object} [opts]\n * @param {AbortSignal} [opts.signal]\n * @param {Iterable<{ can: API.Ability }>} [opts.capabilities]\n * @param {boolean} [opts.addProofs]\n * @param {AuthorizationWaiter} [opts.expectAuthorization] - function that will resolve once account has confirmed the authorization request\n */\nexport async function authorizeWaitAndClaim(accessAgent, email, opts) {\n    await authorizeAndWait(accessAgent, email, opts);\n    await claimAccess(accessAgent, accessAgent.issuer.did(), {\n        addProofs: opts?.addProofs ?? true,\n    });\n}\n/**\n * Provisions space with the specified account and sets up a recovery with the\n * same account.\n *\n * @param {AccessAgent} access\n * @param {AgentData} agentData\n * @param {string} email\n * @param {object} [opts]\n * @param {AbortSignal} [opts.signal]\n * @param {API.DID<'key'>} [opts.space]\n * @param {API.ProviderDID} [opts.provider] - provider to register - defaults to this.connection.id\n */\nexport async function addProviderAndDelegateToAccount(access, agentData, email, opts) {\n    const space = opts?.space || access.currentSpace();\n    const spaceMeta = space ? agentData.spaces.get(space) : undefined;\n    const provider = opts?.provider ||\n        (() => {\n            const service = access.connection.id.did();\n            if (DIDWeb.is(service)) {\n                // connection.id did is a valid provider value. Try using that.\n                return service;\n            }\n            throw new Error(`unable to determine provider to use to addProviderAndDelegateToAccount using access.connection.id did ${service}. expected a did:web:`);\n        })();\n    if (!space || !spaceMeta) {\n        throw new Error('No space selected');\n    }\n    if (spaceMeta) {\n        throw new Error('Space already registered with storacha.network.');\n    }\n    const account = { did: () => DidMailto.fromEmail(DidMailto.email(email)) };\n    await addProvider({ access, space, account, provider });\n    const delegateSpaceAccessResult = await delegateSpaceAccessToAccount(access, space, account);\n    if (delegateSpaceAccessResult.out.error) {\n        throw delegateSpaceAccessResult.out.error;\n    }\n    await agentData.addSpace(space, spaceMeta);\n}\n/**\n * @param {AccessAgent} access\n * @param {API.SpaceDID} space\n * @param {API.Principal<API.AccountDID>} account\n */\nasync function delegateSpaceAccessToAccount(access, space, account) {\n    const issuerSaysAccountCanAdminSpace = await createIssuerSaysAccountCanAdminSpace(access.issuer, space, account, undefined, access.proofs([{ with: space, can: '*' }]), \n    // we want to sign over control of this space forever\n    Infinity);\n    return access.invokeAndExecute(Access.delegate, {\n        audience: access.connection.id,\n        with: space,\n        expiration: Infinity,\n        nb: {\n            delegations: {\n                [issuerSaysAccountCanAdminSpace.cid.toString()]: issuerSaysAccountCanAdminSpace.cid,\n            },\n        },\n        proofs: [\n            // must be embedded here because it's referenced by cid in .nb.delegations\n            issuerSaysAccountCanAdminSpace,\n        ],\n    });\n}\n/**\n * @param {API.Signer<API.DIDKey>} issuer\n * @param {API.SpaceDID} space\n * @param {API.Principal<API.AccountDID>} account\n * @param {API.Capabilities} capabilities\n * @param {API.Delegation[]} proofs\n * @param {number} expiration\n * @returns\n */\nasync function createIssuerSaysAccountCanAdminSpace(issuer, space, account, capabilities = [\n    {\n        can: '*',\n        with: space,\n    },\n], proofs = [], expiration) {\n    return delegate({\n        issuer,\n        audience: account,\n        capabilities,\n        proofs,\n        expiration,\n    });\n}\n/**\n *\n * @param {AccessAgent} agent\n * @param {API.AccountDID} account\n */\nexport async function getAccountPlan(agent, account) {\n    const receipt = await agent.invokeAndExecute(Plan.get, {\n        with: account,\n    });\n    return receipt.out;\n}\n//# sourceMappingURL=agent-use-cases.js.map"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9789, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/agent.js"],"sourcesContent":["import * as Client from '@ucanto/client';\nimport * as CAR from '@ucanto/transport/car';\nimport * as HTTP from '@ucanto/transport/http';\nimport * as ucanto from '@ucanto/core';\nimport * as Capabilities from '@storacha/capabilities/space';\nimport { attest } from '@storacha/capabilities/ucan';\nimport * as Access from './access.js';\nimport * as Space from './space.js';\nimport { invoke, delegate, DID, Delegation, Schema, isDelegation, } from '@ucanto/core';\nimport { isExpired, isTooEarly, canDelegateCapability } from './delegations.js';\nimport { AgentData, getSessionProofs } from './agent-data.js';\nimport { UCAN } from '@storacha/capabilities';\nimport * as API from './types.js';\nexport * from './types.js';\nexport * from './delegations.js';\nexport { AgentData, Access, Space, Delegation, Schema };\nexport * from './agent-use-cases.js';\nconst HOST = 'https://up.storacha.network';\nconst PRINCIPAL = DID.parse('did:web:up.storacha.network');\n/**\n * Default identities for the service, including the primary identity.\n *\n * @type {API.DID[]}\n */\nconst IDENTITIES = [PRINCIPAL.did(), 'did:web:web3.storage'];\n/**\n * Keeps track of AgentData for all Agents constructed.\n * Used by addSpacesFromDelegations - so it can only accept Agent as param, but\n * still mutate corresponding AgentData\n *\n * @deprecated - remove this when deprecated addSpacesFromDelegations is removed\n */\n/** @type {WeakMap<Agent<Record<string, any>>, AgentData>} */\nconst agentToData = new WeakMap();\n/**\n * @typedef {API.Service} Service\n * @typedef {API.Receipt<any, any>} Receipt\n */\n/**\n * Creates a Ucanto connection for the w3access API\n *\n * Usage:\n *\n * ```js\n * import { connection } from '@storacha/access/agent'\n * ```\n *\n * @template {API.DID} T - DID method\n * @template {Record<string, any>} [S=Service]\n * @param {object} [options]\n * @param {API.Principal<T>} [options.principal] - w3access API Principal\n * @param {URL} [options.url] - w3access API URL\n * @param {API.Transport.Channel<S>} [options.channel] - Ucanto channel to use\n * @param {typeof fetch} [options.fetch] - Fetch implementation to use\n * @returns {API.ConnectionView<S>}\n */\nexport function connection(options = {}) {\n    return Client.connect({\n        id: options.principal ?? PRINCIPAL,\n        codec: CAR.outbound,\n        channel: options.channel ??\n            HTTP.open({\n                url: options.url ?? new URL(HOST),\n                method: 'POST',\n                fetch: options.fetch ?? globalThis.fetch.bind(globalThis),\n            }),\n    });\n}\n/**\n * Agent\n *\n * Usage:\n *\n * ```js\n * import { Agent } from '@storacha/access/agent'\n * ```\n *\n * @template {Record<string, any>} [S=Service]\n */\nexport class Agent {\n    /** @type {import('./agent-data.js').AgentData} */\n    #data;\n    /**\n     * DIDs the service is known by, including the primary. They are used by\n     * `invoke` and `invokeAndExecute` to scope session proofs to just the service\n     * DID or it's aliases.\n     *\n     * @type {Set<API.DID>}\n     */\n    #serviceIdentities;\n    /**\n     * @param {import('./agent-data.js').AgentData} data - Agent data\n     * @param {import('./types.js').AgentOptions<S>} [options]\n     */\n    constructor(data, options = {}) {\n        /** @type { Client.Channel<S> & { url?: URL } | undefined } */\n        const channel = options.connection?.channel;\n        this.url = options.url ?? channel?.url ?? new URL(HOST);\n        this.connection =\n            options.connection ??\n                connection({\n                    principal: options.servicePrincipal,\n                    url: this.url,\n                });\n        this.#data = data;\n        agentToData.set(this, this.#data);\n        const primary = this.connection.id;\n        const serviceIdentities = new Set(options.serviceIdentities);\n        // If the default identities includes the configured primary identity then\n        // add them to the service identities list.\n        if (IDENTITIES.includes(primary.did())) {\n            for (const id of IDENTITIES) {\n                serviceIdentities.add(id);\n            }\n        }\n        // Add the primary identity if not already in service identities.\n        if (!serviceIdentities.has(primary.did())) {\n            serviceIdentities.add(primary.did());\n        }\n        this.#serviceIdentities = serviceIdentities;\n    }\n    /**\n     * Create a new Agent instance, optionally with the passed initialization data.\n     *\n     * @template {Record<string, any>} [R=Service]\n     * @param {Partial<import('./types.js').AgentDataModel>} [init]\n     * @param {import('./types.js').AgentOptions<R> & import('./types.js').AgentDataOptions} [options]\n     */\n    static async create(init, options = {}) {\n        const data = await AgentData.create(init, options);\n        return new Agent(data, options);\n    }\n    /**\n     * Instantiate an Agent from pre-exported agent data.\n     *\n     * @template {Record<string, any>} [R=Service]\n     * @param {import('./types.js').AgentDataExport} raw\n     * @param {import('./types.js').AgentOptions<R> & import('./types.js').AgentDataOptions} [options]\n     */\n    static from(raw, options = {}) {\n        const data = AgentData.fromExport(raw, options);\n        return new Agent(data, options);\n    }\n    get issuer() {\n        return this.#data.principal;\n    }\n    get meta() {\n        return this.#data.meta;\n    }\n    get spaces() {\n        return this.#data.spaces;\n    }\n    did() {\n        return this.#data.principal.did();\n    }\n    /**\n     * Add a proof to the agent store.\n     *\n     * @param {API.Delegation} delegation\n     */\n    async addProof(delegation) {\n        return await this.addProofs([delegation]);\n    }\n    /**\n     * Adds set of proofs to the agent store.\n     *\n     * @param {Iterable<API.Delegation>} delegations\n     */\n    async addProofs(delegations) {\n        for (const proof of delegations) {\n            await this.#data.addDelegation(proof, { audience: this.meta });\n        }\n        await this.removeExpiredDelegations();\n        return {};\n    }\n    /**\n     * Query the delegations store for all the delegations matching the capabilities provided.\n     *\n     * @param {API.CapabilityQuery[]} [caps]\n     */\n    #delegations(caps) {\n        const _caps = new Set(caps);\n        /** @type {Array<{ delegation: API.Delegation, meta: API.DelegationMeta }>} */\n        const values = [];\n        for (const [, value] of this.#data.delegations) {\n            // check expiration\n            if (!isExpired(value.delegation) && // check if delegation can be used\n                !isTooEarly(value.delegation)) {\n                // check if we need to filter for caps\n                if (Array.isArray(caps) && caps.length > 0) {\n                    for (const cap of _caps) {\n                        if (canDelegateCapability(value.delegation, cap)) {\n                            values.push(value);\n                        }\n                    }\n                }\n                else {\n                    values.push(value);\n                }\n            }\n        }\n        return values;\n    }\n    /**\n     * Clean up any expired delegations.\n     */\n    async removeExpiredDelegations() {\n        for (const [, value] of this.#data.delegations) {\n            if (isExpired(value.delegation)) {\n                await this.#data.removeDelegation(value.delegation.cid);\n            }\n        }\n    }\n    /**\n     * Revoke a delegation by CID.\n     *\n     * If the delegation was issued by this agent (and therefore is stored in the\n     * delegation store) you can just pass the CID. If not, or if the current agent's\n     * delegation store no longer contains the delegation, you MUST pass a chain of\n     * proofs that proves your authority to revoke this delegation as `options.proofs`.\n     *\n     * @param {API.UCANLink} delegationCID\n     * @param {object} [options]\n     * @param {API.Delegation[]} [options.proofs]\n     */\n    async revoke(delegationCID, options = {}) {\n        const additionalProofs = options.proofs ?? [];\n        // look for the identified delegation in the delegation store and the passed proofs\n        const delegation = [...this.delegations(), ...additionalProofs].find((delegation) => delegation.cid.equals(delegationCID));\n        if (!delegation) {\n            return {\n                error: new Error(`could not find delegation ${delegationCID.toString()} - please include the delegation in options.proofs`),\n            };\n        }\n        const receipt = await this.invokeAndExecute(UCAN.revoke, {\n            // per https://github.com/storacha/upload-service/blob/main/packages/capabilities/src/ucan.js#L38C6-L38C6 the resource here should be\n            // the current issuer - using the space DID here works for simple cases but falls apart when a delegee tries to revoke a delegation\n            // they have re-delegated, since they don't have \"ucan/revoke\" capabilities on the space\n            with: this.issuer.did(),\n            nb: {\n                ucan: delegation.cid,\n            },\n            proofs: [delegation, ...additionalProofs],\n        });\n        return receipt.out;\n    }\n    /**\n     * Get all the proofs matching the capabilities.\n     *\n     * Proofs are delegations with an audience matching agent DID, or with an\n     * audience matching the session DID.\n     *\n     * Proof of session will also be included in the returned proofs if any\n     * proofs matching the passed capabilities require it.\n     *\n     * @param {API.CapabilityQuery[]} [caps] - Capabilities to filter by. Empty or undefined caps with return all the proofs.\n     * @param {object} [options]\n     * @param {API.DID|API.DID[]} [options.sessionProofIssuer] - only include session proofs for these issuer(s)\n     */\n    proofs(caps, options) {\n        /** @type {Map<string, API.Delegation<API.Capabilities>>} */\n        const authorizations = new Map();\n        for (const { delegation } of this.#delegations(caps)) {\n            if (delegation.audience.did() === this.issuer.did()) {\n                authorizations.set(delegation.cid.toString(), delegation);\n            }\n        }\n        /** @type {Set<API.DID>} */\n        const sessionProofIssuers = new Set();\n        if (options?.sessionProofIssuer) {\n            const ids = Array.isArray(options.sessionProofIssuer)\n                ? options.sessionProofIssuer\n                : [options.sessionProofIssuer];\n            for (const id of ids) {\n                sessionProofIssuers.add(id);\n            }\n        }\n        // now let's add any session proofs that refer to those authorizations\n        const sessions = getSessionProofs(this.#data);\n        for (const proof of [...authorizations.values()]) {\n            const proofsByIssuer = sessions[proof.asCID.toString()] ?? {};\n            const sessionProofs = [];\n            if (sessionProofIssuers.size > 0) {\n                for (const id of sessionProofIssuers) {\n                    const proofs = proofsByIssuer[id];\n                    if (proofs)\n                        sessionProofs.push(...proofs);\n                }\n            }\n            else {\n                sessionProofs.push(...Object.values(proofsByIssuer).flat());\n            }\n            for (const sessionProof of sessionProofs) {\n                authorizations.set(sessionProof.cid.toString(), sessionProof);\n            }\n        }\n        return [...authorizations.values()];\n    }\n    /**\n     * Get delegations created by the agent for others.\n     *\n     * @param {API.CapabilityQuery[]} [caps] - Capabilities to filter by. Empty or undefined caps with return all the delegations.\n     */\n    delegations(caps) {\n        const arr = [];\n        for (const { delegation } of this.delegationsWithMeta(caps)) {\n            arr.push(delegation);\n        }\n        return arr;\n    }\n    /**\n     * Get delegations created by the agent for others and their metadata.\n     *\n     * @param {API.CapabilityQuery[]} [caps] - Capabilities to filter by. Empty or undefined caps with return all the delegations.\n     */\n    delegationsWithMeta(caps) {\n        const arr = [];\n        for (const value of this.#delegations(caps)) {\n            const { delegation } = value;\n            const isSession = delegation.capabilities.some((c) => c.can === attest.can);\n            if (!isSession && delegation.audience.did() !== this.issuer.did()) {\n                arr.push(value);\n            }\n        }\n        return arr;\n    }\n    /**\n     * Creates a space signer and a delegation to the agent\n     *\n     * @param {string} name\n     * @param {object} [options]\n     * @param {API.SpaceAccessType} [options.access] - The access type for the space. Defaults to { type: 'public' }.\n     */\n    async createSpace(name, { access } = {}) {\n        return await Space.generate({ name, access, agent: this });\n    }\n    /**\n     * @param {string} secret\n     * @param {object} options\n     * @param {string} options.name - The name of the space.\n     * @param {API.SpaceAccessType} [options.access] - The access type for the space. Defaults to { type: 'public' }.\n     */\n    async recoverSpace(secret, { name, access }) {\n        return await Space.fromMnemonic(secret, { name, access, agent: this });\n    }\n    /**\n     * Import a space from a delegation.\n     *\n     * @param {API.Delegation} delegation\n     * @param {object} options\n     * @param {string} [options.name]\n     */\n    async importSpaceFromDelegation(delegation, { name = '' } = {}) {\n        const space = name === ''\n            ? Space.fromDelegation(delegation)\n            : Space.fromDelegation(delegation).withName(name);\n        // Store space metadata preserving all properties\n        this.#data.spaces.set(space.did(), {\n            ...space.meta,\n            name: space.name,\n            access: space.access,\n        });\n        await this.addProof(space.delegation);\n        // if we do not have a current space, make this one current\n        if (!this.currentSpace()) {\n            await this.setCurrentSpace(space.did());\n        }\n        return space;\n    }\n    /**\n     * Sets the current selected space\n     *\n     * Other methods will default to use the current space if no resource is defined\n     *\n     * @param {API.SpaceDID} space\n     */\n    async setCurrentSpace(space) {\n        if (!this.#data.spaces.has(space)) {\n            throw new Error(`Agent has no proofs for ${space}.`);\n        }\n        await this.#data.setCurrentSpace(space);\n        return space;\n    }\n    /**\n     * Get current space DID\n     */\n    currentSpace() {\n        return this.#data.currentSpace;\n    }\n    /**\n     * Get current space DID, proofs and abilities\n     */\n    currentSpaceWithMeta() {\n        if (!this.#data.currentSpace) {\n            return;\n        }\n        const proofs = this.proofs([\n            {\n                can: 'space/info',\n                with: this.#data.currentSpace,\n            },\n        ]);\n        const caps = new Set();\n        for (const p of proofs) {\n            for (const cap of p.capabilities) {\n                caps.add(cap.can);\n            }\n        }\n        return {\n            did: this.#data.currentSpace,\n            proofs,\n            capabilities: [...caps],\n            meta: this.#data.spaces.get(this.#data.currentSpace),\n        };\n    }\n    /**\n     *\n     * @param {import('./types.js').DelegationOptions} options\n     */\n    async delegate(options) {\n        const space = this.currentSpaceWithMeta();\n        if (!space) {\n            throw new Error('no space selected.');\n        }\n        const caps = /** @type {API.Capabilities} */ (options.abilities.map((a) => {\n            return {\n                with: space.did,\n                can: a,\n            };\n        }));\n        // Verify agent can provide proofs for each requested capability\n        for (const cap of caps) {\n            if (!this.proofs([cap]).length) {\n                throw new Error(`cannot delegate capability ${cap.can} with ${cap.with}`);\n            }\n        }\n        const delegation = await delegate({\n            issuer: this.issuer,\n            capabilities: caps,\n            proofs: this.proofs(caps),\n            facts: [{ space: space.meta ?? {} }],\n            ...options,\n        });\n        await this.#data.addDelegation(delegation, {\n            audience: options.audienceMeta,\n        });\n        await this.removeExpiredDelegations();\n        return delegation;\n    }\n    /**\n     * Invoke and execute the given capability on the Access service connection\n     *\n     * ```js\n     *\n     * await agent.invokeAndExecute(Space.recover, {\n     *   nb: {\n     *     identity: 'mailto: email@gmail.com',\n     *   },\n     * })\n     *\n     * // sugar for\n     * const recoverInvocation = await agent.invoke(Space.recover, {\n     *   nb: {\n     *     identity: 'mailto: email@gmail.com',\n     *   },\n     * })\n     *\n     * await recoverInvocation.execute(agent.connection)\n     * ```\n     *\n     * @template {API.Ability} A\n     * @template {API.URI} R\n     * @template {API.Caveats} C\n     * @param {API.TheCapabilityParser<API.CapabilityMatch<A, R, C>>} cap\n     * @param {API.InvokeOptions<A, R, API.TheCapabilityParser<API.CapabilityMatch<A, R, C>>>} options\n     * @returns {Promise<API.InferReceipt<API.Capability<A, R, C>, S>>}\n     */\n    async invokeAndExecute(cap, options) {\n        const inv = await this.invoke(cap, options);\n        const out = inv.execute(/** @type {*} */ (this.connection));\n        return /** @type {*} */ (out);\n    }\n    /**\n     * Execute invocations on the agent's connection\n     *\n     * @example\n     * ```js\n     * const i1 = await agent.invoke(Space.info, {})\n     * const i2 = await agent.invoke(Space.recover, {\n     *   nb: {\n     *     identity: 'mailto:hello@storacha.network',\n     *   },\n     * })\n     *\n     * const results = await agent.execute2(i1, i2)\n     *\n     * ```\n     * @template {API.Capability} C\n     * @template {API.Tuple<API.ServiceInvocation<C, S>>} I\n     * @param {I} invocations\n     */\n    execute(...invocations) {\n        return this.connection.execute(...invocations);\n    }\n    /**\n     * Creates an invocation for the given capability with Agent's proofs, service, issuer and space.\n     *\n     * @example\n     * ```js\n     * const recoverInvocation = await agent.invoke(Space.recover, {\n     *   nb: {\n     *     identity: 'mailto: email@gmail.com',\n     *   },\n     * })\n     *\n     * await recoverInvocation.execute(agent.connection)\n     * // or\n     * await agent.execute(recoverInvocation)\n     * ```\n     *\n     * @template {API.Ability} A\n     * @template {API.URI} R\n     * @template {API.TheCapabilityParser<API.CapabilityMatch<A, R, C>>} CAP\n     * @template {API.Caveats} [C={}]\n     * @param {CAP} cap\n     * @param {import('./types.js').InvokeOptions<A, R, CAP>} options\n     */\n    async invoke(cap, options) {\n        const audience = options.audience || this.connection.id;\n        const space = options.with || this.currentSpace();\n        if (!space) {\n            throw new Error('No space or resource selected, you need pass a resource.');\n        }\n        const proofs = [\n            ...(options.proofs || []),\n            ...this.proofs([\n                {\n                    with: space,\n                    can: cap.can,\n                },\n            ], {\n                sessionProofIssuer: this.#serviceIdentities.has(audience.did())\n                    ? [...this.#serviceIdentities]\n                    : audience.did(),\n            }),\n        ];\n        if (proofs.length === 0 && options.with !== this.did()) {\n            throw new Error(`no proofs available for resource ${space} and ability ${cap.can}`);\n        }\n        const inv = invoke({\n            ...options,\n            audience,\n            // @ts-ignore\n            capability: cap.create({\n                with: space,\n                nb: 'nb' in options ? options.nb : undefined,\n            }),\n            issuer: this.issuer,\n            proofs: [...proofs],\n            nonce: options.nonce,\n        });\n        return /** @type {API.IssuedInvocationView<API.InferInvokedCapability<CAP>>} */ (inv);\n    }\n    /**\n     * Get Space information from Access service\n     *\n     * @param {API.URI<\"did:\">} [space]\n     * @param {object} [options]\n     * @param {string} [options.nonce]\n     */\n    async getSpaceInfo(space, options) {\n        const _space = space || this.currentSpace();\n        if (!_space) {\n            throw new Error('No space selected, you need pass a resource.');\n        }\n        const inv = await this.invokeAndExecute(Capabilities.info, {\n            ...options,\n            with: _space,\n        });\n        if (inv.out.error) {\n            throw inv.out.error;\n        }\n        return /** @type {import('./types.js').SpaceInfoResult} */ (inv.out.ok);\n    }\n}\n/**\n * Given a list of delegations, add to agent data spaces list.\n *\n * @deprecated - trying to remove explicit space tracking from Agent/AgentData\n * in favor of functions that derive the space set from access.delegations\n *\n * @template {Record<string, any>} [S=Service]\n * @param {Agent<S>} agent\n * @param {API.Delegation[]} delegations\n */\nexport async function addSpacesFromDelegations(agent, delegations) {\n    const data = agentToData.get(agent);\n    if (!data) {\n        throw Object.assign(new Error(`cannot determine AgentData for Agent`), {\n            agent: agent,\n        });\n    }\n    // spaces we find along the way.\n    const spaces = new Map();\n    // only consider ucans with this agent as the audience\n    const ours = delegations.filter((x) => x.audience.did() === agent.did());\n    // space names are stored as facts in proofs in the special `ucan:*` delegation from email to agent.\n    const ucanStars = ours.filter((x) => x.capabilities[0].can === '*' && x.capabilities[0].with === 'ucan:*');\n    for (const delegation of ucanStars) {\n        for (const proof of delegation.proofs) {\n            if (!isDelegation(proof) ||\n                !proof.capabilities[0].with.startsWith('did:key')) {\n                continue;\n            }\n            const space = Space.fromDelegation(proof);\n            spaces.set(space.did(), space.meta);\n        }\n    }\n    // Find any other spaces the user may have access to\n    for (const delegation of ours) {\n        // TODO: we need a more robust way to determine which spaces a user has access to\n        // it may or may not involve look at delegations\n        const allows = ucanto.Delegation.allows(delegation);\n        for (const [resource, value] of Object.entries(allows)) {\n            // If we discovered a delegation to any DID, we add it to the spaces list.\n            if (resource.startsWith('did:key') && Object.keys(value).length > 0) {\n                if (!spaces.has(resource)) {\n                    spaces.set(resource, {});\n                }\n            }\n        }\n    }\n    for (const [did, meta] of spaces) {\n        await data.addSpace(did, meta);\n    }\n}\n/**\n * Stores given delegations in the agent's data store and adds discovered spaces\n * to the agent's space list.\n *\n * @param {Agent} agent\n * @param {object} authorization\n * @param {API.Delegation[]} authorization.proofs\n * @returns {Promise<API.Result<API.Unit, Error>>}\n */\nexport const importAuthorization = async (agent, { proofs }) => {\n    try {\n        await agent.addProofs(proofs);\n        await addSpacesFromDelegations(agent, proofs);\n        return { ok: {} };\n    }\n    catch (error) {\n        return /** @type {{error:Error}} */ ({ error });\n    }\n};\n//# sourceMappingURL=agent.js.map"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 10424, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/drivers/indexeddb.js"],"sourcesContent":["import defer from 'p-defer';\n/**\n * @template T\n * @typedef {import('./types.js').Driver<T>} Driver\n */\nconst STORE_NAME = 'AccessStore';\nconst DATA_ID = 1;\n/**\n * Driver implementation for the browser.\n *\n * Usage:\n *\n * ```js\n * import { IndexedDBDriver } from '@storacha/access/drivers/indexeddb'\n * ```\n *\n * @template T\n * @implements {Driver<T>}\n */\nexport class IndexedDBDriver {\n    /** @type {string} */\n    #dbName;\n    /** @type {number|undefined} */\n    #dbVersion;\n    /** @type {string} */\n    #dbStoreName;\n    /** @type {IDBDatabase|undefined} */\n    #db;\n    /** @type {boolean} */\n    #autoOpen;\n    /**\n     * @param {string} dbName\n     * @param {object} [options]\n     * @param {number} [options.dbVersion]\n     * @param {string} [options.dbStoreName]\n     * @param {boolean} [options.autoOpen]\n     */\n    constructor(dbName, options = {}) {\n        this.#dbName = dbName;\n        this.#dbVersion = options.dbVersion;\n        this.#dbStoreName = options.dbStoreName ?? STORE_NAME;\n        this.#autoOpen = options.autoOpen ?? true;\n    }\n    /** @returns {Promise<IDBDatabase>} */\n    async #getOpenDB() {\n        if (!this.#db) {\n            if (!this.#autoOpen)\n                throw new Error('Store is not open');\n            await this.open();\n        }\n        // @ts-expect-error open sets this.#db\n        return this.#db;\n    }\n    async open() {\n        const db = this.#db;\n        if (db)\n            return;\n        /** @type {import('p-defer').DeferredPromise<void>} */\n        const { resolve, reject, promise } = defer();\n        const openReq = indexedDB.open(this.#dbName, this.#dbVersion);\n        openReq.addEventListener('upgradeneeded', () => {\n            const db = openReq.result;\n            db.createObjectStore(this.#dbStoreName, { keyPath: 'id' });\n        });\n        openReq.addEventListener('success', () => {\n            this.#db = openReq.result;\n            resolve();\n        });\n        openReq.addEventListener('error', () => reject(openReq.error));\n        return promise;\n    }\n    async close() {\n        const db = this.#db;\n        if (!db)\n            throw new Error('Store is not open');\n        db.close();\n        this.#db = undefined;\n    }\n    /** @param {T} data */\n    async save(data) {\n        const db = await this.#getOpenDB();\n        const putData = withObjectStore(db, 'readwrite', this.#dbStoreName, async (store) => {\n            /** @type {import('p-defer').DeferredPromise<void>} */\n            const { resolve, reject, promise } = defer();\n            const putReq = store.put({ id: DATA_ID, ...data });\n            putReq.addEventListener('success', () => resolve());\n            putReq.addEventListener('error', () => reject(new Error('failed to query DB', { cause: putReq.error })));\n            return promise;\n        });\n        return await putData();\n    }\n    async load() {\n        const db = await this.#getOpenDB();\n        const getData = withObjectStore(db, 'readonly', this.#dbStoreName, async (store) => {\n            /** @type {import('p-defer').DeferredPromise<T|undefined>} */\n            const { resolve, reject, promise } = defer();\n            const getReq = store.get(DATA_ID);\n            getReq.addEventListener('success', () => resolve(getReq.result));\n            getReq.addEventListener('error', () => reject(new Error('failed to query DB', { cause: getReq.error })));\n            return promise;\n        });\n        return await getData();\n    }\n    async reset() {\n        const db = await this.#getOpenDB();\n        const clear = withObjectStore(db, 'readwrite', this.#dbStoreName, (s) => {\n            /** @type {import('p-defer').DeferredPromise<void>} */\n            const { resolve, reject, promise } = defer();\n            const req = s.clear();\n            req.addEventListener('success', () => {\n                resolve();\n            });\n            req.addEventListener('error', () => reject(new Error('failed to query DB', { cause: req.error })));\n            return promise;\n        });\n        await clear();\n    }\n}\n/**\n * @template T\n * @param {IDBDatabase} db\n * @param {IDBTransactionMode} txnMode\n * @param {string} storeName\n * @param {(s: IDBObjectStore) => Promise<T>} fn\n * @returns\n */\nfunction withObjectStore(db, txnMode, storeName, fn) {\n    return async () => {\n        const tx = db.transaction(storeName, txnMode);\n        /** @type {import('p-defer').DeferredPromise<T>} */\n        const { resolve, reject, promise } = defer();\n        /** @type {T} */\n        let result;\n        tx.addEventListener('complete', () => resolve(result));\n        tx.addEventListener('abort', () => reject(tx.error || new Error('transaction aborted')));\n        tx.addEventListener('error', () => reject(new Error('transaction error', { cause: tx.error })));\n        try {\n            result = await fn(tx.objectStore(storeName));\n            tx.commit();\n        }\n        catch (error) {\n            reject(error);\n            tx.abort();\n        }\n        return promise;\n    };\n}\n//# sourceMappingURL=indexeddb.js.map"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 10561, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/dist/stores/store-indexeddb.js"],"sourcesContent":["import { IndexedDBDriver } from '../drivers/indexeddb.js';\n/**\n * Store implementation for the browser.\n *\n * Usage:\n *\n * ```js\n * import { StoreIndexedDB } from '@storacha/access/stores/store-indexeddb'\n * ```\n *\n * @extends {IndexedDBDriver<import('../types.js').AgentDataExport>}\n */\nexport class StoreIndexedDB extends IndexedDBDriver {\n}\n//# sourceMappingURL=store-indexeddb.js.map"],"names":[],"mappings":";;;;AAAA;;AAYO,MAAM,uBAAuB,0LAAe;AACnD,EACA,2CAA2C","ignoreList":[0]}},
    {"offset": {"line": 10582, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/did-mailto/dist/types.js"],"sourcesContent":["export {};\n//# sourceMappingURL=types.js.map"],"names":[],"mappings":";;CACA,iCAAiC","ignoreList":[0]}},
    {"offset": {"line": 10589, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/did-mailto/dist/index.js"],"sourcesContent":["export * from './types.js';\n/**\n * create a did:mailto from an email address\n *\n * @param {import(\"./types.js\").EmailAddress} email\n * @returns {import(\"./types.js\").DidMailto}\n */\nexport function fromEmail(email) {\n    const { domain, local } = parseEmail(email);\n    const did = /** @type {const} */ (`did:mailto:${encodeURIComponent(domain)}:${encodeURIComponent(local)}`);\n    return did;\n}\n/**\n * @param {import(\"./types.js\").DidMailto} did\n * @returns {import(\"./types.js\").EmailAddress}\n */\nexport function toEmail(did) {\n    const parts = did.split(':');\n    if (parts[1] !== 'mailto') {\n        throw new Error(`DID ${did} is not a mailto did.`);\n    }\n    return `${decodeURIComponent(parts[3])}@${decodeURIComponent(parts[2])}`;\n}\n/**\n * given a string, if it is an EmailAddress, return it, otherwise throw an error.\n * Use this to parse string input to `EmailAddress` type to pass to `fromEmail` (when needed).\n * This is not meant to be a general RFC5322 (et al) email address validator, which would be more expensive.\n *\n * @param {string} input\n * @returns {import(\"./types.js\").EmailAddress}\n */\nexport function email(input) {\n    const { domain, local } = parseEmail(input);\n    /** @type {import(\"./types.js\").EmailAddress} */\n    const emailAddress = `${local}@${domain}`;\n    return emailAddress;\n}\n/**\n * parse a did mailto from a string\n *\n * @param {string} input\n * @returns {import(\"./types.js\").DidMailto}\n */\nexport function fromString(input) {\n    const colonParts = input.split(':');\n    if (colonParts.length !== 4) {\n        throw new TypeError(`expected did:mailto to have 4 colon-delimited segments, but got ${colonParts.length}`);\n    }\n    const [domain, local] = [colonParts[2], colonParts[3]];\n    return `did:mailto:${domain}:${local}`;\n}\n/**\n * @param {string} email\n */\nfunction parseEmail(email) {\n    const atParts = email.split('@');\n    if (atParts.length < 2) {\n        throw new TypeError(`expected at least 2 @-delimited segments, but got ${atParts.length}`);\n    }\n    const domain = atParts.at(-1) ?? '';\n    const local = atParts.slice(0, -1).join('@');\n    return { domain, local };\n}\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAOO,SAAS,UAAU,KAAK;IAC3B,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,WAAW;IACrC,MAAM,MAA4B,CAAC,WAAW,EAAE,mBAAmB,QAAQ,CAAC,EAAE,mBAAmB,QAAQ;IACzG,OAAO;AACX;AAKO,SAAS,QAAQ,GAAG;IACvB,MAAM,QAAQ,IAAI,KAAK,CAAC;IACxB,IAAI,KAAK,CAAC,EAAE,KAAK,UAAU;QACvB,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE,IAAI,qBAAqB,CAAC;IACrD;IACA,OAAO,GAAG,mBAAmB,KAAK,CAAC,EAAE,EAAE,CAAC,EAAE,mBAAmB,KAAK,CAAC,EAAE,GAAG;AAC5E;AASO,SAAS,MAAM,KAAK;IACvB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,WAAW;IACrC,8CAA8C,GAC9C,MAAM,eAAe,GAAG,MAAM,CAAC,EAAE,QAAQ;IACzC,OAAO;AACX;AAOO,SAAS,WAAW,KAAK;IAC5B,MAAM,aAAa,MAAM,KAAK,CAAC;IAC/B,IAAI,WAAW,MAAM,KAAK,GAAG;QACzB,MAAM,IAAI,UAAU,CAAC,gEAAgE,EAAE,WAAW,MAAM,EAAE;IAC9G;IACA,MAAM,CAAC,QAAQ,MAAM,GAAG;QAAC,UAAU,CAAC,EAAE;QAAE,UAAU,CAAC,EAAE;KAAC;IACtD,OAAO,CAAC,WAAW,EAAE,OAAO,CAAC,EAAE,OAAO;AAC1C;AACA;;CAEC,GACD,SAAS,WAAW,KAAK;IACrB,MAAM,UAAU,MAAM,KAAK,CAAC;IAC5B,IAAI,QAAQ,MAAM,GAAG,GAAG;QACpB,MAAM,IAAI,UAAU,CAAC,kDAAkD,EAAE,QAAQ,MAAM,EAAE;IAC7F;IACA,MAAM,SAAS,QAAQ,EAAE,CAAC,CAAC,MAAM;IACjC,MAAM,QAAQ,QAAQ,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;IACxC,OAAO;QAAE;QAAQ;IAAM;AAC3B,EACA,iCAAiC","ignoreList":[0]}},
    {"offset": {"line": 10672, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/equals.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/equals.ts"],"sourcesContent":["/**\n * Returns true if the two passed Uint8Arrays have the same content\n */\nexport function equals (a: Uint8Array, b: Uint8Array): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (a.byteLength !== b.byteLength) {\n    return false\n  }\n\n  for (let i = 0; i < a.byteLength; i++) {\n    if (a[i] !== b[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n"],"names":[],"mappings":"AAAA;;GAEG;;;;AACG,SAAU,MAAM,CAAE,CAAa,EAAE,CAAa;IAClD,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;QACZ,OAAO,IAAI,CAAA;IACb,CAAC;IAED,IAAI,CAAC,CAAC,UAAU,KAAK,CAAC,CAAC,UAAU,EAAE,CAAC;QAClC,OAAO,KAAK,CAAA;IACd,CAAC;IAED,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC,EAAE,CAAE,CAAC;QACtC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAClB,OAAO,KAAK,CAAA;QACd,CAAC;IACH,CAAC;IAED,OAAO,IAAI,CAAA;AACb,CAAC"}},
    {"offset": {"line": 10696, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/alloc.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/alloc.ts"],"sourcesContent":["/**\n * Returns a `Uint8Array` of the requested size. Referenced memory will\n * be initialized to 0.\n */\nexport function alloc (size: number = 0): Uint8Array {\n  return new Uint8Array(size)\n}\n\n/**\n * Where possible returns a Uint8Array of the requested size that references\n * uninitialized memory. Only use if you are certain you will immediately\n * overwrite every value in the returned `Uint8Array`.\n */\nexport function allocUnsafe (size: number = 0): Uint8Array {\n  return new Uint8Array(size)\n}\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;;;AACG,SAAU,KAAK,CAAE,OAAe,CAAC;IACrC,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,CAAA;AAC7B,CAAC;AAOK,SAAU,WAAW,CAAE,OAAe,CAAC;IAC3C,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 10715, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/util/as-uint8array.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/util/as-uint8array.ts"],"sourcesContent":["/**\n * To guarantee Uint8Array semantics, convert nodejs Buffers\n * into vanilla Uint8Arrays\n */\nexport function asUint8Array (buf: Uint8Array): Uint8Array {\n  return buf\n}\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;AACG,SAAU,YAAY,CAAE,GAAe;IAC3C,OAAO,GAAG,CAAA;AACZ,CAAC"}},
    {"offset": {"line": 10729, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/xor.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/xor.ts"],"sourcesContent":["import { allocUnsafe } from '#alloc'\nimport { asUint8Array } from '#util/as-uint8array'\n\n/**\n * Returns the xor distance between two Uint8Arrays\n */\nexport function xor (a: Uint8Array, b: Uint8Array): Uint8Array {\n  if (a.length !== b.length) {\n    throw new Error('Inputs should have the same length')\n  }\n\n  const result = allocUnsafe(a.length)\n\n  for (let i = 0; i < a.length; i++) {\n    result[i] = a[i] ^ b[i]\n  }\n\n  return asUint8Array(result)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAA;AACpC,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAA;;;AAK5C,SAAU,GAAG,CAAE,CAAa,EAAE,CAAa;IAC/C,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAA;IACvD,CAAC;IAED,MAAM,MAAM,OAAG,6MAAW,EAAC,CAAC,CAAC,MAAM,CAAC,CAAA;IAEpC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;QAClC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;IACzB,CAAC;IAED,WAAO,iOAAY,EAAC,MAAM,CAAC,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 10751, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/compare.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/compare.ts"],"sourcesContent":["/**\n * Can be used with Array.sort to sort and array with Uint8Array entries\n */\nexport function compare (a: Uint8Array, b: Uint8Array): number {\n  for (let i = 0; i < a.byteLength; i++) {\n    if (a[i] < b[i]) {\n      return -1\n    }\n\n    if (a[i] > b[i]) {\n      return 1\n    }\n  }\n\n  if (a.byteLength > b.byteLength) {\n    return 1\n  }\n\n  if (a.byteLength < b.byteLength) {\n    return -1\n  }\n\n  return 0\n}\n"],"names":[],"mappings":"AAAA;;GAEG;;;;AACG,SAAU,OAAO,CAAE,CAAa,EAAE,CAAa;IACnD,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC,EAAE,CAAE,CAAC;QACtC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAChB,OAAO,CAAC,CAAC,CAAA;QACX,CAAC;QAED,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAChB,OAAO,CAAC,CAAA;QACV,CAAC;IACH,CAAC;IAED,IAAI,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC;QAChC,OAAO,CAAC,CAAA;IACV,CAAC;IAED,IAAI,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC;QAChC,OAAO,CAAC,CAAC,CAAA;IACX,CAAC;IAED,OAAO,CAAC,CAAA;AACV,CAAC"}},
    {"offset": {"line": 10778, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/concat.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/concat.ts"],"sourcesContent":["import { allocUnsafe } from '#alloc'\nimport { asUint8Array } from '#util/as-uint8array'\n\n/**\n * Returns a new Uint8Array created by concatenating the passed Uint8Arrays\n */\nexport function concat (arrays: Uint8Array[], length?: number): Uint8Array {\n  if (length == null) {\n    length = arrays.reduce((acc, curr) => acc + curr.length, 0)\n  }\n\n  const output = allocUnsafe(length)\n  let offset = 0\n\n  for (const arr of arrays) {\n    output.set(arr, offset)\n    offset += arr.length\n  }\n\n  return asUint8Array(output)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAA;AACpC,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAA;;;AAK5C,SAAU,MAAM,CAAE,MAAoB,EAAE,MAAe;IAC3D,IAAI,MAAM,IAAI,IAAI,EAAE,CAAC;QACnB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAG,CAAD,EAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAA;IAC7D,CAAC;IAED,MAAM,MAAM,OAAG,6MAAW,EAAC,MAAM,CAAC,CAAA;IAClC,IAAI,MAAM,GAAG,CAAC,CAAA;IAEd,KAAK,MAAM,GAAG,IAAI,MAAM,CAAE,CAAC;QACzB,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAA;QACvB,MAAM,IAAI,GAAG,CAAC,MAAM,CAAA;IACtB,CAAC;IAED,WAAO,iOAAY,EAAC,MAAM,CAAC,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 10802, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/util/bases.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/util/bases.ts"],"sourcesContent":["import { bases } from 'multiformats/basics'\nimport type { MultibaseCodec } from 'multiformats'\nimport { allocUnsafe } from '#alloc'\n\nfunction createCodec (name: string, prefix: string, encode: (buf: Uint8Array) => string, decode: (str: string) => Uint8Array): MultibaseCodec<any> {\n  return {\n    name,\n    prefix,\n    encoder: {\n      name,\n      prefix,\n      encode\n    },\n    decoder: {\n      decode\n    }\n  }\n}\n\nconst string = createCodec('utf8', 'u', (buf) => {\n  const decoder = new TextDecoder('utf8')\n  return 'u' + decoder.decode(buf)\n}, (str) => {\n  const encoder = new TextEncoder()\n  return encoder.encode(str.substring(1))\n})\n\nconst ascii = createCodec('ascii', 'a', (buf) => {\n  let string = 'a'\n\n  for (let i = 0; i < buf.length; i++) {\n    string += String.fromCharCode(buf[i])\n  }\n  return string\n}, (str) => {\n  str = str.substring(1)\n  const buf = allocUnsafe(str.length)\n\n  for (let i = 0; i < str.length; i++) {\n    buf[i] = str.charCodeAt(i)\n  }\n\n  return buf\n})\n\nexport type SupportedEncodings = 'utf8' | 'utf-8' | 'hex' | 'latin1' | 'ascii' | 'binary' | keyof typeof bases\n\nconst BASES: Record<SupportedEncodings, MultibaseCodec<any>> = {\n  utf8: string,\n  'utf-8': string,\n  hex: bases.base16,\n  latin1: ascii,\n  ascii,\n  binary: ascii,\n\n  ...bases\n}\n\nexport default BASES\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,qBAAqB,CAAA;AAE3C,OAAO,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAA;;;AAEpC,SAAS,WAAW,CAAE,IAAY,EAAE,MAAc,EAAE,MAAmC,EAAE,MAAmC;IAC1H,OAAO;QACL,IAAI;QACJ,MAAM;QACN,OAAO,EAAE;YACP,IAAI;YACJ,MAAM;YACN,MAAM;SACP;QACD,OAAO,EAAE;YACP,MAAM;SACP;KACF,CAAA;AACH,CAAC;AAED,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE;IAC9C,MAAM,OAAO,GAAG,IAAI,WAAW,CAAC,MAAM,CAAC,CAAA;IACvC,OAAO,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;AAClC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;IACT,MAAM,OAAO,GAAG,IAAI,WAAW,EAAE,CAAA;IACjC,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAA;AACzC,CAAC,CAAC,CAAA;AAEF,MAAM,KAAK,GAAG,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE;IAC9C,IAAI,MAAM,GAAG,GAAG,CAAA;IAEhB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;QACpC,MAAM,IAAI,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;IACvC,CAAC;IACD,OAAO,MAAM,CAAA;AACf,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;IACT,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;IACtB,MAAM,GAAG,OAAG,6MAAW,EAAC,GAAG,CAAC,MAAM,CAAC,CAAA;IAEnC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;QACpC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAA;IAC5B,CAAC;IAED,OAAO,GAAG,CAAA;AACZ,CAAC,CAAC,CAAA;AAIF,MAAM,KAAK,GAAoD;IAC7D,IAAI,EAAE,MAAM;IACZ,OAAO,EAAE,MAAM;IACf,GAAG,EAAE,iLAAK,CAAC,MAAM;IACjB,MAAM,EAAE,KAAK;IACb,KAAK;IACL,MAAM,EAAE,KAAK;IAEb,GAAG,iLAAK;CACT,CAAA;uCAEc,KAAK,CAAA"}},
    {"offset": {"line": 10860, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/from-string.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/from-string.ts"],"sourcesContent":["import bases, { type SupportedEncodings } from './util/bases.js'\n\nexport type { SupportedEncodings }\n\n/**\n * Create a `Uint8Array` from the passed string\n *\n * Supports `utf8`, `utf-8`, `hex`, and any encoding supported by the multiformats module.\n *\n * Also `ascii` which is similar to node's 'binary' encoding.\n */\nexport function fromString (string: string, encoding: SupportedEncodings = 'utf8'): Uint8Array {\n  const base = bases[encoding]\n\n  if (base == null) {\n    throw new Error(`Unsupported encoding \"${encoding}\"`)\n  }\n\n  // add multibase prefix\n  return base.decoder.decode(`${base.prefix}${string}`) // eslint-disable-line @typescript-eslint/restrict-template-expressions\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,EAAE,EAA2B,MAAM,iBAAiB,CAAA;;AAW1D,SAAU,UAAU,CAAE,MAAc,EAAE,WAA+B,MAAM;IAC/E,MAAM,IAAI,GAAG,iNAAK,CAAC,QAAQ,CAAC,CAAA;IAE5B,IAAI,IAAI,IAAI,IAAI,EAAE,CAAC;QACjB,MAAM,IAAI,KAAK,CAAC,CAAA,sBAAA,EAAyB,QAAQ,CAAA,CAAA,CAAG,CAAC,CAAA;IACvD,CAAC;IAED,uBAAuB;IACvB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,MAAM,EAAE,CAAC,CAAA,CAAC,uEAAuE;AAC/H,CAAC"}},
    {"offset": {"line": 10878, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/to-string.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/to-string.ts"],"sourcesContent":["import bases, { type SupportedEncodings } from './util/bases.js'\n\nexport type { SupportedEncodings }\n\n/**\n * Turns a `Uint8Array` into a string.\n *\n * Supports `utf8`, `utf-8` and any encoding supported by the multibase module.\n *\n * Also `ascii` which is similar to node's 'binary' encoding.\n */\nexport function toString (array: Uint8Array, encoding: SupportedEncodings = 'utf8'): string {\n  const base = bases[encoding]\n\n  if (base == null) {\n    throw new Error(`Unsupported encoding \"${encoding}\"`)\n  }\n\n  // strip multibase prefix\n  return base.encoder.encode(array).substring(1)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,EAAE,EAA2B,MAAM,iBAAiB,CAAA;;AAW1D,SAAU,QAAQ,CAAE,KAAiB,EAAE,WAA+B,MAAM;IAChF,MAAM,IAAI,GAAG,iNAAK,CAAC,QAAQ,CAAC,CAAA;IAE5B,IAAI,IAAI,IAAI,IAAI,EAAE,CAAC;QACjB,MAAM,IAAI,KAAK,CAAC,CAAA,sBAAA,EAAyB,QAAQ,CAAA,CAAA,CAAG,CAAC,CAAA;IACvD,CAAC;IAED,yBAAyB;IACzB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;AAChD,CAAC"}},
    {"offset": {"line": 10896, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/access/node_modules/uint8arrays/dist/src/index.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/access/node_modules/uint8arrays/src/index.ts"],"sourcesContent":["/**\n * @packageDocumentation\n *\n * `Uint8Array`s bring memory-efficient(ish) byte handling to browsers - they are similar to Node.js `Buffer`s but lack a lot of the utility methods present on that class.\n *\n * This module exports a number of function that let you do common operations - joining Uint8Arrays together, seeing if they have the same contents etc.\n *\n * Since Node.js `Buffer`s are also `Uint8Array`s, it falls back to `Buffer` internally where it makes sense for performance reasons.\n *\n * ## alloc(size)\n *\n * Create a new `Uint8Array`. When running under Node.js, `Buffer` will be used in preference to `Uint8Array`.\n *\n * ### Example\n *\n * ```js\n * import { alloc } from 'uint8arrays/alloc'\n *\n * const buf = alloc(100)\n * ```\n *\n * ## allocUnsafe(size)\n *\n * Create a new `Uint8Array`. When running under Node.js, `Buffer` will be used in preference to `Uint8Array`.\n *\n * On platforms that support it, memory referenced by the returned `Uint8Array` will not be initialized.\n *\n * ### Example\n *\n * ```js\n * import { allocUnsafe } from 'uint8arrays/alloc'\n *\n * const buf = allocUnsafe(100)\n * ```\n *\n * ## compare(a, b)\n *\n * Compare two `Uint8Arrays`\n *\n * ### Example\n *\n * ```js\n * import { compare } from 'uint8arrays/compare'\n *\n * const arrays = [\n *   Uint8Array.from([3, 4, 5]),\n *   Uint8Array.from([0, 1, 2])\n * ]\n *\n * const sorted = arrays.sort(compare)\n *\n * console.info(sorted)\n * // [\n * //    Uint8Array[0, 1, 2]\n * //    Uint8Array[3, 4, 5]\n * // ]\n * ```\n *\n * ## concat(arrays, \\[length])\n *\n * Concatenate one or more `Uint8Array`s and return a `Uint8Array` with their contents.\n *\n * If you know the length of the arrays, pass it as a second parameter, otherwise it will be calculated by traversing the list of arrays.\n *\n * ### Example\n *\n * ```js\n * import { concat } from 'uint8arrays/concat'\n *\n * const arrays = [\n *   Uint8Array.from([0, 1, 2]),\n *   Uint8Array.from([3, 4, 5])\n * ]\n *\n * const all = concat(arrays, 6)\n *\n * console.info(all)\n * // Uint8Array[0, 1, 2, 3, 4, 5]\n * ```\n *\n * ## equals(a, b)\n *\n * Returns true if the two arrays are the same array or if they have the same length and contents.\n *\n * ### Example\n *\n * ```js\n * import { equals } from 'uint8arrays/equals'\n *\n * const a = Uint8Array.from([0, 1, 2])\n * const b = Uint8Array.from([3, 4, 5])\n * const c = Uint8Array.from([0, 1, 2])\n *\n * console.info(equals(a, b)) // false\n * console.info(equals(a, c)) // true\n * console.info(equals(a, a)) // true\n * ```\n *\n * ## fromString(string, encoding = 'utf8')\n *\n * Returns a new `Uint8Array` created from the passed string and interpreted as the passed encoding.\n *\n * Supports `utf8` and any of the [multibase encodings](https://github.com/multiformats/multibase/blob/master/multibase.csv) as implemented by the [multiformats module](https://www.npmjs.com/package/multiformats).\n *\n * ### Example\n *\n * ```js\n * import { fromString } from 'uint8arrays/from-string'\n *\n * console.info(fromString('hello world')) // Uint8Array[104, 101 ...\n * console.info(fromString('00010203aabbcc', 'base16')) // Uint8Array[0, 1 ...\n * console.info(fromString('AAECA6q7zA', 'base64')) // Uint8Array[0, 1 ...\n * console.info(fromString('01234', 'ascii')) // Uint8Array[48, 49 ...\n * ```\n *\n * ## toString(array, encoding = 'utf8')\n *\n * Returns a string created from the passed `Uint8Array` in the passed encoding.\n *\n * Supports `utf8` and any of the [multibase encodings](https://github.com/multiformats/multibase/blob/master/multibase.csv) as implemented by the [multiformats module](https://www.npmjs.com/package/multiformats).\n *\n * ### Example\n *\n * ```js\n * import { toString } from 'uint8arrays/to-string'\n *\n * console.info(toString(Uint8Array.from([104, 101...]))) // 'hello world'\n * console.info(toString(Uint8Array.from([0, 1, 2...]), 'base16')) // '00010203aabbcc'\n * console.info(toString(Uint8Array.from([0, 1, 2...]), 'base64')) // 'AAECA6q7zA'\n * console.info(toString(Uint8Array.from([48, 49, 50...]), 'ascii')) // '01234'\n * ```\n *\n * ## xor(a, b)\n *\n * Returns a `Uint8Array` containing `a` and `b` xored together.\n *\n * ### Example\n *\n * ```js\n * import { xor } from 'uint8arrays/xor'\n *\n * console.info(xor(Uint8Array.from([1, 0]), Uint8Array.from([0, 1]))) // Uint8Array[1, 1]\n * ```\n *\n * ## xorCompare(a, b)\n *\n * Compares the distances between two xor `Uint8Array`s.\n *\n * ### Example\n *\n * ```ts\n * import { xor } from 'uint8arrays/xor'\n * import { xorCompare } from 'uint8arrays/xor-compare'\n *\n * const target = Uint8Array.from([1, 1])\n * const val1 = Uint8Array.from([1, 0])\n * const xor1 = xor(target, val1)\n *\n * const val2 = Uint8Array.from([0, 1])\n * const xor2 = xor(target, val2)\n *\n * console.info(xorCompare(xor1, xor2)) // -1 or 0 or 1\n * ```\n */\n\nimport { equals } from './equals.js'\nimport { xor } from './xor.js'\nimport { compare } from '#compare'\nimport { concat } from '#concat'\nimport { fromString } from '#from-string'\nimport { toString } from '#to-string'\n\nexport {\n  compare,\n  concat,\n  equals,\n  fromString,\n  toString,\n  xor\n}\n\nexport type { SupportedEncodings } from './util/bases.js'\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAmKG;AAEH,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAA;AACpC,OAAO,EAAE,GAAG,EAAE,MAAM,UAAU,CAAA;AAC9B,OAAO,EAAE,OAAO,EAAE,MAAM,UAAU,CAAA;AAClC,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAA;AAChC,OAAO,EAAE,UAAU,EAAE,MAAM,cAAc,CAAA;AACzC,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAA"}},
    {"offset": {"line": 11078, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/equals.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/equals.ts"],"sourcesContent":["/**\n * Returns true if the two passed Uint8Arrays have the same content\n */\nexport function equals (a: Uint8Array, b: Uint8Array): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (a.byteLength !== b.byteLength) {\n    return false\n  }\n\n  for (let i = 0; i < a.byteLength; i++) {\n    if (a[i] !== b[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n"],"names":[],"mappings":"AAAA;;GAEG;;;;AACG,SAAU,MAAM,CAAE,CAAa,EAAE,CAAa;IAClD,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;QACZ,OAAO,IAAI,CAAA;IACb,CAAC;IAED,IAAI,CAAC,CAAC,UAAU,KAAK,CAAC,CAAC,UAAU,EAAE,CAAC;QAClC,OAAO,KAAK,CAAA;IACd,CAAC;IAED,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC,EAAE,CAAE,CAAC;QACtC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAClB,OAAO,KAAK,CAAA;QACd,CAAC;IACH,CAAC;IAED,OAAO,IAAI,CAAA;AACb,CAAC"}},
    {"offset": {"line": 11102, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/alloc.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/alloc.ts"],"sourcesContent":["/**\n * Returns a `Uint8Array` of the requested size. Referenced memory will\n * be initialized to 0.\n */\nexport function alloc (size: number = 0): Uint8Array {\n  return new Uint8Array(size)\n}\n\n/**\n * Where possible returns a Uint8Array of the requested size that references\n * uninitialized memory. Only use if you are certain you will immediately\n * overwrite every value in the returned `Uint8Array`.\n */\nexport function allocUnsafe (size: number = 0): Uint8Array {\n  return new Uint8Array(size)\n}\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;;;AACG,SAAU,KAAK,CAAE,OAAe,CAAC;IACrC,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,CAAA;AAC7B,CAAC;AAOK,SAAU,WAAW,CAAE,OAAe,CAAC;IAC3C,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 11121, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/util/as-uint8array.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/util/as-uint8array.ts"],"sourcesContent":["/**\n * To guarantee Uint8Array semantics, convert nodejs Buffers\n * into vanilla Uint8Arrays\n */\nexport function asUint8Array (buf: Uint8Array): Uint8Array {\n  return buf\n}\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;AACG,SAAU,YAAY,CAAE,GAAe;IAC3C,OAAO,GAAG,CAAA;AACZ,CAAC"}},
    {"offset": {"line": 11135, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/xor.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/xor.ts"],"sourcesContent":["import { allocUnsafe } from '#alloc'\nimport { asUint8Array } from '#util/as-uint8array'\n\n/**\n * Returns the xor distance between two Uint8Arrays\n */\nexport function xor (a: Uint8Array, b: Uint8Array): Uint8Array {\n  if (a.length !== b.length) {\n    throw new Error('Inputs should have the same length')\n  }\n\n  const result = allocUnsafe(a.length)\n\n  for (let i = 0; i < a.length; i++) {\n    result[i] = a[i] ^ b[i]\n  }\n\n  return asUint8Array(result)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAA;AACpC,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAA;;;AAK5C,SAAU,GAAG,CAAE,CAAa,EAAE,CAAa;IAC/C,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAA;IACvD,CAAC;IAED,MAAM,MAAM,OAAG,oNAAW,EAAC,CAAC,CAAC,MAAM,CAAC,CAAA;IAEpC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;QAClC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;IACzB,CAAC;IAED,WAAO,wOAAY,EAAC,MAAM,CAAC,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 11157, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/compare.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/compare.ts"],"sourcesContent":["/**\n * Can be used with Array.sort to sort and array with Uint8Array entries\n */\nexport function compare (a: Uint8Array, b: Uint8Array): number {\n  for (let i = 0; i < a.byteLength; i++) {\n    if (a[i] < b[i]) {\n      return -1\n    }\n\n    if (a[i] > b[i]) {\n      return 1\n    }\n  }\n\n  if (a.byteLength > b.byteLength) {\n    return 1\n  }\n\n  if (a.byteLength < b.byteLength) {\n    return -1\n  }\n\n  return 0\n}\n"],"names":[],"mappings":"AAAA;;GAEG;;;;AACG,SAAU,OAAO,CAAE,CAAa,EAAE,CAAa;IACnD,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC,EAAE,CAAE,CAAC;QACtC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAChB,OAAO,CAAC,CAAC,CAAA;QACX,CAAC;QAED,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAChB,OAAO,CAAC,CAAA;QACV,CAAC;IACH,CAAC;IAED,IAAI,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC;QAChC,OAAO,CAAC,CAAA;IACV,CAAC;IAED,IAAI,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC;QAChC,OAAO,CAAC,CAAC,CAAA;IACX,CAAC;IAED,OAAO,CAAC,CAAA;AACV,CAAC"}},
    {"offset": {"line": 11184, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/concat.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/concat.ts"],"sourcesContent":["import { allocUnsafe } from '#alloc'\nimport { asUint8Array } from '#util/as-uint8array'\n\n/**\n * Returns a new Uint8Array created by concatenating the passed Uint8Arrays\n */\nexport function concat (arrays: Uint8Array[], length?: number): Uint8Array {\n  if (length == null) {\n    length = arrays.reduce((acc, curr) => acc + curr.length, 0)\n  }\n\n  const output = allocUnsafe(length)\n  let offset = 0\n\n  for (const arr of arrays) {\n    output.set(arr, offset)\n    offset += arr.length\n  }\n\n  return asUint8Array(output)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAA;AACpC,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAA;;;AAK5C,SAAU,MAAM,CAAE,MAAoB,EAAE,MAAe;IAC3D,IAAI,MAAM,IAAI,IAAI,EAAE,CAAC;QACnB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAG,CAAD,EAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAA;IAC7D,CAAC;IAED,MAAM,MAAM,OAAG,oNAAW,EAAC,MAAM,CAAC,CAAA;IAClC,IAAI,MAAM,GAAG,CAAC,CAAA;IAEd,KAAK,MAAM,GAAG,IAAI,MAAM,CAAE,CAAC;QACzB,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAA;QACvB,MAAM,IAAI,GAAG,CAAC,MAAM,CAAA;IACtB,CAAC;IAED,WAAO,wOAAY,EAAC,MAAM,CAAC,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 11208, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/util/bases.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/util/bases.ts"],"sourcesContent":["import { bases } from 'multiformats/basics'\nimport type { MultibaseCodec } from 'multiformats'\nimport { allocUnsafe } from '#alloc'\n\nfunction createCodec (name: string, prefix: string, encode: (buf: Uint8Array) => string, decode: (str: string) => Uint8Array): MultibaseCodec<any> {\n  return {\n    name,\n    prefix,\n    encoder: {\n      name,\n      prefix,\n      encode\n    },\n    decoder: {\n      decode\n    }\n  }\n}\n\nconst string = createCodec('utf8', 'u', (buf) => {\n  const decoder = new TextDecoder('utf8')\n  return 'u' + decoder.decode(buf)\n}, (str) => {\n  const encoder = new TextEncoder()\n  return encoder.encode(str.substring(1))\n})\n\nconst ascii = createCodec('ascii', 'a', (buf) => {\n  let string = 'a'\n\n  for (let i = 0; i < buf.length; i++) {\n    string += String.fromCharCode(buf[i])\n  }\n  return string\n}, (str) => {\n  str = str.substring(1)\n  const buf = allocUnsafe(str.length)\n\n  for (let i = 0; i < str.length; i++) {\n    buf[i] = str.charCodeAt(i)\n  }\n\n  return buf\n})\n\nexport type SupportedEncodings = 'utf8' | 'utf-8' | 'hex' | 'latin1' | 'ascii' | 'binary' | keyof typeof bases\n\nconst BASES: Record<SupportedEncodings, MultibaseCodec<any>> = {\n  utf8: string,\n  'utf-8': string,\n  hex: bases.base16,\n  latin1: ascii,\n  ascii,\n  binary: ascii,\n\n  ...bases\n}\n\nexport default BASES\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,qBAAqB,CAAA;AAE3C,OAAO,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAA;;;AAEpC,SAAS,WAAW,CAAE,IAAY,EAAE,MAAc,EAAE,MAAmC,EAAE,MAAmC;IAC1H,OAAO;QACL,IAAI;QACJ,MAAM;QACN,OAAO,EAAE;YACP,IAAI;YACJ,MAAM;YACN,MAAM;SACP;QACD,OAAO,EAAE;YACP,MAAM;SACP;KACF,CAAA;AACH,CAAC;AAED,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE;IAC9C,MAAM,OAAO,GAAG,IAAI,WAAW,CAAC,MAAM,CAAC,CAAA;IACvC,OAAO,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;AAClC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;IACT,MAAM,OAAO,GAAG,IAAI,WAAW,EAAE,CAAA;IACjC,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAA;AACzC,CAAC,CAAC,CAAA;AAEF,MAAM,KAAK,GAAG,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE;IAC9C,IAAI,MAAM,GAAG,GAAG,CAAA;IAEhB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;QACpC,MAAM,IAAI,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;IACvC,CAAC;IACD,OAAO,MAAM,CAAA;AACf,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;IACT,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;IACtB,MAAM,GAAG,OAAG,oNAAW,EAAC,GAAG,CAAC,MAAM,CAAC,CAAA;IAEnC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;QACpC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAA;IAC5B,CAAC;IAED,OAAO,GAAG,CAAA;AACZ,CAAC,CAAC,CAAA;AAIF,MAAM,KAAK,GAAoD;IAC7D,IAAI,EAAE,MAAM;IACZ,OAAO,EAAE,MAAM;IACf,GAAG,EAAE,iLAAK,CAAC,MAAM;IACjB,MAAM,EAAE,KAAK;IACb,KAAK;IACL,MAAM,EAAE,KAAK;IAEb,GAAG,iLAAK;CACT,CAAA;uCAEc,KAAK,CAAA"}},
    {"offset": {"line": 11266, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/from-string.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/from-string.ts"],"sourcesContent":["import bases, { type SupportedEncodings } from './util/bases.js'\n\nexport type { SupportedEncodings }\n\n/**\n * Create a `Uint8Array` from the passed string\n *\n * Supports `utf8`, `utf-8`, `hex`, and any encoding supported by the multiformats module.\n *\n * Also `ascii` which is similar to node's 'binary' encoding.\n */\nexport function fromString (string: string, encoding: SupportedEncodings = 'utf8'): Uint8Array {\n  const base = bases[encoding]\n\n  if (base == null) {\n    throw new Error(`Unsupported encoding \"${encoding}\"`)\n  }\n\n  // add multibase prefix\n  return base.decoder.decode(`${base.prefix}${string}`) // eslint-disable-line @typescript-eslint/restrict-template-expressions\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,EAAE,EAA2B,MAAM,iBAAiB,CAAA;;AAW1D,SAAU,UAAU,CAAE,MAAc,EAAE,WAA+B,MAAM;IAC/E,MAAM,IAAI,GAAG,wNAAK,CAAC,QAAQ,CAAC,CAAA;IAE5B,IAAI,IAAI,IAAI,IAAI,EAAE,CAAC;QACjB,MAAM,IAAI,KAAK,CAAC,CAAA,sBAAA,EAAyB,QAAQ,CAAA,CAAA,CAAG,CAAC,CAAA;IACvD,CAAC;IAED,uBAAuB;IACvB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,MAAM,EAAE,CAAC,CAAA,CAAC,uEAAuE;AAC/H,CAAC"}},
    {"offset": {"line": 11284, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/to-string.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/to-string.ts"],"sourcesContent":["import bases, { type SupportedEncodings } from './util/bases.js'\n\nexport type { SupportedEncodings }\n\n/**\n * Turns a `Uint8Array` into a string.\n *\n * Supports `utf8`, `utf-8` and any encoding supported by the multibase module.\n *\n * Also `ascii` which is similar to node's 'binary' encoding.\n */\nexport function toString (array: Uint8Array, encoding: SupportedEncodings = 'utf8'): string {\n  const base = bases[encoding]\n\n  if (base == null) {\n    throw new Error(`Unsupported encoding \"${encoding}\"`)\n  }\n\n  // strip multibase prefix\n  return base.encoder.encode(array).substring(1)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,EAAE,EAA2B,MAAM,iBAAiB,CAAA;;AAW1D,SAAU,QAAQ,CAAE,KAAiB,EAAE,WAA+B,MAAM;IAChF,MAAM,IAAI,GAAG,wNAAK,CAAC,QAAQ,CAAC,CAAA;IAE5B,IAAI,IAAI,IAAI,IAAI,EAAE,CAAC;QACjB,MAAM,IAAI,KAAK,CAAC,CAAA,sBAAA,EAAyB,QAAQ,CAAA,CAAA,CAAG,CAAC,CAAA;IACvD,CAAC;IAED,yBAAyB;IACzB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;AAChD,CAAC"}},
    {"offset": {"line": 11302, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@storacha/blob-index/node_modules/uint8arrays/dist/src/index.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/node_modules/uint8arrays/src/index.ts"],"sourcesContent":["/**\n * @packageDocumentation\n *\n * `Uint8Array`s bring memory-efficient(ish) byte handling to browsers - they are similar to Node.js `Buffer`s but lack a lot of the utility methods present on that class.\n *\n * This module exports a number of function that let you do common operations - joining Uint8Arrays together, seeing if they have the same contents etc.\n *\n * Since Node.js `Buffer`s are also `Uint8Array`s, it falls back to `Buffer` internally where it makes sense for performance reasons.\n *\n * ## alloc(size)\n *\n * Create a new `Uint8Array`. When running under Node.js, `Buffer` will be used in preference to `Uint8Array`.\n *\n * ### Example\n *\n * ```js\n * import { alloc } from 'uint8arrays/alloc'\n *\n * const buf = alloc(100)\n * ```\n *\n * ## allocUnsafe(size)\n *\n * Create a new `Uint8Array`. When running under Node.js, `Buffer` will be used in preference to `Uint8Array`.\n *\n * On platforms that support it, memory referenced by the returned `Uint8Array` will not be initialized.\n *\n * ### Example\n *\n * ```js\n * import { allocUnsafe } from 'uint8arrays/alloc'\n *\n * const buf = allocUnsafe(100)\n * ```\n *\n * ## compare(a, b)\n *\n * Compare two `Uint8Arrays`\n *\n * ### Example\n *\n * ```js\n * import { compare } from 'uint8arrays/compare'\n *\n * const arrays = [\n *   Uint8Array.from([3, 4, 5]),\n *   Uint8Array.from([0, 1, 2])\n * ]\n *\n * const sorted = arrays.sort(compare)\n *\n * console.info(sorted)\n * // [\n * //    Uint8Array[0, 1, 2]\n * //    Uint8Array[3, 4, 5]\n * // ]\n * ```\n *\n * ## concat(arrays, \\[length])\n *\n * Concatenate one or more `Uint8Array`s and return a `Uint8Array` with their contents.\n *\n * If you know the length of the arrays, pass it as a second parameter, otherwise it will be calculated by traversing the list of arrays.\n *\n * ### Example\n *\n * ```js\n * import { concat } from 'uint8arrays/concat'\n *\n * const arrays = [\n *   Uint8Array.from([0, 1, 2]),\n *   Uint8Array.from([3, 4, 5])\n * ]\n *\n * const all = concat(arrays, 6)\n *\n * console.info(all)\n * // Uint8Array[0, 1, 2, 3, 4, 5]\n * ```\n *\n * ## equals(a, b)\n *\n * Returns true if the two arrays are the same array or if they have the same length and contents.\n *\n * ### Example\n *\n * ```js\n * import { equals } from 'uint8arrays/equals'\n *\n * const a = Uint8Array.from([0, 1, 2])\n * const b = Uint8Array.from([3, 4, 5])\n * const c = Uint8Array.from([0, 1, 2])\n *\n * console.info(equals(a, b)) // false\n * console.info(equals(a, c)) // true\n * console.info(equals(a, a)) // true\n * ```\n *\n * ## fromString(string, encoding = 'utf8')\n *\n * Returns a new `Uint8Array` created from the passed string and interpreted as the passed encoding.\n *\n * Supports `utf8` and any of the [multibase encodings](https://github.com/multiformats/multibase/blob/master/multibase.csv) as implemented by the [multiformats module](https://www.npmjs.com/package/multiformats).\n *\n * ### Example\n *\n * ```js\n * import { fromString } from 'uint8arrays/from-string'\n *\n * console.info(fromString('hello world')) // Uint8Array[104, 101 ...\n * console.info(fromString('00010203aabbcc', 'base16')) // Uint8Array[0, 1 ...\n * console.info(fromString('AAECA6q7zA', 'base64')) // Uint8Array[0, 1 ...\n * console.info(fromString('01234', 'ascii')) // Uint8Array[48, 49 ...\n * ```\n *\n * ## toString(array, encoding = 'utf8')\n *\n * Returns a string created from the passed `Uint8Array` in the passed encoding.\n *\n * Supports `utf8` and any of the [multibase encodings](https://github.com/multiformats/multibase/blob/master/multibase.csv) as implemented by the [multiformats module](https://www.npmjs.com/package/multiformats).\n *\n * ### Example\n *\n * ```js\n * import { toString } from 'uint8arrays/to-string'\n *\n * console.info(toString(Uint8Array.from([104, 101...]))) // 'hello world'\n * console.info(toString(Uint8Array.from([0, 1, 2...]), 'base16')) // '00010203aabbcc'\n * console.info(toString(Uint8Array.from([0, 1, 2...]), 'base64')) // 'AAECA6q7zA'\n * console.info(toString(Uint8Array.from([48, 49, 50...]), 'ascii')) // '01234'\n * ```\n *\n * ## xor(a, b)\n *\n * Returns a `Uint8Array` containing `a` and `b` xored together.\n *\n * ### Example\n *\n * ```js\n * import { xor } from 'uint8arrays/xor'\n *\n * console.info(xor(Uint8Array.from([1, 0]), Uint8Array.from([0, 1]))) // Uint8Array[1, 1]\n * ```\n *\n * ## xorCompare(a, b)\n *\n * Compares the distances between two xor `Uint8Array`s.\n *\n * ### Example\n *\n * ```ts\n * import { xor } from 'uint8arrays/xor'\n * import { xorCompare } from 'uint8arrays/xor-compare'\n *\n * const target = Uint8Array.from([1, 1])\n * const val1 = Uint8Array.from([1, 0])\n * const xor1 = xor(target, val1)\n *\n * const val2 = Uint8Array.from([0, 1])\n * const xor2 = xor(target, val2)\n *\n * console.info(xorCompare(xor1, xor2)) // -1 or 0 or 1\n * ```\n */\n\nimport { equals } from './equals.js'\nimport { xor } from './xor.js'\nimport { compare } from '#compare'\nimport { concat } from '#concat'\nimport { fromString } from '#from-string'\nimport { toString } from '#to-string'\n\nexport {\n  compare,\n  concat,\n  equals,\n  fromString,\n  toString,\n  xor\n}\n\nexport type { SupportedEncodings } from './util/bases.js'\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAmKG;AAEH,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAA;AACpC,OAAO,EAAE,GAAG,EAAE,MAAM,UAAU,CAAA;AAC9B,OAAO,EAAE,OAAO,EAAE,MAAM,UAAU,CAAA;AAClC,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAA;AAChC,OAAO,EAAE,UAAU,EAAE,MAAM,cAAc,CAAA;AACzC,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAA"}},
    {"offset": {"line": 11484, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/uint8arraylist/node_modules/uint8arrays/dist/src/alloc.js","sources":["file:///home/driemworks/fangorn/website/node_modules/uint8arraylist/node_modules/uint8arrays/src/alloc.ts"],"sourcesContent":["/**\n * Returns a `Uint8Array` of the requested size. Referenced memory will\n * be initialized to 0.\n */\nexport function alloc (size: number = 0): Uint8Array {\n  return new Uint8Array(size)\n}\n\n/**\n * Where possible returns a Uint8Array of the requested size that references\n * uninitialized memory. Only use if you are certain you will immediately\n * overwrite every value in the returned `Uint8Array`.\n */\nexport function allocUnsafe (size: number = 0): Uint8Array {\n  return new Uint8Array(size)\n}\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;;;AACG,SAAU,KAAK,CAAE,OAAe,CAAC;IACrC,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,CAAA;AAC7B,CAAC;AAOK,SAAU,WAAW,CAAE,OAAe,CAAC;IAC3C,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 11503, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/uint8arraylist/node_modules/uint8arrays/dist/src/util/as-uint8array.js","sources":["file:///home/driemworks/fangorn/website/node_modules/uint8arraylist/node_modules/uint8arrays/src/util/as-uint8array.ts"],"sourcesContent":["/**\n * To guarantee Uint8Array semantics, convert nodejs Buffers\n * into vanilla Uint8Arrays\n */\nexport function asUint8Array (buf: Uint8Array): Uint8Array {\n  return buf\n}\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;AACG,SAAU,YAAY,CAAE,GAAe;IAC3C,OAAO,GAAG,CAAA;AACZ,CAAC"}},
    {"offset": {"line": 11517, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/uint8arraylist/node_modules/uint8arrays/dist/src/concat.js","sources":["file:///home/driemworks/fangorn/website/node_modules/uint8arraylist/node_modules/uint8arrays/src/concat.ts"],"sourcesContent":["import { allocUnsafe } from '#alloc'\nimport { asUint8Array } from '#util/as-uint8array'\n\n/**\n * Returns a new Uint8Array created by concatenating the passed Uint8Arrays\n */\nexport function concat (arrays: Uint8Array[], length?: number): Uint8Array {\n  if (length == null) {\n    length = arrays.reduce((acc, curr) => acc + curr.length, 0)\n  }\n\n  const output = allocUnsafe(length)\n  let offset = 0\n\n  for (const arr of arrays) {\n    output.set(arr, offset)\n    offset += arr.length\n  }\n\n  return asUint8Array(output)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAA;AACpC,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAA;;;AAK5C,SAAU,MAAM,CAAE,MAAoB,EAAE,MAAe;IAC3D,IAAI,MAAM,IAAI,IAAI,EAAE,CAAC;QACnB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAG,CAAD,EAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAA;IAC7D,CAAC;IAED,MAAM,MAAM,OAAG,uMAAW,EAAC,MAAM,CAAC,CAAA;IAClC,IAAI,MAAM,GAAG,CAAC,CAAA;IAEd,KAAK,MAAM,GAAG,IAAI,MAAM,CAAE,CAAC;QACzB,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAA;QACvB,MAAM,IAAI,GAAG,CAAC,MAAM,CAAA;IACtB,CAAC;IAED,WAAO,2NAAY,EAAC,MAAM,CAAC,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 11541, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/uint8arraylist/node_modules/uint8arrays/dist/src/equals.js","sources":["file:///home/driemworks/fangorn/website/node_modules/uint8arraylist/node_modules/uint8arrays/src/equals.ts"],"sourcesContent":["/**\n * Returns true if the two passed Uint8Arrays have the same content\n */\nexport function equals (a: Uint8Array, b: Uint8Array): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (a.byteLength !== b.byteLength) {\n    return false\n  }\n\n  for (let i = 0; i < a.byteLength; i++) {\n    if (a[i] !== b[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n"],"names":[],"mappings":"AAAA;;GAEG;;;;AACG,SAAU,MAAM,CAAE,CAAa,EAAE,CAAa;IAClD,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;QACZ,OAAO,IAAI,CAAA;IACb,CAAC;IAED,IAAI,CAAC,CAAC,UAAU,KAAK,CAAC,CAAC,UAAU,EAAE,CAAC;QAClC,OAAO,KAAK,CAAA;IACd,CAAC;IAED,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC,EAAE,CAAE,CAAC;QACtC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAClB,OAAO,KAAK,CAAA;QACd,CAAC;IACH,CAAC;IAED,OAAO,IAAI,CAAA;AACb,CAAC"}},
    {"offset": {"line": 11565, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40noble/ed25519/lib/esm/index.js"],"sourcesContent":["/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */\nimport * as nodeCrypto from 'crypto';\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _8n = BigInt(8);\nconst CU_O = BigInt('7237005577332262213973186563042994240857116359379907606001950938285454250989');\nconst CURVE = Object.freeze({\n    a: BigInt(-1),\n    d: BigInt('37095705934669439343138083508754565189542113879843219016388785533085940283555'),\n    P: BigInt('57896044618658097711785492504343953926634992332820282019728792003956564819949'),\n    l: CU_O,\n    n: CU_O,\n    h: BigInt(8),\n    Gx: BigInt('15112221349535400772501151409588531511454012693041857206046113283949847762202'),\n    Gy: BigInt('46316835694926478169428394003475163141307993866256225615783033603165251855960'),\n});\nexport { CURVE };\nconst POW_2_256 = BigInt('0x10000000000000000000000000000000000000000000000000000000000000000');\nconst SQRT_M1 = BigInt('19681161376707505956807079304988542015446066515923890162744021073123829784752');\nconst SQRT_D = BigInt('6853475219497561581579357271197624642482790079785650197046958215289687604742');\nconst SQRT_AD_MINUS_ONE = BigInt('25063068953384623474111414158702152701244531502492656460079210482610430750235');\nconst INVSQRT_A_MINUS_D = BigInt('54469307008909316920995813868745141605393597292927456921205312896311721017578');\nconst ONE_MINUS_D_SQ = BigInt('1159843021668779879193775521855586647937357759715417654439879720876111806838');\nconst D_MINUS_ONE_SQ = BigInt('40440834346308536858101042469323190826248399146238708352240133220865137265952');\nclass ExtendedPoint {\n    constructor(x, y, z, t) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.t = t;\n    }\n    static fromAffine(p) {\n        if (!(p instanceof Point)) {\n            throw new TypeError('ExtendedPoint#fromAffine: expected Point');\n        }\n        if (p.equals(Point.ZERO))\n            return ExtendedPoint.ZERO;\n        return new ExtendedPoint(p.x, p.y, _1n, mod(p.x * p.y));\n    }\n    static toAffineBatch(points) {\n        const toInv = invertBatch(points.map((p) => p.z));\n        return points.map((p, i) => p.toAffine(toInv[i]));\n    }\n    static normalizeZ(points) {\n        return this.toAffineBatch(points).map(this.fromAffine);\n    }\n    equals(other) {\n        assertExtPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        const X1Z2 = mod(X1 * Z2);\n        const X2Z1 = mod(X2 * Z1);\n        const Y1Z2 = mod(Y1 * Z2);\n        const Y2Z1 = mod(Y2 * Z1);\n        return X1Z2 === X2Z1 && Y1Z2 === Y2Z1;\n    }\n    negate() {\n        return new ExtendedPoint(mod(-this.x), this.y, this.z, mod(-this.t));\n    }\n    double() {\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { a } = CURVE;\n        const M = mod;\n        const A = M(X1 * X1);\n        const B = M(Y1 * Y1);\n        const C = M(_2n * M(Z1 * Z1));\n        const D = M(a * A);\n        const x1y1 = X1 + Y1;\n        const E = M(M(x1y1 * x1y1) - A - B);\n        const G = D + B;\n        const F = G - C;\n        const H = D - B;\n        const X3 = M(E * F);\n        const Y3 = M(G * H);\n        const T3 = M(E * H);\n        const Z3 = M(F * G);\n        return new ExtendedPoint(X3, Y3, Z3, T3);\n    }\n    add(other) {\n        const { x: X1, y: Y1, z: Z1, t: T1 } = this;\n        assertExtPoint(other);\n        const { x: X2, y: Y2, z: Z2, t: T2 } = other;\n        const { a, d } = CURVE;\n        const M = mod;\n        const A = M(X1 * X2);\n        const B = M(Y1 * Y2);\n        const C = M(T1 * d * T2);\n        const D = M(Z1 * Z2);\n        const E = M((X1 + Y1) * (X2 + Y2) - A - B);\n        const F = M(D - C);\n        const G = M(D + C);\n        const H = M(B - a * A);\n        const X3 = M(E * F);\n        const Y3 = M(G * H);\n        const T3 = M(E * H);\n        const Z3 = M(F * G);\n        return new ExtendedPoint(X3, Y3, Z3, T3);\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    precomputeWindow(W) {\n        const windows = 1 + 256 / W;\n        const points = [];\n        let p = this;\n        let base = p;\n        for (let window = 0; window < windows; window++) {\n            base = p;\n            points.push(base);\n            for (let i = 1; i < 2 ** (W - 1); i++) {\n                base = base.add(p);\n                points.push(base);\n            }\n            p = base.double();\n        }\n        return points;\n    }\n    wNAF(n, affinePoint) {\n        if (!affinePoint && this.equals(ExtendedPoint.BASE))\n            affinePoint = Point.BASE;\n        const W = (affinePoint && affinePoint._WINDOW_SIZE) || 1;\n        if (256 % W) {\n            throw new Error('Point#wNAF: Invalid precomputation window, must be power of 2');\n        }\n        let precomputes = affinePoint && pointPrecomputes.get(affinePoint);\n        if (!precomputes) {\n            precomputes = this.precomputeWindow(W);\n            if (affinePoint && W !== 1) {\n                precomputes = ExtendedPoint.normalizeZ(precomputes);\n                pointPrecomputes.set(affinePoint, precomputes);\n            }\n        }\n        let p = ExtendedPoint.ZERO;\n        let f = ExtendedPoint.BASE;\n        const windows = 1 + 256 / W;\n        const windowSize = 2 ** (W - 1);\n        const mask = BigInt(2 ** W - 1);\n        const maxNumber = 2 ** W;\n        const shiftBy = BigInt(W);\n        for (let window = 0; window < windows; window++) {\n            const offset = window * windowSize;\n            let wbits = Number(n & mask);\n            n >>= shiftBy;\n            if (wbits > windowSize) {\n                wbits -= maxNumber;\n                n += _1n;\n            }\n            const offset1 = offset;\n            const offset2 = offset + Math.abs(wbits) - 1;\n            const cond1 = window % 2 !== 0;\n            const cond2 = wbits < 0;\n            if (wbits === 0) {\n                f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n            }\n            else {\n                p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n            }\n        }\n        return ExtendedPoint.normalizeZ([p, f])[0];\n    }\n    multiply(scalar, affinePoint) {\n        return this.wNAF(normalizeScalar(scalar, CURVE.l), affinePoint);\n    }\n    multiplyUnsafe(scalar) {\n        let n = normalizeScalar(scalar, CURVE.l, false);\n        const G = ExtendedPoint.BASE;\n        const P0 = ExtendedPoint.ZERO;\n        if (n === _0n)\n            return P0;\n        if (this.equals(P0) || n === _1n)\n            return this;\n        if (this.equals(G))\n            return this.wNAF(n);\n        let p = P0;\n        let d = this;\n        while (n > _0n) {\n            if (n & _1n)\n                p = p.add(d);\n            d = d.double();\n            n >>= _1n;\n        }\n        return p;\n    }\n    isSmallOrder() {\n        return this.multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO);\n    }\n    isTorsionFree() {\n        let p = this.multiplyUnsafe(CURVE.l / _2n).double();\n        if (CURVE.l % _2n)\n            p = p.add(this);\n        return p.equals(ExtendedPoint.ZERO);\n    }\n    toAffine(invZ) {\n        const { x, y, z } = this;\n        const is0 = this.equals(ExtendedPoint.ZERO);\n        if (invZ == null)\n            invZ = is0 ? _8n : invert(z);\n        const ax = mod(x * invZ);\n        const ay = mod(y * invZ);\n        const zz = mod(z * invZ);\n        if (is0)\n            return Point.ZERO;\n        if (zz !== _1n)\n            throw new Error('invZ was invalid');\n        return new Point(ax, ay);\n    }\n    fromRistrettoBytes() {\n        legacyRist();\n    }\n    toRistrettoBytes() {\n        legacyRist();\n    }\n    fromRistrettoHash() {\n        legacyRist();\n    }\n}\nExtendedPoint.BASE = new ExtendedPoint(CURVE.Gx, CURVE.Gy, _1n, mod(CURVE.Gx * CURVE.Gy));\nExtendedPoint.ZERO = new ExtendedPoint(_0n, _1n, _1n, _0n);\nfunction constTimeNegate(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n}\nfunction assertExtPoint(other) {\n    if (!(other instanceof ExtendedPoint))\n        throw new TypeError('ExtendedPoint expected');\n}\nfunction assertRstPoint(other) {\n    if (!(other instanceof RistrettoPoint))\n        throw new TypeError('RistrettoPoint expected');\n}\nfunction legacyRist() {\n    throw new Error('Legacy method: switch to RistrettoPoint');\n}\nclass RistrettoPoint {\n    constructor(ep) {\n        this.ep = ep;\n    }\n    static calcElligatorRistrettoMap(r0) {\n        const { d } = CURVE;\n        const r = mod(SQRT_M1 * r0 * r0);\n        const Ns = mod((r + _1n) * ONE_MINUS_D_SQ);\n        let c = BigInt(-1);\n        const D = mod((c - d * r) * mod(r + d));\n        let { isValid: Ns_D_is_sq, value: s } = uvRatio(Ns, D);\n        let s_ = mod(s * r0);\n        if (!edIsNegative(s_))\n            s_ = mod(-s_);\n        if (!Ns_D_is_sq)\n            s = s_;\n        if (!Ns_D_is_sq)\n            c = r;\n        const Nt = mod(c * (r - _1n) * D_MINUS_ONE_SQ - D);\n        const s2 = s * s;\n        const W0 = mod((s + s) * D);\n        const W1 = mod(Nt * SQRT_AD_MINUS_ONE);\n        const W2 = mod(_1n - s2);\n        const W3 = mod(_1n + s2);\n        return new ExtendedPoint(mod(W0 * W3), mod(W2 * W1), mod(W1 * W3), mod(W0 * W2));\n    }\n    static hashToCurve(hex) {\n        hex = ensureBytes(hex, 64);\n        const r1 = bytes255ToNumberLE(hex.slice(0, 32));\n        const R1 = this.calcElligatorRistrettoMap(r1);\n        const r2 = bytes255ToNumberLE(hex.slice(32, 64));\n        const R2 = this.calcElligatorRistrettoMap(r2);\n        return new RistrettoPoint(R1.add(R2));\n    }\n    static fromHex(hex) {\n        hex = ensureBytes(hex, 32);\n        const { a, d } = CURVE;\n        const emsg = 'RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint';\n        const s = bytes255ToNumberLE(hex);\n        if (!equalBytes(numberTo32BytesLE(s), hex) || edIsNegative(s))\n            throw new Error(emsg);\n        const s2 = mod(s * s);\n        const u1 = mod(_1n + a * s2);\n        const u2 = mod(_1n - a * s2);\n        const u1_2 = mod(u1 * u1);\n        const u2_2 = mod(u2 * u2);\n        const v = mod(a * d * u1_2 - u2_2);\n        const { isValid, value: I } = invertSqrt(mod(v * u2_2));\n        const Dx = mod(I * u2);\n        const Dy = mod(I * Dx * v);\n        let x = mod((s + s) * Dx);\n        if (edIsNegative(x))\n            x = mod(-x);\n        const y = mod(u1 * Dy);\n        const t = mod(x * y);\n        if (!isValid || edIsNegative(t) || y === _0n)\n            throw new Error(emsg);\n        return new RistrettoPoint(new ExtendedPoint(x, y, _1n, t));\n    }\n    toRawBytes() {\n        let { x, y, z, t } = this.ep;\n        const u1 = mod(mod(z + y) * mod(z - y));\n        const u2 = mod(x * y);\n        const u2sq = mod(u2 * u2);\n        const { value: invsqrt } = invertSqrt(mod(u1 * u2sq));\n        const D1 = mod(invsqrt * u1);\n        const D2 = mod(invsqrt * u2);\n        const zInv = mod(D1 * D2 * t);\n        let D;\n        if (edIsNegative(t * zInv)) {\n            let _x = mod(y * SQRT_M1);\n            let _y = mod(x * SQRT_M1);\n            x = _x;\n            y = _y;\n            D = mod(D1 * INVSQRT_A_MINUS_D);\n        }\n        else {\n            D = D2;\n        }\n        if (edIsNegative(x * zInv))\n            y = mod(-y);\n        let s = mod((z - y) * D);\n        if (edIsNegative(s))\n            s = mod(-s);\n        return numberTo32BytesLE(s);\n    }\n    toHex() {\n        return bytesToHex(this.toRawBytes());\n    }\n    toString() {\n        return this.toHex();\n    }\n    equals(other) {\n        assertRstPoint(other);\n        const a = this.ep;\n        const b = other.ep;\n        const one = mod(a.x * b.y) === mod(a.y * b.x);\n        const two = mod(a.y * b.y) === mod(a.x * b.x);\n        return one || two;\n    }\n    add(other) {\n        assertRstPoint(other);\n        return new RistrettoPoint(this.ep.add(other.ep));\n    }\n    subtract(other) {\n        assertRstPoint(other);\n        return new RistrettoPoint(this.ep.subtract(other.ep));\n    }\n    multiply(scalar) {\n        return new RistrettoPoint(this.ep.multiply(scalar));\n    }\n    multiplyUnsafe(scalar) {\n        return new RistrettoPoint(this.ep.multiplyUnsafe(scalar));\n    }\n}\nRistrettoPoint.BASE = new RistrettoPoint(ExtendedPoint.BASE);\nRistrettoPoint.ZERO = new RistrettoPoint(ExtendedPoint.ZERO);\nconst pointPrecomputes = new WeakMap();\nclass Point {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    _setWindowSize(windowSize) {\n        this._WINDOW_SIZE = windowSize;\n        pointPrecomputes.delete(this);\n    }\n    static fromHex(hex, strict = true) {\n        const { d, P } = CURVE;\n        hex = ensureBytes(hex, 32);\n        const normed = hex.slice();\n        normed[31] = hex[31] & ~0x80;\n        const y = bytesToNumberLE(normed);\n        if (strict && y >= P)\n            throw new Error('Expected 0 < hex < P');\n        if (!strict && y >= POW_2_256)\n            throw new Error('Expected 0 < hex < 2**256');\n        const y2 = mod(y * y);\n        const u = mod(y2 - _1n);\n        const v = mod(d * y2 + _1n);\n        let { isValid, value: x } = uvRatio(u, v);\n        if (!isValid)\n            throw new Error('Point.fromHex: invalid y coordinate');\n        const isXOdd = (x & _1n) === _1n;\n        const isLastByteOdd = (hex[31] & 0x80) !== 0;\n        if (isLastByteOdd !== isXOdd) {\n            x = mod(-x);\n        }\n        return new Point(x, y);\n    }\n    static async fromPrivateKey(privateKey) {\n        return (await getExtendedPublicKey(privateKey)).point;\n    }\n    toRawBytes() {\n        const bytes = numberTo32BytesLE(this.y);\n        bytes[31] |= this.x & _1n ? 0x80 : 0;\n        return bytes;\n    }\n    toHex() {\n        return bytesToHex(this.toRawBytes());\n    }\n    toX25519() {\n        const { y } = this;\n        const u = mod((_1n + y) * invert(_1n - y));\n        return numberTo32BytesLE(u);\n    }\n    isTorsionFree() {\n        return ExtendedPoint.fromAffine(this).isTorsionFree();\n    }\n    equals(other) {\n        return this.x === other.x && this.y === other.y;\n    }\n    negate() {\n        return new Point(mod(-this.x), this.y);\n    }\n    add(other) {\n        return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(other)).toAffine();\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiply(scalar) {\n        return ExtendedPoint.fromAffine(this).multiply(scalar, this).toAffine();\n    }\n}\nPoint.BASE = new Point(CURVE.Gx, CURVE.Gy);\nPoint.ZERO = new Point(_0n, _1n);\nclass Signature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex, 64);\n        const r = Point.fromHex(bytes.slice(0, 32), false);\n        const s = bytesToNumberLE(bytes.slice(32, 64));\n        return new Signature(r, s);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!(r instanceof Point))\n            throw new Error('Expected Point instance');\n        normalizeScalar(s, CURVE.l, false);\n        return this;\n    }\n    toRawBytes() {\n        const u8 = new Uint8Array(64);\n        u8.set(this.r.toRawBytes());\n        u8.set(numberTo32BytesLE(this.s), 32);\n        return u8;\n    }\n    toHex() {\n        return bytesToHex(this.toRawBytes());\n    }\n}\nexport { ExtendedPoint, Point, RistrettoPoint, Signature };\nfunction isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\nfunction abytes(item) {\n    if (!isBytes(item))\n        throw new Error('Uint8Array expected');\n}\nfunction concatBytes(...arrays) {\n    arrays.every(abytes);\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(bytes) {\n    abytes(bytes);\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0;\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10);\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10);\n    return;\n}\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2;\n    }\n    return array;\n}\nfunction numberTo32BytesBE(num) {\n    const length = 32;\n    const hex = num.toString(16).padStart(length * 2, '0');\n    return hexToBytes(hex);\n}\nfunction numberTo32BytesLE(num) {\n    return numberTo32BytesBE(num).reverse();\n}\nfunction edIsNegative(num) {\n    return (mod(num) & _1n) === _1n;\n}\nfunction bytesToNumberLE(uint8a) {\n    abytes(uint8a);\n    return BigInt('0x' + bytesToHex(Uint8Array.from(uint8a).reverse()));\n}\nconst MAX_255B = BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff');\nfunction bytes255ToNumberLE(bytes) {\n    return mod(bytesToNumberLE(bytes) & MAX_255B);\n}\nfunction mod(a, b = CURVE.P) {\n    const res = a % b;\n    return res >= _0n ? res : b + res;\n}\nfunction invert(number, modulo = CURVE.P) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    let a = mod(number, modulo);\n    let b = modulo;\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\nfunction invertBatch(nums, p = CURVE.P) {\n    const tmp = new Array(nums.length);\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        tmp[i] = acc;\n        return mod(acc * num, p);\n    }, _1n);\n    const inverted = invert(lastMultiplied, p);\n    nums.reduceRight((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        tmp[i] = mod(acc * tmp[i], p);\n        return mod(acc * num, p);\n    }, inverted);\n    return tmp;\n}\nfunction pow2(x, power) {\n    const { P } = CURVE;\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= P;\n    }\n    return res;\n}\nfunction pow_2_252_3(x) {\n    const { P } = CURVE;\n    const _5n = BigInt(5);\n    const _10n = BigInt(10);\n    const _20n = BigInt(20);\n    const _40n = BigInt(40);\n    const _80n = BigInt(80);\n    const x2 = (x * x) % P;\n    const b2 = (x2 * x) % P;\n    const b4 = (pow2(b2, _2n) * b2) % P;\n    const b5 = (pow2(b4, _1n) * x) % P;\n    const b10 = (pow2(b5, _5n) * b5) % P;\n    const b20 = (pow2(b10, _10n) * b10) % P;\n    const b40 = (pow2(b20, _20n) * b20) % P;\n    const b80 = (pow2(b40, _40n) * b40) % P;\n    const b160 = (pow2(b80, _80n) * b80) % P;\n    const b240 = (pow2(b160, _80n) * b80) % P;\n    const b250 = (pow2(b240, _10n) * b10) % P;\n    const pow_p_5_8 = (pow2(b250, _2n) * x) % P;\n    return { pow_p_5_8, b2 };\n}\nfunction uvRatio(u, v) {\n    const v3 = mod(v * v * v);\n    const v7 = mod(v3 * v3 * v);\n    const pow = pow_2_252_3(u * v7).pow_p_5_8;\n    let x = mod(u * v3 * pow);\n    const vx2 = mod(v * x * x);\n    const root1 = x;\n    const root2 = mod(x * SQRT_M1);\n    const useRoot1 = vx2 === u;\n    const useRoot2 = vx2 === mod(-u);\n    const noRoot = vx2 === mod(-u * SQRT_M1);\n    if (useRoot1)\n        x = root1;\n    if (useRoot2 || noRoot)\n        x = root2;\n    if (edIsNegative(x))\n        x = mod(-x);\n    return { isValid: useRoot1 || useRoot2, value: x };\n}\nfunction invertSqrt(number) {\n    return uvRatio(_1n, number);\n}\nfunction modlLE(hash) {\n    return mod(bytesToNumberLE(hash), CURVE.l);\n}\nfunction equalBytes(b1, b2) {\n    if (b1.length !== b2.length) {\n        return false;\n    }\n    for (let i = 0; i < b1.length; i++) {\n        if (b1[i] !== b2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction ensureBytes(hex, expectedLength) {\n    const bytes = isBytes(hex) ? Uint8Array.from(hex) : hexToBytes(hex);\n    if (typeof expectedLength === 'number' && bytes.length !== expectedLength)\n        throw new Error(`Expected ${expectedLength} bytes`);\n    return bytes;\n}\nfunction normalizeScalar(num, max, strict = true) {\n    if (!max)\n        throw new TypeError('Specify max value');\n    if (typeof num === 'number' && Number.isSafeInteger(num))\n        num = BigInt(num);\n    if (typeof num === 'bigint' && num < max) {\n        if (strict) {\n            if (_0n < num)\n                return num;\n        }\n        else {\n            if (_0n <= num)\n                return num;\n        }\n    }\n    throw new TypeError('Expected valid scalar: 0 < scalar < max');\n}\nfunction adjustBytes25519(bytes) {\n    bytes[0] &= 248;\n    bytes[31] &= 127;\n    bytes[31] |= 64;\n    return bytes;\n}\nfunction decodeScalar25519(n) {\n    return bytesToNumberLE(adjustBytes25519(ensureBytes(n, 32)));\n}\nfunction checkPrivateKey(key) {\n    key =\n        typeof key === 'bigint' || typeof key === 'number'\n            ? numberTo32BytesBE(normalizeScalar(key, POW_2_256))\n            : ensureBytes(key);\n    if (key.length !== 32)\n        throw new Error(`Expected 32 bytes`);\n    return key;\n}\nfunction getKeyFromHash(hashed) {\n    const head = adjustBytes25519(hashed.slice(0, 32));\n    const prefix = hashed.slice(32, 64);\n    const scalar = modlLE(head);\n    const point = Point.BASE.multiply(scalar);\n    const pointBytes = point.toRawBytes();\n    return { head, prefix, scalar, point, pointBytes };\n}\nlet _sha512Sync;\nfunction sha512s(...m) {\n    if (typeof _sha512Sync !== 'function')\n        throw new Error('utils.sha512Sync must be set to use sync methods');\n    return _sha512Sync(...m);\n}\nasync function getExtendedPublicKey(key) {\n    return getKeyFromHash(await utils.sha512(checkPrivateKey(key)));\n}\nfunction getExtendedPublicKeySync(key) {\n    return getKeyFromHash(sha512s(checkPrivateKey(key)));\n}\nexport async function getPublicKey(privateKey) {\n    return (await getExtendedPublicKey(privateKey)).pointBytes;\n}\nfunction getPublicKeySync(privateKey) {\n    return getExtendedPublicKeySync(privateKey).pointBytes;\n}\nexport async function sign(message, privateKey) {\n    message = ensureBytes(message);\n    const { prefix, scalar, pointBytes } = await getExtendedPublicKey(privateKey);\n    const r = modlLE(await utils.sha512(prefix, message));\n    const R = Point.BASE.multiply(r);\n    const k = modlLE(await utils.sha512(R.toRawBytes(), pointBytes, message));\n    const s = mod(r + k * scalar, CURVE.l);\n    return new Signature(R, s).toRawBytes();\n}\nfunction signSync(message, privateKey) {\n    message = ensureBytes(message);\n    const { prefix, scalar, pointBytes } = getExtendedPublicKeySync(privateKey);\n    const r = modlLE(sha512s(prefix, message));\n    const R = Point.BASE.multiply(r);\n    const k = modlLE(sha512s(R.toRawBytes(), pointBytes, message));\n    const s = mod(r + k * scalar, CURVE.l);\n    return new Signature(R, s).toRawBytes();\n}\nfunction prepareVerification(sig, message, publicKey) {\n    message = ensureBytes(message);\n    if (!(publicKey instanceof Point))\n        publicKey = Point.fromHex(publicKey, false);\n    const { r, s } = sig instanceof Signature ? sig.assertValidity() : Signature.fromHex(sig);\n    const SB = ExtendedPoint.BASE.multiplyUnsafe(s);\n    return { r, s, SB, pub: publicKey, msg: message };\n}\nfunction finishVerification(publicKey, r, SB, hashed) {\n    const k = modlLE(hashed);\n    const kA = ExtendedPoint.fromAffine(publicKey).multiplyUnsafe(k);\n    const RkA = ExtendedPoint.fromAffine(r).add(kA);\n    return RkA.subtract(SB).multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO);\n}\nexport async function verify(sig, message, publicKey) {\n    const { r, SB, msg, pub } = prepareVerification(sig, message, publicKey);\n    const hashed = await utils.sha512(r.toRawBytes(), pub.toRawBytes(), msg);\n    return finishVerification(pub, r, SB, hashed);\n}\nfunction verifySync(sig, message, publicKey) {\n    const { r, SB, msg, pub } = prepareVerification(sig, message, publicKey);\n    const hashed = sha512s(r.toRawBytes(), pub.toRawBytes(), msg);\n    return finishVerification(pub, r, SB, hashed);\n}\nexport const sync = {\n    getExtendedPublicKey: getExtendedPublicKeySync,\n    getPublicKey: getPublicKeySync,\n    sign: signSync,\n    verify: verifySync,\n};\nexport async function getSharedSecret(privateKey, publicKey) {\n    const { head } = await getExtendedPublicKey(privateKey);\n    const u = Point.fromHex(publicKey).toX25519();\n    return curve25519.scalarMult(head, u);\n}\nPoint.BASE._setWindowSize(8);\nfunction cswap(swap, x_2, x_3) {\n    const dummy = mod(swap * (x_2 - x_3));\n    x_2 = mod(x_2 - dummy);\n    x_3 = mod(x_3 + dummy);\n    return [x_2, x_3];\n}\nfunction montgomeryLadder(pointU, scalar) {\n    const { P } = CURVE;\n    const u = normalizeScalar(pointU, P);\n    const k = normalizeScalar(scalar, P);\n    const a24 = BigInt(121665);\n    const x_1 = u;\n    let x_2 = _1n;\n    let z_2 = _0n;\n    let x_3 = u;\n    let z_3 = _1n;\n    let swap = _0n;\n    let sw;\n    for (let t = BigInt(255 - 1); t >= _0n; t--) {\n        const k_t = (k >> t) & _1n;\n        swap ^= k_t;\n        sw = cswap(swap, x_2, x_3);\n        x_2 = sw[0];\n        x_3 = sw[1];\n        sw = cswap(swap, z_2, z_3);\n        z_2 = sw[0];\n        z_3 = sw[1];\n        swap = k_t;\n        const A = x_2 + z_2;\n        const AA = mod(A * A);\n        const B = x_2 - z_2;\n        const BB = mod(B * B);\n        const E = AA - BB;\n        const C = x_3 + z_3;\n        const D = x_3 - z_3;\n        const DA = mod(D * A);\n        const CB = mod(C * B);\n        const dacb = DA + CB;\n        const da_cb = DA - CB;\n        x_3 = mod(dacb * dacb);\n        z_3 = mod(x_1 * mod(da_cb * da_cb));\n        x_2 = mod(AA * BB);\n        z_2 = mod(E * (AA + mod(a24 * E)));\n    }\n    sw = cswap(swap, x_2, x_3);\n    x_2 = sw[0];\n    x_3 = sw[1];\n    sw = cswap(swap, z_2, z_3);\n    z_2 = sw[0];\n    z_3 = sw[1];\n    const { pow_p_5_8, b2 } = pow_2_252_3(z_2);\n    const xp2 = mod(pow2(pow_p_5_8, BigInt(3)) * b2);\n    return mod(x_2 * xp2);\n}\nfunction encodeUCoordinate(u) {\n    return numberTo32BytesLE(mod(u, CURVE.P));\n}\nfunction decodeUCoordinate(uEnc) {\n    const u = ensureBytes(uEnc, 32);\n    u[31] &= 127;\n    return bytesToNumberLE(u);\n}\nexport const curve25519 = {\n    BASE_POINT_U: '0900000000000000000000000000000000000000000000000000000000000000',\n    scalarMult(privateKey, publicKey) {\n        const u = decodeUCoordinate(publicKey);\n        const p = decodeScalar25519(privateKey);\n        const pu = montgomeryLadder(u, p);\n        if (pu === _0n)\n            throw new Error('Invalid private or public key received');\n        return encodeUCoordinate(pu);\n    },\n    scalarMultBase(privateKey) {\n        return curve25519.scalarMult(privateKey, curve25519.BASE_POINT_U);\n    },\n};\nconst crypto = {\n    node: nodeCrypto,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\nexport const utils = {\n    bytesToHex,\n    hexToBytes,\n    concatBytes,\n    getExtendedPublicKey,\n    mod,\n    invert,\n    TORSION_SUBGROUP: [\n        '0100000000000000000000000000000000000000000000000000000000000000',\n        'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a',\n        '0000000000000000000000000000000000000000000000000000000000000080',\n        '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05',\n        'ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f',\n        '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85',\n        '0000000000000000000000000000000000000000000000000000000000000000',\n        'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa',\n    ],\n    hashToPrivateScalar: (hash) => {\n        hash = ensureBytes(hash);\n        if (hash.length < 40 || hash.length > 1024)\n            throw new Error('Expected 40-1024 bytes of private key as per FIPS 186');\n        return mod(bytesToNumberLE(hash), CURVE.l - _1n) + _1n;\n    },\n    randomBytes: (bytesLength = 32) => {\n        if (crypto.web) {\n            return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n        }\n        else if (crypto.node) {\n            const { randomBytes } = crypto.node;\n            return new Uint8Array(randomBytes(bytesLength).buffer);\n        }\n        else {\n            throw new Error(\"The environment doesn't have randomBytes function\");\n        }\n    },\n    randomPrivateKey: () => {\n        return utils.randomBytes(32);\n    },\n    sha512: async (...messages) => {\n        const message = concatBytes(...messages);\n        if (crypto.web) {\n            const buffer = await crypto.web.subtle.digest('SHA-512', message.buffer);\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            return Uint8Array.from(crypto.node.createHash('sha512').update(message).digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have sha512 function\");\n        }\n    },\n    precompute(windowSize = 8, point = Point.BASE) {\n        const cached = point.equals(Point.BASE) ? point : new Point(point.x, point.y);\n        cached._setWindowSize(windowSize);\n        cached.multiply(_2n);\n        return cached;\n    },\n    sha512Sync: undefined,\n};\nObject.defineProperties(utils, {\n    sha512Sync: {\n        configurable: false,\n        get() {\n            return _sha512Sync;\n        },\n        set(val) {\n            if (!_sha512Sync)\n                _sha512Sync = val;\n        },\n    },\n});\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 12479, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 12484, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/verifier.js"],"sourcesContent":["import * as API from '@ucanto/interface'\n\n/**\n * @param {API.DID} did\n * @param {API.PrincipalParser[]} parsers\n * @return {API.Verifier}\n */\nconst parseWith = (did, parsers) => {\n  if (did.startsWith('did:')) {\n    for (const parser of parsers) {\n      try {\n        return parser.parse(did)\n      } catch (_) {}\n    }\n    throw new Error(`Unsupported did ${did}`)\n  } else {\n    throw new Error(`Expected did instead got ${did}`)\n  }\n}\n\n/**\n * @param {API.PrincipalParser} left\n * @param {API.PrincipalParser} right\n * @returns {API.ComposedDIDParser}\n */\nexport const or = (left, right) => new Parser([left, right])\n\n/**\n * @implements {API.ComposedDIDParser}\n */\nclass Parser {\n  /**\n   * @param {API.PrincipalParser[]} variants\n   */\n  constructor(variants) {\n    this.variants = variants\n  }\n\n  /**\n   * @param {API.DID} did\n   */\n  parse(did) {\n    return parseWith(did, this.variants)\n  }\n\n  /**\n   * @param {API.PrincipalParser} parser\n   */\n  or(parser) {\n    return new Parser([...this.variants, parser])\n  }\n}\n\n/**\n * @template {API.DID} ID\n * @template {API.MulticodecCode} SigAlg\n * @param {API.VerifierKey<SigAlg>} key\n * @param {ID} id\n * @returns {API.Verifier<ID, SigAlg>}\n */\nexport const withDID = (key, id) => new VerifierWithDID(id, key)\n\n/**\n * @template {API.DID} ID\n * @template {API.MulticodecCode} SigAlg\n * @implements {API.Verifier<ID, SigAlg>}\n */\nclass VerifierWithDID {\n  /**\n   * @param {ID} id\n   * @param {API.VerifierKey<SigAlg>} key\n   */\n  constructor(id, key) {\n    this.id = id\n    this.key = key\n  }\n  did() {\n    return this.id\n  }\n\n  toDIDKey() {\n    return this.key.toDIDKey()\n  }\n\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   * @param {API.Signature<T, SigAlg>} signature\n   * @returns {API.Await<boolean>}\n   */\n  verify(payload, signature) {\n    return this.key.verify(payload, signature)\n  }\n\n  /**\n   * @template {API.DID} ID\n   * @param {ID} id\n   */\n  withDID(id) {\n    return withDID(this.key, id)\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA;;;;CAIC,GACD,MAAM,YAAY,CAAC,KAAK;IACtB,IAAI,IAAI,UAAU,CAAC,SAAS;QAC1B,KAAK,MAAM,UAAU,QAAS;YAC5B,IAAI;gBACF,OAAO,OAAO,KAAK,CAAC;YACtB,EAAE,OAAO,GAAG,CAAC;QACf;QACA,MAAM,IAAI,MAAM,CAAC,gBAAgB,EAAE,KAAK;IAC1C,OAAO;QACL,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,KAAK;IACnD;AACF;AAOO,MAAM,KAAK,CAAC,MAAM,QAAU,IAAI,OAAO;QAAC;QAAM;KAAM;AAE3D;;CAEC,GACD,MAAM;IACJ;;GAEC,GACD,YAAY,QAAQ,CAAE;QACpB,IAAI,CAAC,QAAQ,GAAG;IAClB;IAEA;;GAEC,GACD,MAAM,GAAG,EAAE;QACT,OAAO,UAAU,KAAK,IAAI,CAAC,QAAQ;IACrC;IAEA;;GAEC,GACD,GAAG,MAAM,EAAE;QACT,OAAO,IAAI,OAAO;eAAI,IAAI,CAAC,QAAQ;YAAE;SAAO;IAC9C;AACF;AASO,MAAM,UAAU,CAAC,KAAK,KAAO,IAAI,gBAAgB,IAAI;AAE5D;;;;CAIC,GACD,MAAM;IACJ;;;GAGC,GACD,YAAY,EAAE,EAAE,GAAG,CAAE;QACnB,IAAI,CAAC,EAAE,GAAG;QACV,IAAI,CAAC,GAAG,GAAG;IACb;IACA,MAAM;QACJ,OAAO,IAAI,CAAC,EAAE;IAChB;IAEA,WAAW;QACT,OAAO,IAAI,CAAC,GAAG,CAAC,QAAQ;IAC1B;IAEA;;;;;GAKC,GACD,OAAO,OAAO,EAAE,SAAS,EAAE;QACzB,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS;IAClC;IAEA;;;GAGC,GACD,QAAQ,EAAE,EAAE;QACV,OAAO,QAAQ,IAAI,CAAC,GAAG,EAAE;IAC3B;AACF","ignoreList":[0]}},
    {"offset": {"line": 12572, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/ed25519/verifier.js"],"sourcesContent":["import * as DID from '@ipld/dag-ucan/did'\nimport * as ED25519 from '@noble/ed25519'\nimport { varint } from 'multiformats'\nimport * as API from './type.js'\nimport * as Signature from '@ipld/dag-ucan/signature'\nimport { base58btc } from 'multiformats/bases/base58'\nimport * as Verifier from '../verifier.js'\n\n/** @type {API.EdVerifier['code']} */\nexport const code = 0xed\nexport const name = 'Ed25519'\n\n/** @type {API.SigAlg} */\nexport const signatureCode = Signature.EdDSA\nexport const signatureAlgorithm = 'EdDSA'\nconst PUBLIC_TAG_SIZE = varint.encodingLength(code)\nconst SIZE = 32 + PUBLIC_TAG_SIZE\n\n/**\n * @typedef {API.EdVerifier} EdVerifier\n */\n\n/**\n * Parses `did:key:` string as a VerifyingPrincipal.\n *\n * @param {API.DID|string} did\n * @returns {API.Verifier<API.DID, typeof signatureCode>}\n */\nexport const parse = did => decode(DID.parse(did))\n\n/**\n * Takes ed25519 public key tagged with `0xed` multiformat code and creates a\n * corresponding `Principal` that can be used to verify signatures.\n *\n * @param {Uint8Array} bytes\n * @returns {API.EdVerifier}\n */\nexport const decode = bytes => {\n  const [algorithm] = varint.decode(bytes)\n  if (algorithm !== code) {\n    throw new RangeError(\n      `Unsupported key algorithm with multicode 0x${code.toString(16)}`\n    )\n  } else if (bytes.byteLength !== SIZE) {\n    throw new RangeError(\n      `Expected Uint8Array with byteLength ${SIZE}, instead got Uint8Array with byteLength ${bytes.byteLength}`\n    )\n  } else {\n    return new Ed25519Verifier(bytes.buffer, bytes.byteOffset, bytes.byteLength)\n  }\n}\n\n/**\n * Formats given Principal into `did:key:` format.\n *\n * @param {API.Principal<API.DID>} principal\n */\nexport const format = principal => DID.format(principal)\n\n/**\n * Encodes given Principal by tagging it's ed25519 public key with `0xed`\n * multiformat code.\n *\n * @param {API.Principal<API.DID<\"key\">>} principal\n */\nexport const encode = principal => DID.encode(principal)\n\n/**\n * @implements {API.EdVerifier}\n */\nclass Ed25519Verifier extends Uint8Array {\n  /** @type {typeof code} */\n  get code() {\n    return code\n  }\n  /** @type {typeof signatureCode} */\n  get signatureCode() {\n    return signatureCode\n  }\n  /** @type {typeof signatureAlgorithm} */\n  get signatureAlgorithm() {\n    return signatureAlgorithm\n  }\n  /**\n   * Raw public key without a multiformat code.\n   *\n   * @readonly\n   */\n  get publicKey() {\n    const key = new Uint8Array(this.buffer, this.byteOffset + PUBLIC_TAG_SIZE)\n    Object.defineProperties(this, {\n      publicKey: {\n        value: key,\n      },\n    })\n    return key\n  }\n  /**\n   * DID of the Principal in `did:key` format.\n   * @returns {API.DID<\"key\">}\n   */\n  did() {\n    return `did:key:${base58btc.encode(this)}`\n  }\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   * @param {API.Signature<T, Signature.EdDSA>} signature\n   * @returns {API.Await<boolean>}\n   */\n  verify(payload, signature) {\n    return (\n      signature.code === signatureCode &&\n      ED25519.verify(signature.raw, payload, this.publicKey)\n    )\n  }\n\n  /**\n   * @template {API.DID} ID\n   * @param {ID} id\n   * @returns {API.Verifier<ID, typeof signatureCode>}\n   */\n  withDID(id) {\n    return Verifier.withDID(this, id)\n  }\n\n  toDIDKey() {\n    return this.did()\n  }\n}\n\n/**\n * @param {API.PrincipalParser} other\n */\nexport const or = other => Verifier.or({ parse }, other)\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;AAGO,MAAM,OAAO;AACb,MAAM,OAAO;AAGb,MAAM,gBAAgB,qKAAe;AACrC,MAAM,qBAAqB;AAClC,MAAM,kBAAkB,oMAAM,CAAC,cAAc,CAAC;AAC9C,MAAM,OAAO,KAAK;AAYX,MAAM,QAAQ,CAAA,MAAO,OAAO,+JAAS,CAAC;AAStC,MAAM,SAAS,CAAA;IACpB,MAAM,CAAC,UAAU,GAAG,oMAAM,CAAC,MAAM,CAAC;IAClC,IAAI,cAAc,MAAM;QACtB,MAAM,IAAI,WACR,CAAC,2CAA2C,EAAE,KAAK,QAAQ,CAAC,KAAK;IAErE,OAAO,IAAI,MAAM,UAAU,KAAK,MAAM;QACpC,MAAM,IAAI,WACR,CAAC,oCAAoC,EAAE,KAAK,yCAAyC,EAAE,MAAM,UAAU,EAAE;IAE7G,OAAO;QACL,OAAO,IAAI,gBAAgB,MAAM,MAAM,EAAE,MAAM,UAAU,EAAE,MAAM,UAAU;IAC7E;AACF;AAOO,MAAM,SAAS,CAAA,YAAa,gKAAU,CAAC;AAQvC,MAAM,SAAS,CAAA,YAAa,gKAAU,CAAC;AAE9C;;CAEC,GACD,MAAM,wBAAwB;IAC5B,wBAAwB,GACxB,IAAI,OAAO;QACT,OAAO;IACT;IACA,iCAAiC,GACjC,IAAI,gBAAgB;QAClB,OAAO;IACT;IACA,sCAAsC,GACtC,IAAI,qBAAqB;QACvB,OAAO;IACT;IACA;;;;GAIC,GACD,IAAI,YAAY;QACd,MAAM,MAAM,IAAI,WAAW,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,GAAG;QAC1D,OAAO,gBAAgB,CAAC,IAAI,EAAE;YAC5B,WAAW;gBACT,OAAO;YACT;QACF;QACA,OAAO;IACT;IACA;;;GAGC,GACD,MAAM;QACJ,OAAO,CAAC,QAAQ,EAAE,8KAAS,CAAC,MAAM,CAAC,IAAI,GAAG;IAC5C;IACA;;;;;GAKC,GACD,OAAO,OAAO,EAAE,SAAS,EAAE;QACzB,OACE,UAAU,IAAI,KAAK,iBACnB,sKAAc,CAAC,UAAU,GAAG,EAAE,SAAS,IAAI,CAAC,SAAS;IAEzD;IAEA;;;;GAIC,GACD,QAAQ,EAAE,EAAE;QACV,OAAO,sKAAgB,CAAC,IAAI,EAAE;IAChC;IAEA,WAAW;QACT,OAAO,IAAI,CAAC,GAAG;IACjB;AACF;AAKO,MAAM,KAAK,CAAA,QAAS,iKAAW,CAAC;QAAE;IAAM,GAAG","ignoreList":[0]}},
    {"offset": {"line": 12683, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/signer.js"],"sourcesContent":["import * as API from '@ucanto/interface'\n\n/**\n * @template {API.SignerImporter} L\n * @template {API.SignerImporter} R\n * @param {L} left\n * @param {R} right\n * @returns {API.CompositeImporter<[L, R]>}\n */\nexport const or = (left, right) => new Importer([left, right])\n\n/**\n * @template {[API.SignerImporter, ...API.SignerImporter[]]} Importers\n * @implements {API.CompositeImporter<Importers>}\n */\nclass Importer {\n  /**\n   * @param {Importers} variants\n   */\n  constructor(variants) {\n    this.variants = variants\n    this.from = create(variants)\n  }\n\n  /**\n   * @template {API.SignerImporter} Other\n   * @param {Other} other\n   * @returns {API.CompositeImporter<[Other, ...Importers]>}\n   */\n  or(other) {\n    return new Importer([other, ...this.variants])\n  }\n}\n\n/**\n * @template {[API.SignerImporter, ...API.SignerImporter[]]} Importers\n * @param {Importers} importers\n */\nconst create = importers => {\n  /**\n   * @template {API.DID} ID - DID that can be imported, which may be a type union.\n   * @template {API.SigAlg} Alg - Multicodec code corresponding to signature algorithm.\n   * @param {API.SignerArchive<ID, Alg>} archive\n   * @returns {API.Signer<ID, Alg>}\n   */\n  const from = archive => {\n    if (archive.id.startsWith('did:key:')) {\n      return /** @type {API.Signer<ID, Alg>} */ (importWith(archive, importers))\n    } else {\n      for (const [name, key] of Object.entries(archive.keys)) {\n        const id = /** @type {API.DIDKey} */ (name)\n        const signer = /** @type {API.Signer<API.DIDKey, Alg>} */ (\n          importWith(\n            {\n              id,\n              keys: { [id]: key },\n            },\n            importers\n          )\n        )\n\n        return signer.withDID(archive.id)\n      }\n\n      throw new Error(`Archive ${archive.id} contains no keys`)\n    }\n  }\n\n  return /** @type {API.Intersection<Importers[number]['from']>} */ (from)\n}\n\n/**\n * @param {API.SignerArchive} archive\n * @param {API.SignerImporter[]} importers\n * @returns {API.Signer}\n */\nconst importWith = (archive, importers) => {\n  for (const importer of importers) {\n    try {\n      return importer.from(archive)\n    } catch (_) {}\n  }\n  throw new Error(`Unsupported signer`)\n}\n/**\n * @template {number} Code\n * @template {API.DID} ID\n * @param {API.Signer<API.DID<'key'>, Code>} signer\n * @param {ID} id\n * @returns {API.Signer<ID, Code>}\n */\nexport const withDID = ({ signer, verifier }, id) =>\n  new SignerWithDID(signer, verifier.withDID(id))\n\n/**\n * @template {API.DID} ID\n * @template {number} Code\n * @implements {API.Signer<ID, Code>}\n */\nclass SignerWithDID {\n  /**\n   * @param {API.Signer<API.DID<'key'>, Code>} key\n   * @param {API.Verifier<ID, Code>} verifier\n   */\n  constructor(key, verifier) {\n    this.key = key\n    this.verifier = verifier\n  }\n  /** @type {API.Signer<ID, Code>} */\n  get signer() {\n    return this\n  }\n\n  get signatureAlgorithm() {\n    return this.key.signatureAlgorithm\n  }\n  get signatureCode() {\n    return this.key.signatureCode\n  }\n\n  /**\n   * @returns {ID}\n   */\n  did() {\n    return this.verifier.did()\n  }\n\n  toDIDKey() {\n    return this.verifier.toDIDKey()\n  }\n\n  /**\n   * @template {API.DID} ID\n   * @param {ID} id\n   */\n  withDID(id) {\n    return withDID(this.key, id)\n  }\n\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   */\n  sign(payload) {\n    return this.key.sign(payload)\n  }\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   * @param {API.Signature<T, Code>} signature\n   */\n  verify(payload, signature) {\n    return this.verifier.verify(payload, signature)\n  }\n\n  toArchive() {\n    const { keys } = this.key.toArchive()\n    return {\n      id: this.did(),\n      keys,\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AASO,MAAM,KAAK,CAAC,MAAM,QAAU,IAAI,SAAS;QAAC;QAAM;KAAM;AAE7D;;;CAGC,GACD,MAAM;IACJ;;GAEC,GACD,YAAY,QAAQ,CAAE;QACpB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,IAAI,GAAG,OAAO;IACrB;IAEA;;;;GAIC,GACD,GAAG,KAAK,EAAE;QACR,OAAO,IAAI,SAAS;YAAC;eAAU,IAAI,CAAC,QAAQ;SAAC;IAC/C;AACF;AAEA;;;CAGC,GACD,MAAM,SAAS,CAAA;IACb;;;;;GAKC,GACD,MAAM,OAAO,CAAA;QACX,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC,aAAa;YACrC,OAA2C,WAAW,SAAS;QACjE,OAAO;YACL,KAAK,MAAM,CAAC,MAAM,IAAI,IAAI,OAAO,OAAO,CAAC,QAAQ,IAAI,EAAG;gBACtD,MAAM,KAAgC;gBACtC,MAAM,SACJ,WACE;oBACE;oBACA,MAAM;wBAAE,CAAC,GAAG,EAAE;oBAAI;gBACpB,GACA;gBAIJ,OAAO,OAAO,OAAO,CAAC,QAAQ,EAAE;YAClC;YAEA,MAAM,IAAI,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE,CAAC,iBAAiB,CAAC;QAC1D;IACF;IAEA,OAAmE;AACrE;AAEA;;;;CAIC,GACD,MAAM,aAAa,CAAC,SAAS;IAC3B,KAAK,MAAM,YAAY,UAAW;QAChC,IAAI;YACF,OAAO,SAAS,IAAI,CAAC;QACvB,EAAE,OAAO,GAAG,CAAC;IACf;IACA,MAAM,IAAI,MAAM,CAAC,kBAAkB,CAAC;AACtC;AAQO,MAAM,UAAU,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,KAC5C,IAAI,cAAc,QAAQ,SAAS,OAAO,CAAC;AAE7C;;;;CAIC,GACD,MAAM;IACJ;;;GAGC,GACD,YAAY,GAAG,EAAE,QAAQ,CAAE;QACzB,IAAI,CAAC,GAAG,GAAG;QACX,IAAI,CAAC,QAAQ,GAAG;IAClB;IACA,iCAAiC,GACjC,IAAI,SAAS;QACX,OAAO,IAAI;IACb;IAEA,IAAI,qBAAqB;QACvB,OAAO,IAAI,CAAC,GAAG,CAAC,kBAAkB;IACpC;IACA,IAAI,gBAAgB;QAClB,OAAO,IAAI,CAAC,GAAG,CAAC,aAAa;IAC/B;IAEA;;GAEC,GACD,MAAM;QACJ,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG;IAC1B;IAEA,WAAW;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC,QAAQ;IAC/B;IAEA;;;GAGC,GACD,QAAQ,EAAE,EAAE;QACV,OAAO,QAAQ,IAAI,CAAC,GAAG,EAAE;IAC3B;IAEA;;;GAGC,GACD,KAAK,OAAO,EAAE;QACZ,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;IACvB;IACA;;;;GAIC,GACD,OAAO,OAAO,EAAE,SAAS,EAAE;QACzB,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS;IACvC;IAEA,YAAY;QACV,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS;QACnC,OAAO;YACL,IAAI,IAAI,CAAC,GAAG;YACZ;QACF;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 12817, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/ed25519/signer.js"],"sourcesContent":["import * as ED25519 from '@noble/ed25519'\nimport { varint } from 'multiformats'\nimport * as API from './type.js'\nimport * as Verifier from './verifier.js'\nimport { base64pad } from 'multiformats/bases/base64'\nimport * as Signature from '@ipld/dag-ucan/signature'\nimport * as Signer from '../signer.js'\nexport * from './type.js'\n\nexport const code = 0x1300\nexport const name = Verifier.name\n\n/** @type {'EdDSA'} */\nexport const signatureAlgorithm = Verifier.signatureAlgorithm\nexport const signatureCode = Verifier.signatureCode\n\nconst PRIVATE_TAG_SIZE = varint.encodingLength(code)\nconst PUBLIC_TAG_SIZE = varint.encodingLength(Verifier.code)\nconst KEY_SIZE = 32\nconst SIZE = PRIVATE_TAG_SIZE + KEY_SIZE + PUBLIC_TAG_SIZE + KEY_SIZE\n\nexport const PUB_KEY_OFFSET = PRIVATE_TAG_SIZE + KEY_SIZE\n\n/**\n * Generates new issuer by generating underlying ED25519 keypair.\n * @returns {Promise<API.EdSigner>}\n */\nexport const generate = () => derive(ED25519.utils.randomPrivateKey())\n\n/**\n * Derives issuer from 32 byte long secret key.\n * @param {Uint8Array} secret\n * @returns {Promise<API.EdSigner>}\n */\nexport const derive = async secret => {\n  if (secret.byteLength !== KEY_SIZE) {\n    throw new Error(\n      `Expected Uint8Array with byteLength of ${KEY_SIZE} instead not ${secret.byteLength}`\n    )\n  }\n\n  const publicKey = await ED25519.getPublicKey(secret)\n  const signer = new Ed25519Signer(SIZE)\n\n  varint.encodeTo(code, signer, 0)\n  signer.set(secret, PRIVATE_TAG_SIZE)\n\n  varint.encodeTo(Verifier.code, signer, PRIVATE_TAG_SIZE + KEY_SIZE)\n  signer.set(publicKey, PRIVATE_TAG_SIZE + KEY_SIZE + PUBLIC_TAG_SIZE)\n\n  return signer\n}\n\n/**\n * @param {API.SignerArchive<API.DID, typeof signatureCode>} archive\n * @returns {API.EdSigner}\n */\nexport const from = ({ id, keys }) => {\n  if (id.startsWith('did:key:')) {\n    const key = keys[/** @type {API.DIDKey} */ (id)]\n    if (key instanceof Uint8Array) {\n      return decode(key)\n    }\n  }\n  throw new TypeError(`Unsupported archive format`)\n}\n\n/**\n * @template {API.SignerImporter} O\n * @param {O} other\n */\nexport const or = other => Signer.or({ from }, other)\n\n/**\n * @param {Uint8Array} bytes\n * @returns {API.EdSigner}\n */\nexport const decode = bytes => {\n  if (bytes.byteLength !== SIZE) {\n    throw new Error(\n      `Expected Uint8Array with byteLength of ${SIZE} instead not ${bytes.byteLength}`\n    )\n  }\n\n  {\n    const [keyCode] = varint.decode(bytes)\n    if (keyCode !== code) {\n      throw new Error(`Given bytes must be a multiformat with ${code} tag`)\n    }\n  }\n\n  {\n    const [code] = varint.decode(bytes.subarray(PUB_KEY_OFFSET))\n    if (code !== Verifier.code) {\n      throw new Error(\n        `Given bytes must contain public key in multiformats with ${Verifier.code} tag`\n      )\n    }\n  }\n\n  return new Ed25519Signer(bytes)\n}\n\n/**\n * @param {API.EdSigner} signer\n * @return {API.ByteView<API.EdSigner & CryptoKeyPair>}\n */\nexport const encode = signer => signer.encode()\n\n/**\n * @template {string} Prefix\n * @param {API.EdSigner} signer\n * @param {API.MultibaseEncoder<Prefix>} [encoder]\n */\nexport const format = (signer, encoder) =>\n  (encoder || base64pad).encode(encode(signer))\n\n/**\n * @template {string} Prefix\n * @param {string} principal\n * @param {API.MultibaseDecoder<Prefix>} [decoder]\n * @returns {API.EdSigner}\n */\nexport const parse = (principal, decoder) =>\n  decode((decoder || base64pad).decode(principal))\n\n/**\n * @implements {API.EdSigner}\n */\nclass Ed25519Signer extends Uint8Array {\n  /** @type {typeof code} */\n  get code() {\n    return code\n  }\n  get signer() {\n    return this\n  }\n  /** @type {API.EdVerifier} */\n  get verifier() {\n    const bytes = new Uint8Array(this.buffer, PRIVATE_TAG_SIZE + KEY_SIZE)\n    const verifier = Verifier.decode(bytes)\n\n    Object.defineProperties(this, {\n      verifier: {\n        value: verifier,\n      },\n    })\n\n    return verifier\n  }\n\n  /**\n   * Raw public key without multiformat code.\n   */\n  get secret() {\n    const secret = new Uint8Array(this.buffer, PRIVATE_TAG_SIZE, KEY_SIZE)\n    Object.defineProperties(this, {\n      secret: {\n        value: secret,\n      },\n    })\n\n    return secret\n  }\n\n  /**\n   * DID of this principal in `did:key` format.\n   */\n  did() {\n    return this.verifier.did()\n  }\n\n  toDIDKey() {\n    return this.verifier.toDIDKey()\n  }\n\n  /**\n   * @template {API.DID} ID\n   * @param {ID} id\n   * @returns {API.Signer<ID, typeof Signature.EdDSA>}\n   */\n  withDID(id) {\n    return Signer.withDID(this, id)\n  }\n\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   * @returns {Promise<API.SignatureView<T, typeof Signature.EdDSA>>}\n   */\n  async sign(payload) {\n    const raw = await ED25519.sign(payload, this.secret)\n\n    return Signature.create(this.signatureCode, raw)\n  }\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   * @param {API.Signature<T, typeof this.signatureCode>} signature\n   */\n\n  verify(payload, signature) {\n    return this.verifier.verify(payload, signature)\n  }\n\n  get signatureAlgorithm() {\n    return signatureAlgorithm\n  }\n  get signatureCode() {\n    return Signature.EdDSA\n  }\n\n  encode() {\n    return this\n  }\n\n  toArchive() {\n    const id = this.did()\n    return {\n      id,\n      keys: { [id]: this.encode() },\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 12999, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/ed25519.js"],"sourcesContent":["export * from './ed25519/signer.js'\nexport * as Verifier from './ed25519/verifier.js'\nexport * as Signer from './ed25519/signer.js'\n"],"names":[],"mappings":";AAAA;AACA","ignoreList":[0]}},
    {"offset": {"line": 13091, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 13096, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/multiformat.js"],"sourcesContent":["import { varint } from 'multiformats'\n\n/**\n *\n * @param {number} code\n * @param {Uint8Array} bytes\n */\nexport const tagWith = (code, bytes) => {\n  const offset = varint.encodingLength(code)\n  const multiformat = new Uint8Array(bytes.byteLength + offset)\n  varint.encodeTo(code, multiformat, 0)\n  multiformat.set(bytes, offset)\n\n  return multiformat\n}\n\n/**\n * @param {number} code\n * @param {Uint8Array} source\n * @param {number} byteOffset\n * @returns\n */\nexport const untagWith = (code, source, byteOffset = 0) => {\n  const bytes = byteOffset !== 0 ? source.subarray(byteOffset) : source\n  const [tag, size] = varint.decode(bytes)\n  if (tag !== code) {\n    throw new Error(\n      `Expected multiformat with 0x${code.toString(\n        16\n      )} tag instead got 0x${tag.toString(16)}`\n    )\n  } else {\n    return new Uint8Array(bytes.buffer, bytes.byteOffset + size)\n  }\n}\n\nexport const encodingLength = varint.encodingLength\nexport const encodeTo = varint.encodeTo\nexport const decode = varint.decode\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;;AAOO,MAAM,UAAU,CAAC,MAAM;IAC5B,MAAM,SAAS,oMAAM,CAAC,cAAc,CAAC;IACrC,MAAM,cAAc,IAAI,WAAW,MAAM,UAAU,GAAG;IACtD,oMAAM,CAAC,QAAQ,CAAC,MAAM,aAAa;IACnC,YAAY,GAAG,CAAC,OAAO;IAEvB,OAAO;AACT;AAQO,MAAM,YAAY,CAAC,MAAM,QAAQ,aAAa,CAAC;IACpD,MAAM,QAAQ,eAAe,IAAI,OAAO,QAAQ,CAAC,cAAc;IAC/D,MAAM,CAAC,KAAK,KAAK,GAAG,oMAAM,CAAC,MAAM,CAAC;IAClC,IAAI,QAAQ,MAAM;QAChB,MAAM,IAAI,MACR,CAAC,4BAA4B,EAAE,KAAK,QAAQ,CAC1C,IACA,mBAAmB,EAAE,IAAI,QAAQ,CAAC,KAAK;IAE7C,OAAO;QACL,OAAO,IAAI,WAAW,MAAM,MAAM,EAAE,MAAM,UAAU,GAAG;IACzD;AACF;AAEO,MAAM,iBAAiB,oMAAM,CAAC,cAAc;AAC5C,MAAM,WAAW,oMAAM,CAAC,QAAQ;AAChC,MAAM,SAAS,oMAAM,CAAC,MAAM","ignoreList":[0]}},
    {"offset": {"line": 13134, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/rsa/asn1.js"],"sourcesContent":["/**\n * ASN1 Tags as per https://luca.ntop.org/Teaching/Appunti/asn1.html\n */\nconst TAG_SIZE = 1\nexport const INT_TAG = 0x02\nexport const BITSTRING_TAG = 0x03\nexport const OCTET_STRING_TAG = 0x04\nexport const NULL_TAG = 0x05\nexport const OBJECT_TAG = 0x06\nexport const SEQUENCE_TAG = 0x30\n\nexport const UNUSED_BIT_PAD = 0x00\n\n/**\n * @param {number} length\n * @returns {Uint8Array}\n */\nexport const encodeDERLength = length => {\n  if (length <= 127) {\n    return new Uint8Array([length])\n  }\n\n  /** @type {number[]} */\n  const octets = []\n  while (length !== 0) {\n    octets.push(length & 0xff)\n    length = length >>> 8\n  }\n  octets.reverse()\n  return new Uint8Array([0x80 | (octets.length & 0xff), ...octets])\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @returns {{number: number, consumed: number}}\n */\nexport const readDERLength = (bytes, offset = 0) => {\n  if ((bytes[offset] & 0x80) === 0) {\n    return { number: bytes[offset], consumed: 1 }\n  }\n\n  const numberBytes = bytes[offset] & 0x7f\n  /* c8 ignore next 5 */\n  if (bytes.length < numberBytes + 1) {\n    throw new Error(\n      `ASN parsing error: Too few bytes. Expected encoded length's length to be at least ${numberBytes}`\n    )\n  }\n\n  let length = 0\n  for (let i = 0; i < numberBytes; i++) {\n    length = length << 8\n    length = length | bytes[offset + i + 1]\n  }\n\n  return { number: length, consumed: numberBytes + 1 }\n}\n\n/**\n * @param {Uint8Array} input\n * @param {number} expectedTag\n * @param {number} position\n * @returns {number}\n */\nexport const skip = (input, expectedTag, position) => {\n  const parsed = into(input, expectedTag, position)\n  return parsed.position + parsed.length\n}\n\n/**\n * @param {Uint8Array} input\n * @param {number} expectedTag\n * @param {number} offset\n * @returns {{ position: number, length: number }}\n */\nexport const into = (input, expectedTag, offset) => {\n  const actualTag = input[offset]\n  /* c8 ignore next 7 */\n  if (actualTag !== expectedTag) {\n    throw new Error(\n      `ASN parsing error: Expected tag 0x${expectedTag.toString(\n        16\n      )} at position ${offset}, but got 0x${actualTag.toString(16)}.`\n    )\n  }\n\n  // length\n  const length = readDERLength(input, offset + TAG_SIZE)\n  const position = offset + TAG_SIZE + length.consumed\n\n  // content\n  return { position, length: length.number }\n}\n\n/**\n * @param {Uint8Array} input\n */\nexport const encodeBitString = input => {\n  // encode input length + 1 for unused bit pad\n  const length = encodeDERLength(input.byteLength + 1)\n  // allocate a buffer of desired size\n  const bytes = new Uint8Array(\n    TAG_SIZE + // ASN_BITSTRING_TAG\n      length.byteLength +\n      1 + // amount of unused bits at the end of our bitstring\n      input.byteLength\n  )\n\n  let byteOffset = 0\n  // write bytestring tag\n  bytes[byteOffset] = BITSTRING_TAG\n  byteOffset += TAG_SIZE\n\n  // write length of the bytestring\n  bytes.set(length, byteOffset)\n  byteOffset += length.byteLength\n\n  // write unused bits at the end of our bitstring\n  bytes[byteOffset] = UNUSED_BIT_PAD\n  byteOffset += 1\n\n  // write actual data into bitstring\n  bytes.set(input, byteOffset)\n\n  return bytes\n}\n\n/**\n * @param {Uint8Array} input\n */\nexport const encodeOctetString = input => {\n  // encode input length\n  const length = encodeDERLength(input.byteLength)\n  // allocate a buffer of desired size\n  const bytes = new Uint8Array(TAG_SIZE + length.byteLength + input.byteLength)\n\n  let byteOffset = 0\n  // write octet string tag\n  bytes[byteOffset] = OCTET_STRING_TAG\n  byteOffset += TAG_SIZE\n\n  // write octet string length\n  bytes.set(length, byteOffset)\n  byteOffset += length.byteLength\n\n  // write actual data into bitstring\n  bytes.set(input, byteOffset)\n\n  return bytes\n}\n\n/**\n * @param {Uint8Array[]} sequence\n */\nexport const encodeSequence = sequence => {\n  // calculate bytelength for all the parts\n  let byteLength = 0\n  for (const item of sequence) {\n    byteLength += item.byteLength\n  }\n\n  // encode sequence byte length\n  const length = encodeDERLength(byteLength)\n\n  // allocate the buffer to write sequence into\n  const bytes = new Uint8Array(TAG_SIZE + length.byteLength + byteLength)\n\n  let byteOffset = 0\n\n  // write the sequence tag\n  bytes[byteOffset] = SEQUENCE_TAG\n  byteOffset += TAG_SIZE\n\n  // write sequence length\n  bytes.set(length, byteOffset)\n  byteOffset += length.byteLength\n\n  // write each item in the sequence\n  for (const item of sequence) {\n    bytes.set(item, byteOffset)\n    byteOffset += item.byteLength\n  }\n\n  return bytes\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n */\nexport const readSequence = (bytes, offset = 0) => {\n  const { position, length } = into(bytes, SEQUENCE_TAG, offset)\n\n  return new Uint8Array(bytes.buffer, bytes.byteOffset + position, length)\n}\n\n/**\n * @param {Uint8Array} input\n */\nexport const encodeInt = input => {\n  const extra = input.byteLength === 0 || input[0] & 0x80 ? 1 : 0\n\n  // encode input length\n  const length = encodeDERLength(input.byteLength + extra)\n  // allocate a buffer of desired size\n  const bytes = new Uint8Array(\n    TAG_SIZE + // INT_TAG\n      length.byteLength +\n      input.byteLength +\n      extra\n  )\n\n  let byteOffset = 0\n  // write octet string tag\n  bytes[byteOffset] = INT_TAG\n  byteOffset += TAG_SIZE\n\n  // write int length\n  bytes.set(length, byteOffset)\n  byteOffset += length.byteLength\n\n  // add 0 if the most-significant bit is set\n  if (extra > 0) {\n    bytes[byteOffset] = UNUSED_BIT_PAD\n    byteOffset += extra\n  }\n\n  // write actual data into bitstring\n  bytes.set(input, byteOffset)\n\n  return bytes\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @returns {number}\n */\n\nexport const enterSequence = (bytes, offset = 0) =>\n  into(bytes, SEQUENCE_TAG, offset).position\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @returns {number}\n */\nexport const skipSequence = (bytes, offset = 0) =>\n  skip(bytes, SEQUENCE_TAG, offset)\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @returns {number}\n */\nexport const skipInt = (bytes, offset = 0) => skip(bytes, INT_TAG, offset)\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @returns {Uint8Array}\n */\nexport const readBitString = (bytes, offset = 0) => {\n  const { position, length } = into(bytes, BITSTRING_TAG, offset)\n  const tag = bytes[position]\n  /* c8 ignore next 5 */\n  if (tag !== UNUSED_BIT_PAD) {\n    throw new Error(\n      `Can not read bitstring, expected length to be multiple of 8, but got ${tag} unused bits in last byte.`\n    )\n  }\n\n  return new Uint8Array(\n    bytes.buffer,\n    bytes.byteOffset + position + 1,\n    length - 1\n  )\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} byteOffset\n * @returns {Uint8Array}\n */\nexport const readInt = (bytes, byteOffset = 0) => {\n  const { position, length } = into(bytes, INT_TAG, byteOffset)\n  let delta = 0\n\n  // drop leading 0s\n  while (bytes[position + delta] === 0) {\n    delta++\n  }\n\n  return new Uint8Array(\n    bytes.buffer,\n    bytes.byteOffset + position + delta,\n    length - delta\n  )\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @returns {Uint8Array}\n */\nexport const readOctetString = (bytes, offset = 0) => {\n  const { position, length } = into(bytes, OCTET_STRING_TAG, offset)\n\n  return new Uint8Array(bytes.buffer, bytes.byteOffset + position, length)\n}\n\n/**\n * @typedef {(bytes:Uint8Array, offset:number) => Uint8Array} Reader\n * @param {[Reader, ...Reader[]]} readers\n * @param {Uint8Array} source\n * @param {number} byteOffset\n */\nexport const readSequenceWith = (readers, source, byteOffset = 0) => {\n  const results = []\n  const sequence = readSequence(source, byteOffset)\n  let offset = 0\n  for (const read of readers) {\n    const chunk = read(sequence, offset)\n    results.push(chunk)\n    offset = chunk.byteOffset + chunk.byteLength - sequence.byteOffset\n  }\n  return results\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13375, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/rsa/spki.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport {\n  encodeSequence,\n  encodeBitString,\n  enterSequence,\n  skipSequence,\n  readBitString,\n} from './asn1.js'\n\n/**\n * @typedef {import('./public-key.js').RSAPublicKey} RSAPublicKey\n */\n/**\n * Described in RFC 5208 Section 4.1: https://tools.ietf.org/html/rfc5280#section-4.1\n * ```\n * SubjectPublicKeyInfo  ::=  SEQUENCE  {\n *    algorithm            AlgorithmIdentifier,\n *    subjectPublicKey     BIT STRING  }\n * ```\n *\n * @typedef {object} SubjectPublicKeyInfo\n * @property {API.ByteView<AlgorithmIdentifier>} algorithm\n * @property {API.ByteView<RSAPublicKey>} subjectPublicKey\n * @typedef {import('./pkcs8.js').AlgorithmIdentifier} AlgorithmIdentifier\n */\n\n/**\n * The ASN.1 DER encoded header that needs to be added to an\n * ASN.1 DER encoded RSAPublicKey to make it a SubjectPublicKeyInfo.\n *\n * This byte sequence is always the same.\n *\n * A human-readable version of this as part of a dumpasn1 dump:\n *\n *     SEQUENCE {\n *       OBJECT IDENTIFIER rsaEncryption (1 2 840 113549 1 1 1)\n *       NULL\n *     }\n *\n * See https://github.com/ucan-wg/ts-ucan/issues/30\n */\nexport const SPKI_PARAMS_ENCODED = new Uint8Array([\n  48, 13, 6, 9, 42, 134, 72, 134, 247, 13, 1, 1, 1, 5, 0,\n])\n\n/**\n * @param {API.ByteView<RSAPublicKey>} key\n * @returns {API.ByteView<SubjectPublicKeyInfo>}\n */\nexport const encode = key =>\n  encodeSequence([SPKI_PARAMS_ENCODED, encodeBitString(key)])\n\n/**\n *\n * @param {API.ByteView<SubjectPublicKeyInfo>} info\n * @returns {API.ByteView<RSAPublicKey>}\n */\nexport const decode = info => {\n  // go into the top-level SEQUENCE\n  const offset = enterSequence(info, 0)\n  // skip the header we expect (SKPI_PARAMS_ENCODED)\n  const keyOffset = skipSequence(info, offset)\n\n  // we expect the bitstring next\n  return readBitString(info, keyOffset)\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAwCO,MAAM,sBAAsB,IAAI,WAAW;IAChD;IAAI;IAAI;IAAG;IAAG;IAAI;IAAK;IAAI;IAAK;IAAK;IAAI;IAAG;IAAG;IAAG;IAAG;CACtD;AAMM,MAAM,SAAS,CAAA,MACpB,IAAA,gLAAc,EAAC;QAAC;QAAqB,IAAA,iLAAe,EAAC;KAAK;AAOrD,MAAM,SAAS,CAAA;IACpB,iCAAiC;IACjC,MAAM,SAAS,IAAA,+KAAa,EAAC,MAAM;IACnC,kDAAkD;IAClD,MAAM,YAAY,IAAA,8KAAY,EAAC,MAAM;IAErC,+BAA+B;IAC/B,OAAO,IAAA,+KAAa,EAAC,MAAM;AAC7B","ignoreList":[0]}},
    {"offset": {"line": 13420, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/rsa/pkcs8.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { base64url } from 'multiformats/bases/base64'\nimport {\n  encodeSequence,\n  encodeOctetString,\n  enterSequence,\n  skipSequence,\n  skipInt,\n  readOctetString,\n} from './asn1.js'\n\nconst PKSC8_HEADER = new Uint8Array([\n  // version\n  2, 1, 0,\n  // privateKeyAlgorithm\n  48, 13, 6, 9, 42, 134, 72, 134, 247, 13, 1, 1, 1, 5, 0,\n])\n/**\n * @typedef {import('./private-key').RSAPrivateKey} RSAPrivateKey\n * @typedef {object} AlgorithmIdentifier\n * @property {Uint8Array} version\n * @property {Uint8Array} parameters\n *\n * @see https://datatracker.ietf.org/doc/html/rfc5208#section-5\n * @typedef {object} PrivateKeyInfo\n * @property {API.ByteView<number>} version\n * @property {API.ByteView<AlgorithmIdentifier>} privateKeyAlgorithm\n * @property {API.ByteView<RSAPrivateKey>} privateKey\n * @property {API.ByteView<unknown>} [attributes]\n */\n\n/**\n * @param {API.ByteView<PrivateKeyInfo>} info\n * @returns {API.ByteView<RSAPrivateKey>}\n */\nexport const decode = info => {\n  let offset = 0\n  // go into the top-level SEQUENCE\n  offset = enterSequence(info, offset)\n  offset = skipInt(info, offset)\n  offset = skipSequence(info, offset)\n\n  // we expect the bitstring next\n  return readOctetString(info, offset)\n}\n\n/**\n * @param {API.ByteView<RSAPrivateKey>} key\n * @returns {API.ByteView<PrivateKeyInfo>}\n */\nexport const encode = key =>\n  encodeSequence([PKSC8_HEADER, encodeOctetString(key)])\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AASA,MAAM,eAAe,IAAI,WAAW;IAClC,UAAU;IACV;IAAG;IAAG;IACN,sBAAsB;IACtB;IAAI;IAAI;IAAG;IAAG;IAAI;IAAK;IAAI;IAAK;IAAK;IAAI;IAAG;IAAG;IAAG;IAAG;CACtD;AAmBM,MAAM,SAAS,CAAA;IACpB,IAAI,SAAS;IACb,iCAAiC;IACjC,SAAS,IAAA,+KAAa,EAAC,MAAM;IAC7B,SAAS,IAAA,yKAAO,EAAC,MAAM;IACvB,SAAS,IAAA,8KAAY,EAAC,MAAM;IAE5B,+BAA+B;IAC/B,OAAO,IAAA,iLAAe,EAAC,MAAM;AAC/B;AAMO,MAAM,SAAS,CAAA,MACpB,IAAA,gLAAc,EAAC;QAAC;QAAc,IAAA,mLAAiB,EAAC;KAAK","ignoreList":[0]}},
    {"offset": {"line": 13471, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/rsa/public-key.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { encodeSequence, readInt, encodeInt, readSequenceWith } from './asn1.js'\nimport * as SPKI from './spki.js'\nimport { base64url } from 'multiformats/bases/base64'\n/**\n * RSA public key represenatation\n * @see https://datatracker.ietf.org/doc/html/rfc3447#appendix-A.1\n *\n * @typedef {object} RSAPublicKey\n * @property {API.ByteView<number>} n\n * @property {API.ByteView<number>} e\n */\n\n/**\n * Takes private-key information in [Private-Key Information Syntax](https://datatracker.ietf.org/doc/html/rfc5208#section-5)\n * and extracts all the fields as per [RSA private key syntax](https://datatracker.ietf.org/doc/html/rfc3447#appendix-A.1.2)\n *\n *\n * @param {API.ByteView<RSAPublicKey>} key\n * @param {number} byteOffset\n * @returns {RSAPublicKey}\n */\nexport const decode = (key, byteOffset = 0) => {\n  const [n, e] = readSequenceWith([readInt, readInt], key, byteOffset)\n\n  return { n, e }\n}\n\n/**\n * @param {RSAPublicKey} key\n * @returns {API.ByteView<RSAPublicKey>}\n */\nexport const encode = ({ n, e }) => encodeSequence([encodeInt(n), encodeInt(e)])\n\n/**\n * @param {RSAPublicKey} key\n */\nexport const toSPKI = key => SPKI.encode(encode(key))\n\n/**\n * @param {API.ByteView<SPKI.SubjectPublicKeyInfo>} info\n */\nexport const fromSPKI = info => decode(SPKI.decode(info))\n\n/**\n * @param {RSAPublicKey} key\n * @returns {JsonWebKey}\n */\nexport const toJWK = ({ n, e }) => ({\n  kty: 'RSA',\n  alg: 'RS256',\n  key_ops: ['verify'],\n  ext: true,\n  n: base64url.baseEncode(n),\n  e: base64url.baseEncode(e),\n})\n\n/**\n * @param {JsonWebKey} jwk\n * @returns {RSAPublicKey}\n */\nexport const fromJWK = ({ n, e }) => ({\n  n: base64urlDecode(n),\n  e: base64urlDecode(e),\n})\n\n/**\n * @param {string|undefined} input\n */\nconst base64urlDecode = (input = '') => base64url.baseDecode(input)\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAmBO,MAAM,SAAS,CAAC,KAAK,aAAa,CAAC;IACxC,MAAM,CAAC,GAAG,EAAE,GAAG,IAAA,kLAAgB,EAAC;QAAC,yKAAO;QAAE,yKAAO;KAAC,EAAE,KAAK;IAEzD,OAAO;QAAE;QAAG;IAAE;AAChB;AAMO,MAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAK,IAAA,gLAAc,EAAC;QAAC,IAAA,2KAAS,EAAC;QAAI,IAAA,2KAAS,EAAC;KAAG;AAKxE,MAAM,SAAS,CAAA,MAAO,wKAAW,CAAC,OAAO;AAKzC,MAAM,WAAW,CAAA,OAAQ,OAAO,wKAAW,CAAC;AAM5C,MAAM,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAK,CAAC;QAClC,KAAK;QACL,KAAK;QACL,SAAS;YAAC;SAAS;QACnB,KAAK;QACL,GAAG,8KAAS,CAAC,UAAU,CAAC;QACxB,GAAG,8KAAS,CAAC,UAAU,CAAC;IAC1B,CAAC;AAMM,MAAM,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAK,CAAC;QACpC,GAAG,gBAAgB;QACnB,GAAG,gBAAgB;IACrB,CAAC;AAED;;CAEC,GACD,MAAM,kBAAkB,CAAC,QAAQ,EAAE,GAAK,8KAAS,CAAC,UAAU,CAAC","ignoreList":[0]}},
    {"offset": {"line": 13530, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/rsa/private-key.js"],"sourcesContent":["import * as API from '@ucanto/interface'\nimport { encodeSequence, readInt, readSequenceWith, encodeInt } from './asn1.js'\nimport { base64url } from 'multiformats/bases/base64'\nimport * as PKCS8 from './pkcs8.js'\nimport * as SPKI from './spki.js'\nimport * as PublicKey from './public-key.js'\n\nexport const code = 0x1305\nconst VERSION = new Uint8Array()\n\n/**\n * @see https://datatracker.ietf.org/doc/html/rfc3447#appendix-A.1.2\n * @typedef {object} RSAPrivateKey\n * @property {Uint8Array} v\n * @property {Uint8Array} n\n * @property {Uint8Array} e\n * @property {Uint8Array} d\n * @property {Uint8Array} p\n * @property {Uint8Array} q\n * @property {Uint8Array} dp\n * @property {Uint8Array} dq\n * @property {Uint8Array} qi\n */\n\n/**\n * Takes private-key information in [Private-Key Information Syntax](https://datatracker.ietf.org/doc/html/rfc5208#section-5)\n * and extracts all the fields as per [RSA private key syntax](https://datatracker.ietf.org/doc/html/rfc3447#appendix-A.1.2)\n *\n *\n * @param {API.ByteView<RSAPrivateKey>} source\n * @param {number} byteOffset\n * @returns {RSAPrivateKey}\n */\nexport const decode = (source, byteOffset = 0) => {\n  const [v, n, e, d, p, q, dp, dq, qi] = readSequenceWith(\n    [\n      readInt,\n      readInt,\n      readInt,\n      readInt,\n      readInt,\n      readInt,\n      readInt,\n      readInt,\n      readInt,\n    ],\n    source,\n    byteOffset\n  )\n\n  return { v, n, e, d, p, q, dp, dq, qi }\n}\n\n/**\n * @param {RSAPrivateKey} key\n * @returns {API.ByteView<RSAPrivateKey>}\n */\nexport const encode = ({ v, n, e, d, p, q, dp, dq, qi }) => {\n  return encodeSequence([\n    encodeInt(v),\n    encodeInt(n),\n    encodeInt(e),\n    encodeInt(d),\n    encodeInt(p),\n    encodeInt(q),\n    encodeInt(dp),\n    encodeInt(dq),\n    encodeInt(qi),\n  ])\n}\n\n/**\n * @param {RSAPrivateKey} key\n * @returns {JsonWebKey}\n */\nexport const toJWK = ({ n, e, d, p, q, dp, dq, qi }) => ({\n  kty: 'RSA',\n  alg: 'RS256',\n  key_ops: ['sign'],\n  ext: true,\n  n: base64url.baseEncode(n),\n  e: base64url.baseEncode(e),\n  d: base64url.baseEncode(d),\n  p: base64url.baseEncode(p),\n  q: base64url.baseEncode(q),\n  dp: base64url.baseEncode(dp),\n  dq: base64url.baseEncode(dq),\n  qi: base64url.baseEncode(qi),\n})\n\n/**\n * @param {JsonWebKey} key\n * @returns {RSAPrivateKey}\n */\nexport const fromJWK = ({ n, e, d, p, q, dp, dq, qi }) => ({\n  v: VERSION,\n  n: base64urlDecode(n),\n  e: base64urlDecode(e),\n  d: base64urlDecode(d),\n  p: base64urlDecode(p),\n  q: base64urlDecode(q),\n  dp: base64urlDecode(dp),\n  dq: base64urlDecode(dq),\n  qi: base64urlDecode(qi),\n})\n\n/**\n * @param {RSAPrivateKey} key\n */\nexport const toPKCS8 = key => PKCS8.encode(encode(key))\n\n/**\n * @param {API.ByteView<PKCS8.PrivateKeyInfo>} info\n */\nexport const fromPKCS8 = info => decode(PKCS8.decode(info))\n\n/**\n * @param {RSAPrivateKey} key\n */\nexport const toSPKI = key => SPKI.encode(PublicKey.encode(key))\n\n/**\n *\n * @param {string|undefined} input\n * @returns\n */\nconst base64urlDecode = (input = '') => base64url.baseDecode(input)\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,OAAO;AACpB,MAAM,UAAU,IAAI;AAyBb,MAAM,SAAS,CAAC,QAAQ,aAAa,CAAC;IAC3C,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,IAAA,kLAAgB,EACrD;QACE,yKAAO;QACP,yKAAO;QACP,yKAAO;QACP,yKAAO;QACP,yKAAO;QACP,yKAAO;QACP,yKAAO;QACP,yKAAO;QACP,yKAAO;KACR,EACD,QACA;IAGF,OAAO;QAAE;QAAG;QAAG;QAAG;QAAG;QAAG;QAAG;QAAI;QAAI;IAAG;AACxC;AAMO,MAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;IACrD,OAAO,IAAA,gLAAc,EAAC;QACpB,IAAA,2KAAS,EAAC;QACV,IAAA,2KAAS,EAAC;QACV,IAAA,2KAAS,EAAC;QACV,IAAA,2KAAS,EAAC;QACV,IAAA,2KAAS,EAAC;QACV,IAAA,2KAAS,EAAC;QACV,IAAA,2KAAS,EAAC;QACV,IAAA,2KAAS,EAAC;QACV,IAAA,2KAAS,EAAC;KACX;AACH;AAMO,MAAM,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAK,CAAC;QACvD,KAAK;QACL,KAAK;QACL,SAAS;YAAC;SAAO;QACjB,KAAK;QACL,GAAG,8KAAS,CAAC,UAAU,CAAC;QACxB,GAAG,8KAAS,CAAC,UAAU,CAAC;QACxB,GAAG,8KAAS,CAAC,UAAU,CAAC;QACxB,GAAG,8KAAS,CAAC,UAAU,CAAC;QACxB,GAAG,8KAAS,CAAC,UAAU,CAAC;QACxB,IAAI,8KAAS,CAAC,UAAU,CAAC;QACzB,IAAI,8KAAS,CAAC,UAAU,CAAC;QACzB,IAAI,8KAAS,CAAC,UAAU,CAAC;IAC3B,CAAC;AAMM,MAAM,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAK,CAAC;QACzD,GAAG;QACH,GAAG,gBAAgB;QACnB,GAAG,gBAAgB;QACnB,GAAG,gBAAgB;QACnB,GAAG,gBAAgB;QACnB,GAAG,gBAAgB;QACnB,IAAI,gBAAgB;QACpB,IAAI,gBAAgB;QACpB,IAAI,gBAAgB;IACtB,CAAC;AAKM,MAAM,UAAU,CAAA,MAAO,yKAAY,CAAC,OAAO;AAK3C,MAAM,YAAY,CAAA,OAAQ,OAAO,yKAAY,CAAC;AAK9C,MAAM,SAAS,CAAA,MAAO,wKAAW,CAAC,iLAAgB,CAAC;AAE1D;;;;CAIC,GACD,MAAM,kBAAkB,CAAC,QAAQ,EAAE,GAAK,8KAAS,CAAC,UAAU,CAAC","ignoreList":[0]}},
    {"offset": {"line": 13638, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/rsa.js"],"sourcesContent":["import { webcrypto } from 'one-webcrypto'\nimport { base58btc } from 'multiformats/bases/base58'\nimport * as API from './rsa/type.js'\nimport * as DID from '@ipld/dag-ucan/did'\nimport { tagWith, untagWith } from './multiformat.js'\nimport * as Signature from '@ipld/dag-ucan/signature'\nimport * as SPKI from './rsa/spki.js'\nimport * as PKCS8 from './rsa/pkcs8.js'\nimport * as PrivateKey from './rsa/private-key.js'\nimport * as PublicKey from './rsa/public-key.js'\nimport * as Verifier from './verifier.js'\nimport * as Signer from './signer.js'\nexport * from './rsa/type.js'\n\nexport const name = 'RSA'\n\n/** @type {API.RSASigner['code']} */\nexport const code = 0x1305\n\n/** @type {API.RSAVerifier['code']} */\nconst verifierCode = 0x1205\n\n/** @type {API.SigAlg} */\nexport const signatureCode = Signature.RS256\nexport const signatureAlgorithm = 'RS256'\n\nconst ALG = 'RSASSA-PKCS1-v1_5'\nconst HASH_ALG = 'SHA-256'\nconst KEY_SIZE = 2048\nconst SALT_LENGTH = 128\nconst IMPORT_PARAMS = {\n  name: ALG,\n  hash: { name: HASH_ALG },\n}\n\n/**\n * @param {object} options\n * @param {number} [options.size]\n * @param {boolean} [options.extractable]\n * @returns {Promise<API.RSASigner>}\n */\nexport const generate = async ({\n  size = KEY_SIZE,\n  extractable = false,\n} = {}) => {\n  // We start by generate an RSA keypair using web crypto API.\n  const { publicKey, privateKey } = await webcrypto.subtle.generateKey(\n    {\n      name: ALG,\n      modulusLength: size,\n      publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n      hash: { name: HASH_ALG },\n    },\n\n    extractable,\n    ['sign', 'verify']\n  )\n\n  // Next we need to encode public key, because `RSAVerifier` uses it to\n  // for implementing a `did()` method. To do this we first export\n  // Subject Public Key Info (SPKI) using web crypto API.\n  const spki = await webcrypto.subtle.exportKey('spki', publicKey)\n  // Then we extract public key from the SPKI and tag it with RSA public key\n  // multicode\n  const publicBytes = tagWith(verifierCode, SPKI.decode(new Uint8Array(spki)))\n  // Now that we have publicKey and it's multiformat representation we can\n  // create a verifier.\n  const verifier = new RSAVerifier({ bytes: publicBytes, publicKey })\n\n  // If we generated non extractable key we just wrap actual keys and verifier\n  // in the RSASigner view.\n  if (!extractable) {\n    return new UnextractableRSASigner({\n      privateKey,\n      verifier,\n    })\n  }\n  // Otherwise we export key in Private Key Cryptography Standards (PKCS)\n  // format and extract a bytes corresponding to the private key, which\n  // we tag with RSA private key multiformat code. With both binary and actual\n  // key representation we create a RSASigner view.\n  // Please note that do key export flow during generation so that we can:\n  // 1. Guarantee that it will be exportable.\n  // 2. Make `export` method sync.\n  else {\n    const pkcs8 = await webcrypto.subtle.exportKey('pkcs8', privateKey)\n    const bytes = tagWith(code, PKCS8.decode(new Uint8Array(pkcs8)))\n    return new ExtractableRSASigner({\n      privateKey,\n      bytes,\n      verifier,\n    })\n  }\n}\n\n/**\n * @param {API.SignerArchive<API.DID, typeof signatureCode>} archive\n * @returns {API.RSASigner}\n */\nexport const from = ({ id, keys }) => {\n  if (id.startsWith('did:key:')) {\n    const did = /** @type {API.DIDKey} */ (id)\n    const key = keys[did]\n    if (key instanceof Uint8Array) {\n      return decode(key)\n    } else {\n      return new UnextractableRSASigner({\n        privateKey: key,\n        verifier: RSAVerifier.parse(did),\n      })\n    }\n  } else {\n    throw new TypeError(\n      `RSA can not import from ${id} archive, try generic Signer instead`\n    )\n  }\n}\n\n/**\n * @template {API.SignerImporter} Other\n * @param {Other} other\n */\nexport const or = other => Signer.or({ from }, other)\n\n/**\n * @param {EncodedSigner} bytes\n * @returns {API.RSASigner}\n */\nexport const decode = bytes => {\n  // First we decode RSA key data from the private key with multicode tag.\n  const rsa = PrivateKey.decode(untagWith(code, bytes))\n  // Then we encode RSA key data as public key with multicode tag.\n  const publicBytes = tagWith(verifierCode, PublicKey.encode(rsa))\n\n  return new ExtractableRSASigner({\n    bytes,\n    privateKey: webcrypto.subtle.importKey(\n      'pkcs8',\n      PKCS8.encode(untagWith(code, bytes)),\n      IMPORT_PARAMS,\n      true,\n      ['sign']\n    ),\n\n    verifier: RSAVerifier.decode(publicBytes),\n  })\n}\n\n/**\n * @implements {API.RSAVerifier}\n */\nclass RSAVerifier {\n  /**\n   * @param {object} options\n   * @param {API.Await<CryptoKey>} options.publicKey\n   * @param {API.ByteView<API.RSAVerifier>} options.bytes\n   */\n  constructor({ publicKey, bytes }) {\n    /** @private */\n    this.publicKey = publicKey\n    /** @private */\n    this.bytes = bytes\n  }\n\n  /**\n   * @template {API.DID} ID\n   * @param {ID} id\n   * @returns {API.Verifier<ID, typeof signatureCode>}\n   */\n  withDID(id) {\n    return Verifier.withDID(this, id)\n  }\n\n  toDIDKey() {\n    return this.did()\n  }\n\n  /**\n   * @param {API.ByteView<API.RSAVerifier>} bytes\n   * @returns {API.RSAVerifier}\n   */\n  static decode(bytes) {\n    return new this({\n      bytes,\n      publicKey: webcrypto.subtle.importKey(\n        'spki',\n        SPKI.encode(untagWith(verifierCode, bytes)),\n        IMPORT_PARAMS,\n        true,\n        ['verify']\n      ),\n    })\n  }\n  /**\n   * @param {API.DIDKey} did\n   * @returns {API.RSAVerifier}\n   */\n  static parse(did) {\n    return RSAVerifier.decode(/** @type {Uint8Array} */ (DID.parse(did)))\n  }\n\n  /**\n   * @param {API.PrincipalParser} other\n   */\n  static or(other) {\n    return Verifier.or(this, other)\n  }\n\n  /** @type {typeof verifierCode} */\n  get code() {\n    return verifierCode\n  }\n  /**\n   * @type {typeof signatureCode}\n   */\n  get signatureCode() {\n    return signatureCode\n  }\n  /**\n   * @type {typeof signatureAlgorithm}\n   */\n  get signatureAlgorithm() {\n    return signatureAlgorithm\n  }\n  /**\n   * DID of the Principal in `did:key` format.\n   * @returns {API.DID<\"key\">}\n   */\n  did() {\n    return `did:key:${base58btc.encode(this.bytes)}`\n  }\n\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   * @param {API.Signature<T, typeof this.signatureCode>} signature\n   * @returns {Promise<boolean>}\n   */\n  async verify(payload, signature) {\n    // if signature code does not match RS256 it's not signed by corresponding\n    // signer.\n    if (signature.code !== signatureCode) {\n      return false\n    }\n\n    return webcrypto.subtle.verify(\n      { name: ALG, hash: { name: HASH_ALG } },\n      await this.publicKey,\n      signature.raw,\n      payload\n    )\n  }\n}\n\nconst RSAVerifier$ = /** @type {API.ComposedDIDParser} */ (RSAVerifier)\nexport { RSAVerifier as Verifier }\n\n/**\n * @typedef {API.ByteView<API.Signer<API.DID<'key'>, typeof signatureCode> & CryptoKey>} EncodedSigner\n */\n\nclass RSASigner {\n  /**\n   * @param {object} options\n   * @param {API.Await<CryptoKey>} options.privateKey\n   * @param {API.RSAVerifier} options.verifier\n   */\n  constructor({ privateKey, verifier }) {\n    /** @readonly */\n    this.verifier = verifier\n    /** @protected */\n    this.privateKey = privateKey\n  }\n  get signer() {\n    return this\n  }\n\n  /**\n   * @type {typeof code}\n   */\n  get code() {\n    return code\n  }\n  /**\n   * @type {typeof signatureCode}\n   */\n  get signatureCode() {\n    return signatureCode\n  }\n  /**\n   * @type {typeof signatureAlgorithm}\n   */\n  get signatureAlgorithm() {\n    return signatureAlgorithm\n  }\n\n  did() {\n    return this.verifier.did()\n  }\n\n  toDIDKey() {\n    return this.verifier.toDIDKey()\n  }\n\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   * @param {API.Signature<T, typeof this.signatureCode>} signature\n   */\n  verify(payload, signature) {\n    return this.verifier.verify(payload, signature)\n  }\n  /**\n   * @template T\n   * @param {API.ByteView<T>} payload\n   * @returns {Promise<API.SignatureView<T, typeof signatureCode>>}\n   */\n  async sign(payload) {\n    const buffer = await webcrypto.subtle.sign(\n      { name: ALG, saltLength: SALT_LENGTH },\n      await this.privateKey,\n      payload\n    )\n\n    return Signature.create(signatureCode, new Uint8Array(buffer))\n  }\n}\n\n/**\n * @implements {API.RSASigner}\n */\nclass ExtractableRSASigner extends RSASigner {\n  /**\n   * @param {object} options\n   * @param {API.Await<CryptoKey>} options.privateKey\n   * @param {EncodedSigner} options.bytes\n   * @param {API.RSAVerifier} options.verifier\n   */\n  constructor(options) {\n    super(options)\n    this.bytes = options.bytes\n  }\n\n  /**\n   * @template {API.DID} ID\n   * @param {ID} id\n   * @returns {API.Signer<ID, typeof signatureCode>}\n   */\n  withDID(id) {\n    return Signer.withDID(this, id)\n  }\n\n  toArchive() {\n    const id = this.did()\n    return {\n      id,\n      keys: { [id]: this.bytes },\n    }\n  }\n}\n\n/**\n * @implements {API.RSASigner}\n */\nclass UnextractableRSASigner extends RSASigner {\n  /**\n   * @param {object} options\n   * @param {CryptoKey} options.privateKey\n   * @param {API.RSAVerifier} options.verifier\n   */\n  constructor(options) {\n    super(options)\n    this.privateKey = options.privateKey\n  }\n\n  /**\n   * @template {API.DID} ID\n   * @param {ID} id\n   * @returns {API.Signer<ID, typeof signatureCode>}\n   */\n  withDID(id) {\n    return Signer.withDID(this, id)\n  }\n\n  toArchive() {\n    const id = this.did()\n    return {\n      id,\n      keys: { [id]: this.privateKey },\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14001, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/absentee.js"],"sourcesContent":["import * as Signature from '@ipld/dag-ucan/signature'\nimport * as UCAN from '@ipld/dag-ucan'\n\n/**\n * @template {UCAN.DID} ID\n * @param {{id: ID }} id\n * @returns {UCAN.Signer<ID, Signature.NON_STANDARD>}\n */\nexport const from = ({ id }) => new Absentee(id)\n\n/**\n * An absentee is a special type of signer that produces an absent signature,\n * which signals that verifier needs to verify authorization interactively.\n *\n * @template {UCAN.DID} ID\n * @implements {UCAN.Signer<ID, Signature.NON_STANDARD>}\n */\nclass Absentee {\n  /**\n   * @param {ID} id\n   */\n  constructor(id) {\n    this.id = id\n  }\n  did() {\n    return this.id\n  }\n  /* c8 ignore next 3 */\n  get signatureCode() {\n    return Signature.NON_STANDARD\n  }\n  get signatureAlgorithm() {\n    return ''\n  }\n  sign() {\n    return Signature.createNonStandard(\n      this.signatureAlgorithm,\n      new Uint8Array(0)\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAOO,MAAM,OAAO,CAAC,EAAE,EAAE,EAAE,GAAK,IAAI,SAAS;AAE7C;;;;;;CAMC,GACD,MAAM;IACJ;;GAEC,GACD,YAAY,EAAE,CAAE;QACd,IAAI,CAAC,EAAE,GAAG;IACZ;IACA,MAAM;QACJ,OAAO,IAAI,CAAC,EAAE;IAChB;IACA,oBAAoB,GACpB,IAAI,gBAAgB;QAClB,OAAO,4KAAsB;IAC/B;IACA,IAAI,qBAAqB;QACvB,OAAO;IACT;IACA,OAAO;QACL,OAAO,iLAA2B,CAChC,IAAI,CAAC,kBAAkB,EACvB,IAAI,WAAW;IAEnB;AACF","ignoreList":[0]}},
    {"offset": {"line": 14039, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ucanto/principal/src/lib.js"],"sourcesContent":["import * as ed25519 from './ed25519.js'\nimport * as RSA from './rsa.js'\nimport * as Absentee from './absentee.js'\nexport * from './multiformat.js'\nexport const Verifier = ed25519.Verifier.or(RSA.Verifier)\nexport const Signer = ed25519.or(RSA)\n\n// exports\nexport { ed25519, RSA, Absentee }\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;;;;;AACO,MAAM,WAAW,sNAAgB,CAAC,EAAE,CAAC,uJAAI,QAAQ;AACjD,MAAM,SAAS,0KAAU,CAAC","ignoreList":[0]}},
    {"offset": {"line": 14082, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@scure/bip39/node_modules/@noble/hashes/esm/crypto.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/node_modules/%40noble/hashes/src/crypto.ts"],"sourcesContent":["/**\n * Internal webcrypto alias.\n * We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n * See utils.ts for details.\n * @module\n */\ndeclare const globalThis: Record<string, any> | undefined;\nexport const crypto: any =\n  typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n"],"names":[],"mappings":";;;;AAOO,MAAM,MAAM,GACjB,OAAO,UAAU,KAAK,QAAQ,IAAI,QAAQ,IAAI,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC"}},
    {"offset": {"line": 14091, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@scure/bip39/node_modules/@noble/hashes/esm/utils.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/node_modules/%40noble/hashes/src/utils.ts"],"sourcesContent":["/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n\n/** Asserts something is positive integer. */\nexport function anumber(n: number): void {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error('positive integer expected, got ' + n);\n}\n\n/** Asserts something is Uint8Array. */\nexport function abytes(b: Uint8Array | undefined, ...lengths: number[]): void {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n\n/** Asserts something is hash */\nexport function ahash(h: IHash): void {\n  if (typeof h !== 'function' || typeof h.create !== 'function')\n    throw new Error('Hash should be wrapped by utils.createHasher');\n  anumber(h.outputLen);\n  anumber(h.blockLen);\n}\n\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance: any, checkFinished = true): void {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\n\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out: any, instance: any): void {\n  abytes(out);\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error('digestInto() expects output buffer of length at least ' + min);\n  }\n}\n\n/** Generic type encompassing 8/16/32-byte arrays - but not 64-byte. */\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr: TypedArray): Uint8Array {\n  return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr: TypedArray): Uint32Array {\n  return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays: TypedArray[]): void {\n  for (let i = 0; i < arrays.length; i++) {\n    arrays[i].fill(0);\n  }\n}\n\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr: TypedArray): DataView {\n  return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word: number, shift: number): number {\n  return (word << (32 - shift)) | (word >>> shift);\n}\n\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word: number, shift: number): number {\n  return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE: boolean = /* @__PURE__ */ (() =>\n  new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n\n/** The byte swap operation for uint32 */\nexport function byteSwap(word: number): number {\n  return (\n    ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff)\n  );\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE: (n: number) => number = isLE\n  ? (n: number) => n\n  : (n: number) => byteSwap(n);\n\n/** @deprecated */\nexport const byteSwapIfBE: typeof swap8IfBE = swap8IfBE;\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr: Uint32Array): Uint32Array {\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = byteSwap(arr[i]);\n  }\n  return arr;\n}\n\nexport const swap32IfBE: (u: Uint32Array) => Uint32Array = isLE\n  ? (u: Uint32Array) => u\n  : byteSwap32;\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  // @ts-ignore\n  typeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  abytes(bytes);\n  // @ts-ignore\n  if (hasHexBuiltin) return bytes.toHex();\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 } as const;\nfunction asciiToBase16(ch: number): number | undefined {\n  if (ch >= asciis._0 && ch <= asciis._9) return ch - asciis._0; // '2' => 50-48\n  if (ch >= asciis.A && ch <= asciis.F) return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n  if (ch >= asciis.a && ch <= asciis.f) return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n  return;\n}\n\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  // @ts-ignore\n  if (hasHexBuiltin) return Uint8Array.fromHex(hex);\n  const hl = hex.length;\n  const al = hl / 2;\n  if (hl % 2) throw new Error('hex string expected, got unpadded hex of length ' + hl);\n  const array = new Uint8Array(al);\n  for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n    const n1 = asciiToBase16(hex.charCodeAt(hi));\n    const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n    if (n1 === undefined || n2 === undefined) {\n      const char = hex[hi] + hex[hi + 1];\n      throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n    }\n    array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n  }\n  return array;\n}\n\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async (): Promise<void> => {};\n\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(\n  iters: number,\n  tick: number,\n  cb: (i: number) => void\n): Promise<void> {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols, but ts doesn't see them: https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error('string expected');\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\nexport function bytesToUtf8(bytes: Uint8Array): string {\n  return new TextDecoder().decode(bytes);\n}\n\n/** Accepted input of hash functions. Strings are converted to byte arrays. */\nexport type Input = string | Uint8Array;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data: Input): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  abytes(data);\n  return data;\n}\n\n/** KDFs can accept string or Uint8Array for user convenience. */\nexport type KDFInput = string | Uint8Array;\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data: KDFInput): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  abytes(data);\n  return data;\n}\n\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  let sum = 0;\n  for (let i = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    abytes(a);\n    sum += a.length;\n  }\n  const res = new Uint8Array(sum);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    res.set(a, pad);\n    pad += a.length;\n  }\n  return res;\n}\n\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n    throw new Error('options should be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\n/** Hash interface. */\nexport type IHash = {\n  (data: Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\n\n/** For runtime check if class implements interface */\nexport abstract class Hash<T extends Hash<T>> {\n  abstract blockLen: number; // Bytes per block\n  abstract outputLen: number; // Bytes in output\n  abstract update(buf: Input): this;\n  // Writes digest into buf\n  abstract digestInto(buf: Uint8Array): void;\n  abstract digest(): Uint8Array;\n  /**\n   * Resets internal state. Makes Hash instance unusable.\n   * Reset is impossible for keyed hashes if key is consumed into state. If digest is not consumed\n   * by user, they will need to manually call `destroy()` when zeroing is necessary.\n   */\n  abstract destroy(): void;\n  /**\n   * Clones hash instance. Unsafe: doesn't check whether `to` is valid. Can be used as `clone()`\n   * when no options are passed.\n   * Reasons to use `_cloneInto` instead of clone: 1) performance 2) reuse instance => all internal\n   * buffers are overwritten => causes buffer overwrite which is used for digest in some cases.\n   * There are no guarantees for clean-up because it's impossible in JS.\n   */\n  abstract _cloneInto(to?: T): T;\n  // Safe version that clones internal state\n  abstract clone(): T;\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot\n * destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\n/** Hash function */\nexport type CHash = ReturnType<typeof createHasher>;\n/** Hash function with output */\nexport type CHashO = ReturnType<typeof createOptHasher>;\n/** XOF with output */\nexport type CHashXO = ReturnType<typeof createXOFer>;\n\n/** Wraps hash function, creating an interface on top of it */\nexport function createHasher<T extends Hash<T>>(\n  hashCons: () => Hash<T>\n): {\n  (msg: Input): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(): Hash<T>;\n} {\n  const hashC = (msg: Input): Uint8Array => hashCons().update(toBytes(msg)).digest();\n  const tmp = hashCons();\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = () => hashCons();\n  return hashC;\n}\n\nexport function createOptHasher<H extends Hash<H>, T extends Object>(\n  hashCons: (opts?: T) => Hash<H>\n): {\n  (msg: Input, opts?: T): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(opts?: T): Hash<H>;\n} {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts?: T) => hashCons(opts);\n  return hashC;\n}\n\nexport function createXOFer<H extends HashXOF<H>, T extends Object>(\n  hashCons: (opts?: T) => HashXOF<H>\n): {\n  (msg: Input, opts?: T): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(opts?: T): HashXOF<H>;\n} {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts?: T) => hashCons(opts);\n  return hashC;\n}\nexport const wrapConstructor: typeof createHasher = createHasher;\nexport const wrapConstructorWithOpts: typeof createOptHasher = createOptHasher;\nexport const wrapXOFConstructorWithOpts: typeof createXOFer = createXOFer;\n\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  if (crypto && typeof crypto.getRandomValues === 'function') {\n    return crypto.getRandomValues(new Uint8Array(bytesLength));\n  }\n  // Legacy Node.js compatibility\n  if (crypto && typeof crypto.randomBytes === 'function') {\n    return Uint8Array.from(crypto.randomBytes(bytesLength));\n  }\n  throw new Error('crypto.getRandomValues must be defined');\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 14381, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@scure/bip39/node_modules/@noble/hashes/esm/hmac.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/node_modules/%40noble/hashes/src/hmac.ts"],"sourcesContent":["/**\n * HMAC: RFC2104 message authentication code.\n * @module\n */\nimport { abytes, aexists, ahash, clean, Hash, toBytes, type CHash, type Input } from './utils.ts';\n\nexport class HMAC<T extends Hash<T>> extends Hash<HMAC<T>> {\n  oHash: T;\n  iHash: T;\n  blockLen: number;\n  outputLen: number;\n  private finished = false;\n  private destroyed = false;\n\n  constructor(hash: CHash, _key: Input) {\n    super();\n    ahash(hash);\n    const key = toBytes(_key);\n    this.iHash = hash.create() as T;\n    if (typeof this.iHash.update !== 'function')\n      throw new Error('Expected instance of class which extends utils.Hash');\n    this.blockLen = this.iHash.blockLen;\n    this.outputLen = this.iHash.outputLen;\n    const blockLen = this.blockLen;\n    const pad = new Uint8Array(blockLen);\n    // blockLen can be bigger than outputLen\n    pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\n    this.iHash.update(pad);\n    // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n    this.oHash = hash.create() as T;\n    // Undo internal XOR && apply outer XOR\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\n    this.oHash.update(pad);\n    clean(pad);\n  }\n  update(buf: Input): this {\n    aexists(this);\n    this.iHash.update(buf);\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    abytes(out, this.outputLen);\n    this.finished = true;\n    this.iHash.digestInto(out);\n    this.oHash.update(out);\n    this.oHash.digestInto(out);\n    this.destroy();\n  }\n  digest(): Uint8Array {\n    const out = new Uint8Array(this.oHash.outputLen);\n    this.digestInto(out);\n    return out;\n  }\n  _cloneInto(to?: HMAC<T>): HMAC<T> {\n    // Create new instance without calling constructor since key already in state and we don't know it.\n    to ||= Object.create(Object.getPrototypeOf(this), {});\n    const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n    to = to as this;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    to.blockLen = blockLen;\n    to.outputLen = outputLen;\n    to.oHash = oHash._cloneInto(to.oHash);\n    to.iHash = iHash._cloneInto(to.iHash);\n    return to;\n  }\n  clone(): HMAC<T> {\n    return this._cloneInto();\n  }\n  destroy(): void {\n    this.destroyed = true;\n    this.oHash.destroy();\n    this.iHash.destroy();\n  }\n}\n\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n * @example\n * import { hmac } from '@noble/hashes/hmac';\n * import { sha256 } from '@noble/hashes/sha2';\n * const mac1 = hmac(sha256, 'key', 'message');\n */\nexport const hmac: {\n  (hash: CHash, key: Input, message: Input): Uint8Array;\n  create(hash: CHash, key: Input): HMAC<any>;\n} = (hash: CHash, key: Input, message: Input): Uint8Array =>\n  new HMAC<any>(hash, key).update(message).digest();\nhmac.create = (hash: CHash, key: Input) => new HMAC<any>(hash, key);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 14463, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@scure/bip39/node_modules/@noble/hashes/esm/pbkdf2.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/node_modules/%40noble/hashes/src/pbkdf2.ts"],"sourcesContent":["/**\n * PBKDF (RFC 2898). Can be used to create a key from password and salt.\n * @module\n */\nimport { hmac } from './hmac.ts';\n// prettier-ignore\nimport {\n  ahash, anumber,\n  asyncLoop, checkOpts, clean, createView, Hash, kdfInputToBytes,\n  type CHash,\n  type KDFInput\n} from './utils.ts';\n\nexport type Pbkdf2Opt = {\n  c: number; // Iterations\n  dkLen?: number; // Desired key length in bytes (Intended output length in octets of the derived key\n  asyncTick?: number; // Maximum time in ms for which async function can block execution\n};\n// Common prologue and epilogue for sync/async functions\nfunction pbkdf2Init(hash: CHash, _password: KDFInput, _salt: KDFInput, _opts: Pbkdf2Opt) {\n  ahash(hash);\n  const opts = checkOpts({ dkLen: 32, asyncTick: 10 }, _opts);\n  const { c, dkLen, asyncTick } = opts;\n  anumber(c);\n  anumber(dkLen);\n  anumber(asyncTick);\n  if (c < 1) throw new Error('iterations (c) should be >= 1');\n  const password = kdfInputToBytes(_password);\n  const salt = kdfInputToBytes(_salt);\n  // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\n  const DK = new Uint8Array(dkLen);\n  // U1 = PRF(Password, Salt + INT_32_BE(i))\n  const PRF = hmac.create(hash, password);\n  const PRFSalt = PRF._cloneInto().update(salt);\n  return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\n}\n\nfunction pbkdf2Output<T extends Hash<T>>(\n  PRF: Hash<T>,\n  PRFSalt: Hash<T>,\n  DK: Uint8Array,\n  prfW: Hash<T>,\n  u: Uint8Array\n) {\n  PRF.destroy();\n  PRFSalt.destroy();\n  if (prfW) prfW.destroy();\n  clean(u);\n  return DK;\n}\n\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function\n * @param hash - hash function that would be used e.g. sha256\n * @param password - password from which a derived key is generated\n * @param salt - cryptographic salt\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\n * @example\n * const key = pbkdf2(sha256, 'password', 'salt', { dkLen: 32, c: Math.pow(2, 18) });\n */\nexport function pbkdf2(\n  hash: CHash,\n  password: KDFInput,\n  salt: KDFInput,\n  opts: Pbkdf2Opt\n): Uint8Array {\n  const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n  let prfW: any; // Working copy\n  const arr = new Uint8Array(4);\n  const view = createView(arr);\n  const u = new Uint8Array(PRF.outputLen);\n  // DK = T1 + T2 +  + Tdklen/hlen\n  for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n    // Ti = F(Password, Salt, c, i)\n    const Ti = DK.subarray(pos, pos + PRF.outputLen);\n    view.setInt32(0, ti, false);\n    // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n    Ti.set(u.subarray(0, Ti.length));\n    for (let ui = 1; ui < c; ui++) {\n      // Uc = PRF(Password, Uc1)\n      PRF._cloneInto(prfW).update(u).digestInto(u);\n      for (let i = 0; i < Ti.length; i++) Ti[i] ^= u[i];\n    }\n  }\n  return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\n\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function. Async version.\n * @example\n * await pbkdf2Async(sha256, 'password', 'salt', { dkLen: 32, c: 500_000 });\n */\nexport async function pbkdf2Async(\n  hash: CHash,\n  password: KDFInput,\n  salt: KDFInput,\n  opts: Pbkdf2Opt\n): Promise<Uint8Array> {\n  const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n  let prfW: any; // Working copy\n  const arr = new Uint8Array(4);\n  const view = createView(arr);\n  const u = new Uint8Array(PRF.outputLen);\n  // DK = T1 + T2 +  + Tdklen/hlen\n  for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n    // Ti = F(Password, Salt, c, i)\n    const Ti = DK.subarray(pos, pos + PRF.outputLen);\n    view.setInt32(0, ti, false);\n    // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n    Ti.set(u.subarray(0, Ti.length));\n    await asyncLoop(c - 1, asyncTick, () => {\n      // Uc = PRF(Password, Uc1)\n      PRF._cloneInto(prfW).update(u).digestInto(u);\n      for (let i = 0; i < Ti.length; i++) Ti[i] ^= u[i];\n    });\n  }\n  return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 14562, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@scure/bip39/node_modules/@noble/hashes/esm/_md.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/node_modules/%40noble/hashes/src/_md.ts"],"sourcesContent":["/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nimport { type Input, Hash, abytes, aexists, aoutput, clean, createView, toBytes } from './utils.ts';\n\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */\nexport function setBigUint64(\n  view: DataView,\n  byteOffset: number,\n  value: bigint,\n  isLE: boolean\n): void {\n  if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n  const _32n = BigInt(32);\n  const _u32_max = BigInt(0xffffffff);\n  const wh = Number((value >> _32n) & _u32_max);\n  const wl = Number(value & _u32_max);\n  const h = isLE ? 4 : 0;\n  const l = isLE ? 0 : 4;\n  view.setUint32(byteOffset + h, wh, isLE);\n  view.setUint32(byteOffset + l, wl, isLE);\n}\n\n/** Choice: a ? b : c */\nexport function Chi(a: number, b: number, c: number): number {\n  return (a & b) ^ (~a & c);\n}\n\n/** Majority function, true if any two inputs is true. */\nexport function Maj(a: number, b: number, c: number): number {\n  return (a & b) ^ (a & c) ^ (b & c);\n}\n\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport abstract class HashMD<T extends HashMD<T>> extends Hash<T> {\n  protected abstract process(buf: DataView, offset: number): void;\n  protected abstract get(): number[];\n  protected abstract set(...args: number[]): void;\n  abstract destroy(): void;\n  protected abstract roundClean(): void;\n\n  readonly blockLen: number;\n  readonly outputLen: number;\n  readonly padOffset: number;\n  readonly isLE: boolean;\n\n  // For partial updates less than block size\n  protected buffer: Uint8Array;\n  protected view: DataView;\n  protected finished = false;\n  protected length = 0;\n  protected pos = 0;\n  protected destroyed = false;\n\n  constructor(blockLen: number, outputLen: number, padOffset: number, isLE: boolean) {\n    super();\n    this.blockLen = blockLen;\n    this.outputLen = outputLen;\n    this.padOffset = padOffset;\n    this.isLE = isLE;\n    this.buffer = new Uint8Array(blockLen);\n    this.view = createView(this.buffer);\n  }\n  update(data: Input): this {\n    aexists(this);\n    data = toBytes(data);\n    abytes(data);\n    const { view, buffer, blockLen } = this;\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input, cast it to view and process\n      if (take === blockLen) {\n        const dataView = createView(data);\n        for (; blockLen <= len - pos; pos += blockLen) this.process(dataView, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(view, 0);\n        this.pos = 0;\n      }\n    }\n    this.length += data.length;\n    this.roundClean();\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    aoutput(out, this);\n    this.finished = true;\n    // Padding\n    // We can avoid allocation of buffer for padding completely if it\n    // was previously not allocated here. But it won't change performance.\n    const { buffer, view, blockLen, isLE } = this;\n    let { pos } = this;\n    // append the bit '1' to the message\n    buffer[pos++] = 0b10000000;\n    clean(this.buffer.subarray(pos));\n    // we have less than padOffset left in buffer, so we cannot put length in\n    // current block, need process it and pad again\n    if (this.padOffset > blockLen - pos) {\n      this.process(view, 0);\n      pos = 0;\n    }\n    // Pad until full block byte with zeros\n    for (let i = pos; i < blockLen; i++) buffer[i] = 0;\n    // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n    // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n    // So we just write lowest 64 bits of that value.\n    setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n    this.process(view, 0);\n    const oview = createView(out);\n    const len = this.outputLen;\n    // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n    if (len % 4) throw new Error('_sha2: outputLen should be aligned to 32bit');\n    const outLen = len / 4;\n    const state = this.get();\n    if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n    for (let i = 0; i < outLen; i++) oview.setUint32(4 * i, state[i], isLE);\n  }\n  digest(): Uint8Array {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n  _cloneInto(to?: T): T {\n    to ||= new (this.constructor as any)() as T;\n    to.set(...this.get());\n    const { blockLen, buffer, length, finished, destroyed, pos } = this;\n    to.destroyed = destroyed;\n    to.finished = finished;\n    to.length = length;\n    to.pos = pos;\n    if (length % blockLen) to.buffer.set(buffer);\n    return to;\n  }\n  clone(): T {\n    return this._cloneInto();\n  }\n}\n\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nexport const SHA256_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nexport const SHA224_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nexport const SHA384_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n  0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nexport const SHA512_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n  0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;;;;;;;;;;;;;;;AACH,OAAO,EAAc,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,YAAY,CAAC;;AAG9F,SAAU,YAAY,CAC1B,IAAc,EACd,UAAkB,EAClB,KAAa,EACb,IAAa;IAEb,IAAI,OAAO,IAAI,CAAC,YAAY,KAAK,UAAU,EAAE,OAAO,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;IAC/F,MAAM,IAAI,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;IACxB,MAAM,QAAQ,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;IACpC,MAAM,EAAE,GAAG,MAAM,CAAC,AAAC,KAAK,IAAI,IAAI,CAAC,EAAG,QAAQ,CAAC,CAAC;IAC9C,MAAM,EAAE,GAAG,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC;IACpC,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;IACzC,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;AAC3C,CAAC;AAGK,SAAU,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS;IACjD,OAAO,AAAC,CAAC,GAAG,CAAC,CAAC,EAAI,CAAD,AAAE,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5B,CAAC;AAGK,SAAU,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS;IACjD,OAAO,AAAC,CAAC,GAAG,CAAC,CAAC,EAAI,CAAC,AAAF,GAAK,CAAC,CAAC,EAAI,CAAD,AAAE,GAAG,CAAC,CAAC,CAAC;AACrC,CAAC;AAMK,MAAgB,MAA4B,SAAQ,gMAAO;IAoB/D,YAAY,QAAgB,EAAE,SAAiB,EAAE,SAAiB,EAAE,IAAa,CAAA;QAC/E,KAAK,EAAE,CAAC;QANA,IAAA,CAAA,QAAQ,GAAG,KAAK,CAAC;QACjB,IAAA,CAAA,MAAM,GAAG,CAAC,CAAC;QACX,IAAA,CAAA,GAAG,GAAG,CAAC,CAAC;QACR,IAAA,CAAA,SAAS,GAAG,KAAK,CAAC;QAI1B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC;QACvC,IAAI,CAAC,IAAI,OAAG,sMAAU,EAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC;IACD,MAAM,CAAC,IAAW,EAAA;YAChB,mMAAO,EAAC,IAAI,CAAC,CAAC;QACd,IAAI,OAAG,mMAAO,EAAC,IAAI,CAAC,CAAC;YACrB,kMAAM,EAAC,IAAI,CAAC,CAAC;QACb,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;QACxC,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,IAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,EAAI,CAAC;YAC9B,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC;YACtD,8EAA8E;YAC9E,IAAI,IAAI,KAAK,QAAQ,EAAE,CAAC;gBACtB,MAAM,QAAQ,OAAG,sMAAU,EAAC,IAAI,CAAC,CAAC;gBAClC,MAAO,QAAQ,IAAI,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,QAAQ,CAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBAC3E,SAAS;YACX,CAAC;YACD,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;YACrD,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC;YACjB,GAAG,IAAI,IAAI,CAAC;YACZ,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;gBAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;gBACtB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;YACf,CAAC;QACH,CAAC;QACD,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC;QAC3B,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,OAAO,IAAI,CAAC;IACd,CAAC;IACD,UAAU,CAAC,GAAe,EAAA;YACxB,mMAAO,EAAC,IAAI,CAAC,CAAC;YACd,mMAAO,EAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,UAAU;QACV,iEAAiE;QACjE,sEAAsE;QACtE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC;QAC9C,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;QACnB,oCAAoC;QACpC,MAAM,CAAC,GAAG,EAAE,CAAC,GAAG,UAAU,CAAC;YAC3B,iMAAK,EAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;QACjC,yEAAyE;QACzE,+CAA+C;QAC/C,IAAI,IAAI,CAAC,SAAS,GAAG,QAAQ,GAAG,GAAG,EAAE,CAAC;YACpC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACtB,GAAG,GAAG,CAAC,CAAC;QACV,CAAC;QACD,uCAAuC;QACvC,IAAK,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,CAAE,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACnD,gGAAgG;QAChG,oFAAoF;QACpF,iDAAiD;QACjD,YAAY,CAAC,IAAI,EAAE,QAAQ,GAAG,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACtB,MAAM,KAAK,OAAG,sMAAU,EAAC,GAAG,CAAC,CAAC;QAC9B,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC;QAC3B,yFAAyF;QACzF,IAAI,GAAG,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;QAC5E,MAAM,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC;QACvB,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACzB,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,EAAE,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;QACjF,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,CAAE,KAAK,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;IAC1E,CAAC;IACD,MAAM,GAAA;QACJ,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QACxB,MAAM,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,OAAO,GAAG,CAAC;IACb,CAAC;IACD,UAAU,CAAC,EAAM,EAAA;QACf,EAAE,IAAA,CAAF,EAAE,GAAK,IAAK,IAAI,CAAC,WAAmB,EAAO,EAAC;QAC5C,EAAE,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;QACtB,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;QACpE,EAAE,CAAC,SAAS,GAAG,SAAS,CAAC;QACzB,EAAE,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACvB,EAAE,CAAC,MAAM,GAAG,MAAM,CAAC;QACnB,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC;QACb,IAAI,MAAM,GAAG,QAAQ,EAAE,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC7C,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,KAAK,GAAA;QACH,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC;IAC3B,CAAC;CACF;AAQM,MAAM,SAAS,GAAgB,aAAA,EAAe,CAAC,WAAW,CAAC,IAAI,CAAC;IACrE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;CAC/F,CAAC,CAAC;AAGI,MAAM,SAAS,GAAgB,aAAA,EAAe,CAAC,WAAW,CAAC,IAAI,CAAC;IACrE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;CAC/F,CAAC,CAAC;AAGI,MAAM,SAAS,GAAgB,aAAA,EAAe,CAAC,WAAW,CAAC,IAAI,CAAC;IACrE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAC9F,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;CAC/F,CAAC,CAAC;AAGI,MAAM,SAAS,GAAgB,aAAA,EAAe,CAAC,WAAW,CAAC,IAAI,CAAC;IACrE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAC9F,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;IAAE,UAAU;CAC/F,CAAC,CAAC"}},
    {"offset": {"line": 14758, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@scure/bip39/node_modules/@noble/hashes/esm/_u64.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/node_modules/%40noble/hashes/src/_u64.ts"],"sourcesContent":["/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n\nfunction fromBig(\n  n: bigint,\n  le = false\n): {\n  h: number;\n  l: number;\n} {\n  if (le) return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n  return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\n\nfunction split(lst: bigint[], le = false): Uint32Array[] {\n  const len = lst.length;\n  let Ah = new Uint32Array(len);\n  let Al = new Uint32Array(len);\n  for (let i = 0; i < len; i++) {\n    const { h, l } = fromBig(lst[i], le);\n    [Ah[i], Al[i]] = [h, l];\n  }\n  return [Ah, Al];\n}\n\nconst toBig = (h: number, l: number): bigint => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h: number, _l: number, s: number): number => h >>> s;\nconst shrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h: number, l: number, s: number): number => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h: number, l: number, s: number): number => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h: number, l: number, s: number): number => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h: number, l: number): number => l;\nconst rotr32L = (h: number, _l: number): number => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h: number, l: number, s: number): number => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h: number, l: number, s: number): number => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h: number, l: number, s: number): number => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h: number, l: number, s: number): number => (h << (s - 32)) | (l >>> (64 - s));\n\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(\n  Ah: number,\n  Al: number,\n  Bh: number,\n  Bl: number\n): {\n  h: number;\n  l: number;\n} {\n  const l = (Al >>> 0) + (Bl >>> 0);\n  return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al: number, Bl: number, Cl: number): number => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low: number, Ah: number, Bh: number, Ch: number): number =>\n  (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al: number, Bl: number, Cl: number, Dl: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number): number =>\n  (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al: number, Bl: number, Cl: number, Dl: number, El: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number): number =>\n  (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n\n// prettier-ignore\nexport {\n  add, add3H, add3L, add4H, add4L, add5H, add5L, fromBig, rotlBH, rotlBL, rotlSH, rotlSL, rotr32H, rotr32L, rotrBH, rotrBL, rotrSH, rotrSL, shrSH, shrSL, split, toBig\n};\n// prettier-ignore\nconst u64: { fromBig: typeof fromBig; split: typeof split; toBig: (h: number, l: number) => bigint; shrSH: (h: number, _l: number, s: number) => number; shrSL: (h: number, l: number, s: number) => number; rotrSH: (h: number, l: number, s: number) => number; rotrSL: (h: number, l: number, s: number) => number; rotrBH: (h: number, l: number, s: number) => number; rotrBL: (h: number, l: number, s: number) => number; rotr32H: (_h: number, l: number) => number; rotr32L: (h: number, _l: number) => number; rotlSH: (h: number, l: number, s: number) => number; rotlSL: (h: number, l: number, s: number) => number; rotlBH: (h: number, l: number, s: number) => number; rotlBL: (h: number, l: number, s: number) => number; add: typeof add; add3L: (Al: number, Bl: number, Cl: number) => number; add3H: (low: number, Ah: number, Bh: number, Ch: number) => number; add4L: (Al: number, Bl: number, Cl: number, Dl: number) => number; add4H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number) => number; add5H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number) => number; add5L: (Al: number, Bl: number, Cl: number, Dl: number, El: number) => number; } = {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 14905, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@scure/bip39/node_modules/@noble/hashes/esm/sha2.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/node_modules/%40noble/hashes/src/sha2.ts"],"sourcesContent":["/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nimport { Chi, HashMD, Maj, SHA224_IV, SHA256_IV, SHA384_IV, SHA512_IV } from './_md.ts';\nimport * as u64 from './_u64.ts';\nimport { type CHash, clean, createHasher, rotr } from './utils.ts';\n\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nexport class SHA256 extends HashMD<SHA256> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  protected A: number = SHA256_IV[0] | 0;\n  protected B: number = SHA256_IV[1] | 0;\n  protected C: number = SHA256_IV[2] | 0;\n  protected D: number = SHA256_IV[3] | 0;\n  protected E: number = SHA256_IV[4] | 0;\n  protected F: number = SHA256_IV[5] | 0;\n  protected G: number = SHA256_IV[6] | 0;\n  protected H: number = SHA256_IV[7] | 0;\n\n  constructor(outputLen: number = 32) {\n    super(64, outputLen, 8, false);\n  }\n  protected get(): [number, number, number, number, number, number, number, number] {\n    const { A, B, C, D, E, F, G, H } = this;\n    return [A, B, C, D, E, F, G, H];\n  }\n  // prettier-ignore\n  protected set(\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\n  ): void {\n    this.A = A | 0;\n    this.B = B | 0;\n    this.C = C | 0;\n    this.D = D | 0;\n    this.E = E | 0;\n    this.F = F | 0;\n    this.G = G | 0;\n    this.H = H | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\n    for (let i = 16; i < 64; i++) {\n      const W15 = SHA256_W[i - 15];\n      const W2 = SHA256_W[i - 2];\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n    }\n    // Compression function main loop, 64 rounds\n    let { A, B, C, D, E, F, G, H } = this;\n    for (let i = 0; i < 64; i++) {\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\n      H = G;\n      G = F;\n      F = E;\n      E = (D + T1) | 0;\n      D = C;\n      C = B;\n      B = A;\n      A = (T1 + T2) | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    A = (A + this.A) | 0;\n    B = (B + this.B) | 0;\n    C = (C + this.C) | 0;\n    D = (D + this.D) | 0;\n    E = (E + this.E) | 0;\n    F = (F + this.F) | 0;\n    G = (G + this.G) | 0;\n    H = (H + this.H) | 0;\n    this.set(A, B, C, D, E, F, G, H);\n  }\n  protected roundClean(): void {\n    clean(SHA256_W);\n  }\n  destroy(): void {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\n    clean(this.buffer);\n  }\n}\n\nexport class SHA224 extends SHA256 {\n  protected A: number = SHA224_IV[0] | 0;\n  protected B: number = SHA224_IV[1] | 0;\n  protected C: number = SHA224_IV[2] | 0;\n  protected D: number = SHA224_IV[3] | 0;\n  protected E: number = SHA224_IV[4] | 0;\n  protected F: number = SHA224_IV[5] | 0;\n  protected G: number = SHA224_IV[6] | 0;\n  protected H: number = SHA224_IV[7] | 0;\n  constructor() {\n    super(28);\n  }\n}\n\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => u64.split([\n  '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n  '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n  '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n  '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n  '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n  '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n  '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n  '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n  '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n  '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n  '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n  '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n  '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n  '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n  '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n  '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n  '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n  '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n  '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n  '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\n\nexport class SHA512 extends HashMD<SHA512> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  // h -- high 32 bits, l -- low 32 bits\n  protected Ah: number = SHA512_IV[0] | 0;\n  protected Al: number = SHA512_IV[1] | 0;\n  protected Bh: number = SHA512_IV[2] | 0;\n  protected Bl: number = SHA512_IV[3] | 0;\n  protected Ch: number = SHA512_IV[4] | 0;\n  protected Cl: number = SHA512_IV[5] | 0;\n  protected Dh: number = SHA512_IV[6] | 0;\n  protected Dl: number = SHA512_IV[7] | 0;\n  protected Eh: number = SHA512_IV[8] | 0;\n  protected El: number = SHA512_IV[9] | 0;\n  protected Fh: number = SHA512_IV[10] | 0;\n  protected Fl: number = SHA512_IV[11] | 0;\n  protected Gh: number = SHA512_IV[12] | 0;\n  protected Gl: number = SHA512_IV[13] | 0;\n  protected Hh: number = SHA512_IV[14] | 0;\n  protected Hl: number = SHA512_IV[15] | 0;\n\n  constructor(outputLen: number = 64) {\n    super(128, outputLen, 16, false);\n  }\n  // prettier-ignore\n  protected get(): [\n    number, number, number, number, number, number, number, number,\n    number, number, number, number, number, number, number, number\n  ] {\n    const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n  }\n  // prettier-ignore\n  protected set(\n    Ah: number, Al: number, Bh: number, Bl: number, Ch: number, Cl: number, Dh: number, Dl: number,\n    Eh: number, El: number, Fh: number, Fl: number, Gh: number, Gl: number, Hh: number, Hl: number\n  ): void {\n    this.Ah = Ah | 0;\n    this.Al = Al | 0;\n    this.Bh = Bh | 0;\n    this.Bl = Bl | 0;\n    this.Ch = Ch | 0;\n    this.Cl = Cl | 0;\n    this.Dh = Dh | 0;\n    this.Dl = Dl | 0;\n    this.Eh = Eh | 0;\n    this.El = El | 0;\n    this.Fh = Fh | 0;\n    this.Fl = Fl | 0;\n    this.Gh = Gh | 0;\n    this.Gl = Gl | 0;\n    this.Hh = Hh | 0;\n    this.Hl = Hl | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) {\n      SHA512_W_H[i] = view.getUint32(offset);\n      SHA512_W_L[i] = view.getUint32((offset += 4));\n    }\n    for (let i = 16; i < 80; i++) {\n      // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n      const W15h = SHA512_W_H[i - 15] | 0;\n      const W15l = SHA512_W_L[i - 15] | 0;\n      const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n      const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n      // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n      const W2h = SHA512_W_H[i - 2] | 0;\n      const W2l = SHA512_W_L[i - 2] | 0;\n      const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n      const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n      // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n      const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n      const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n      SHA512_W_H[i] = SUMh | 0;\n      SHA512_W_L[i] = SUMl | 0;\n    }\n    let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    // Compression function main loop, 80 rounds\n    for (let i = 0; i < 80; i++) {\n      // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n      const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n      const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n      //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n      const CHIl = (El & Fl) ^ (~El & Gl);\n      // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n      // prettier-ignore\n      const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n      const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n      const T1l = T1ll | 0;\n      // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n      const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n      const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n      const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n      const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n      Hh = Gh | 0;\n      Hl = Gl | 0;\n      Gh = Fh | 0;\n      Gl = Fl | 0;\n      Fh = Eh | 0;\n      Fl = El | 0;\n      ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n      Dh = Ch | 0;\n      Dl = Cl | 0;\n      Ch = Bh | 0;\n      Cl = Bl | 0;\n      Bh = Ah | 0;\n      Bl = Al | 0;\n      const All = u64.add3L(T1l, sigma0l, MAJl);\n      Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n      Al = All | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n    ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n    ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n    ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n    ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n    ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n    ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n    ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n    this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n  }\n  protected roundClean(): void {\n    clean(SHA512_W_H, SHA512_W_L);\n  }\n  destroy(): void {\n    clean(this.buffer);\n    this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n  }\n}\n\nexport class SHA384 extends SHA512 {\n  protected Ah: number = SHA384_IV[0] | 0;\n  protected Al: number = SHA384_IV[1] | 0;\n  protected Bh: number = SHA384_IV[2] | 0;\n  protected Bl: number = SHA384_IV[3] | 0;\n  protected Ch: number = SHA384_IV[4] | 0;\n  protected Cl: number = SHA384_IV[5] | 0;\n  protected Dh: number = SHA384_IV[6] | 0;\n  protected Dl: number = SHA384_IV[7] | 0;\n  protected Eh: number = SHA384_IV[8] | 0;\n  protected El: number = SHA384_IV[9] | 0;\n  protected Fh: number = SHA384_IV[10] | 0;\n  protected Fl: number = SHA384_IV[11] | 0;\n  protected Gh: number = SHA384_IV[12] | 0;\n  protected Gl: number = SHA384_IV[13] | 0;\n  protected Hh: number = SHA384_IV[14] | 0;\n  protected Hl: number = SHA384_IV[15] | 0;\n\n  constructor() {\n    super(48);\n  }\n}\n\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n  0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n  0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n  0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n  0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\n\nexport class SHA512_224 extends SHA512 {\n  protected Ah: number = T224_IV[0] | 0;\n  protected Al: number = T224_IV[1] | 0;\n  protected Bh: number = T224_IV[2] | 0;\n  protected Bl: number = T224_IV[3] | 0;\n  protected Ch: number = T224_IV[4] | 0;\n  protected Cl: number = T224_IV[5] | 0;\n  protected Dh: number = T224_IV[6] | 0;\n  protected Dl: number = T224_IV[7] | 0;\n  protected Eh: number = T224_IV[8] | 0;\n  protected El: number = T224_IV[9] | 0;\n  protected Fh: number = T224_IV[10] | 0;\n  protected Fl: number = T224_IV[11] | 0;\n  protected Gh: number = T224_IV[12] | 0;\n  protected Gl: number = T224_IV[13] | 0;\n  protected Hh: number = T224_IV[14] | 0;\n  protected Hl: number = T224_IV[15] | 0;\n\n  constructor() {\n    super(28);\n  }\n}\n\nexport class SHA512_256 extends SHA512 {\n  protected Ah: number = T256_IV[0] | 0;\n  protected Al: number = T256_IV[1] | 0;\n  protected Bh: number = T256_IV[2] | 0;\n  protected Bl: number = T256_IV[3] | 0;\n  protected Ch: number = T256_IV[4] | 0;\n  protected Cl: number = T256_IV[5] | 0;\n  protected Dh: number = T256_IV[6] | 0;\n  protected Dl: number = T256_IV[7] | 0;\n  protected Eh: number = T256_IV[8] | 0;\n  protected El: number = T256_IV[9] | 0;\n  protected Fh: number = T256_IV[10] | 0;\n  protected Fl: number = T256_IV[11] | 0;\n  protected Gh: number = T256_IV[12] | 0;\n  protected Gl: number = T256_IV[13] | 0;\n  protected Hh: number = T256_IV[14] | 0;\n  protected Hl: number = T256_IV[15] | 0;\n\n  constructor() {\n    super(32);\n  }\n}\n\n/**\n * SHA2-256 hash function from RFC 4634.\n *\n * It is the fastest JS hash, even faster than Blake3.\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n */\nexport const sha256: CHash = /* @__PURE__ */ createHasher(() => new SHA256());\n/** SHA2-224 hash function from RFC 4634 */\nexport const sha224: CHash = /* @__PURE__ */ createHasher(() => new SHA224());\n\n/** SHA2-512 hash function from RFC 4634. */\nexport const sha512: CHash = /* @__PURE__ */ createHasher(() => new SHA512());\n/** SHA2-384 hash function from RFC 4634. */\nexport const sha384: CHash = /* @__PURE__ */ createHasher(() => new SHA384());\n\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_256: CHash = /* @__PURE__ */ createHasher(() => new SHA512_256());\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_224: CHash = /* @__PURE__ */ createHasher(() => new SHA512_224());\n"],"names":[],"mappings":"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AAE,EAAE,GAAG,GAAG,CAAC,0LAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,0LAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,0LAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,0LAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,0LAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,0LAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,0LAAG,CAAC,IAAI,CAAC,EAA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"}},
    {"offset": {"line": 15457, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@noble/hashes/esm/_assert.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40noble/hashes/src/_assert.ts"],"sourcesContent":["/**\n * Assertion helpers\n * @module\n */\n\nfunction anumber(n: number): void {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error('positive integer expected, got ' + n);\n}\n\n// copied from utils\nfunction isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n\nfunction abytes(b: Uint8Array | undefined, ...lengths: number[]): void {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n\nexport type Hash = {\n  (data: Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\nfunction ahash(h: Hash): void {\n  if (typeof h !== 'function' || typeof h.create !== 'function')\n    throw new Error('Hash should be wrapped by utils.wrapConstructor');\n  anumber(h.outputLen);\n  anumber(h.blockLen);\n}\n\nfunction aexists(instance: any, checkFinished = true): void {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\nfunction aoutput(out: any, instance: any): void {\n  abytes(out);\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error('digestInto() expects output buffer of length at least ' + min);\n  }\n}\n\nexport { anumber, abytes, ahash, aexists, aoutput };\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;;;;;;;;;AAEH,SAAS,OAAO,CAAC,CAAS;IACxB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,iCAAiC,GAAG,CAAC,CAAC,CAAC;AAChG,CAAC;AAED,oBAAoB;AACpB,SAAS,OAAO,CAAC,CAAU;IACzB,OAAO,CAAC,YAAY,UAAU,IAAI,AAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,IAAI,KAAK,YAAY,CAAC,CAAC;AACnG,CAAC;AAED,SAAS,MAAM,CAAC,CAAyB,EAAE,GAAG,OAAiB;IAC7D,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;IACxD,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EACnD,MAAM,IAAI,KAAK,CAAC,gCAAgC,GAAG,OAAO,GAAG,eAAe,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;AAC7F,CAAC;AAQD,SAAS,KAAK,CAAC,CAAO;IACpB,IAAI,OAAO,CAAC,KAAK,UAAU,IAAI,OAAO,CAAC,CAAC,MAAM,KAAK,UAAU,EAC3D,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAC;IACrE,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;IACrB,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;AACtB,CAAC;AAED,SAAS,OAAO,CAAC,QAAa,EAAE,aAAa,GAAG,IAAI;IAClD,IAAI,QAAQ,CAAC,SAAS,EAAE,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;IAC5E,IAAI,aAAa,IAAI,QAAQ,CAAC,QAAQ,EAAE,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;AACnG,CAAC;AACD,SAAS,OAAO,CAAC,GAAQ,EAAE,QAAa;IACtC,MAAM,CAAC,GAAG,CAAC,CAAC;IACZ,MAAM,GAAG,GAAG,QAAQ,CAAC,SAAS,CAAC;IAC/B,IAAI,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC;QACrB,MAAM,IAAI,KAAK,CAAC,wDAAwD,GAAG,GAAG,CAAC,CAAC;IAClF,CAAC;AACH,CAAC"}},
    {"offset": {"line": 15505, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@noble/hashes/esm/crypto.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40noble/hashes/src/crypto.ts"],"sourcesContent":["// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// See utils.ts for details.\ndeclare const globalThis: Record<string, any> | undefined;\nexport const crypto: any =\n  typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n"],"names":[],"mappings":";;;;AAGO,MAAM,MAAM,GACjB,OAAO,UAAU,KAAK,QAAQ,IAAI,QAAQ,IAAI,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC"}},
    {"offset": {"line": 15514, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@noble/hashes/esm/utils.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40noble/hashes/src/utils.ts"],"sourcesContent":["/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\n/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\nimport { abytes } from './_assert.js';\n// export { isBytes } from './_assert.js';\n// We can't reuse isBytes from _assert, because somehow this causes huge perf issues\nexport function isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n// Cast array to different type\nexport const u8 = (arr: TypedArray): Uint8Array =>\n  new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr: TypedArray): Uint32Array =>\n  new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n\n// Cast array to view\nexport const createView = (arr: TypedArray): DataView =>\n  new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n\n/** The rotate right (circular right shift) operation for uint32 */\nexport const rotr = (word: number, shift: number): number =>\n  (word << (32 - shift)) | (word >>> shift);\n/** The rotate left (circular left shift) operation for uint32 */\nexport const rotl = (word: number, shift: number): number =>\n  (word << shift) | ((word >>> (32 - shift)) >>> 0);\n\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE: boolean = /* @__PURE__ */ (() =>\n  new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n// The byte swap operation for uint32\nexport const byteSwap = (word: number): number =>\n  ((word << 24) & 0xff000000) |\n  ((word << 8) & 0xff0000) |\n  ((word >>> 8) & 0xff00) |\n  ((word >>> 24) & 0xff);\n/** Conditionally byte swap if on a big-endian platform */\nexport const byteSwapIfBE: (n: number) => number = isLE\n  ? (n: number) => n\n  : (n: number) => byteSwap(n);\n\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr: Uint32Array): void {\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = byteSwap(arr[i]);\n  }\n}\n\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n/**\n * Convert byte array to hex string.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  abytes(bytes);\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 } as const;\nfunction asciiToBase16(ch: number): number | undefined {\n  if (ch >= asciis._0 && ch <= asciis._9) return ch - asciis._0; // '2' => 50-48\n  if (ch >= asciis.A && ch <= asciis.F) return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n  if (ch >= asciis.a && ch <= asciis.f) return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n  return;\n}\n\n/**\n * Convert hex string to byte array.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  const hl = hex.length;\n  const al = hl / 2;\n  if (hl % 2) throw new Error('hex string expected, got unpadded hex of length ' + hl);\n  const array = new Uint8Array(al);\n  for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n    const n1 = asciiToBase16(hex.charCodeAt(hi));\n    const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n    if (n1 === undefined || n2 === undefined) {\n      const char = hex[hi] + hex[hi + 1];\n      throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n    }\n    array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n  }\n  return array;\n}\n\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async (): Promise<void> => {};\n\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(\n  iters: number,\n  tick: number,\n  cb: (i: number) => void\n): Promise<void> {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols in both browsers and Node.js since v11\n// See https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\n\n/**\n * Convert JS string to byte array.\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error('utf8ToBytes expected string, got ' + typeof str);\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\n/** Accepted input of hash functions. Strings are converted to byte arrays. */\nexport type Input = Uint8Array | string;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data: Input): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  abytes(data);\n  return data;\n}\n\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  let sum = 0;\n  for (let i = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    abytes(a);\n    sum += a.length;\n  }\n  const res = new Uint8Array(sum);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    res.set(a, pad);\n    pad += a.length;\n  }\n  return res;\n}\n\n// For runtime check if class implements interface\nexport abstract class Hash<T extends Hash<T>> {\n  abstract blockLen: number; // Bytes per block\n  abstract outputLen: number; // Bytes in output\n  abstract update(buf: Input): this;\n  // Writes digest into buf\n  abstract digestInto(buf: Uint8Array): void;\n  abstract digest(): Uint8Array;\n  /**\n   * Resets internal state. Makes Hash instance unusable.\n   * Reset is impossible for keyed hashes if key is consumed into state. If digest is not consumed\n   * by user, they will need to manually call `destroy()` when zeroing is necessary.\n   */\n  abstract destroy(): void;\n  /**\n   * Clones hash instance. Unsafe: doesn't check whether `to` is valid. Can be used as `clone()`\n   * when no options are passed.\n   * Reasons to use `_cloneInto` instead of clone: 1) performance 2) reuse instance => all internal\n   * buffers are overwritten => causes buffer overwrite which is used for digest in some cases.\n   * There are no guarantees for clean-up because it's impossible in JS.\n   */\n  abstract _cloneInto(to?: T): T;\n  // Safe version that clones internal state\n  clone(): T {\n    return this._cloneInto();\n  }\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot\n * destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n    throw new Error('Options should be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\nexport type CHash = ReturnType<typeof wrapConstructor>;\nexport type CHashO = ReturnType<typeof wrapConstructorWithOpts>;\nexport type CHashXO = ReturnType<typeof wrapXOFConstructorWithOpts>;\n\nexport function wrapConstructor<T extends Hash<T>>(\n  hashCons: () => Hash<T>\n): {\n  (msg: Input): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(): Hash<T>;\n} {\n  const hashC = (msg: Input): Uint8Array => hashCons().update(toBytes(msg)).digest();\n  const tmp = hashCons();\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = () => hashCons();\n  return hashC;\n}\n\nexport function wrapConstructorWithOpts<H extends Hash<H>, T extends Object>(\n  hashCons: (opts?: T) => Hash<H>\n): {\n  (msg: Input, opts?: T): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(opts: T): Hash<H>;\n} {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts: T) => hashCons(opts);\n  return hashC;\n}\n\nexport function wrapXOFConstructorWithOpts<H extends HashXOF<H>, T extends Object>(\n  hashCons: (opts?: T) => HashXOF<H>\n): {\n  (msg: Input, opts?: T): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(opts: T): HashXOF<H>;\n} {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts: T) => hashCons(opts);\n  return hashC;\n}\n\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  if (crypto && typeof crypto.getRandomValues === 'function') {\n    return crypto.getRandomValues(new Uint8Array(bytesLength));\n  }\n  // Legacy Node.js compatibility\n  if (crypto && typeof crypto.randomBytes === 'function') {\n    return crypto.randomBytes(bytesLength);\n  }\n  throw new Error('crypto.getRandomValues must be defined');\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 15723, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@noble/hashes/esm/_md.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40noble/hashes/src/_md.ts"],"sourcesContent":["import { aexists, aoutput } from './_assert.js';\nimport { Hash, createView, Input, toBytes } from './utils.js';\n\n/**\n * Merkle-Damgard hash utils.\n * @module\n */\n\n/**\n * Polyfill for Safari 14\n */\nexport function setBigUint64(\n  view: DataView,\n  byteOffset: number,\n  value: bigint,\n  isLE: boolean\n): void {\n  if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n  const _32n = BigInt(32);\n  const _u32_max = BigInt(0xffffffff);\n  const wh = Number((value >> _32n) & _u32_max);\n  const wl = Number(value & _u32_max);\n  const h = isLE ? 4 : 0;\n  const l = isLE ? 0 : 4;\n  view.setUint32(byteOffset + h, wh, isLE);\n  view.setUint32(byteOffset + l, wl, isLE);\n}\n\n/**\n * Choice: a ? b : c\n */\nexport const Chi = (a: number, b: number, c: number): number => (a & b) ^ (~a & c);\n\n/**\n * Majority function, true if any two inputs is true\n */\nexport const Maj = (a: number, b: number, c: number): number => (a & b) ^ (a & c) ^ (b & c);\n\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport abstract class HashMD<T extends HashMD<T>> extends Hash<T> {\n  protected abstract process(buf: DataView, offset: number): void;\n  protected abstract get(): number[];\n  protected abstract set(...args: number[]): void;\n  abstract destroy(): void;\n  protected abstract roundClean(): void;\n  // For partial updates less than block size\n  protected buffer: Uint8Array;\n  protected view: DataView;\n  protected finished = false;\n  protected length = 0;\n  protected pos = 0;\n  protected destroyed = false;\n\n  constructor(\n    readonly blockLen: number,\n    public outputLen: number,\n    readonly padOffset: number,\n    readonly isLE: boolean\n  ) {\n    super();\n    this.buffer = new Uint8Array(blockLen);\n    this.view = createView(this.buffer);\n  }\n  update(data: Input): this {\n    aexists(this);\n    const { view, buffer, blockLen } = this;\n    data = toBytes(data);\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input, cast it to view and process\n      if (take === blockLen) {\n        const dataView = createView(data);\n        for (; blockLen <= len - pos; pos += blockLen) this.process(dataView, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(view, 0);\n        this.pos = 0;\n      }\n    }\n    this.length += data.length;\n    this.roundClean();\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    aoutput(out, this);\n    this.finished = true;\n    // Padding\n    // We can avoid allocation of buffer for padding completely if it\n    // was previously not allocated here. But it won't change performance.\n    const { buffer, view, blockLen, isLE } = this;\n    let { pos } = this;\n    // append the bit '1' to the message\n    buffer[pos++] = 0b10000000;\n    this.buffer.subarray(pos).fill(0);\n    // we have less than padOffset left in buffer, so we cannot put length in\n    // current block, need process it and pad again\n    if (this.padOffset > blockLen - pos) {\n      this.process(view, 0);\n      pos = 0;\n    }\n    // Pad until full block byte with zeros\n    for (let i = pos; i < blockLen; i++) buffer[i] = 0;\n    // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n    // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n    // So we just write lowest 64 bits of that value.\n    setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n    this.process(view, 0);\n    const oview = createView(out);\n    const len = this.outputLen;\n    // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n    if (len % 4) throw new Error('_sha2: outputLen should be aligned to 32bit');\n    const outLen = len / 4;\n    const state = this.get();\n    if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n    for (let i = 0; i < outLen; i++) oview.setUint32(4 * i, state[i], isLE);\n  }\n  digest(): Uint8Array {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n  _cloneInto(to?: T): T {\n    to ||= new (this.constructor as any)() as T;\n    to.set(...this.get());\n    const { blockLen, buffer, length, finished, destroyed, pos } = this;\n    to.length = length;\n    to.pos = pos;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    if (length % blockLen) to.buffer.set(buffer);\n    return to;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 15846, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@noble/hashes/esm/sha256.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40noble/hashes/src/sha256.ts"],"sourcesContent":["import { HashMD, Chi, Maj } from './_md.js';\nimport { rotr, wrapConstructor, CHash } from './utils.js';\n\n/**\n * SHA2-256 a.k.a. sha256. In JS, it is the fastest hash, even faster than Blake3.\n *\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n *\n * Check out [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\n\n/** Round constants: first 32 bits of fractional parts of the cube roots of the first 64 primes 2..311). */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ new Uint32Array([\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n\n/** Initial state: first 32 bits of fractional parts of the square roots of the first 8 primes 2..19. */\n// prettier-ignore\nconst SHA256_IV = /* @__PURE__ */ new Uint32Array([\n  0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n\n/**\n * Temporary buffer, not used to store anything between runs.\n * Named this way because it matches specification.\n */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nexport class SHA256 extends HashMD<SHA256> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  protected A: number = SHA256_IV[0] | 0;\n  protected B: number = SHA256_IV[1] | 0;\n  protected C: number = SHA256_IV[2] | 0;\n  protected D: number = SHA256_IV[3] | 0;\n  protected E: number = SHA256_IV[4] | 0;\n  protected F: number = SHA256_IV[5] | 0;\n  protected G: number = SHA256_IV[6] | 0;\n  protected H: number = SHA256_IV[7] | 0;\n\n  constructor() {\n    super(64, 32, 8, false);\n  }\n  protected get(): [number, number, number, number, number, number, number, number] {\n    const { A, B, C, D, E, F, G, H } = this;\n    return [A, B, C, D, E, F, G, H];\n  }\n  // prettier-ignore\n  protected set(\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\n  ): void {\n    this.A = A | 0;\n    this.B = B | 0;\n    this.C = C | 0;\n    this.D = D | 0;\n    this.E = E | 0;\n    this.F = F | 0;\n    this.G = G | 0;\n    this.H = H | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\n    for (let i = 16; i < 64; i++) {\n      const W15 = SHA256_W[i - 15];\n      const W2 = SHA256_W[i - 2];\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n    }\n    // Compression function main loop, 64 rounds\n    let { A, B, C, D, E, F, G, H } = this;\n    for (let i = 0; i < 64; i++) {\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\n      H = G;\n      G = F;\n      F = E;\n      E = (D + T1) | 0;\n      D = C;\n      C = B;\n      B = A;\n      A = (T1 + T2) | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    A = (A + this.A) | 0;\n    B = (B + this.B) | 0;\n    C = (C + this.C) | 0;\n    D = (D + this.D) | 0;\n    E = (E + this.E) | 0;\n    F = (F + this.F) | 0;\n    G = (G + this.G) | 0;\n    H = (H + this.H) | 0;\n    this.set(A, B, C, D, E, F, G, H);\n  }\n  protected roundClean(): void {\n    SHA256_W.fill(0);\n  }\n  destroy(): void {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\n    this.buffer.fill(0);\n  }\n}\n\n/**\n * Constants taken from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf.\n */\nclass SHA224 extends SHA256 {\n  protected A = 0xc1059ed8 | 0;\n  protected B = 0x367cd507 | 0;\n  protected C = 0x3070dd17 | 0;\n  protected D = 0xf70e5939 | 0;\n  protected E = 0xffc00b31 | 0;\n  protected F = 0x68581511 | 0;\n  protected G = 0x64f98fa7 | 0;\n  protected H = 0xbefa4fa4 | 0;\n  constructor() {\n    super();\n    this.outputLen = 28;\n  }\n}\n\n/** SHA2-256 hash function */\nexport const sha256: CHash = /* @__PURE__ */ wrapConstructor(() => new SHA256());\n/** SHA2-224 hash function */\nexport const sha224: CHash = /* @__PURE__ */ wrapConstructor(() => new SHA224());\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 16053, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@scure/base/lib/esm/index.js","sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/base/index.ts"],"sourcesContent":["/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\nexport interface Coder<F, T> {\n  encode(from: F): T;\n  decode(to: T): F;\n}\n\nexport interface BytesCoder extends Coder<Uint8Array, string> {\n  encode: (data: Uint8Array) => string;\n  decode: (str: string) => Uint8Array;\n}\n\nfunction isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is Uint8Array. */\nfunction abytes(b: Uint8Array | undefined, ...lengths: number[]): void {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n\nfunction isArrayOf(isString: boolean, arr: any[]) {\n  if (!Array.isArray(arr)) return false;\n  if (arr.length === 0) return true;\n  if (isString) {\n    return arr.every((item) => typeof item === 'string');\n  } else {\n    return arr.every((item) => Number.isSafeInteger(item));\n  }\n}\n\n// no abytes: seems to have 10% slowdown. Why?!\n\nfunction afn(input: Function): input is Function {\n  if (typeof input !== 'function') throw new Error('function expected');\n  return true;\n}\n\nfunction astr(label: string, input: unknown): input is string {\n  if (typeof input !== 'string') throw new Error(`${label}: string expected`);\n  return true;\n}\n\nfunction anumber(n: number): void {\n  if (!Number.isSafeInteger(n)) throw new Error(`invalid integer: ${n}`);\n}\n\nfunction aArr(input: any[]) {\n  if (!Array.isArray(input)) throw new Error('array expected');\n}\nfunction astrArr(label: string, input: string[]) {\n  if (!isArrayOf(true, input)) throw new Error(`${label}: array of strings expected`);\n}\nfunction anumArr(label: string, input: number[]) {\n  if (!isArrayOf(false, input)) throw new Error(`${label}: array of numbers expected`);\n}\n\n// TODO: some recusive type inference so it would check correct order of input/output inside rest?\n// like <string, number>, <number, bytes>, <bytes, float>\ntype Chain = [Coder<any, any>, ...Coder<any, any>[]];\n// Extract info from Coder type\ntype Input<F> = F extends Coder<infer T, any> ? T : never;\ntype Output<F> = F extends Coder<any, infer T> ? T : never;\n// Generic function for arrays\ntype First<T> = T extends [infer U, ...any[]] ? U : never;\ntype Last<T> = T extends [...any[], infer U] ? U : never;\ntype Tail<T> = T extends [any, ...infer U] ? U : never;\n\ntype AsChain<C extends Chain, Rest = Tail<C>> = {\n  // C[K] = Coder<Input<C[K]>, Input<Rest[k]>>\n  [K in keyof C]: Coder<Input<C[K]>, Input<K extends keyof Rest ? Rest[K] : any>>;\n};\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction chain<T extends Chain & AsChain<T>>(...args: T): Coder<Input<First<T>>, Output<Last<T>>> {\n  const id = (a: any) => a;\n  // Wrap call in closure so JIT can inline calls\n  const wrap = (a: any, b: any) => (c: any) => a(b(c));\n  // Construct chain of args[-1].encode(args[-2].encode([...]))\n  const encode = args.map((x) => x.encode).reduceRight(wrap, id);\n  // Construct chain of args[0].decode(args[1].decode(...))\n  const decode = args.map((x) => x.decode).reduce(wrap, id);\n  return { encode, decode };\n}\n\n/**\n * Encodes integer radix representation to array of strings using alphabet and back.\n * Could also be array of strings.\n * @__NO_SIDE_EFFECTS__\n */\nfunction alphabet(letters: string | string[]): Coder<number[], string[]> {\n  // mapping 1 to \"b\"\n  const lettersA = typeof letters === 'string' ? letters.split('') : letters;\n  const len = lettersA.length;\n  astrArr('alphabet', lettersA);\n\n  // mapping \"b\" to 1\n  const indexes = new Map(lettersA.map((l, i) => [l, i]));\n  return {\n    encode: (digits: number[]) => {\n      aArr(digits);\n      return digits.map((i) => {\n        if (!Number.isSafeInteger(i) || i < 0 || i >= len)\n          throw new Error(\n            `alphabet.encode: digit index outside alphabet \"${i}\". Allowed: ${letters}`\n          );\n        return lettersA[i]!;\n      });\n    },\n    decode: (input: string[]): number[] => {\n      aArr(input);\n      return input.map((letter) => {\n        astr('alphabet.decode', letter);\n        const i = indexes.get(letter);\n        if (i === undefined) throw new Error(`Unknown letter: \"${letter}\". Allowed: ${letters}`);\n        return i;\n      });\n    },\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction join(separator = ''): Coder<string[], string> {\n  astr('join', separator);\n  return {\n    encode: (from) => {\n      astrArr('join.decode', from);\n      return from.join(separator);\n    },\n    decode: (to) => {\n      astr('join.decode', to);\n      return to.split(separator);\n    },\n  };\n}\n\n/**\n * Pad strings array so it has integer number of bits\n * @__NO_SIDE_EFFECTS__\n */\nfunction padding(bits: number, chr = '='): Coder<string[], string[]> {\n  anumber(bits);\n  astr('padding', chr);\n  return {\n    encode(data: string[]): string[] {\n      astrArr('padding.encode', data);\n      while ((data.length * bits) % 8) data.push(chr);\n      return data;\n    },\n    decode(input: string[]): string[] {\n      astrArr('padding.decode', input);\n      let end = input.length;\n      if ((end * bits) % 8)\n        throw new Error('padding: invalid, string should have whole number of bytes');\n      for (; end > 0 && input[end - 1] === chr; end--) {\n        const last = end - 1;\n        const byte = last * bits;\n        if (byte % 8 === 0) throw new Error('padding: invalid, string has too much padding');\n      }\n      return input.slice(0, end);\n    },\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction normalize<T>(fn: (val: T) => T): Coder<T, T> {\n  afn(fn);\n  return { encode: (from: T) => from, decode: (to: T) => fn(to) };\n}\n\n/**\n * Slow: O(n^2) time complexity\n */\nfunction convertRadix(data: number[], from: number, to: number): number[] {\n  // base 1 is impossible\n  if (from < 2) throw new Error(`convertRadix: invalid from=${from}, base cannot be less than 2`);\n  if (to < 2) throw new Error(`convertRadix: invalid to=${to}, base cannot be less than 2`);\n  aArr(data);\n  if (!data.length) return [];\n  let pos = 0;\n  const res = [];\n  const digits = Array.from(data, (d) => {\n    anumber(d);\n    if (d < 0 || d >= from) throw new Error(`invalid integer: ${d}`);\n    return d;\n  });\n  const dlen = digits.length;\n  while (true) {\n    let carry = 0;\n    let done = true;\n    for (let i = pos; i < dlen; i++) {\n      const digit = digits[i]!;\n      const fromCarry = from * carry;\n      const digitBase = fromCarry + digit;\n      if (\n        !Number.isSafeInteger(digitBase) ||\n        fromCarry / from !== carry ||\n        digitBase - digit !== fromCarry\n      ) {\n        throw new Error('convertRadix: carry overflow');\n      }\n      const div = digitBase / to;\n      carry = digitBase % to;\n      const rounded = Math.floor(div);\n      digits[i] = rounded;\n      if (!Number.isSafeInteger(rounded) || rounded * to + carry !== digitBase)\n        throw new Error('convertRadix: carry overflow');\n      if (!done) continue;\n      else if (!rounded) pos = i;\n      else done = false;\n    }\n    res.push(carry);\n    if (done) break;\n  }\n  for (let i = 0; i < data.length - 1 && data[i] === 0; i++) res.push(0);\n  return res.reverse();\n}\n\nconst gcd = (a: number, b: number): number => (b === 0 ? a : gcd(b, a % b));\nconst radix2carry = /* @__NO_SIDE_EFFECTS__ */ (from: number, to: number) =>\n  from + (to - gcd(from, to));\nconst powers: number[] = /* @__PURE__ */ (() => {\n  let res = [];\n  for (let i = 0; i < 40; i++) res.push(2 ** i);\n  return res;\n})();\n/**\n * Implemented with numbers, because BigInt is 5x slower\n */\nfunction convertRadix2(data: number[], from: number, to: number, padding: boolean): number[] {\n  aArr(data);\n  if (from <= 0 || from > 32) throw new Error(`convertRadix2: wrong from=${from}`);\n  if (to <= 0 || to > 32) throw new Error(`convertRadix2: wrong to=${to}`);\n  if (radix2carry(from, to) > 32) {\n    throw new Error(\n      `convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`\n    );\n  }\n  let carry = 0;\n  let pos = 0; // bitwise position in current element\n  const max = powers[from]!;\n  const mask = powers[to]! - 1;\n  const res: number[] = [];\n  for (const n of data) {\n    anumber(n);\n    if (n >= max) throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n    carry = (carry << from) | n;\n    if (pos + from > 32) throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n    pos += from;\n    for (; pos >= to; pos -= to) res.push(((carry >> (pos - to)) & mask) >>> 0);\n    const pow = powers[pos];\n    if (pow === undefined) throw new Error('invalid carry');\n    carry &= pow - 1; // clean carry, otherwise it will cause overflow\n  }\n  carry = (carry << (to - pos)) & mask;\n  if (!padding && pos >= from) throw new Error('Excess padding');\n  if (!padding && carry > 0) throw new Error(`Non-zero padding: ${carry}`);\n  if (padding && pos > 0) res.push(carry >>> 0);\n  return res;\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix(num: number): Coder<Uint8Array, number[]> {\n  anumber(num);\n  const _256 = 2 ** 8;\n  return {\n    encode: (bytes: Uint8Array) => {\n      if (!isBytes(bytes)) throw new Error('radix.encode input should be Uint8Array');\n      return convertRadix(Array.from(bytes), _256, num);\n    },\n    decode: (digits: number[]) => {\n      anumArr('radix.decode', digits);\n      return Uint8Array.from(convertRadix(digits, num, _256));\n    },\n  };\n}\n\n/**\n * If both bases are power of same number (like `2**8 <-> 2**64`),\n * there is a linear algorithm. For now we have implementation for power-of-two bases only.\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix2(bits: number, revPadding = false): Coder<Uint8Array, number[]> {\n  anumber(bits);\n  if (bits <= 0 || bits > 32) throw new Error('radix2: bits should be in (0..32]');\n  if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n    throw new Error('radix2: carry overflow');\n  return {\n    encode: (bytes: Uint8Array) => {\n      if (!isBytes(bytes)) throw new Error('radix2.encode input should be Uint8Array');\n      return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n    },\n    decode: (digits: number[]) => {\n      anumArr('radix2.decode', digits);\n      return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n    },\n  };\n}\n\ntype ArgumentTypes<F extends Function> = F extends (...args: infer A) => any ? A : never;\nfunction unsafeWrapper<T extends (...args: any) => any>(fn: T) {\n  afn(fn);\n  return function (...args: ArgumentTypes<T>): ReturnType<T> | void {\n    try {\n      return fn.apply(null, args);\n    } catch (e) {}\n  };\n}\n\nfunction checksum(\n  len: number,\n  fn: (data: Uint8Array) => Uint8Array\n): Coder<Uint8Array, Uint8Array> {\n  anumber(len);\n  afn(fn);\n  return {\n    encode(data: Uint8Array) {\n      if (!isBytes(data)) throw new Error('checksum.encode: input should be Uint8Array');\n      const sum = fn(data).slice(0, len);\n      const res = new Uint8Array(data.length + len);\n      res.set(data);\n      res.set(sum, data.length);\n      return res;\n    },\n    decode(data: Uint8Array) {\n      if (!isBytes(data)) throw new Error('checksum.decode: input should be Uint8Array');\n      const payload = data.slice(0, -len);\n      const oldChecksum = data.slice(-len);\n      const newChecksum = fn(payload).slice(0, len);\n      for (let i = 0; i < len; i++)\n        if (newChecksum[i] !== oldChecksum[i]) throw new Error('Invalid checksum');\n      return payload;\n    },\n  };\n}\n\n// prettier-ignore\nexport const utils: { alphabet: typeof alphabet; chain: typeof chain; checksum: typeof checksum; convertRadix: typeof convertRadix; convertRadix2: typeof convertRadix2; radix: typeof radix; radix2: typeof radix2; join: typeof join; padding: typeof padding; } = {\n  alphabet, chain, checksum, convertRadix, convertRadix2, radix, radix2, join, padding,\n};\n\n// RFC 4648 aka RFC 3548\n// ---------------------\n\n/**\n * base16 encoding from RFC 4648.\n * @example\n * ```js\n * base16.encode(Uint8Array.from([0x12, 0xab]));\n * // => '12AB'\n * ```\n */\nexport const base16: BytesCoder = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\n\n/**\n * base32 encoding from RFC 4648. Has padding.\n * Use `base32nopad` for unpadded version.\n * Also check out `base32hex`, `base32hexnopad`, `base32crockford`.\n * @example\n * ```js\n * base32.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'CKVQ===='\n * base32.decode('CKVQ====');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32: BytesCoder = chain(\n  radix2(5),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'),\n  padding(5),\n  join('')\n);\n\n/**\n * base32 encoding from RFC 4648. No padding.\n * Use `base32` for padded version.\n * Also check out `base32hex`, `base32hexnopad`, `base32crockford`.\n * @example\n * ```js\n * base32nopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'CKVQ'\n * base32nopad.decode('CKVQ');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32nopad: BytesCoder = chain(\n  radix2(5),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'),\n  join('')\n);\n/**\n * base32 encoding from RFC 4648. Padded. Compared to ordinary `base32`, slightly different alphabet.\n * Use `base32hexnopad` for unpadded version.\n * @example\n * ```js\n * base32hex.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ALG===='\n * base32hex.decode('2ALG====');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32hex: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'),\n  padding(5),\n  join('')\n);\n\n/**\n * base32 encoding from RFC 4648. No padding. Compared to ordinary `base32`, slightly different alphabet.\n * Use `base32hex` for padded version.\n * @example\n * ```js\n * base32hexnopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ALG'\n * base32hexnopad.decode('2ALG');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32hexnopad: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'),\n  join('')\n);\n/**\n * base32 encoding from RFC 4648. Doug Crockford's version.\n * https://www.crockford.com/base32.html\n * @example\n * ```js\n * base32crockford.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ANG'\n * base32crockford.decode('2ANG');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32crockford: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'),\n  join(''),\n  normalize((s: string) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1'))\n);\n\n// Built-in base64 conversion https://caniuse.com/mdn-javascript_builtins_uint8array_frombase64\n// prettier-ignore\nconst hasBase64Builtin: boolean = /* @__PURE__ */ (() =>\n  typeof (Uint8Array as any).from([]).toBase64 === 'function' &&\n  typeof (Uint8Array as any).fromBase64 === 'function')();\n\nconst decodeBase64Builtin = (s: string, isUrl: boolean) => {\n  astr('base64', s);\n  const re = isUrl ? /^[A-Za-z0-9=_-]+$/ : /^[A-Za-z0-9=+/]+$/;\n  const alphabet = isUrl ? 'base64url' : 'base64';\n  if (s.length > 0 && !re.test(s)) throw new Error('invalid base64');\n  return (Uint8Array as any).fromBase64(s, { alphabet, lastChunkHandling: 'strict' });\n};\n\n/**\n * base64 from RFC 4648. Padded.\n * Use `base64nopad` for unpadded version.\n * Also check out `base64url`, `base64urlnopad`.\n * Falls back to built-in function, when available.\n * @example\n * ```js\n * base64.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs='\n * base64.decode('Eqs=');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\n// prettier-ignore\nexport const base64: BytesCoder = hasBase64Builtin ? {\n  encode(b) { abytes(b); return (b as any).toBase64(); },\n  decode(s) { return decodeBase64Builtin(s, false); },\n} : chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),\n  padding(6),\n  join('')\n);\n/**\n * base64 from RFC 4648. No padding.\n * Use `base64` for padded version.\n * @example\n * ```js\n * base64nopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs'\n * base64nopad.decode('Eqs');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base64nopad: BytesCoder = chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),\n  join('')\n);\n\n/**\n * base64 from RFC 4648, using URL-safe alphabet. Padded.\n * Use `base64urlnopad` for unpadded version.\n * Falls back to built-in function, when available.\n * @example\n * ```js\n * base64url.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs='\n * base64url.decode('Eqs=');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\n// prettier-ignore\nexport const base64url: BytesCoder = hasBase64Builtin ? {\n  encode(b) { abytes(b); return (b as any).toBase64({ alphabet: 'base64url' }); },\n  decode(s) { return decodeBase64Builtin(s, true); },\n} : chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'),\n  padding(6),\n  join('')\n);\n\n/**\n * base64 from RFC 4648, using URL-safe alphabet. No padding.\n * Use `base64url` for padded version.\n * @example\n * ```js\n * base64urlnopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs'\n * base64urlnopad.decode('Eqs');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base64urlnopad: BytesCoder = chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'),\n  join('')\n);\n\n// base58 code\n// -----------\nconst genBase58 = /* @__NO_SIDE_EFFECTS__ */ (abc: string) =>\n  chain(radix(58), alphabet(abc), join(''));\n\n/**\n * base58: base64 without ambigous characters +, /, 0, O, I, l.\n * Quadratic (O(n^2)) - so, can't be used on large inputs.\n * @example\n * ```js\n * base58.decode('01abcdef');\n * // => '3UhJW'\n * ```\n */\nexport const base58: BytesCoder = genBase58(\n  '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n);\n/**\n * base58: flickr version. Check out `base58`.\n */\nexport const base58flickr: BytesCoder = genBase58(\n  '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n);\n/**\n * base58: XRP version. Check out `base58`.\n */\nexport const base58xrp: BytesCoder = genBase58(\n  'rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz'\n);\n\n// Data len (index) -> encoded block len\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\n\n/**\n * base58: XMR version. Check out `base58`.\n * Done in 8-byte blocks (which equals 11 chars in decoding). Last (non-full) block padded with '1' to size in XMR_BLOCK_LEN.\n * Block encoding significantly reduces quadratic complexity of base58.\n */\nexport const base58xmr: BytesCoder = {\n  encode(data: Uint8Array) {\n    let res = '';\n    for (let i = 0; i < data.length; i += 8) {\n      const block = data.subarray(i, i + 8);\n      res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length]!, '1');\n    }\n    return res;\n  },\n  decode(str: string) {\n    let res: number[] = [];\n    for (let i = 0; i < str.length; i += 11) {\n      const slice = str.slice(i, i + 11);\n      const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n      const block = base58.decode(slice);\n      for (let j = 0; j < block.length - blockLen; j++) {\n        if (block[j] !== 0) throw new Error('base58xmr: wrong padding');\n      }\n      res = res.concat(Array.from(block.slice(block.length - blockLen)));\n    }\n    return Uint8Array.from(res);\n  },\n};\n\n/**\n * Method, which creates base58check encoder.\n * Requires function, calculating sha256.\n */\nexport const createBase58check = (sha256: (data: Uint8Array) => Uint8Array): BytesCoder =>\n  chain(\n    checksum(4, (data) => sha256(sha256(data))),\n    base58\n  );\n\n/**\n * Use `createBase58check` instead.\n * @deprecated\n */\nexport const base58check: (sha256: (data: Uint8Array) => Uint8Array) => BytesCoder =\n  createBase58check;\n\n// Bech32 code\n// -----------\nexport interface Bech32Decoded<Prefix extends string = string> {\n  prefix: Prefix;\n  words: number[];\n}\nexport interface Bech32DecodedWithArray<Prefix extends string = string> {\n  prefix: Prefix;\n  words: number[];\n  bytes: Uint8Array;\n}\n\nconst BECH_ALPHABET: Coder<number[], string> = chain(\n  alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'),\n  join('')\n);\n\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre: number): number {\n  const b = pre >> 25;\n  let chk = (pre & 0x1ffffff) << 5;\n  for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n    if (((b >> i) & 1) === 1) chk ^= POLYMOD_GENERATORS[i]!;\n  }\n  return chk;\n}\n\nfunction bechChecksum(prefix: string, words: number[], encodingConst = 1): string {\n  const len = prefix.length;\n  let chk = 1;\n  for (let i = 0; i < len; i++) {\n    const c = prefix.charCodeAt(i);\n    if (c < 33 || c > 126) throw new Error(`Invalid prefix (${prefix})`);\n    chk = bech32Polymod(chk) ^ (c >> 5);\n  }\n  chk = bech32Polymod(chk);\n  for (let i = 0; i < len; i++) chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n  for (let v of words) chk = bech32Polymod(chk) ^ v;\n  for (let i = 0; i < 6; i++) chk = bech32Polymod(chk);\n  chk ^= encodingConst;\n  return BECH_ALPHABET.encode(convertRadix2([chk % powers[30]!], 30, 5, false));\n}\n\nexport interface Bech32 {\n  encode<Prefix extends string>(\n    prefix: Prefix,\n    words: number[] | Uint8Array,\n    limit?: number | false\n  ): `${Lowercase<Prefix>}1${string}`;\n  decode<Prefix extends string>(\n    str: `${Prefix}1${string}`,\n    limit?: number | false\n  ): Bech32Decoded<Prefix>;\n  encodeFromBytes(prefix: string, bytes: Uint8Array): string;\n  decodeToBytes(str: string): Bech32DecodedWithArray;\n  decodeUnsafe(str: string, limit?: number | false): void | Bech32Decoded<string>;\n  fromWords(to: number[]): Uint8Array;\n  fromWordsUnsafe(to: number[]): void | Uint8Array;\n  toWords(from: Uint8Array): number[];\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction genBech32(encoding: 'bech32' | 'bech32m'): Bech32 {\n  const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n  const _words = radix2(5);\n  const fromWords = _words.decode;\n  const toWords = _words.encode;\n  const fromWordsUnsafe = unsafeWrapper(fromWords);\n\n  function encode<Prefix extends string>(\n    prefix: Prefix,\n    words: number[] | Uint8Array,\n    limit: number | false = 90\n  ): `${Lowercase<Prefix>}1${string}` {\n    astr('bech32.encode prefix', prefix);\n    if (isBytes(words)) words = Array.from(words);\n    anumArr('bech32.encode', words);\n    const plen = prefix.length;\n    if (plen === 0) throw new TypeError(`Invalid prefix length ${plen}`);\n    const actualLength = plen + 7 + words.length;\n    if (limit !== false && actualLength > limit)\n      throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n    const lowered = prefix.toLowerCase();\n    const sum = bechChecksum(lowered, words, ENCODING_CONST);\n    return `${lowered}1${BECH_ALPHABET.encode(words)}${sum}` as `${Lowercase<Prefix>}1${string}`;\n  }\n\n  function decode<Prefix extends string>(\n    str: `${Prefix}1${string}`,\n    limit?: number | false\n  ): Bech32Decoded<Prefix>;\n  function decode(str: string, limit?: number | false): Bech32Decoded;\n  function decode(str: string, limit: number | false = 90): Bech32Decoded {\n    astr('bech32.decode input', str);\n    const slen = str.length;\n    if (slen < 8 || (limit !== false && slen > limit))\n      throw new TypeError(`invalid string length: ${slen} (${str}). Expected (8..${limit})`);\n    // don't allow mixed case\n    const lowered = str.toLowerCase();\n    if (str !== lowered && str !== str.toUpperCase())\n      throw new Error(`String must be lowercase or uppercase`);\n    const sepIndex = lowered.lastIndexOf('1');\n    if (sepIndex === 0 || sepIndex === -1)\n      throw new Error(`Letter \"1\" must be present between prefix and data only`);\n    const prefix = lowered.slice(0, sepIndex);\n    const data = lowered.slice(sepIndex + 1);\n    if (data.length < 6) throw new Error('Data must be at least 6 characters long');\n    const words = BECH_ALPHABET.decode(data).slice(0, -6);\n    const sum = bechChecksum(prefix, words, ENCODING_CONST);\n    if (!data.endsWith(sum)) throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n    return { prefix, words };\n  }\n\n  const decodeUnsafe = unsafeWrapper(decode);\n\n  function decodeToBytes(str: string): Bech32DecodedWithArray {\n    const { prefix, words } = decode(str, false);\n    return { prefix, words, bytes: fromWords(words) };\n  }\n\n  function encodeFromBytes(prefix: string, bytes: Uint8Array) {\n    return encode(prefix, toWords(bytes));\n  }\n\n  return {\n    encode,\n    decode,\n    encodeFromBytes,\n    decodeToBytes,\n    decodeUnsafe,\n    fromWords,\n    fromWordsUnsafe,\n    toWords,\n  };\n}\n\n/**\n * bech32 from BIP 173. Operates on words.\n * For high-level, check out scure-btc-signer:\n * https://github.com/paulmillr/scure-btc-signer.\n */\nexport const bech32: Bech32 = genBech32('bech32');\n\n/**\n * bech32m from BIP 350. Operates on words.\n * It was to mitigate `bech32` weaknesses.\n * For high-level, check out scure-btc-signer:\n * https://github.com/paulmillr/scure-btc-signer.\n */\nexport const bech32m: Bech32 = genBech32('bech32m');\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * UTF-8-to-byte decoder. Uses built-in TextDecoder / TextEncoder.\n * @example\n * ```js\n * const b = utf8.decode(\"hey\"); // => new Uint8Array([ 104, 101, 121 ])\n * const str = utf8.encode(b); // \"hey\"\n * ```\n */\nexport const utf8: BytesCoder = {\n  encode: (data) => new TextDecoder().decode(data),\n  decode: (str) => new TextEncoder().encode(str),\n};\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\n// prettier-ignore\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  typeof (Uint8Array as any).from([]).toHex === 'function' &&\n  typeof (Uint8Array as any).fromHex === 'function')();\n// prettier-ignore\nconst hexBuiltin: BytesCoder = {\n  encode(data) { abytes(data); return (data as any).toHex(); },\n  decode(s) { astr('hex', s); return (Uint8Array as any).fromHex(s); },\n};\n/**\n * hex string decoder. Uses built-in function, when available.\n * @example\n * ```js\n * const b = hex.decode(\"0102ff\"); // => new Uint8Array([ 1, 2, 255 ])\n * const str = hex.encode(b); // \"0102ff\"\n * ```\n */\nexport const hex: BytesCoder = hasHexBuiltin\n  ? hexBuiltin\n  : chain(\n      radix2(4),\n      alphabet('0123456789abcdef'),\n      join(''),\n      normalize((s: string) => {\n        if (typeof s !== 'string' || s.length % 2 !== 0)\n          throw new TypeError(\n            `hex.decode: expected string, got ${typeof s} with length ${s.length}`\n          );\n        return s.toLowerCase();\n      })\n    );\n\nexport type SomeCoders = {\n  utf8: BytesCoder;\n  hex: BytesCoder;\n  base16: BytesCoder;\n  base32: BytesCoder;\n  base64: BytesCoder;\n  base64url: BytesCoder;\n  base58: BytesCoder;\n  base58xmr: BytesCoder;\n};\n// prettier-ignore\nconst CODERS: SomeCoders = {\n  utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\ntype CoderType = keyof SomeCoders;\nconst coderTypeError =\n  'Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr';\n\n/** @deprecated */\nexport const bytesToString = (type: CoderType, bytes: Uint8Array): string => {\n  if (typeof type !== 'string' || !CODERS.hasOwnProperty(type)) throw new TypeError(coderTypeError);\n  if (!isBytes(bytes)) throw new TypeError('bytesToString() expects Uint8Array');\n  return CODERS[type].encode(bytes);\n};\n\n/** @deprecated */\nexport const str: (type: CoderType, bytes: Uint8Array) => string = bytesToString; // as in python, but for bytes only\n\n/** @deprecated */\nexport const stringToBytes = (type: CoderType, str: string): Uint8Array => {\n  if (!CODERS.hasOwnProperty(type)) throw new TypeError(coderTypeError);\n  if (typeof str !== 'string') throw new TypeError('stringToBytes() expects string');\n  return CODERS[type].decode(str);\n};\n/** @deprecated */\nexport const bytes: (type: CoderType, str: string) => Uint8Array = stringToBytes;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 16626, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/esm/index.js"],"sourcesContent":["/**\n * Audited & minimal JS implementation of\n * [BIP39 mnemonic phrases](https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki).\n * @module\n * @example\n```js\nimport * as bip39 from '@scure/bip39';\nimport { wordlist } from '@scure/bip39/wordlists/english';\nconst mn = bip39.generateMnemonic(wordlist);\nconsole.log(mn);\nconst ent = bip39.mnemonicToEntropy(mn, wordlist)\nbip39.entropyToMnemonic(ent, wordlist);\nbip39.validateMnemonic(mn, wordlist);\nawait bip39.mnemonicToSeed(mn, 'password');\nbip39.mnemonicToSeedSync(mn, 'password');\n\n// Wordlists\nimport { wordlist as czech } from '@scure/bip39/wordlists/czech';\nimport { wordlist as english } from '@scure/bip39/wordlists/english';\nimport { wordlist as french } from '@scure/bip39/wordlists/french';\nimport { wordlist as italian } from '@scure/bip39/wordlists/italian';\nimport { wordlist as japanese } from '@scure/bip39/wordlists/japanese';\nimport { wordlist as korean } from '@scure/bip39/wordlists/korean';\nimport { wordlist as portuguese } from '@scure/bip39/wordlists/portuguese';\nimport { wordlist as simplifiedChinese } from '@scure/bip39/wordlists/simplified-chinese';\nimport { wordlist as spanish } from '@scure/bip39/wordlists/spanish';\nimport { wordlist as traditionalChinese } from '@scure/bip39/wordlists/traditional-chinese';\n```\n */\n/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\nimport { pbkdf2, pbkdf2Async } from '@noble/hashes/pbkdf2';\nimport { sha256, sha512 } from '@noble/hashes/sha2';\nimport { abytes, anumber, randomBytes } from '@noble/hashes/utils';\nimport { utils as baseUtils } from '@scure/base';\n// Japanese wordlist\nconst isJapanese = (wordlist) => wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093';\n// Normalization replaces equivalent sequences of characters\n// so that any two texts that are equivalent will be reduced\n// to the same sequence of code points, called the normal form of the original text.\n// https://tonsky.me/blog/unicode/#why-is-a----\nfunction nfkd(str) {\n    if (typeof str !== 'string')\n        throw new TypeError('invalid mnemonic type: ' + typeof str);\n    return str.normalize('NFKD');\n}\nfunction normalize(str) {\n    const norm = nfkd(str);\n    const words = norm.split(' ');\n    if (![12, 15, 18, 21, 24].includes(words.length))\n        throw new Error('Invalid mnemonic');\n    return { nfkd: norm, words };\n}\nfunction aentropy(ent) {\n    abytes(ent, 16, 20, 24, 28, 32);\n}\n/**\n * Generate x random words. Uses Cryptographically-Secure Random Number Generator.\n * @param wordlist imported wordlist for specific language\n * @param strength mnemonic strength 128-256 bits\n * @example\n * generateMnemonic(wordlist, 128)\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nexport function generateMnemonic(wordlist, strength = 128) {\n    anumber(strength);\n    if (strength % 32 !== 0 || strength > 256)\n        throw new TypeError('Invalid entropy');\n    return entropyToMnemonic(randomBytes(strength / 8), wordlist);\n}\nconst calcChecksum = (entropy) => {\n    // Checksum is ent.length/4 bits long\n    const bitsLeft = 8 - entropy.length / 4;\n    // Zero rightmost \"bitsLeft\" bits in byte\n    // For example: bitsLeft=4 val=10111101 -> 10110000\n    return new Uint8Array([(sha256(entropy)[0] >> bitsLeft) << bitsLeft]);\n};\nfunction getCoder(wordlist) {\n    if (!Array.isArray(wordlist) || wordlist.length !== 2048 || typeof wordlist[0] !== 'string')\n        throw new Error('Wordlist: expected array of 2048 strings');\n    wordlist.forEach((i) => {\n        if (typeof i !== 'string')\n            throw new Error('wordlist: non-string element: ' + i);\n    });\n    return baseUtils.chain(baseUtils.checksum(1, calcChecksum), baseUtils.radix2(11, true), baseUtils.alphabet(wordlist));\n}\n/**\n * Reversible: Converts mnemonic string to raw entropy in form of byte array.\n * @param mnemonic 12-24 words\n * @param wordlist imported wordlist for specific language\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToEntropy(mnem, wordlist)\n * // Produces\n * new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ])\n */\nexport function mnemonicToEntropy(mnemonic, wordlist) {\n    const { words } = normalize(mnemonic);\n    const entropy = getCoder(wordlist).decode(words);\n    aentropy(entropy);\n    return entropy;\n}\n/**\n * Reversible: Converts raw entropy in form of byte array to mnemonic string.\n * @param entropy byte array\n * @param wordlist imported wordlist for specific language\n * @returns 12-24 words\n * @example\n * const ent = new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ]);\n * entropyToMnemonic(ent, wordlist);\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nexport function entropyToMnemonic(entropy, wordlist) {\n    aentropy(entropy);\n    const words = getCoder(wordlist).encode(entropy);\n    return words.join(isJapanese(wordlist) ? '\\u3000' : ' ');\n}\n/**\n * Validates mnemonic for being 12-24 words contained in `wordlist`.\n */\nexport function validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nconst psalt = (passphrase) => nfkd('mnemonic' + passphrase);\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * await mnemonicToSeed(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nexport function mnemonicToSeed(mnemonic, passphrase = '') {\n    return pbkdf2Async(sha512, normalize(mnemonic).nfkd, psalt(passphrase), { c: 2048, dkLen: 64 });\n}\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToSeedSync(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nexport function mnemonicToSeedSync(mnemonic, passphrase = '') {\n    return pbkdf2(sha512, normalize(mnemonic).nfkd, psalt(passphrase), { c: 2048, dkLen: 64 });\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA4BC,GACD,uFAAuF;;;;;;;;;;;;;;AACvF;AACA;AACA;AACA;;;;;AACA,oBAAoB;AACpB,MAAM,aAAa,CAAC,WAAa,QAAQ,CAAC,EAAE,KAAK;AACjD,4DAA4D;AAC5D,4DAA4D;AAC5D,oFAAoF;AACpF,+CAA+C;AAC/C,SAAS,KAAK,GAAG;IACb,IAAI,OAAO,QAAQ,UACf,MAAM,IAAI,UAAU,4BAA4B,OAAO;IAC3D,OAAO,IAAI,SAAS,CAAC;AACzB;AACA,SAAS,UAAU,GAAG;IAClB,MAAM,OAAO,KAAK;IAClB,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,IAAI,CAAC;QAAC;QAAI;QAAI;QAAI;QAAI;KAAG,CAAC,QAAQ,CAAC,MAAM,MAAM,GAC3C,MAAM,IAAI,MAAM;IACpB,OAAO;QAAE,MAAM;QAAM;IAAM;AAC/B;AACA,SAAS,SAAS,GAAG;IACjB,IAAA,kMAAM,EAAC,KAAK,IAAI,IAAI,IAAI,IAAI;AAChC;AASO,SAAS,iBAAiB,QAAQ,EAAE,WAAW,GAAG;IACrD,IAAA,mMAAO,EAAC;IACR,IAAI,WAAW,OAAO,KAAK,WAAW,KAClC,MAAM,IAAI,UAAU;IACxB,OAAO,kBAAkB,IAAA,uMAAW,EAAC,WAAW,IAAI;AACxD;AACA,MAAM,eAAe,CAAC;IAClB,qCAAqC;IACrC,MAAM,WAAW,IAAI,QAAQ,MAAM,GAAG;IACtC,yCAAyC;IACzC,mDAAmD;IACnD,OAAO,IAAI,WAAW;QAAE,IAAA,iMAAM,EAAC,QAAQ,CAAC,EAAE,IAAI,YAAa;KAAS;AACxE;AACA,SAAS,SAAS,QAAQ;IACtB,IAAI,CAAC,MAAM,OAAO,CAAC,aAAa,SAAS,MAAM,KAAK,QAAQ,OAAO,QAAQ,CAAC,EAAE,KAAK,UAC/E,MAAM,IAAI,MAAM;IACpB,SAAS,OAAO,CAAC,CAAC;QACd,IAAI,OAAO,MAAM,UACb,MAAM,IAAI,MAAM,mCAAmC;IAC3D;IACA,OAAO,kKAAS,CAAC,KAAK,CAAC,kKAAS,CAAC,QAAQ,CAAC,GAAG,eAAe,kKAAS,CAAC,MAAM,CAAC,IAAI,OAAO,kKAAS,CAAC,QAAQ,CAAC;AAC/G;AAcO,SAAS,kBAAkB,QAAQ,EAAE,QAAQ;IAChD,MAAM,EAAE,KAAK,EAAE,GAAG,UAAU;IAC5B,MAAM,UAAU,SAAS,UAAU,MAAM,CAAC;IAC1C,SAAS;IACT,OAAO;AACX;AAcO,SAAS,kBAAkB,OAAO,EAAE,QAAQ;IAC/C,SAAS;IACT,MAAM,QAAQ,SAAS,UAAU,MAAM,CAAC;IACxC,OAAO,MAAM,IAAI,CAAC,WAAW,YAAY,WAAW;AACxD;AAIO,SAAS,iBAAiB,QAAQ,EAAE,QAAQ;IAC/C,IAAI;QACA,kBAAkB,UAAU;IAChC,EACA,OAAO,GAAG;QACN,OAAO;IACX;IACA,OAAO;AACX;AACA,MAAM,QAAQ,CAAC,aAAe,KAAK,aAAa;AAWzC,SAAS,eAAe,QAAQ,EAAE,aAAa,EAAE;IACpD,OAAO,IAAA,wMAAW,EAAC,iMAAM,EAAE,UAAU,UAAU,IAAI,EAAE,MAAM,aAAa;QAAE,GAAG;QAAM,OAAO;IAAG;AACjG;AAWO,SAAS,mBAAmB,QAAQ,EAAE,aAAa,EAAE;IACxD,OAAO,IAAA,mMAAM,EAAC,iMAAM,EAAE,UAAU,UAAU,IAAI,EAAE,MAAM,aAAa;QAAE,GAAG;QAAM,OAAO;IAAG;AAC5F","ignoreList":[0]}},
    {"offset": {"line": 16761, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40scure/bip39/esm/wordlists/english.js"],"sourcesContent":["export const wordlist = `abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo`.split('\\n');\n"],"names":[],"mappings":";;;;AAAO,MAAM,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA+/DtB,CAAC,CAAC,KAAK,CAAC","ignoreList":[0]}},
    {"offset": {"line": 18817, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/one-webcrypto/browser.mjs"],"sourcesContent":["const _globalReference = globalThis || window || self\n\nexport const webcrypto = _globalReference.crypto\n"],"names":[],"mappings":";;;;AAAA,MAAM,mBAAmB,cAAc,UAAU;AAE1C,MAAM,YAAY,iBAAiB,MAAM","ignoreList":[0]}},
    {"offset": {"line": 18827, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/p-defer/index.js"],"sourcesContent":["export default function pDefer() {\n\tconst deferred = {};\n\n\tdeferred.promise = new Promise((resolve, reject) => {\n\t\tdeferred.resolve = resolve;\n\t\tdeferred.reject = reject;\n\t});\n\n\treturn deferred;\n}\n"],"names":[],"mappings":";;;;AAAe,SAAS;IACvB,MAAM,WAAW,CAAC;IAElB,SAAS,OAAO,GAAG,IAAI,QAAQ,CAAC,SAAS;QACxC,SAAS,OAAO,GAAG;QACnB,SAAS,MAAM,GAAG;IACnB;IAEA,OAAO;AACR","ignoreList":[0]}},
    {"offset": {"line": 18843, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/api.js"],"sourcesContent":["// @see https://github.com/microsoft/TypeScript/issues/41825\nexport {}\n"],"names":[],"mappings":"AAAA,4DAA4D","ignoreList":[0]}},
    {"offset": {"line": 18850, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/constant.js"],"sourcesContent":["/**\n * Number of bits per byte\n */\nconst BITS_PER_BYTE = 8\n\n/**\n * The number of Frs per Block.\n */\nexport const FRS_PER_QUAD = 4\n\nexport const LEAFS_PER_QUAD = /** @type {4n} */ (BigInt(FRS_PER_QUAD))\n\n/**\n * The amount of bits in an Fr when not padded.\n */\nexport const IN_BITS_FR = 254\n/**\n * The amount of bits in an Fr when padded.\n */\nexport const OUT_BITS_FR = 256\n\nexport const IN_BYTES_PER_QUAD =\n  /** @type {127} */\n  ((FRS_PER_QUAD * IN_BITS_FR) / BITS_PER_BYTE)\n\nexport const OUT_BYTES_PER_QUAD =\n  /** @type {128} */\n  ((FRS_PER_QUAD * OUT_BITS_FR) / BITS_PER_BYTE)\n\nexport const PADDED_BYTES_PER_QUAD = /** @type {127n} */ (\n  BigInt(IN_BYTES_PER_QUAD)\n)\n\nexport const EXPANDED_BYTES_PER_QUAD = /** @type {128n} */ (\n  BigInt(OUT_BYTES_PER_QUAD)\n)\n\nexport const BYTES_PER_FR =\n  /** @type {32} */\n  OUT_BYTES_PER_QUAD / FRS_PER_QUAD\n\nexport const FR_RATIO = IN_BITS_FR / OUT_BITS_FR\n\n/**\n * Size of a node in the merkle tree.\n */\nexport const NODE_SIZE =\n  /** @type {32} */\n  (OUT_BYTES_PER_QUAD / FRS_PER_QUAD)\n\nexport const EXPANDED_BYTES_PER_NODE = /** @type {32n} */ (BigInt(NODE_SIZE))\n\n/**\n * The smallest amount of data for which FR32 padding has a defined result.\n * Silently upgrading 2 leaves to 4 would break the symmetry so we require\n * an extra byte and the rest can be 0 padded to expand to 4 leaves.\n */\nexport const MIN_PAYLOAD_SIZE = 2 * NODE_SIZE + 1\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACD,MAAM,gBAAgB;AAKf,MAAM,eAAe;AAErB,MAAM,iBAAoC,OAAO;AAKjD,MAAM,aAAa;AAInB,MAAM,cAAc;AAEpB,MAAM,oBAEV,AAAC,eAAe,aAAc;AAE1B,MAAM,qBAEV,AAAC,eAAe,cAAe;AAE3B,MAAM,wBACX,OAAO;AAGF,MAAM,0BACX,OAAO;AAGF,MAAM,eACX,eAAe,GACf,qBAAqB;AAEhB,MAAM,WAAW,aAAa;AAK9B,MAAM,YAEV,qBAAqB;AAEjB,MAAM,0BAA8C,OAAO;AAO3D,MAAM,mBAAmB,IAAI,YAAY","ignoreList":[0]}},
    {"offset": {"line": 18898, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/node.js"],"sourcesContent":["import * as API from './api.js'\nimport { NODE_SIZE as Size } from './constant.js'\n\nexport { Size }\n\n/**\n * @param {number[]} bytes\n */\nexport const of = (...bytes) => from(bytes)\n\n/**\n * @param {Iterable<number>} bytes\n * @returns {API.MerkleTreeNode}\n */\nexport const from = (bytes) => {\n  /* c8 ignore next 7 */\n  if (bytes instanceof Uint8Array) {\n    if (bytes.length > Size) {\n      return bytes.subarray(0, Size)\n    } else if (bytes.length == Size) {\n      return bytes\n    }\n  }\n\n  const node = new Uint8Array(Size)\n  node.set([...bytes])\n  return node\n}\n\nexport const empty = () => EMPTY\n\nconst EMPTY = from(new Uint8Array(Size).fill(0))\nObject.freeze(EMPTY.buffer)\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;;AAOO,MAAM,KAAK,CAAC,GAAG,QAAU,KAAK;AAM9B,MAAM,OAAO,CAAC;IACnB,oBAAoB,GACpB,IAAI,iBAAiB,YAAY;QAC/B,IAAI,MAAM,MAAM,GAAG,uLAAI,EAAE;YACvB,OAAO,MAAM,QAAQ,CAAC,GAAG,uLAAI;QAC/B,OAAO,IAAI,MAAM,MAAM,IAAI,uLAAI,EAAE;YAC/B,OAAO;QACT;IACF;IAEA,MAAM,OAAO,IAAI,WAAW,uLAAI;IAChC,KAAK,GAAG,CAAC;WAAI;KAAM;IACnB,OAAO;AACT;AAEO,MAAM,QAAQ,IAAM;AAE3B,MAAM,QAAQ,KAAK,IAAI,WAAW,uLAAI,EAAE,IAAI,CAAC;AAC7C,OAAO,MAAM,CAAC,MAAM,MAAM","ignoreList":[0]}},
    {"offset": {"line": 18942, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/ipld/sha256.js"],"sourcesContent":["import * as API from '../api.js'\nimport * as SHA256 from 'sync-multihash-sha2/sha256'\nexport * from 'sync-multihash-sha2/sha256'\n\n/**\n * @type {API.MulticodecCode<typeof SHA256.code, typeof SHA256.name>}\n */\nexport const code = SHA256.code\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;;AAMO,MAAM,OAAO,+KAAW","ignoreList":[0]}},
    {"offset": {"line": 18957, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/ipld/cbor.js"],"sourcesContent":["import * as API from '../api.js'\nimport * as CBOR from '@ipld/dag-cbor'\n\n/**\n * @type {API.MulticodecCode<typeof CBOR.code, typeof CBOR.name>}\n */\nexport const code = CBOR.code\n\nexport const name = CBOR.name\n\nexport const encode =\n  /** @type {<T>(model:T) => API.ByteView<T, typeof code>} */\n  (CBOR.encode)\n\nexport const decode =\n  /** @type {<T>(bytes:API.ByteView<T, typeof code>) => T} */\n  (CBOR.decode)\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAKO,MAAM,OAAO,gKAAS;AAEtB,MAAM,OAAO,gKAAS;AAEtB,MAAM,SAEV,kKAAW;AAEP,MAAM,SAEV,kKAAW","ignoreList":[0]}},
    {"offset": {"line": 18979, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/ipld.js"],"sourcesContent":["import * as API from './api.js'\nexport * as SHA256 from './ipld/sha256.js'\nexport * as CBOR from './ipld/cbor.js'\nimport * as Link from 'multiformats/link'\n\n/**\n * @template Layout\n * @template {API.MulticodecCode} Format\n * @template {API.MulticodecCode} Hash\n * @param {API.ByteView<Layout, Format>} bytes\n * @param {object} settings\n * @param {API.SyncMultihashHasher<Hash>} settings.hasher\n * @param {object} settings.codec\n * @param {Format} settings.codec.code\n * @returns {API.Link<Layout, Format, Hash>}\n */\nexport const createLink = (bytes, { hasher, codec }) => {\n  const digest = hasher.digest(bytes)\n  return Link.create(codec.code, digest)\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAaO,MAAM,aAAa,CAAC,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE;IACjD,MAAM,SAAS,OAAO,MAAM,CAAC;IAC7B,OAAO,gLAAW,CAAC,MAAM,IAAI,EAAE;AACjC","ignoreList":[0]}},
    {"offset": {"line": 19024, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/proof.js"],"sourcesContent":["import * as API from './api.js'\n\nimport * as Bytes from 'multiformats/bytes'\nimport { Size as NodeSize } from './node.js'\nimport { CBOR, SHA256 } from './ipld.js'\n\n/**\n * @param {API.ProofData} proof\n * @returns {API.MerkleTreePath}\n */\nexport const path = ([, path]) => path\n\n/**\n * @param {API.ProofData} proof\n * @returns {API.uint64}\n */\nexport const offset = ([offset]) => offset\n\n/**\n * @param {API.ProofData} proof\n * @returns {number}\n */\nexport const depth = (proof) => path(proof).length\n\n/**\n * Verifies that `proof` proves that `claim.node` is contained by\n * the `claim.tree` merkle tree.\n *\n * @param {API.ProofData} proof\n * @param {object} claim\n * @param {API.MerkleTreeNode} claim.tree\n * @param {API.MerkleTreeNode} claim.node\n * @returns {API.Result<{}, Error>}\n */\nexport const verify = (proof, { tree, node }) => {\n  const computedRoot = resolveRoot(proof, node)\n  if (computedRoot.error) {\n    return { error: new Error(`computing root: ${computedRoot.error.message}`) }\n  }\n\n  if (!Bytes.equals(computedRoot.ok, tree)) {\n    return {\n      error: new Error('inclusion proof does not lead to the same root'),\n    }\n  }\n  return { ok: {} }\n}\n\nconst MAX_DEPTH = 63\n\n/**\n * Resolves the root of the merkle tree from given proof and node that root\n * supposedly includes. It does so by computing parent node from provided node\n * and node in the proof path, then combining that with the next node in the\n * path and so on until the root is reached. Function may return an error if\n * proof path is too long or if proof offset falls out of bounds.\n *\n * @param {API.ProofData} proof\n * @param {API.MerkleTreeNode} node\n * @returns {API.Result<API.MerkleTreeNode, RangeError>}\n */\nexport function resolveRoot(proof, node) {\n  if (depth(proof) > MAX_DEPTH) {\n    return {\n      error: new RangeError(\n        'merkle proofs with depths greater than 63 are not supported'\n      ),\n    }\n  }\n\n  let position = offset(proof)\n  if (position >> BigInt(depth(proof)) !== 0n) {\n    return { error: new RangeError('offset greater than width of the tree') }\n  }\n\n  let top = node\n  let right = 0n\n\n  for (const node of path(proof)) {\n    right =  position & 1n\n    position = position >> 1n\n    top = right === 1n ? computeNode(node, top) : computeNode(top, node)\n  }\n\n  return { ok: top }\n}\n\n/**\n * @param {Uint8Array} payload\n * @param {object} [options]\n * @param {API.SyncMultihashHasher<API.SHA256_CODE>} [options.hasher]\n * @returns {API.MerkleTreeNode}\n */\nexport function truncatedHash(payload, options = {}) {\n  const hasher = options.hasher || SHA256\n  const { digest } = hasher.digest(payload)\n  return truncate(digest)\n}\n\n/**\n * @param {API.MerkleTreeNode} left\n * @param {API.MerkleTreeNode} right\n * @param {object} [options]\n * @param {API.SyncMultihashHasher<API.SHA256_CODE>} [options.hasher]\n * @returns {API.MerkleTreeNode}\n */\nexport const computeNode = (left, right, options) => {\n  const payload = new Uint8Array(left.length + right.length)\n  payload.set(left, 0)\n  payload.set(right, left.length)\n  return truncatedHash(payload, options)\n}\n\n/**\n * @param {API.MerkleTreeNode} node\n * @returns {API.MerkleTreeNode}\n */\nexport function truncate(node) {\n  node[NodeSize - 1] &= 0b00111111\n  return node\n}\n\n/**\n * Takes data model and returns an IPLD View of it.\n *\n * @param {object} source\n * @param {API.uint64} source.offset\n * @param {API.MerkleTreePath} source.path\n * @returns {API.ProofData}\n */\nexport const create = ({ offset, path }) => [offset, path]\n\n/**\n * Takes proof in somewhat arbitrary form and returns a proof data.\n *\n * @param {API.IntoProofData} source\n * @returns {API.ProofData}\n */\nexport const from = (source) => {\n  const [offset, path] = Array.isArray(source)\n    ? source\n    : [source.offset, source.path]\n\n  return create({ offset: BigInt(offset), path })\n}\n\n/**\n * @param {number} height - Height of the merkle tree\n * @param {number} level - Level of the node in the merkle tree\n * @param {API.uint64} index - Index of the node in the level\n */\nexport const validateLevelIndex = (height, level, index) => {\n  if (level < 0) {\n    throw new RangeError('level can not be negative')\n  }\n\n  if (level > height) {\n    throw new RangeError(`level too high: ${level} >= ${height}`)\n  }\n\n  if (index > (1 << (height - level)) - 1) {\n    throw new RangeError(\n      `index too large for level: idx ${index}, level ${level} : ${\n        (1 << (height - level)) - 1\n      }`\n    )\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAAA;AACA;AAAA;;;;;AAMO,MAAM,OAAO,CAAC,GAAG,KAAK,GAAK;AAM3B,MAAM,SAAS,CAAC,CAAC,OAAO,GAAK;AAM7B,MAAM,QAAQ,CAAC,QAAU,KAAK,OAAO,MAAM;AAY3C,MAAM,SAAS,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE;IAC1C,MAAM,eAAe,YAAY,OAAO;IACxC,IAAI,aAAa,KAAK,EAAE;QACtB,OAAO;YAAE,OAAO,IAAI,MAAM,CAAC,gBAAgB,EAAE,aAAa,KAAK,CAAC,OAAO,EAAE;QAAE;IAC7E;IAEA,IAAI,CAAC,iKAAY,CAAC,aAAa,EAAE,EAAE,OAAO;QACxC,OAAO;YACL,OAAO,IAAI,MAAM;QACnB;IACF;IACA,OAAO;QAAE,IAAI,CAAC;IAAE;AAClB;AAEA,MAAM,YAAY;AAaX,SAAS,YAAY,KAAK,EAAE,IAAI;IACrC,IAAI,MAAM,SAAS,WAAW;QAC5B,OAAO;YACL,OAAO,IAAI,WACT;QAEJ;IACF;IAEA,IAAI,WAAW,OAAO;IACtB,IAAI,YAAY,OAAO,MAAM,YAAY,EAAE,EAAE;QAC3C,OAAO;YAAE,OAAO,IAAI,WAAW;QAAyC;IAC1E;IAEA,IAAI,MAAM;IACV,IAAI,QAAQ,EAAE;IAEd,KAAK,MAAM,QAAQ,KAAK,OAAQ;QAC9B,QAAS,WAAW,EAAE;QACtB,WAAW,YAAY,EAAE;QACzB,MAAM,UAAU,EAAE,GAAG,YAAY,MAAM,OAAO,YAAY,KAAK;IACjE;IAEA,OAAO;QAAE,IAAI;IAAI;AACnB;AAQO,SAAS,cAAc,OAAO,EAAE,UAAU,CAAC,CAAC;IACjD,MAAM,SAAS,QAAQ,MAAM,IAAI,4NAAM;IACvC,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,MAAM,CAAC;IACjC,OAAO,SAAS;AAClB;AASO,MAAM,cAAc,CAAC,MAAM,OAAO;IACvC,MAAM,UAAU,IAAI,WAAW,KAAK,MAAM,GAAG,MAAM,MAAM;IACzD,QAAQ,GAAG,CAAC,MAAM;IAClB,QAAQ,GAAG,CAAC,OAAO,KAAK,MAAM;IAC9B,OAAO,cAAc,SAAS;AAChC;AAMO,SAAS,SAAS,IAAI;IAC3B,IAAI,CAAC,uNAAQ,GAAG,EAAE,IAAI;IACtB,OAAO;AACT;AAUO,MAAM,SAAS,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAK;QAAC;QAAQ;KAAK;AAQnD,MAAM,OAAO,CAAC;IACnB,MAAM,CAAC,QAAQ,KAAK,GAAG,MAAM,OAAO,CAAC,UACjC,SACA;QAAC,OAAO,MAAM;QAAE,OAAO,IAAI;KAAC;IAEhC,OAAO,OAAO;QAAE,QAAQ,OAAO;QAAS;IAAK;AAC/C;AAOO,MAAM,qBAAqB,CAAC,QAAQ,OAAO;IAChD,IAAI,QAAQ,GAAG;QACb,MAAM,IAAI,WAAW;IACvB;IAEA,IAAI,QAAQ,QAAQ;QAClB,MAAM,IAAI,WAAW,CAAC,gBAAgB,EAAE,MAAM,IAAI,EAAE,QAAQ;IAC9D;IAEA,IAAI,QAAQ,CAAC,KAAM,SAAS,KAAM,IAAI,GAAG;QACvC,MAAM,IAAI,WACR,CAAC,+BAA+B,EAAE,MAAM,QAAQ,EAAE,MAAM,GAAG,EACzD,CAAC,KAAM,SAAS,KAAM,IAAI,GAC1B;IAEN;AACF","ignoreList":[0]}},
    {"offset": {"line": 19145, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/zero-comm.js"],"sourcesContent":["import * as API from './api.js'\nimport * as Node from './node.js'\nimport * as Proof from './proof.js'\n\nconst MAX_LEVEL = 64\n\n/**\n * This is a lazy zero-comm buffer which we fill up on demand.\n */\nclass ZeroComm {\n  constructor() {\n    this.bytes = new Uint8Array(MAX_LEVEL * Node.Size)\n    this.bytes.set(Node.empty(), 0)\n    /** @private */\n    this.node = Node.empty()\n    /** @private */\n    this.length = Node.Size\n  }\n  /**\n   * @param {number} start\n   * @param {number} end\n   */\n  slice(start, end) {\n    while (this.length < end) {\n      this.node = Proof.computeNode(this.node, this.node)\n      this.bytes.set(this.node, this.length)\n      this.length += Node.Size\n    }\n\n    return this.bytes.subarray(start, end)\n  }\n}\nconst ZERO_COMM = new ZeroComm()\n\n/**\n * simple access by level, only levels between `0` and `64` inclusive are\n * available otherwise throws an error.\n *\n * @param {number} level\n * @returns {API.MerkleTreeNode}\n */\nexport const fromLevel = (level) => {\n  if (level < 0 || level >= MAX_LEVEL) {\n    throw new Error(\n      `Only levels between 0 and ${MAX_LEVEL - 1} inclusive are available`\n    )\n  }\n\n  return ZERO_COMM.slice(Node.Size * level, Node.Size * (level + 1))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;;;;AAEA,MAAM,YAAY;AAElB;;CAEC,GACD,MAAM;IACJ,aAAc;QACZ,IAAI,CAAC,KAAK,GAAG,IAAI,WAAW,YAAY,uNAAS;QACjD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,+LAAU,IAAI;QAC7B,aAAa,GACb,IAAI,CAAC,IAAI,GAAG,+LAAU;QACtB,aAAa,GACb,IAAI,CAAC,MAAM,GAAG,uNAAS;IACzB;IACA;;;GAGC,GACD,MAAM,KAAK,EAAE,GAAG,EAAE;QAChB,MAAO,IAAI,CAAC,MAAM,GAAG,IAAK;YACxB,IAAI,CAAC,IAAI,GAAG,sLAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI;YAClD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM;YACrC,IAAI,CAAC,MAAM,IAAI,uNAAS;QAC1B;QAEA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO;IACpC;AACF;AACA,MAAM,YAAY,IAAI;AASf,MAAM,YAAY,CAAC;IACxB,IAAI,QAAQ,KAAK,SAAS,WAAW;QACnC,MAAM,IAAI,MACR,CAAC,0BAA0B,EAAE,YAAY,EAAE,wBAAwB,CAAC;IAExE;IAEA,OAAO,UAAU,KAAK,CAAC,uNAAS,GAAG,OAAO,uNAAS,GAAG,CAAC,QAAQ,CAAC;AAClE","ignoreList":[0]}},
    {"offset": {"line": 19189, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/piece/tree.js"],"sourcesContent":["import * as API from '../api.js'\nimport { Size as NodeSize } from '../node.js'\nimport * as Proof from '../proof.js'\nexport { computeNode } from '../proof.js'\n\n// The value is an unsigned, 32-bit integer that is always numerically greater\n// than the highest index in the array. This means our tree can represent a\n// piece up to 128 GiB in size.\nexport const MAX_LEAF_COUNT = 2 ** 32 - 1\n\n/**\n * Allocates a tree for a given amount of leafs.\n *\n * The construction rounds the amount of leafs up to the nearest two-power with\n * zeroed nodes to ensure that the tree is perfect and hence all internal node's\n * have well-defined children.\n *\n * @param {number} leafs\n */\nexport function allocate(leafs) {\n  const adjustedLeafs = 2 ** Math.ceil(Math.log2(leafs))\n\n  if (adjustedLeafs > MAX_LEAF_COUNT) {\n    throw new RangeError(\n      `too many leafs ${adjustedLeafs} exceeds ${MAX_LEAF_COUNT} limit`\n    )\n  }\n\n  const height = Math.ceil(Math.log2(adjustedLeafs))\n  const nodes = new Array(height + 1)\n\n  for (const level of nodes.keys()) {\n    nodes[level] = new Array(1 << level)\n  }\n\n  return new PieceTree({ nodes, height })\n}\n\n/**\n * @param {API.TreeData} tree\n */\nconst depth = (tree) => {\n  return tree.nodes.length\n}\n\n/**\n *\n * @param {API.TreeData} tree\n * @returns {API.MerkleTreeNode}\n */\nexport const root = (tree) => {\n  return tree.nodes[0][0]\n}\n\n/**\n * @param {Uint8Array} source\n * @returns {API.MerkleTreeNode[]}\n */\nexport const split = (source) => {\n  const count = source.length / NodeSize\n  const chunks = new Array(count)\n  for (let n = 0; n < count; n++) {\n    const offset = n * NodeSize\n    const chunk = source.subarray(offset, offset + NodeSize)\n    chunks[n] = chunk\n  }\n  return chunks\n}\n\n/**\n * @param {API.Fr23Padded} source\n */\nexport const build = (source) => fromChunks(split(source))\n\n/**\n * @param {API.MerkleTreeNode[]} chunks\n */\nexport const fromChunks = (chunks) => {\n  if (chunks.length === 0) {\n    throw new RangeError('Empty source')\n  }\n\n  const leafs = chunks //await Promise.all(chunks.map(truncatedHash))\n  return fromLeafs(leafs)\n}\n\n/**\n * @param {API.MerkleTreeNode[]} leafs\n * @returns {API.PieceTree}\n */\nexport const fromLeafs = (leafs) => {\n  const tree = allocate(leafs.length)\n  // Set the padded leaf nodes\n  tree.nodes[depth(tree) - 1] = padLeafs(leafs)\n  let parentNodes = tree.nodes[depth(tree) - 1]\n  // Construct the Merkle tree bottom-up, starting from the leafs\n  // Note the -1 due to 0-indexing the root level\n  for (let level = depth(tree) - 2; level >= 0; level--) {\n    /** @type {API.MerkleTreeNode[]} */\n    const currentLevel = new Array(Math.ceil(parentNodes.length / 2))\n    // Traverse the level left to right\n    for (let i = 0; i + 1 < parentNodes.length; i = i + 2) {\n      currentLevel[Math.floor(i / 2)] = Proof.computeNode(\n        parentNodes[i],\n        parentNodes[i + 1]\n      )\n    }\n    tree.nodes[level] = currentLevel\n    parentNodes = currentLevel\n  }\n\n  return new PieceTree(tree)\n}\n\n/**\n * @param {API.MerkleTreeNode[]} leafs\n * @returns {API.MerkleTreeNode[]}\n */\nexport const padLeafs = (leafs) => {\n  const paddingAmount = (1 << Math.ceil(Math.log2(leafs.length))) - leafs.length\n  // arrays are zeroed by default in JS\n  const paddingLeafs = new Array(paddingAmount)\n\n  return [...leafs, ...paddingLeafs]\n}\n\n/**\n * @implements {API.PieceTree}\n */\nclass PieceTree {\n  /**\n   * @param {object} data\n   * @param {API.MerkleTreeNode[][]} data.nodes\n   * @param {number} data.height\n   */\n  constructor({ nodes, height }) {\n    this.nodes = nodes\n    this.height = height\n  }\n\n  get root() {\n    return root(this)\n  }\n  get leafs() {\n    const { nodes } = this\n    return nodes[nodes.length - 1]\n  }\n  get leafCount() {\n    return 2 ** this.height\n  }\n  /**\n   *\n   * @param {number} level\n   * @param {number} index\n   */\n  node(level, index) {\n    const { nodes } = this\n    return nodes[level][index]\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 19319, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/fr32.js"],"sourcesContent":["import * as API from './api.js'\nimport {\n  OUT_BYTES_PER_QUAD,\n  FR_RATIO,\n  IN_BYTES_PER_QUAD,\n  MIN_PAYLOAD_SIZE,\n} from './constant.js'\n\n/**\n * Determine the additional bytes of zeroed padding to append to the\n * end of a resource of `size` length in order to fit within a pow2 piece while\n * leaving enough room for Fr32 padding (2 bits per 254).\n *\n * @param {number} payloadSize - The size of the payload.\n * @returns {number}\n */\nexport function toZeroPaddedSize(payloadSize) {\n  const size = Math.max(payloadSize, MIN_PAYLOAD_SIZE)\n  const highestBit = Math.floor(Math.log2(size))\n\n  const bound = Math.ceil(FR_RATIO * 2 ** (highestBit + 1))\n  // the size is either the closest pow2 number, or the next pow2 number if we\n  // don't have space for padding\n  return size <= bound ? bound : Math.ceil(FR_RATIO * 2 ** (highestBit + 2))\n}\n\n/**\n * Derives fr32 padded size from the source content size (that MUST be\n * multiples of {@link IN_BYTES_PER_QUAD}) in bytes.\n *\n * @param {number} size\n */\nexport const toPieceSize = (size) => toZeroPaddedSize(size) / FR_RATIO\n\n/**\n * Derives fr32 unpadded size from the Fr32 padded size in bytes.\n *\n * @param {number} size\n */\nexport const fromPieceSize = (size) => size * FR_RATIO\n\n/**\n * Takes source bytes that returns fr32 padded bytes.\n *\n * @param {Uint8Array} source\n * @param {Uint8Array} output\n * @returns {API.Fr23Padded}\n */\nexport const pad = (\n  source,\n  output = new Uint8Array(toPieceSize(source.length))\n) => {\n  const size = toZeroPaddedSize(source.byteLength)\n  // Calculate number of quads in the given source\n  const quadCount = size / IN_BYTES_PER_QUAD\n\n  // Cycle over four(4) 31-byte groups, leaving 1 byte in between:\n  // 31 + 1 + 31 + 1 + 31 + 1 + 31 = 127\n  for (let n = 0; n < quadCount; n++) {\n    const readOffset = n * IN_BYTES_PER_QUAD\n    const writeOffset = n * OUT_BYTES_PER_QUAD\n\n    // First 31 bytes + 6 bits are taken as-is (trimmed later)\n    output.set(source.subarray(readOffset, readOffset + 32), writeOffset)\n\n    // first 2-bit \"shim\" forced into the otherwise identical output\n    output[writeOffset + 31] &= 0b00111111\n\n    // copy next Fr32 preceded with the last two bits of the previous Fr32\n    for (let i = 32; i < 64; i++) {\n      output[writeOffset + i] =\n        (source[readOffset + i] << 2) | (source[readOffset + i - 1] >> 6)\n    }\n\n    // next 2-bit shim\n    output[writeOffset + 63] &= 0b00111111\n\n    for (let i = 64; i < 96; i++) {\n      output[writeOffset + i] =\n        (source[readOffset + i] << 4) | (source[readOffset + i - 1] >> 4)\n    }\n\n    // next 2-bit shim\n    output[writeOffset + 95] &= 0b00111111\n\n    for (let i = 96; i < 127; i++) {\n      output[writeOffset + i] =\n        (source[readOffset + i] << 6) | (source[readOffset + i - 1] >> 2)\n    }\n\n    // we shim last 2-bits by shifting the last byte by two bits\n    output[writeOffset + 127] = source[readOffset + 126] >> 2\n  }\n\n  return output\n}\n\n/**\n * @param {API.Fr23Padded} source\n * @param {Uint8Array} [out]\n */\nexport const unpad = (\n  source,\n  out = new Uint8Array(fromPieceSize(source.length))\n) => {\n  const chunks = source.length / 128\n  for (let chunk = 0; chunk < chunks; chunk++) {\n    const inOffNext = chunk * 128 + 1\n    const outOff = chunk * 127\n\n    let at = source[chunk * 128]\n\n    for (let i = 0; i < 32; i++) {\n      const next = source[i + inOffNext]\n\n      out[outOff + i] = at\n\n      at = next\n    }\n\n    out[outOff + 31] |= at << 6\n\n    for (let i = 32; i < 64; i++) {\n      const next = source[i + inOffNext]\n\n      out[outOff + i] = at >> 2\n      out[outOff + i] |= next << 6\n\n      at = next\n    }\n\n    out[outOff + 63] ^= (at << 6) ^ (at << 4)\n\n    for (let i = 64; i < 96; i++) {\n      const next = source[i + inOffNext]\n\n      out[outOff + i] = at >> 4\n      out[outOff + i] |= next << 4\n\n      at = next\n    }\n\n    out[outOff + 95] ^= (at << 4) ^ (at << 2)\n\n    for (let i = 96; i < 127; i++) {\n      const next = source[i + inOffNext]\n\n      out[outOff + i]\n      out[outOff + i] = at >> 6\n      out[outOff + i] |= next << 2\n\n      at = next\n    }\n  }\n\n  return out\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 19417, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/uint64.js"],"sourcesContent":["import * as API from './api.js'\n\n/**\n * Returns the base 2 logarithm of the given `n`, rounded down.\n *\n * @param {API.uint64} n\n * @returns {number}\n */\nexport const log2Floor = (n) => {\n  let result = 0n\n  while ((n >>= 1n)) result++\n  return Number(result)\n}\n\n/**\n * Return the integer logarithm with ceiling for 64 bit unsigned ints.\n *\n * @param {API.uint64} n\n */\nexport const log2Ceil = (n) => (n <= 1n ? 0 : log2Floor(BigInt(n) - 1n) + 1)\n\n/**\n * @param {API.uint64} n\n */\nexport const trailingZeros64 = (n) => {\n  if (n === 0n) {\n    return 64\n  }\n\n  let count = 0\n  while ((n & 1n) === 0n) {\n    n >>= 1n\n    count++\n  }\n\n  return count\n}\n\n/**\n * @param {API.uint64} value\n */\nexport const onesCount64 = (value) => {\n  let count = 0\n  const mask = 1n\n\n  for (let i = 0n; i < 64n; i++) {\n    if ((value & (mask << i)) !== 0n) {\n      count++\n    }\n  }\n\n  return count\n}\n\n/**\n * @param {API.uint64} n\n * @returns {API.uint64}\n */\nexport const pow2 = (n) => 1n << n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAQO,MAAM,YAAY,CAAC;IACxB,IAAI,SAAS,EAAE;IACf,MAAQ,MAAM,EAAE,CAAG;IACnB,OAAO,OAAO;AAChB;AAOO,MAAM,WAAW,CAAC,IAAO,KAAK,EAAE,GAAG,IAAI,UAAU,OAAO,KAAK,EAAE,IAAI;AAKnE,MAAM,kBAAkB,CAAC;IAC9B,IAAI,MAAM,EAAE,EAAE;QACZ,OAAO;IACT;IAEA,IAAI,QAAQ;IACZ,MAAO,CAAC,IAAI,EAAE,MAAM,EAAE,CAAE;QACtB,MAAM,EAAE;QACR;IACF;IAEA,OAAO;AACT;AAKO,MAAM,cAAc,CAAC;IAC1B,IAAI,QAAQ;IACZ,MAAM,OAAO,EAAE;IAEf,IAAK,IAAI,IAAI,EAAE,EAAE,IAAI,GAAG,EAAE,IAAK;QAC7B,IAAI,CAAC,QAAS,QAAQ,CAAE,MAAM,EAAE,EAAE;YAChC;QACF;IACF;IAEA,OAAO;AACT;AAMO,MAAM,OAAO,CAAC,IAAM,EAAE,IAAI","ignoreList":[0]}},
    {"offset": {"line": 19463, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/piece/size/padded.js"],"sourcesContent":["import * as API from '../../api.js'\nimport { log2Ceil, trailingZeros64 } from '../../uint64.js'\nimport {\n  PADDED_BYTES_PER_QUAD,\n  EXPANDED_BYTES_PER_QUAD,\n  LEAFS_PER_QUAD,\n} from '../../constant.js'\n\n/**\n * Validates that given `size` is a valid {@link API.UnpaddedPieceSize} and\n * returns {@link API.UnpaddedPieceSize} capturing the validation at the type\n * level. If given `size` is not a valid `UnpaddedPieceSize` throws an error.\n *\n * This function is a variation on {@link validate} that throws exceptions\n * instead of returning a {@link API.Result}.\n *\n * @param {number|API.uint64} size\n * @returns {API.PaddedSize}\n */\nexport const from = (size) => {\n  const result = tryFrom(size)\n  if (result.error) {\n    throw result.error\n  } else {\n    return result.ok\n  }\n}\n\n/**\n * Validates that given `size` is a valid {@link API.UnpaddedPieceSize} that is\n * a power of 2 multiple of 127. Returns {@link API.Result} with\n * `UnpaddedPieceSize` ok case and an Error in the error case.\n *\n * @param {API.uint64|number} input\n * @returns {API.Result<API.PaddedSize, Error>}\n */\nexport const tryFrom = (input) => {\n  const size = BigInt(input)\n  if (size < PADDED_BYTES_PER_QUAD) {\n    return {\n      error: new RangeError(\n        `Padded payload must contain at least ${PADDED_BYTES_PER_QUAD} bytes`\n      ),\n    }\n  }\n\n  if (size >> BigInt(trailingZeros64(size)) !== PADDED_BYTES_PER_QUAD) {\n    return {\n      error: new RangeError(\n        `Padded payload size must be (2 * ${PADDED_BYTES_PER_QUAD})`\n      ),\n    }\n  }\n\n  return { ok: size }\n}\n\n/**\n * @param {API.PieceSize} size\n * @returns {API.PaddedSize}\n */\nexport const fromExpanded = (size) => fromQuads(size / EXPANDED_BYTES_PER_QUAD)\n\n/**\n * Takes `{@link API.PaddedPieceSize}` and returns corresponding\n * {@link API.PieceSize}.\n *\n * Please note that this function does not validate the input size and\n * relies that type-checker will ensure that user passes valid unpadded\n * piece size created with {@link from} or {@link validate} functions.\n *\n *\n * @see https://github.com/filecoin-project/go-state-types/blob/master/abi/piece.go#L14-L16\n *\n * @param {API.PaddedSize} size\n * @returns {API.PieceSize}\n */\nexport const toExpanded = (size) => toQauds(size) * EXPANDED_BYTES_PER_QUAD\n\n/**\n * Calculates the padded size of the piece from the given tree height.\n *\n * @param {number} height\n * @returns {API.uint64}\n */\nexport const fromHeight = (height) => {\n  // We calculate number of quads tree by calculating number of nodes tree\n  // at second layer. This works because we deal with a binary tree so first\n  // layer nodes will contain 2 leaves and second layer nodes will contain 4\n  // leaves hence number of quads.\n  const quads = 2n ** BigInt(height - 2)\n  return quads * PADDED_BYTES_PER_QUAD\n}\n\n/**\n * Calculates the height of the piece tree from unpadded size.\n *\n * @param {API.PaddedSize} size\n */\nexport const toHeight = (size) => log2Ceil(toWidth(size))\n\n/**\n * Takes `{@link API.PaddedPieceSize}` and returns corresponding\n * piece tree width (leaf count).\n *\n * @param {API.PaddedSize} size\n */\nexport const toWidth = (size) => toQauds(size) * LEAFS_PER_QUAD\n\n/**\n *\n * @param {API.uint64} width\n * @returns {API.PaddedSize}\n */\nexport const fromWidth = (width) => fromQuads(width / LEAFS_PER_QUAD)\n\n/**\n * @param {API.PaddedSize} size\n */\nconst toQauds = (size) => size / PADDED_BYTES_PER_QUAD\n\n/**\n *\n * @param {API.uint64} count\n * @returns {API.PaddedSize}\n */\nconst fromQuads = (count) => count * PADDED_BYTES_PER_QUAD\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;;;AAiBO,MAAM,OAAO,CAAC;IACnB,MAAM,SAAS,QAAQ;IACvB,IAAI,OAAO,KAAK,EAAE;QAChB,MAAM,OAAO,KAAK;IACpB,OAAO;QACL,OAAO,OAAO,EAAE;IAClB;AACF;AAUO,MAAM,UAAU,CAAC;IACtB,MAAM,OAAO,OAAO;IACpB,IAAI,OAAO,mMAAqB,EAAE;QAChC,OAAO;YACL,OAAO,IAAI,WACT,CAAC,qCAAqC,EAAE,mMAAqB,CAAC,MAAM,CAAC;QAEzE;IACF;IAEA,IAAI,QAAQ,OAAO,IAAA,2LAAe,EAAC,WAAW,mMAAqB,EAAE;QACnE,OAAO;YACL,OAAO,IAAI,WACT,CAAC,kCAAkC,EAAE,mMAAqB,CAAC,CAAC,CAAC;QAEjE;IACF;IAEA,OAAO;QAAE,IAAI;IAAK;AACpB;AAMO,MAAM,eAAe,CAAC,OAAS,UAAU,OAAO,qMAAuB;AAgBvE,MAAM,aAAa,CAAC,OAAS,QAAQ,QAAQ,qMAAuB;AAQpE,MAAM,aAAa,CAAC;IACzB,wEAAwE;IACxE,0EAA0E;IAC1E,0EAA0E;IAC1E,gCAAgC;IAChC,MAAM,QAAQ,EAAE,IAAI,OAAO,SAAS;IACpC,OAAO,QAAQ,mMAAqB;AACtC;AAOO,MAAM,WAAW,CAAC,OAAS,IAAA,oLAAQ,EAAC,QAAQ;AAQ5C,MAAM,UAAU,CAAC,OAAS,QAAQ,QAAQ,4LAAc;AAOxD,MAAM,YAAY,CAAC,QAAU,UAAU,QAAQ,4LAAc;AAEpE;;CAEC,GACD,MAAM,UAAU,CAAC,OAAS,OAAO,mMAAqB;AAEtD;;;;CAIC,GACD,MAAM,YAAY,CAAC,QAAU,QAAQ,mMAAqB","ignoreList":[0]}},
    {"offset": {"line": 19536, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/piece/size/unpadded.js"],"sourcesContent":["import * as API from '../../api.js'\nimport {\n  PADDED_BYTES_PER_QUAD,\n  EXPANDED_BYTES_PER_QUAD,\n  LEAFS_PER_QUAD,\n} from '../../constant.js'\nimport { log2Ceil } from '../../uint64.js'\nimport * as Padded from './padded.js'\n\n/**\n * Takes the {@link API.Piece} sizing details (height and padding) and\n * calculates original payload size.\n *\n * @param {object} piece\n * @param {number} piece.height\n * @param {API.uint64} piece.padding\n */\nexport const fromPiece = ({ height, padding }) =>\n  Padded.fromHeight(height) - padding\n\n/**\n * Takes arbitrary payload size and calculates 0-padding required to\n * produce a {@link API.PaddedSize}.\n *\n * @param {API.uint64} size\n */\nexport const toPadding = (size) => toPadded(size) - size\n\n/**\n * Takes arbitrary payload size and calculates size after required 0-padding.\n *\n * @param {API.uint64} size\n * @returns {API.PaddedSize}\n */\nexport const toPadded = (size) => toQauds(size) * PADDED_BYTES_PER_QUAD\n\n/**\n * Takes arbitrary payload size and calculates the piece size after required\n * 0-padding and FR32 expansion is applied.\n *\n * @param {API.uint64} size\n * @returns {API.PieceSize}\n */\nexport const toExpanded = (size) => toQauds(size) * EXPANDED_BYTES_PER_QUAD\n\n/**\n * Takes arbitrary payload size and calculates width of the piece tree (leaf\n * count) that will be required to represent it.\n *\n * @param {API.uint64} size\n */\nexport const toWidth = (size) => toQauds(size) * LEAFS_PER_QUAD\n\n/**\n * Takes arbitrary payload size and calculates height of the piece tree that will be required to represent it.\n *\n * @param {API.uint64} size\n */\nexport const toHeight = (size) => log2Ceil(toWidth(size))\n\n/**\n * Takes arbitrary payload size and calculates number of quads that will be\n * required to represent it.\n *\n * @param {API.uint64} size\n */\nconst toQauds = (size) => {\n  // Number of quads required to fit given payload size.\n  // Since bigint division truncates we add another quads shy of 1 number of\n  // bytes to round up.\n  const quadCount = (size + PADDED_BYTES_PER_QUAD - 1n) / PADDED_BYTES_PER_QUAD\n  // Next we we log2 then pow2 with some rounding to ensure that result\n  // is 2 ^ n.\n  return 2n ** BigInt(log2Ceil(quadCount))\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AAKA;AACA;;;;;AAUO,MAAM,YAAY,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,GAC3C,uMAAiB,CAAC,UAAU;AAQvB,MAAM,YAAY,CAAC,OAAS,SAAS,QAAQ;AAQ7C,MAAM,WAAW,CAAC,OAAS,QAAQ,QAAQ,mMAAqB;AAShE,MAAM,aAAa,CAAC,OAAS,QAAQ,QAAQ,qMAAuB;AAQpE,MAAM,UAAU,CAAC,OAAS,QAAQ,QAAQ,4LAAc;AAOxD,MAAM,WAAW,CAAC,OAAS,IAAA,oLAAQ,EAAC,QAAQ;AAEnD;;;;;CAKC,GACD,MAAM,UAAU,CAAC;IACf,sDAAsD;IACtD,0EAA0E;IAC1E,qBAAqB;IACrB,MAAM,YAAY,CAAC,OAAO,mMAAqB,GAAG,EAAE,IAAI,mMAAqB;IAC7E,qEAAqE;IACrE,YAAY;IACZ,OAAO,EAAE,IAAI,OAAO,IAAA,oLAAQ,EAAC;AAC/B","ignoreList":[0]}},
    {"offset": {"line": 19582, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/piece/size/expanded.js"],"sourcesContent":["import * as API from '../../api.js'\nimport {\n  EXPANDED_BYTES_PER_QUAD,\n  EXPANDED_BYTES_PER_NODE,\n} from '../../constant.js'\nimport { log2Ceil, onesCount64 } from '../../uint64.js'\n\nexport { toExpanded as fromPadded, fromExpanded as toPadded } from './padded.js'\nexport { toExpanded as fromUnpadded } from './unpadded.js'\n\n/**\n * Validates that given `size` is a valid {@link API.PieceSize} that is a\n * power of 2. Returns {@link API.Result} with `PaddedPieceSize` ok case and an\n * Error in the error case.\n *\n * @see https://github.com/filecoin-project/go-state-types/blob/ff2ed169ff566458f2acd8b135d62e8ca27e7d0c/abi/piece.go#L18-L29\n *\n * @param {number|API.uint64} input\n * @returns {API.Result<API.PieceSize, RangeError>}\n */\nexport const tryFrom = (input) => {\n  const size = BigInt(input)\n  if (size < EXPANDED_BYTES_PER_QUAD) {\n    return {\n      error: RangeError(\n        `Minimum piece size is ${EXPANDED_BYTES_PER_QUAD} bytes`\n      ),\n    }\n  }\n\n  if (onesCount64(size) !== 1) {\n    return { error: RangeError('Piece size must be a power of 2') }\n  }\n\n  return { ok: size }\n}\n\n/**\n * Validates that given `size` is a valid {@link API.PieceSize} and\n * returns {@link API.PieceSize} capturing the validation at the type\n * level. If given `size` is not a valid `PaddedPieceSize` throws an error.\n *\n * This function is a variation on {@link validate} that throws exceptions\n * instead of returning a {@link API.Result}.\n *\n * @param {number|API.uint64} size\n */\nexport const from = (size) => {\n  const result = tryFrom(size)\n  if (result.error) {\n    throw result.error\n  } else {\n    return result.ok\n  }\n}\n\n/**\n * Calculates the {@link API.PieceSize} for the given height of the piece tree.\n *\n * @param {number} height\n * @returns {API.PieceSize}\n */\nexport const fromHeight = (height) => fromWidth(2n ** BigInt(height))\n\n/**\n * Calculates the height of the piece tree from unpadded size.\n *\n * @param {API.PieceSize} size\n */\nexport const toHeight = (size) => log2Ceil(toWidth(size))\n\n/**\n * Takes piece tree width (leaf count) and returns corresponding\n * {@link API.PieceSize}.\n *\n * @param {API.uint64} width\n * @returns {API.PieceSize}\n */\nexport const fromWidth = (width) => width * EXPANDED_BYTES_PER_NODE\n\n/**\n * Takes `{@link API.PaddedPieceSize}` and returns corresponding\n * piece tree width (leaf count).\n *\n * @param {API.PieceSize} size\n */\nexport const toWidth = (size) => size / EXPANDED_BYTES_PER_NODE\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AAIA;AAEA;AACA;;;;;;AAYO,MAAM,UAAU,CAAC;IACtB,MAAM,OAAO,OAAO;IACpB,IAAI,OAAO,qMAAuB,EAAE;QAClC,OAAO;YACL,OAAO,WACL,CAAC,sBAAsB,EAAE,qMAAuB,CAAC,MAAM,CAAC;QAE5D;IACF;IAEA,IAAI,IAAA,uLAAW,EAAC,UAAU,GAAG;QAC3B,OAAO;YAAE,OAAO,WAAW;QAAmC;IAChE;IAEA,OAAO;QAAE,IAAI;IAAK;AACpB;AAYO,MAAM,OAAO,CAAC;IACnB,MAAM,SAAS,QAAQ;IACvB,IAAI,OAAO,KAAK,EAAE;QAChB,MAAM,OAAO,KAAK;IACpB,OAAO;QACL,OAAO,OAAO,EAAE;IAClB;AACF;AAQO,MAAM,aAAa,CAAC,SAAW,UAAU,EAAE,IAAI,OAAO;AAOtD,MAAM,WAAW,CAAC,OAAS,IAAA,oLAAQ,EAAC,QAAQ;AAS5C,MAAM,YAAY,CAAC,QAAU,QAAQ,qMAAuB;AAQ5D,MAAM,UAAU,CAAC,OAAS,OAAO,qMAAuB","ignoreList":[0]}},
    {"offset": {"line": 19638, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/piece/size.js"],"sourcesContent":["export * as Unpadded from './size/unpadded.js'\nexport * as Padded from './size/padded.js'\nexport * as Expanded from './size/expanded.js'\nexport * from './size/expanded.js'\n"],"names":[],"mappings":";AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 19659, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/digest.js"],"sourcesContent":["import { varint } from 'multiformats'\nimport * as API from './api.js'\nimport {\n  IN_BYTES_PER_QUAD,\n  IN_BITS_FR,\n  OUT_BITS_FR,\n  MIN_PAYLOAD_SIZE,\n} from './constant.js'\nimport { SHA256 } from './ipld.js'\nimport { fromHeight as piceSizeFromHeight } from './piece/size/expanded.js'\n\n/**\n * @see https://github.com/multiformats/multicodec/pull/331/files\n */\nexport const name = /** @type {const} */ (\n  'fr32-sha2-256-trunc254-padded-binary-tree'\n)\n\n/**\n * @type {API.MulticodecCode<0x1011, typeof name>}\n * @see https://github.com/multiformats/multicodec/pull/331/files\n */\nexport const code = 0x1011\n\n/**\n * Varint is used to encode the tree height which is limited to 9 bytes.\n *\n * @see https://github.com/multiformats/unsigned-varint#practical-maximum-of-9-bytes-for-security\n */\nconst MAX_PADDING_SIZE = 9\n/**\n * One byte is used to store the tree height.\n */\nexport const HEIGHT_SIZE = 1\n\n/**\n * Amount of bytes used to store the tree root.\n */\nexport const ROOT_SIZE = SHA256.size\n\n/**\n * Size of the multihash digest in bytes.\n */\nexport const MAX_DIGEST_SIZE = MAX_PADDING_SIZE + HEIGHT_SIZE + SHA256.size\n\nexport const TAG_SIZE = varint.encodingLength(code)\n\n/**\n * Max size of the multihash in bytes\n */\nexport const MAX_SIZE =\n  TAG_SIZE + varint.encodingLength(MAX_DIGEST_SIZE) + MAX_DIGEST_SIZE\n\n/**\n * Since first byte in the digest is the tree height, the maximum height is 255.\n *\n * @type {255}\n */\nexport const MAX_HEIGHT = 255\n\n/**\n * Max payload is determined by the maximum height of the tree, which is limited\n * by the int we could store in one byte. We calculate the max piece size\n * and derive max payload size that can would produce it after FR32 padding.\n */\nexport const MAX_PAYLOAD_SIZE =\n  (piceSizeFromHeight(MAX_HEIGHT) * BigInt(IN_BITS_FR)) / BigInt(OUT_BITS_FR)\n\n/**\n * @param {API.Piece} piece\n * @returns {API.PieceDigest}\n */\nexport const fromPiece = ({ padding, height, root }) => {\n  const paddingLength = varint.encodingLength(Number(padding))\n  const size = paddingLength + HEIGHT_SIZE + ROOT_SIZE\n  const sizeLength = varint.encodingLength(size)\n\n  const multihashLength = TAG_SIZE + sizeLength + size\n\n  let offset = 0\n  const bytes = new Uint8Array(multihashLength)\n  varint.encodeTo(code, bytes, offset)\n  offset += TAG_SIZE\n\n  varint.encodeTo(size, bytes, offset)\n  offset += sizeLength\n\n  varint.encodeTo(Number(padding), bytes, offset)\n  offset += paddingLength\n\n  bytes[offset] = height\n  offset += HEIGHT_SIZE\n\n  bytes.set(root, offset)\n\n  return new Digest(bytes)\n}\n\n/**\n * @param {Uint8Array} bytes\n * @returns {API.PieceDigest}\n */\nexport const fromBytes = (bytes) => new Digest(bytes)\n\n/**\n * @param {object} input\n * @param {Uint8Array} input.digest\n */\nexport const toBytes = ({ digest }) => {\n  const SIZE_BYTE_LENGTH = varint.encodingLength(digest.length)\n\n  // number of bytes prefix will take up\n  const prefixByteLength = SIZE_BYTE_LENGTH + TAG_SIZE\n\n  // if digest is view within a buffer that has enough bytes in front to\n  // fit the prefix it may be already include a prefix in which case we\n  // will simply use a larger slice.\n  if (digest.byteOffset >= prefixByteLength) {\n    const bytes = new Uint8Array(\n      digest.buffer,\n      digest.byteOffset - prefixByteLength,\n      digest.byteOffset + digest.length\n    )\n\n    // if the prefix matches our bytes represent a multihash\n    const [tag, offset] = varint.decode(bytes)\n    if (tag === code && varint.decode(bytes, offset)[0] === digest.length) {\n      return bytes\n    }\n  }\n\n  const bytes = new Uint8Array(digest.length + prefixByteLength)\n  varint.encodeTo(code, bytes)\n  varint.encodeTo(digest.length, bytes, TAG_SIZE)\n  bytes.set(digest, prefixByteLength)\n\n  return bytes\n}\n\n/**\n * @param {object} input\n * @param {Uint8Array} input.digest\n */\nexport const height = ({ digest }) => {\n  const [, offset] = varint.decode(digest)\n  return digest[offset]\n}\n\n/**\n * @param {object} input\n * @param {Uint8Array} input.digest\n */\nexport const padding = ({ digest }) => {\n  const [padding] = varint.decode(digest)\n  return BigInt(padding)\n}\n\n/**\n * @param {object} input\n * @param {Uint8Array} input.digest\n */\nexport const root = ({ digest }) => {\n  const [, offset] = varint.decode(digest)\n  return digest.subarray(\n    offset + HEIGHT_SIZE,\n    offset + HEIGHT_SIZE + SHA256.size\n  )\n}\n\n/**\n * @implements {API.PieceDigest}\n */\nclass Digest {\n  /**\n   * @param {Uint8Array} bytes\n   */\n  constructor(bytes) {\n    this.bytes = bytes\n    const [tag] = varint.decode(bytes)\n    if (tag !== code) {\n      throw new RangeError(`Expected multihash with code ${code}`)\n    }\n\n    let offset = TAG_SIZE\n    const [size, length] = varint.decode(bytes, offset)\n    offset += length\n    const digest = bytes.subarray(offset)\n\n    if (digest.length !== size) {\n      throw new RangeError(\n        `Invalid multihash size expected ${offset + size} bytes, got ${\n          bytes.length\n        } bytes`\n      )\n    }\n\n    this.digest = digest\n  }\n  get name() {\n    return name\n  }\n  get code() {\n    return code\n  }\n  get size() {\n    return this.digest.length\n  }\n  get padding() {\n    return padding(this)\n  }\n  get height() {\n    return height(this)\n  }\n  get root() {\n    return root(this)\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 19812, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40web3-storage/data-segment/src/multihash.js"],"sourcesContent":["import * as API from './api.js'\nimport {\n  IN_BYTES_PER_QUAD,\n  IN_BITS_FR,\n  OUT_BITS_FR,\n  MIN_PAYLOAD_SIZE,\n} from './constant.js'\nimport * as ZeroPad from './zero-comm.js'\nimport { computeNode } from './proof.js'\nimport { split } from './piece/tree.js'\nimport { pad } from './fr32.js'\nimport { fromHeight as piceSizeFromHeight } from './piece/size/expanded.js'\nimport { Unpadded } from './piece/size.js'\nimport * as Digest from './digest.js'\nimport { varint } from 'multiformats'\n\nexport { Digest }\n\n/**\n * @see https://github.com/multiformats/multicodec/pull/331/files\n */\nexport const name = /** @type {const} */ (\n  'fr32-sha2-256-trunc254-padded-binary-tree'\n)\n\n/**\n * @type {API.MulticodecCode<0x1011, typeof name>}\n * @see https://github.com/multiformats/multicodec/pull/331/files\n */\nexport const code = 0x1011\n\n/**\n * Since first byte in the digest is the tree height, the maximum height is 255.\n *\n * @type {255}\n */\nexport const MAX_HEIGHT = 255\n\n/**\n * Max payload is determined by the maximum height of the tree, which is limited\n * by the int we could store in one byte. We calculate the max piece size\n * and derive max payload size that can would produce it after FR32 padding.\n */\nexport const MAX_PAYLOAD_SIZE =\n  (piceSizeFromHeight(MAX_HEIGHT) * BigInt(IN_BITS_FR)) / BigInt(OUT_BITS_FR)\n\n/**\n * Computes the digest of the given payload.\n *\n * @param {Uint8Array} payload\n * @returns {API.PieceDigest}\n */\nexport const digest = (payload) => {\n  const hasher = new Hasher()\n  hasher.write(payload)\n  return hasher.digest()\n}\n\n/**\n * Creates a streaming hasher that can be used to consumer larger streams\n * of data than it would be practical to load into memory all at once.\n *\n * @returns {API.StreamingHasher<typeof code, number, API.PieceDigest>}\n */\nexport const create = () => new Hasher()\n\n/**\n * @typedef {[API.MerkleTreeNode[], ...API.MerkleTreeNode[][]]} Layers\n *\n * @implements {API.StreamingHasher<typeof code, number, API.PieceDigest>}\n */\nclass Hasher {\n  constructor() {\n    /**\n     * The number of bytes consumed by the hasher.\n     *\n     * @private\n     */\n    this.bytesWritten = 0n\n\n    /**\n     * This buffer is used to accumulate bytes until we have enough to fill a\n     * quad.\n     *\n     *  Note that you should never read bytes past {@link offset} as those\n     * are considered dirty and may contain garbage.\n     *\n     * @protected\n     */\n    this.buffer = new Uint8Array(IN_BYTES_PER_QUAD)\n\n    /**\n     * Offset is the number of bytes in we have written into the buffer. If\n     * offset is 0 it means that the buffer is effectively empty. When `offset`\n     * is equal to `this.buffer.length` we have a quad that can be processed.\n     *\n     * @protected\n     */\n    this.offset = 0\n\n    /**\n     * The layers of the tree. Each layer will contain either 0 or 1 nodes\n     * between writes. When we write into a hasher, if we have enough nodes\n     * leaves will be created and pushed into the `layers[0]` array, after\n     * which we flush and combine every two leafs into a node which is moved\n     * to the next layer. This process is repeated until we reach the top\n     * layer, leaving each layer either empty or with a single node.\n     *\n     * @type {Layers}\n     */\n    this.layers = [[]]\n  }\n\n  /**\n   * Return the total number of bytes written into the hasher. Calling\n   * {@link reset} will reset the hasher and the count will be reset to 0.\n   *\n   * @returns {bigint}\n   */\n  count() {\n    return this.bytesWritten\n  }\n\n  /**\n   * Computes the digest of all the data that has been written into this hasher.\n   * This method does not have side-effects, meaning that you can continue\n   * writing and call this method again to compute digest of all the data\n   * written from the very beginning.\n   */\n  digest() {\n    const bytes = new Uint8Array(Digest.MAX_SIZE)\n    const count = this.digestInto(bytes, 0, true)\n    return Digest.fromBytes(bytes.subarray(0, count))\n  }\n\n  /**\n   * Computes the digest and writes into the given buffer. You can provide\n   * optional `byteOffset` to write digest at that offset in the buffer. By\n   * default the multihash prefix will be written into the buffer, but you can\n   * opt-out by passing `false` as the `asMultihash` argument.\n   *\n   * @param {Uint8Array} output\n   * @param {number} [byteOffset]\n   * @param {boolean} asMultihash\n   */\n  digestInto(output, byteOffset = 0, asMultihash = true) {\n    const { buffer, layers, offset, bytesWritten } = this\n\n    // We do not want to mutate the layers, so we create a shallow copy of it\n    // which we will use to compute the root.\n    let [leaves, ...nodes] = layers\n\n    // If we have some bytes in the buffer we fill rest with zeros and compute\n    // leaves from it. Note that it is safe to mutate the buffer here as bytes\n    // past `offset` are considered dirty and should not be read.\n    if (offset > 0 || bytesWritten === 0n) {\n      leaves = [...leaves, ...split(pad(buffer.fill(0, offset)))]\n    }\n\n    const tree = build([leaves, ...nodes])\n    const height = tree.length - 1\n    const [root] = tree[height]\n    const padding = Number(Unpadded.toPadding(this.bytesWritten))\n\n    const paddingLength = varint.encodingLength(\n      /** @type {number & bigint} */ (padding)\n    )\n\n    let endOffset = byteOffset\n    // Write the multihash prefix if requested\n    if (asMultihash) {\n      varint.encodeTo(code, output, endOffset)\n      endOffset += Digest.TAG_SIZE\n\n      const size = paddingLength + Digest.HEIGHT_SIZE + Digest.ROOT_SIZE\n      const sizeLength = varint.encodingLength(size)\n      varint.encodeTo(size, output, endOffset)\n      endOffset += sizeLength\n    }\n\n    varint.encodeTo(padding, output, endOffset)\n    endOffset += paddingLength\n\n    // Write the tree height as the first byte of the digest\n    output[endOffset] = height\n    endOffset += 1\n\n    // Write the root as the remaining 32 bytes of the digest\n    output.set(root, endOffset)\n    endOffset += root.length\n\n    // Return number of bytes written\n    return endOffset - byteOffset\n  }\n  /**\n   * @param {Uint8Array} bytes\n   */\n  write(bytes) {\n    const { buffer, offset, layers } = this\n    const leaves = layers[0]\n    const { length } = bytes\n    // If we got no bytes there is nothing to do here\n    if (length === 0) {\n      return this\n      /* c8 ignore next 5 */\n    } else if (this.bytesWritten + BigInt(length) > MAX_PAYLOAD_SIZE) {\n      throw new RangeError(\n        `Writing ${length} bytes exceeds max payload size of ${MAX_PAYLOAD_SIZE}`\n      )\n    }\n    // If we do not have enough bytes to form a quad, just add append new bytes\n    // to the buffer and return.\n    else if (offset + length < buffer.length) {\n      buffer.set(bytes, offset)\n      this.offset += length\n      this.bytesWritten += BigInt(length)\n      return this\n    }\n    // Otherwise we first fill the buffer to form a quad and create some leaves.\n    // Then we slice remaining bytes into quads sized chunks and create leaves\n    // from them. If we have some bytes left we copy them into the buffer and\n    // flush to combining node pairs and propagate them up the tree.\n    else {\n      // Number of bytes required to fill the quad buffer\n      const bytesRequired = buffer.length - offset\n      // copy required bytes into the buffer and turn them into leaves\n      // which we push into the leaf layer.\n      buffer.set(bytes.subarray(0, bytesRequired), offset)\n      leaves.push(...split(pad(buffer)))\n\n      // Now we slice remaining bytes into quads, create leaves from them\n      // and push them into the leaf layer.\n      let readOffset = bytesRequired\n      while (readOffset + IN_BYTES_PER_QUAD < length) {\n        const quad = bytes.subarray(readOffset, readOffset + IN_BYTES_PER_QUAD)\n        leaves.push(...split(pad(quad)))\n        readOffset += IN_BYTES_PER_QUAD\n      }\n\n      // Whatever byte were left are copied into the buffer and we update\n      // the offset to reflect that.\n      this.buffer.set(bytes.subarray(readOffset), 0)\n      this.offset = length - readOffset\n\n      // We also update the total number of bytes written.\n      this.bytesWritten += BigInt(length)\n\n      // Now prune the layers to propagate all the new leaves up the tree.\n      prune(this.layers)\n\n      return this\n    }\n  }\n\n  /**\n   * Resets this hasher to its initial state so it could be recycled as new\n   * instance.\n   */\n  reset() {\n    this.offset = 0\n    this.bytesWritten = 0n\n    this.layers.length = 1\n    this.layers[0].length = 0\n    return this\n  }\n\n  /* c8 ignore next 3 */\n  dispose() {\n    this.reset()\n  }\n  get code() {\n    return code\n  }\n  get name() {\n    return name\n  }\n}\n\n/**\n * Prunes layers by combining node pairs into nodes in the next layer and\n * removing them from the layer that they were in. After pruning each layer\n * will end up with at most one node. New layers may be created in the process\n * when nodes from the top layer are combined.\n *\n * @param {Layers} layers\n */\nconst prune = (layers) => flush(layers, false)\n\n/**\n * Flushes all the nodes in layers by combining node pairs into nodes in the\n * next layer. Layers with only one node are combined with zero padded nodes\n * (corresponding to the level of the layer). Unlike {@link prune} combined\n * nodes are not removed and layers are copied instead of been mutated.\n *\n * @param {Layers} layers\n */\nconst build = (layers) => flush([...layers], true)\n\n/**\n * @param {Layers} layers\n * @param {boolean} build\n * @returns {Layers}\n */\nconst flush = (layers, build) => {\n  // Note it is important that we do not mutate any of the layers otherwise\n  // writing more data into the hasher and computing the digest will produce\n  // wrong results.\n  let level = 0\n  // We will walk up the tree until we reach the top layer. However, we may end\n  // up with creating new layers in the process, so we will keep track of the\n  while (level < layers.length) {\n    let next = layers[level + 1]\n    const layer = layers[level]\n\n    // If we have the odd number of nodes and we have not reached the top\n    // layer, we push a zero padding node corresponding to the current level.\n    if (build && layer.length % 2 > 0 && next) {\n      layer.push(ZeroPad.fromLevel(level))\n    }\n\n    level += 1\n\n    // If we have 0 nodes in the current layer we just move to the next one.\n\n    // If we have a next layer and we are building  will combine nodes from the current layer\n    next = next ? (build ? [...next] : next) : []\n    let index = 0\n    // Note that we have checked that we have an even number of nodes so\n    // we will never end up with an extra node when consuming two at a time.\n    while (index + 1 < layer.length) {\n      const node = computeNode(layer[index], layer[index + 1])\n\n      // we proactively delete nodes in order to free up a memory used.\n      delete layer[index]\n      delete layer[index + 1]\n\n      next.push(node)\n      index += 2\n    }\n\n    if (next.length) {\n      layers[level] = next\n    }\n\n    // we remove nodes that we have combined from the current layer to reduce\n    // memory overhead and move to the next layer.\n    layer.splice(0, index)\n  }\n\n  return layers\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 20120, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/sync-multihash-sha2/src/sha256/digest.js"],"sourcesContent":["export const name = 'sha2-256'\nexport const code = 0x12\nexport const size = 32\n\nexport const prefix = new Uint8Array([18, 32])\n\nexport class Digest {\n  /**\n   * @param {Uint8Array} bytes\n   */\n  constructor(bytes) {\n    /** @type {typeof code} */\n    this.code = code\n    /** @type {typeof name} */\n    this.name = name\n    this.bytes = bytes\n    /** @type {typeof size} */\n    this.size = size\n    this.digest = bytes.subarray(2)\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,MAAM,OAAO;AACb,MAAM,OAAO;AACb,MAAM,OAAO;AAEb,MAAM,SAAS,IAAI,WAAW;IAAC;IAAI;CAAG;AAEtC,MAAM;IACX;;GAEC,GACD,YAAY,KAAK,CAAE;QACjB,wBAAwB,GACxB,IAAI,CAAC,IAAI,GAAG;QACZ,wBAAwB,GACxB,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,KAAK,GAAG;QACb,wBAAwB,GACxB,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,MAAM,GAAG,MAAM,QAAQ,CAAC;IAC/B;AACF","ignoreList":[0]}},
    {"offset": {"line": 20154, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/sync-multihash-sha2/src/sha256/web.js"],"sourcesContent":["/* c8 ignore next */\nimport { sha256 } from '@noble/hashes/sha256'\nimport { name, size, code, prefix, Digest } from './digest.js'\nexport { name, size, code }\n\n/**\n * @param {Uint8Array} payload\n * @returns {import('multiformats').MultihashDigest<typeof code>}\n */\nexport const digest = (payload) => {\n  const digest = new Uint8Array(prefix.length + size)\n  digest.set(prefix, 0)\n  digest.set(sha256(payload), prefix.length)\n\n  return new Digest(digest)\n}\n"],"names":[],"mappings":"AAAA,kBAAkB;;;;AAClB;AACA;;;;AAOO,MAAM,SAAS,CAAC;IACrB,MAAM,SAAS,IAAI,WAAW,iLAAM,CAAC,MAAM,GAAG,+KAAI;IAClD,OAAO,GAAG,CAAC,iLAAM,EAAE;IACnB,OAAO,GAAG,CAAC,IAAA,+JAAM,EAAC,UAAU,iLAAM,CAAC,MAAM;IAEzC,OAAO,IAAI,iLAAM,CAAC;AACpB","ignoreList":[0]}},
    {"offset": {"line": 20189, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/filecoin-client/dist/service.js"],"sourcesContent":["import * as DID from '@ipld/dag-ucan/did';\n/**\n * @typedef {import('./types.js').SERVICE} Service\n * @typedef {import('./types.js').ServiceConfig} ServiceConfig\n */\n/**\n * @type {Record<Service, ServiceConfig>}\n */\nexport const services = {\n    STOREFRONT: {\n        url: new URL('https://up.storacha.network'),\n        principal: DID.parse('did:web:up.storacha.network'),\n    },\n    AGGREGATOR: {\n        url: new URL('https://aggregator.web3.storage'),\n        principal: DID.parse('did:web:web3.storage'),\n    },\n    DEALER: {\n        url: new URL('https://dealer.web3.storage'),\n        principal: DID.parse('did:web:web3.storage'),\n    },\n    DEAL_TRACKER: {\n        url: new URL('https://tracker.web3.storage'),\n        principal: DID.parse('did:web:web3.storage'),\n    },\n};\n//# sourceMappingURL=service.js.map"],"names":[],"mappings":";;;;AAAA;;AAQO,MAAM,WAAW;IACpB,YAAY;QACR,KAAK,IAAI,IAAI;QACb,WAAW,+JAAS,CAAC;IACzB;IACA,YAAY;QACR,KAAK,IAAI,IAAI;QACb,WAAW,+JAAS,CAAC;IACzB;IACA,QAAQ;QACJ,KAAK,IAAI,IAAI;QACb,WAAW,+JAAS,CAAC;IACzB;IACA,cAAc;QACV,KAAK,IAAI,IAAI;QACb,WAAW,+JAAS,CAAC;IACzB;AACJ,GACA,mCAAmC","ignoreList":[0]}},
    {"offset": {"line": 20217, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/filecoin-client/dist/storefront.js"],"sourcesContent":["import { connect } from '@ucanto/client';\nimport { CAR, HTTP } from '@ucanto/transport';\nimport * as Storefront from '@storacha/capabilities/filecoin/storefront';\nimport { services } from './service.js';\n/**\n * @typedef {import('./types.js').StorefrontService} StorefrontService\n * @typedef {import('@ucanto/interface').ConnectionView<StorefrontService>} ConnectionView\n */\n/** @type {ConnectionView} */\nexport const connection = connect({\n    id: services.STOREFRONT.principal,\n    codec: CAR.outbound,\n    channel: HTTP.open({\n        url: services.STOREFRONT.url,\n        method: 'POST',\n    }),\n});\n/**\n * The `filecoin/offer` task can be executed to request storing a content piece\n * in Filecoin. It issues a signed receipt of the execution result.\n *\n * A receipt for successful execution will contain an effect, linking to a\n * `filecoin/submit` task that will complete asynchronously.\n *\n * Otherwise the task is failed and the receipt will contain details of the\n * reason behind the failure.\n *\n * @see https://github.com/storacha/specs/blob/main/w3-filecoin.md#filecoinoffer\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('multiformats').UnknownLink} content\n * @param {import('@web3-storage/data-segment').PieceLink} piece\n * @param {import('./types.js').RequestOptions<StorefrontService>} [options]\n */\nexport async function filecoinOffer({ issuer, with: resource, proofs, audience }, content, piece, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const invocation = Storefront.filecoinOffer.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.STOREFRONT.principal,\n        with: resource,\n        nb: {\n            content,\n            piece,\n        },\n        proofs,\n        expiration: Infinity,\n    });\n    return await invocation.execute(conn);\n}\n/**\n * The `filecoin/submit` task is an _effect_ linked from successful execution\n * of a `filecoin/offer` task, it is executed to issue a receipt for the\n * success or failure of the task.\n *\n * A receipt for successful execution indicates that the offered piece has been\n * submitted to the pipeline. In this case the receipt will contain an effect,\n * linking to a `piece/offer` task that will complete asynchronously.\n *\n * Otherwise the task is failed and the receipt will contain details of the\n * reason behind the failure.\n *\n * @see https://github.com/storacha/specs/blob/main/w3-filecoin.md#filecoinsubmit\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('multiformats').UnknownLink} content\n * @param {import('@web3-storage/data-segment').PieceLink} piece\n * @param {import('./types.js').RequestOptions<StorefrontService>} [options]\n */\nexport async function filecoinSubmit({ issuer, with: resource, proofs, audience }, content, piece, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const invocation = Storefront.filecoinSubmit.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.STOREFRONT.principal,\n        with: resource,\n        nb: {\n            content,\n            piece,\n        },\n        proofs,\n        expiration: Infinity,\n    });\n    return await invocation.execute(conn);\n}\n/**\n * The `filecoin/accept` task is an _effect_ linked from successful execution\n * of a `filecoin/offer` task, it is executed to issue a receipt for the\n * success or failure of the task.\n *\n * A receipt for successful execution indicates that the offered piece has been\n * accepted in a Filecoin deal. In this case the receipt will contain proofs\n * that the piece was included in an aggregate and deal.\n *\n * Otherwise the task is failed and the receipt will contain details of the\n * reason behind the failure.\n *\n * @see https://github.com/storacha/specs/blob/main/w3-filecoin.md#filecoinaccept\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('multiformats').UnknownLink} content\n * @param {import('@web3-storage/data-segment').PieceLink} piece\n * @param {import('./types.js').RequestOptions<StorefrontService>} [options]\n */\nexport async function filecoinAccept({ issuer, with: resource, proofs, audience }, content, piece, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const invocation = Storefront.filecoinAccept.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.STOREFRONT.principal,\n        with: resource,\n        nb: {\n            content,\n            piece,\n        },\n        proofs,\n        expiration: Infinity,\n    });\n    return await invocation.execute(conn);\n}\n/**\n * The `filecoin/info` task can be executed to request info about a content piece\n * in Filecoin. It issues a signed receipt of the execution result.\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('@web3-storage/data-segment').PieceLink} piece\n * @param {import('./types.js').RequestOptions<StorefrontService>} [options]\n */\nexport async function filecoinInfo({ issuer, with: resource, proofs, audience }, piece, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const invocation = Storefront.filecoinInfo.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.STOREFRONT.principal,\n        with: resource,\n        nb: {\n            piece,\n        },\n        proofs,\n    });\n    return await invocation.execute(conn);\n}\n//# sourceMappingURL=storefront.js.map"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;AAMO,MAAM,aAAa,IAAA,qKAAO,EAAC;IAC9B,IAAI,kLAAQ,CAAC,UAAU,CAAC,SAAS;IACjC,OAAO,4LAAG,CAAC,QAAQ;IACnB,SAAS,+LAAI,CAAC,IAAI,CAAC;QACf,KAAK,kLAAQ,CAAC,UAAU,CAAC,GAAG;QAC5B,QAAQ;IACZ;AACJ;AAkBO,eAAe,cAAc,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;IAC1G,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,aAAa,gMAAwB,CAAC,MAAM,CAAC;QAC/C;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,UAAU,CAAC,SAAS;QACnD,MAAM;QACN,IAAI;YACA;YACA;QACJ;QACA;QACA,YAAY;IAChB;IACA,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC;AAoBO,eAAe,eAAe,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;IAC3G,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,aAAa,iMAAyB,CAAC,MAAM,CAAC;QAChD;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,UAAU,CAAC,SAAS;QACnD,MAAM;QACN,IAAI;YACA;YACA;QACJ;QACA;QACA,YAAY;IAChB;IACA,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC;AAoBO,eAAe,eAAe,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;IAC3G,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,aAAa,iMAAyB,CAAC,MAAM,CAAC;QAChD;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,UAAU,CAAC,SAAS;QACnD,MAAM;QACN,IAAI;YACA;YACA;QACJ;QACA;QACA,YAAY;IAChB;IACA,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC;AASO,eAAe,aAAa,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;IAChG,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,aAAa,+LAAuB,CAAC,MAAM,CAAC;QAC9C;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,UAAU,CAAC,SAAS;QACnD,MAAM;QACN,IAAI;YACA;QACJ;QACA;IACJ;IACA,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC,EACA,sCAAsC","ignoreList":[0]}},
    {"offset": {"line": 20310, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/filecoin-client/dist/aggregator.js"],"sourcesContent":["import { connect } from '@ucanto/client';\nimport { CAR, HTTP } from '@ucanto/transport';\nimport * as Aggregator from '@storacha/capabilities/filecoin/aggregator';\nimport { services } from './service.js';\n/**\n * @typedef {import('./types.js').AggregatorService} AggregatorService\n * @typedef {import('@ucanto/interface').ConnectionView<AggregatorService>} ConnectionView\n */\n/** @type {ConnectionView} */\nexport const connection = connect({\n    id: services.AGGREGATOR.principal,\n    codec: CAR.outbound,\n    channel: HTTP.open({\n        url: services.AGGREGATOR.url,\n        method: 'POST',\n    }),\n});\n/**\n * The `piece/offer` task can be executed to request that a piece be aggregated\n * for inclusion in an upcoming an Filecoin deal. It issues a signed receipt\n * of the execution result. It is _also_ an effect linked from successful\n * execution of a `filecoin/submit` task.\n *\n * A receipt for successful execution will contain an effect, linking to a\n * `piece/accept` task that will complete asynchronously.\n *\n * Otherwise the task is failed and the receipt will contain details of the\n * reason behind the failure.\n *\n * @see https://github.com/storacha/specs/blob/main/w3-filecoin.md#pieceoffer\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('@web3-storage/data-segment').PieceLink} piece\n * @param {string} group\n * @param {import('./types.js').RequestOptions<AggregatorService>} [options]\n */\nexport async function pieceOffer({ issuer, with: resource, proofs, audience }, piece, group, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const invocation = Aggregator.pieceOffer.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.AGGREGATOR.principal,\n        with: resource,\n        nb: {\n            piece,\n            group,\n        },\n        proofs,\n        expiration: Infinity,\n    });\n    return await invocation.execute(conn);\n}\n/**\n * The `piece/accept` task is an _effect_ linked from successful execution of a\n * `piece/offer` task, it is executed to issue a receipt for the success or\n * failure of the task.\n *\n * A receipt for successful execution indicates that the offered piece was\n * included in an aggregate. In this case the receipt will contain the\n * aggregate piece CID and a proof that the piece was included in the\n * aggregate. It also includes an effect, linking to an `aggregate/offer` task\n * that will complete asynchronously.\n *\n * Otherwise the task is failed and the receipt will contain details of the\n * reason behind the failure.\n *\n * @see https://github.com/storacha/specs/blob/main/w3-filecoin.md#pieceaccept\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('@web3-storage/data-segment').PieceLink} piece\n * @param {string} group\n * @param {import('./types.js').RequestOptions<AggregatorService>} [options]\n */\nexport async function pieceAccept({ issuer, with: resource, proofs, audience }, piece, group, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const invocation = Aggregator.pieceAccept.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.AGGREGATOR.principal,\n        with: resource,\n        nb: {\n            piece,\n            group,\n        },\n        proofs,\n        expiration: Infinity,\n    });\n    return await invocation.execute(conn);\n}\n//# sourceMappingURL=aggregator.js.map"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;AAMO,MAAM,aAAa,IAAA,qKAAO,EAAC;IAC9B,IAAI,kLAAQ,CAAC,UAAU,CAAC,SAAS;IACjC,OAAO,4LAAG,CAAC,QAAQ;IACnB,SAAS,+LAAI,CAAC,IAAI,CAAC;QACf,KAAK,kLAAQ,CAAC,UAAU,CAAC,GAAG;QAC5B,QAAQ;IACZ;AACJ;AAoBO,eAAe,WAAW,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;IACrG,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,aAAa,6LAAqB,CAAC,MAAM,CAAC;QAC5C;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,UAAU,CAAC,SAAS;QACnD,MAAM;QACN,IAAI;YACA;YACA;QACJ;QACA;QACA,YAAY;IAChB;IACA,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC;AAsBO,eAAe,YAAY,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;IACtG,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,aAAa,8LAAsB,CAAC,MAAM,CAAC;QAC7C;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,UAAU,CAAC,SAAS;QACnD,MAAM;QACN,IAAI;YACA;YACA;QACJ;QACA;QACA,YAAY;IAChB;IACA,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC,EACA,sCAAsC","ignoreList":[0]}},
    {"offset": {"line": 20371, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/filecoin-client/dist/dealer.js"],"sourcesContent":["import { connect } from '@ucanto/client';\nimport { CAR, HTTP } from '@ucanto/transport';\nimport { CBOR } from '@ucanto/core';\nimport * as Dealer from '@storacha/capabilities/filecoin/dealer';\nimport { services } from './service.js';\n/**\n * @typedef {import('./types.js').DealerService} DealerService\n * @typedef {import('@ucanto/interface').ConnectionView<DealerService>} ConnectionView\n */\n/** @type {ConnectionView} */\nexport const connection = connect({\n    id: services.DEALER.principal,\n    codec: CAR.outbound,\n    channel: HTTP.open({\n        url: services.DEALER.url,\n        method: 'POST',\n    }),\n});\n/**\n * The `aggregate/offer` task can be executed to request an aggregate be added\n * to a deal with a Storage Provider. It issues a signed receipt of the\n * execution result. It is _also_ an effect linked from successful execution of\n * a `piece/accept` task.\n *\n * A receipt for successful execution will contain an effect, linking to an\n * `aggregate/accept` task that will complete asynchronously.\n *\n * Otherwise the task is failed and the receipt will contain details of the\n * reason behind the failure.\n *\n * @see https://github.com/storacha/specs/blob/main/w3-filecoin.md#aggregateoffer\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('@web3-storage/data-segment').PieceLink} aggregate\n * @param {import('@web3-storage/data-segment').PieceLink[]} pieces\n * @param {import('./types.js').RequestOptions<DealerService>} [options]\n */\nexport async function aggregateOffer({ issuer, with: resource, proofs, audience }, aggregate, pieces, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const block = await CBOR.write(pieces);\n    const invocation = Dealer.aggregateOffer.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.AGGREGATOR.principal,\n        with: resource,\n        nb: {\n            aggregate,\n            pieces: block.cid,\n        },\n        proofs,\n        expiration: Infinity,\n    });\n    invocation.attach(block);\n    return await invocation.execute(conn);\n}\n/**\n * The `aggregate/accept` task is an _effect_ linked from successful execution\n * of a `aggregate/offer` task, it is executed to issue a receipt for the\n * success or failure of the task.\n *\n * A receipt for successful execution indicates that an aggregate has been\n * accepted for inclusion in a Filecoin deal. In this case the receipt will\n * contain proofs that the piece was included in an aggregate and deal.\n *\n * Otherwise the task is failed and the receipt will contain details of the\n * reason behind the failure, as well as multiple effects, linking to\n * `piece/offer` tasks that will retry _valid_ pieces and complete\n * asynchronously.\n *\n * @see https://github.com/storacha/specs/blob/main/w3-filecoin.md#aggregateaccept\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('@web3-storage/data-segment').PieceLink} aggregate\n * @param {import('@ucanto/interface').Link} pieces\n * @param {import('./types.js').RequestOptions<DealerService>} [options]\n */\nexport async function aggregateAccept({ issuer, with: resource, proofs, audience }, aggregate, pieces, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const invocation = Dealer.aggregateAccept.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.AGGREGATOR.principal,\n        with: resource,\n        nb: {\n            aggregate,\n            pieces,\n        },\n        proofs,\n        expiration: Infinity,\n    });\n    return await invocation.execute(conn);\n}\n//# sourceMappingURL=dealer.js.map"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;;;;;;AAMO,MAAM,aAAa,IAAA,qKAAO,EAAC;IAC9B,IAAI,kLAAQ,CAAC,MAAM,CAAC,SAAS;IAC7B,OAAO,4LAAG,CAAC,QAAQ;IACnB,SAAS,+LAAI,CAAC,IAAI,CAAC;QACf,KAAK,kLAAQ,CAAC,MAAM,CAAC,GAAG;QACxB,QAAQ;IACZ;AACJ;AAoBO,eAAe,eAAe,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;IAC9G,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,QAAQ,MAAM,0LAAI,CAAC,KAAK,CAAC;IAC/B,MAAM,aAAa,6LAAqB,CAAC,MAAM,CAAC;QAC5C;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,UAAU,CAAC,SAAS;QACnD,MAAM;QACN,IAAI;YACA;YACA,QAAQ,MAAM,GAAG;QACrB;QACA;QACA,YAAY;IAChB;IACA,WAAW,MAAM,CAAC;IAClB,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC;AAsBO,eAAe,gBAAgB,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;IAC/G,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,aAAa,8LAAsB,CAAC,MAAM,CAAC;QAC7C;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,UAAU,CAAC,SAAS;QACnD,MAAM;QACN,IAAI;YACA;YACA;QACJ;QACA;QACA,YAAY;IAChB;IACA,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC,EACA,kCAAkC","ignoreList":[0]}},
    {"offset": {"line": 20437, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/filecoin-client/dist/deal-tracker.js"],"sourcesContent":["import { connect } from '@ucanto/client';\nimport { CAR, HTTP } from '@ucanto/transport';\nimport * as DealTracker from '@storacha/capabilities/filecoin/deal-tracker';\nimport { services } from './service.js';\n/**\n * @typedef {import('./types.js').DealTrackerService} DealTrackerService\n * @typedef {import('@ucanto/interface').ConnectionView<DealTrackerService>} ConnectionView\n */\n/** @type {ConnectionView} */\nexport const connection = connect({\n    id: services.DEAL_TRACKER.principal,\n    codec: CAR.outbound,\n    channel: HTTP.open({\n        url: services.DEAL_TRACKER.url,\n        method: 'POST',\n    }),\n});\n/**\n * The `deal/info` task can be executed to request deal information for a given\n * piece. It issues a signed receipt of the execution result.\n *\n * A receipt for successful execution will contain details of deals the\n * provided piece CID is currently active in.\n *\n * Otherwise the task is failed and the receipt will contain details of the\n * reason behind the failure.\n *\n * @see https://github.com/storacha/specs/blob/main/w3-filecoin.md#dealinfo\n *\n * @param {import('./types.js').InvocationConfig} conf - Configuration\n * @param {import('@web3-storage/data-segment').PieceLink} piece\n * @param {import('./types.js').RequestOptions<DealTrackerService>} [options]\n */\nexport async function dealInfo({ issuer, with: resource, proofs, audience }, piece, options = {}) {\n    /* c8 ignore next */\n    const conn = options.connection ?? connection;\n    const invocation = DealTracker.dealInfo.invoke({\n        issuer,\n        /* c8 ignore next */\n        audience: audience ?? services.DEAL_TRACKER.principal,\n        with: resource,\n        nb: {\n            piece,\n        },\n        proofs,\n    });\n    return await invocation.execute(conn);\n}\n//# sourceMappingURL=deal-tracker.js.map"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;AAMO,MAAM,aAAa,IAAA,qKAAO,EAAC;IAC9B,IAAI,kLAAQ,CAAC,YAAY,CAAC,SAAS;IACnC,OAAO,4LAAG,CAAC,QAAQ;IACnB,SAAS,+LAAI,CAAC,IAAI,CAAC;QACf,KAAK,kLAAQ,CAAC,YAAY,CAAC,GAAG;QAC9B,QAAQ;IACZ;AACJ;AAiBO,eAAe,SAAS,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;IAC5F,kBAAkB,GAClB,MAAM,OAAO,QAAQ,UAAU,IAAI;IACnC,MAAM,aAAa,gMAAoB,CAAC,MAAM,CAAC;QAC3C;QACA,kBAAkB,GAClB,UAAU,YAAY,kLAAQ,CAAC,YAAY,CAAC,SAAS;QACrD,MAAM;QACN,IAAI;YACA;QACJ;QACA;IACJ;IACA,OAAO,MAAM,WAAW,OAAO,CAAC;AACpC,EACA,wCAAwC","ignoreList":[0]}},
    {"offset": {"line": 20479, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/filecoin-client/dist/index.js"],"sourcesContent":["export * as Storefront from './storefront.js';\nexport * as Aggregator from './aggregator.js';\nexport * as Dealer from './dealer.js';\nexport * as DealTracker from './deal-tracker.js';\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":";AAAA;AACA;AACA;AACA,iTACA,iCAAiC","ignoreList":[0]}},
    {"offset": {"line": 20500, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/retry/lib/retry_operation.js"],"sourcesContent":["function RetryOperation(timeouts, options) {\n  // Compatibility for the old (timeouts, retryForever) signature\n  if (typeof options === 'boolean') {\n    options = { forever: options };\n  }\n\n  this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));\n  this._timeouts = timeouts;\n  this._options = options || {};\n  this._maxRetryTime = options && options.maxRetryTime || Infinity;\n  this._fn = null;\n  this._errors = [];\n  this._attempts = 1;\n  this._operationTimeout = null;\n  this._operationTimeoutCb = null;\n  this._timeout = null;\n  this._operationStart = null;\n  this._timer = null;\n\n  if (this._options.forever) {\n    this._cachedTimeouts = this._timeouts.slice(0);\n  }\n}\nmodule.exports = RetryOperation;\n\nRetryOperation.prototype.reset = function() {\n  this._attempts = 1;\n  this._timeouts = this._originalTimeouts.slice(0);\n}\n\nRetryOperation.prototype.stop = function() {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n  if (this._timer) {\n    clearTimeout(this._timer);\n  }\n\n  this._timeouts       = [];\n  this._cachedTimeouts = null;\n};\n\nRetryOperation.prototype.retry = function(err) {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  if (!err) {\n    return false;\n  }\n  var currentTime = new Date().getTime();\n  if (err && currentTime - this._operationStart >= this._maxRetryTime) {\n    this._errors.push(err);\n    this._errors.unshift(new Error('RetryOperation timeout occurred'));\n    return false;\n  }\n\n  this._errors.push(err);\n\n  var timeout = this._timeouts.shift();\n  if (timeout === undefined) {\n    if (this._cachedTimeouts) {\n      // retry forever, only keep last error\n      this._errors.splice(0, this._errors.length - 1);\n      timeout = this._cachedTimeouts.slice(-1);\n    } else {\n      return false;\n    }\n  }\n\n  var self = this;\n  this._timer = setTimeout(function() {\n    self._attempts++;\n\n    if (self._operationTimeoutCb) {\n      self._timeout = setTimeout(function() {\n        self._operationTimeoutCb(self._attempts);\n      }, self._operationTimeout);\n\n      if (self._options.unref) {\n          self._timeout.unref();\n      }\n    }\n\n    self._fn(self._attempts);\n  }, timeout);\n\n  if (this._options.unref) {\n      this._timer.unref();\n  }\n\n  return true;\n};\n\nRetryOperation.prototype.attempt = function(fn, timeoutOps) {\n  this._fn = fn;\n\n  if (timeoutOps) {\n    if (timeoutOps.timeout) {\n      this._operationTimeout = timeoutOps.timeout;\n    }\n    if (timeoutOps.cb) {\n      this._operationTimeoutCb = timeoutOps.cb;\n    }\n  }\n\n  var self = this;\n  if (this._operationTimeoutCb) {\n    this._timeout = setTimeout(function() {\n      self._operationTimeoutCb();\n    }, self._operationTimeout);\n  }\n\n  this._operationStart = new Date().getTime();\n\n  this._fn(this._attempts);\n};\n\nRetryOperation.prototype.try = function(fn) {\n  console.log('Using RetryOperation.try() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = function(fn) {\n  console.log('Using RetryOperation.start() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = RetryOperation.prototype.try;\n\nRetryOperation.prototype.errors = function() {\n  return this._errors;\n};\n\nRetryOperation.prototype.attempts = function() {\n  return this._attempts;\n};\n\nRetryOperation.prototype.mainError = function() {\n  if (this._errors.length === 0) {\n    return null;\n  }\n\n  var counts = {};\n  var mainError = null;\n  var mainErrorCount = 0;\n\n  for (var i = 0; i < this._errors.length; i++) {\n    var error = this._errors[i];\n    var message = error.message;\n    var count = (counts[message] || 0) + 1;\n\n    counts[message] = count;\n\n    if (count >= mainErrorCount) {\n      mainError = error;\n      mainErrorCount = count;\n    }\n  }\n\n  return mainError;\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 20636, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/retry/lib/retry.js"],"sourcesContent":["var RetryOperation = require('./retry_operation');\n\nexports.operation = function(options) {\n  var timeouts = exports.timeouts(options);\n  return new RetryOperation(timeouts, {\n      forever: options && (options.forever || options.retries === Infinity),\n      unref: options && options.unref,\n      maxRetryTime: options && options.maxRetryTime\n  });\n};\n\nexports.timeouts = function(options) {\n  if (options instanceof Array) {\n    return [].concat(options);\n  }\n\n  var opts = {\n    retries: 10,\n    factor: 2,\n    minTimeout: 1 * 1000,\n    maxTimeout: Infinity,\n    randomize: false\n  };\n  for (var key in options) {\n    opts[key] = options[key];\n  }\n\n  if (opts.minTimeout > opts.maxTimeout) {\n    throw new Error('minTimeout is greater than maxTimeout');\n  }\n\n  var timeouts = [];\n  for (var i = 0; i < opts.retries; i++) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  if (options && options.forever && !timeouts.length) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  // sort the array numerically ascending\n  timeouts.sort(function(a,b) {\n    return a - b;\n  });\n\n  return timeouts;\n};\n\nexports.createTimeout = function(attempt, opts) {\n  var random = (opts.randomize)\n    ? (Math.random() + 1)\n    : 1;\n\n  var timeout = Math.round(random * Math.max(opts.minTimeout, 1) * Math.pow(opts.factor, attempt));\n  timeout = Math.min(timeout, opts.maxTimeout);\n\n  return timeout;\n};\n\nexports.wrap = function(obj, options, methods) {\n  if (options instanceof Array) {\n    methods = options;\n    options = null;\n  }\n\n  if (!methods) {\n    methods = [];\n    for (var key in obj) {\n      if (typeof obj[key] === 'function') {\n        methods.push(key);\n      }\n    }\n  }\n\n  for (var i = 0; i < methods.length; i++) {\n    var method   = methods[i];\n    var original = obj[method];\n\n    obj[method] = function retryWrapper(original) {\n      var op       = exports.operation(options);\n      var args     = Array.prototype.slice.call(arguments, 1);\n      var callback = args.pop();\n\n      args.push(function(err) {\n        if (op.retry(err)) {\n          return;\n        }\n        if (err) {\n          arguments[0] = op.mainError();\n        }\n        callback.apply(this, arguments);\n      });\n\n      op.attempt(function() {\n        original.apply(obj, args);\n      });\n    }.bind(obj, original);\n    obj[method].options = options;\n  }\n};\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,QAAQ,SAAS,GAAG,SAAS,OAAO;IAClC,IAAI,WAAW,QAAQ,QAAQ,CAAC;IAChC,OAAO,IAAI,eAAe,UAAU;QAChC,SAAS,WAAW,CAAC,QAAQ,OAAO,IAAI,QAAQ,OAAO,KAAK,QAAQ;QACpE,OAAO,WAAW,QAAQ,KAAK;QAC/B,cAAc,WAAW,QAAQ,YAAY;IACjD;AACF;AAEA,QAAQ,QAAQ,GAAG,SAAS,OAAO;IACjC,IAAI,mBAAmB,OAAO;QAC5B,OAAO,EAAE,CAAC,MAAM,CAAC;IACnB;IAEA,IAAI,OAAO;QACT,SAAS;QACT,QAAQ;QACR,YAAY,IAAI;QAChB,YAAY;QACZ,WAAW;IACb;IACA,IAAK,IAAI,OAAO,QAAS;QACvB,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI;IAC1B;IAEA,IAAI,KAAK,UAAU,GAAG,KAAK,UAAU,EAAE;QACrC,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,WAAW,EAAE;IACjB,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,OAAO,EAAE,IAAK;QACrC,SAAS,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG;IACtC;IAEA,IAAI,WAAW,QAAQ,OAAO,IAAI,CAAC,SAAS,MAAM,EAAE;QAClD,SAAS,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG;IACtC;IAEA,uCAAuC;IACvC,SAAS,IAAI,CAAC,SAAS,CAAC,EAAC,CAAC;QACxB,OAAO,IAAI;IACb;IAEA,OAAO;AACT;AAEA,QAAQ,aAAa,GAAG,SAAS,OAAO,EAAE,IAAI;IAC5C,IAAI,SAAS,AAAC,KAAK,SAAS,GACvB,KAAK,MAAM,KAAK,IACjB;IAEJ,IAAI,UAAU,KAAK,KAAK,CAAC,SAAS,KAAK,GAAG,CAAC,KAAK,UAAU,EAAE,KAAK,KAAK,GAAG,CAAC,KAAK,MAAM,EAAE;IACvF,UAAU,KAAK,GAAG,CAAC,SAAS,KAAK,UAAU;IAE3C,OAAO;AACT;AAEA,QAAQ,IAAI,GAAG,SAAS,GAAG,EAAE,OAAO,EAAE,OAAO;IAC3C,IAAI,mBAAmB,OAAO;QAC5B,UAAU;QACV,UAAU;IACZ;IAEA,IAAI,CAAC,SAAS;QACZ,UAAU,EAAE;QACZ,IAAK,IAAI,OAAO,IAAK;YACnB,IAAI,OAAO,GAAG,CAAC,IAAI,KAAK,YAAY;gBAClC,QAAQ,IAAI,CAAC;YACf;QACF;IACF;IAEA,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;QACvC,IAAI,SAAW,OAAO,CAAC,EAAE;QACzB,IAAI,WAAW,GAAG,CAAC,OAAO;QAE1B,GAAG,CAAC,OAAO,GAAG,CAAA,SAAS,aAAa,QAAQ;YAC1C,IAAI,KAAW,QAAQ,SAAS,CAAC;YACjC,IAAI,OAAW,MAAM,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW;YACrD,IAAI,WAAW,KAAK,GAAG;YAEvB,KAAK,IAAI,CAAC,SAAS,GAAG;gBACpB,IAAI,GAAG,KAAK,CAAC,MAAM;oBACjB;gBACF;gBACA,IAAI,KAAK;oBACP,SAAS,CAAC,EAAE,GAAG,GAAG,SAAS;gBAC7B;gBACA,SAAS,KAAK,CAAC,IAAI,EAAE;YACvB;YAEA,GAAG,OAAO,CAAC;gBACT,SAAS,KAAK,CAAC,KAAK;YACtB;QACF,CAAA,EAAE,IAAI,CAAC,KAAK;QACZ,GAAG,CAAC,OAAO,CAAC,OAAO,GAAG;IACxB;AACF","ignoreList":[0]}},
    {"offset": {"line": 20720, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/retry/index.js"],"sourcesContent":["module.exports = require('./lib/retry');"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 20725, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/p-retry/index.js"],"sourcesContent":["import retry from 'retry';\n\nconst networkErrorMsgs = new Set([\n\t'Failed to fetch', // Chrome\n\t'NetworkError when attempting to fetch resource.', // Firefox\n\t'The Internet connection appears to be offline.', // Safari\n\t'Network request failed', // `cross-fetch`\n\t'fetch failed', // Undici (Node.js)\n]);\n\nexport class AbortError extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\n\t\tif (message instanceof Error) {\n\t\t\tthis.originalError = message;\n\t\t\t({message} = message);\n\t\t} else {\n\t\t\tthis.originalError = new Error(message);\n\t\t\tthis.originalError.stack = this.stack;\n\t\t}\n\n\t\tthis.name = 'AbortError';\n\t\tthis.message = message;\n\t}\n}\n\nconst decorateErrorWithCounts = (error, attemptNumber, options) => {\n\t// Minus 1 from attemptNumber because the first attempt does not count as a retry\n\tconst retriesLeft = options.retries - (attemptNumber - 1);\n\n\terror.attemptNumber = attemptNumber;\n\terror.retriesLeft = retriesLeft;\n\treturn error;\n};\n\nconst isNetworkError = errorMessage => networkErrorMsgs.has(errorMessage);\n\nconst getDOMException = errorMessage => globalThis.DOMException === undefined\n\t? new Error(errorMessage)\n\t: new DOMException(errorMessage);\n\nexport default async function pRetry(input, options) {\n\treturn new Promise((resolve, reject) => {\n\t\toptions = {\n\t\t\tonFailedAttempt() {},\n\t\t\tretries: 10,\n\t\t\t...options,\n\t\t};\n\n\t\tconst operation = retry.operation(options);\n\n\t\toperation.attempt(async attemptNumber => {\n\t\t\ttry {\n\t\t\t\tresolve(await input(attemptNumber));\n\t\t\t} catch (error) {\n\t\t\t\tif (!(error instanceof Error)) {\n\t\t\t\t\treject(new TypeError(`Non-error was thrown: \"${error}\". You should only throw errors.`));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (error instanceof AbortError) {\n\t\t\t\t\toperation.stop();\n\t\t\t\t\treject(error.originalError);\n\t\t\t\t} else if (error instanceof TypeError && !isNetworkError(error.message)) {\n\t\t\t\t\toperation.stop();\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tdecorateErrorWithCounts(error, attemptNumber, options);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait options.onFailedAttempt(error);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!operation.retry(error)) {\n\t\t\t\t\t\treject(operation.mainError());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (options.signal && !options.signal.aborted) {\n\t\t\toptions.signal.addEventListener('abort', () => {\n\t\t\t\toperation.stop();\n\t\t\t\tconst reason = options.signal.reason === undefined\n\t\t\t\t\t? getDOMException('The operation was aborted.')\n\t\t\t\t\t: options.signal.reason;\n\t\t\t\treject(reason instanceof Error ? reason : getDOMException(reason));\n\t\t\t}, {\n\t\t\t\tonce: true,\n\t\t\t});\n\t\t}\n\t});\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,mBAAmB,IAAI,IAAI;IAChC;IACA;IACA;IACA;IACA;CACA;AAEM,MAAM,mBAAmB;IAC/B,YAAY,OAAO,CAAE;QACpB,KAAK;QAEL,IAAI,mBAAmB,OAAO;YAC7B,IAAI,CAAC,aAAa,GAAG;YACrB,CAAC,EAAC,OAAO,EAAC,GAAG,OAAO;QACrB,OAAO;YACN,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM;YAC/B,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK;QACtC;QAEA,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,OAAO,GAAG;IAChB;AACD;AAEA,MAAM,0BAA0B,CAAC,OAAO,eAAe;IACtD,iFAAiF;IACjF,MAAM,cAAc,QAAQ,OAAO,GAAG,CAAC,gBAAgB,CAAC;IAExD,MAAM,aAAa,GAAG;IACtB,MAAM,WAAW,GAAG;IACpB,OAAO;AACR;AAEA,MAAM,iBAAiB,CAAA,eAAgB,iBAAiB,GAAG,CAAC;AAE5D,MAAM,kBAAkB,CAAA,eAAgB,WAAW,YAAY,KAAK,YACjE,IAAI,MAAM,gBACV,IAAI,aAAa;AAEL,eAAe,OAAO,KAAK,EAAE,OAAO;IAClD,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,UAAU;YACT,oBAAmB;YACnB,SAAS;YACT,GAAG,OAAO;QACX;QAEA,MAAM,YAAY,4IAAK,CAAC,SAAS,CAAC;QAElC,UAAU,OAAO,CAAC,OAAM;YACvB,IAAI;gBACH,QAAQ,MAAM,MAAM;YACrB,EAAE,OAAO,OAAO;gBACf,IAAI,CAAC,CAAC,iBAAiB,KAAK,GAAG;oBAC9B,OAAO,IAAI,UAAU,CAAC,uBAAuB,EAAE,MAAM,gCAAgC,CAAC;oBACtF;gBACD;gBAEA,IAAI,iBAAiB,YAAY;oBAChC,UAAU,IAAI;oBACd,OAAO,MAAM,aAAa;gBAC3B,OAAO,IAAI,iBAAiB,aAAa,CAAC,eAAe,MAAM,OAAO,GAAG;oBACxE,UAAU,IAAI;oBACd,OAAO;gBACR,OAAO;oBACN,wBAAwB,OAAO,eAAe;oBAE9C,IAAI;wBACH,MAAM,QAAQ,eAAe,CAAC;oBAC/B,EAAE,OAAO,OAAO;wBACf,OAAO;wBACP;oBACD;oBAEA,IAAI,CAAC,UAAU,KAAK,CAAC,QAAQ;wBAC5B,OAAO,UAAU,SAAS;oBAC3B;gBACD;YACD;QACD;QAEA,IAAI,QAAQ,MAAM,IAAI,CAAC,QAAQ,MAAM,CAAC,OAAO,EAAE;YAC9C,QAAQ,MAAM,CAAC,gBAAgB,CAAC,SAAS;gBACxC,UAAU,IAAI;gBACd,MAAM,SAAS,QAAQ,MAAM,CAAC,MAAM,KAAK,YACtC,gBAAgB,gCAChB,QAAQ,MAAM,CAAC,MAAM;gBACxB,OAAO,kBAAkB,QAAQ,SAAS,gBAAgB;YAC3D,GAAG;gBACF,MAAM;YACP;QACD;IACD;AACD","ignoreList":[0]}},
    {"offset": {"line": 20814, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-pb/src/pb-decode.js"],"sourcesContent":["const textDecoder = new TextDecoder()\n\n/**\n * @typedef {import('./interface.js').RawPBLink} RawPBLink\n */\n\n/**\n * @typedef {import('./interface.js').RawPBNode} RawPBNode\n */\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @returns {[number, number]}\n */\nfunction decodeVarint (bytes, offset) {\n  let v = 0\n\n  for (let shift = 0; ; shift += 7) {\n    /* c8 ignore next 3 */\n    if (shift >= 64) {\n      throw new Error('protobuf: varint overflow')\n    }\n    /* c8 ignore next 3 */\n    if (offset >= bytes.length) {\n      throw new Error('protobuf: unexpected end of data')\n    }\n\n    const b = bytes[offset++]\n    v += shift < 28 ? (b & 0x7f) << shift : (b & 0x7f) * (2 ** shift)\n    if (b < 0x80) {\n      break\n    }\n  }\n  return [v, offset]\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @returns {[Uint8Array, number]}\n */\nfunction decodeBytes (bytes, offset) {\n  let byteLen\n  ;[byteLen, offset] = decodeVarint(bytes, offset)\n  const postOffset = offset + byteLen\n\n  /* c8 ignore next 3 */\n  if (byteLen < 0 || postOffset < 0) {\n    throw new Error('protobuf: invalid length')\n  }\n  /* c8 ignore next 3 */\n  if (postOffset > bytes.length) {\n    throw new Error('protobuf: unexpected end of data')\n  }\n\n  return [bytes.subarray(offset, postOffset), postOffset]\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} index\n * @returns {[number, number, number]}\n */\nfunction decodeKey (bytes, index) {\n  let wire\n  ;[wire, index] = decodeVarint(bytes, index)\n  // [wireType, fieldNum, newIndex]\n  return [wire & 0x7, wire >> 3, index]\n}\n\n/**\n * @param {Uint8Array} bytes\n * @returns {RawPBLink}\n */\nfunction decodeLink (bytes) {\n  /** @type {RawPBLink} */\n  const link = {}\n  const l = bytes.length\n  let index = 0\n\n  while (index < l) {\n    let wireType, fieldNum\n    ;[wireType, fieldNum, index] = decodeKey(bytes, index)\n\n    if (fieldNum === 1) {\n      if (link.Hash) {\n        throw new Error('protobuf: (PBLink) duplicate Hash section')\n      }\n      if (wireType !== 2) {\n        throw new Error(`protobuf: (PBLink) wrong wireType (${wireType}) for Hash`)\n      }\n      if (link.Name !== undefined) {\n        throw new Error('protobuf: (PBLink) invalid order, found Name before Hash')\n      }\n      if (link.Tsize !== undefined) {\n        throw new Error('protobuf: (PBLink) invalid order, found Tsize before Hash')\n      }\n\n      [link.Hash, index] = decodeBytes(bytes, index)\n    } else if (fieldNum === 2) {\n      if (link.Name !== undefined) {\n        throw new Error('protobuf: (PBLink) duplicate Name section')\n      }\n      if (wireType !== 2) {\n        throw new Error(`protobuf: (PBLink) wrong wireType (${wireType}) for Name`)\n      }\n      if (link.Tsize !== undefined) {\n        throw new Error('protobuf: (PBLink) invalid order, found Tsize before Name')\n      }\n\n      let byts\n      ;[byts, index] = decodeBytes(bytes, index)\n      link.Name = textDecoder.decode(byts)\n    } else if (fieldNum === 3) {\n      if (link.Tsize !== undefined) {\n        throw new Error('protobuf: (PBLink) duplicate Tsize section')\n      }\n      if (wireType !== 0) {\n        throw new Error(`protobuf: (PBLink) wrong wireType (${wireType}) for Tsize`)\n      }\n\n      [link.Tsize, index] = decodeVarint(bytes, index)\n    } else {\n      throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${fieldNum}`)\n    }\n  }\n\n  /* c8 ignore next 3 */\n  if (index > l) {\n    throw new Error('protobuf: (PBLink) unexpected end of data')\n  }\n\n  return link\n}\n\n/**\n * @param {Uint8Array} bytes\n * @returns {RawPBNode}\n */\nexport function decodeNode (bytes) {\n  const l = bytes.length\n  let index = 0\n  /** @type {RawPBLink[]|void} */\n  let links = undefined // eslint-disable-line no-undef-init\n  let linksBeforeData = false\n  /** @type {Uint8Array|void} */\n  let data = undefined // eslint-disable-line no-undef-init\n\n  while (index < l) {\n    let wireType, fieldNum\n    ;[wireType, fieldNum, index] = decodeKey(bytes, index)\n\n    if (wireType !== 2) {\n      throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${wireType}`)\n    }\n\n    if (fieldNum === 1) {\n      if (data) {\n        throw new Error('protobuf: (PBNode) duplicate Data section')\n      }\n\n      [data, index] = decodeBytes(bytes, index)\n      if (links) {\n        linksBeforeData = true\n      }\n    } else if (fieldNum === 2) {\n      if (linksBeforeData) { // interleaved Links/Data/Links\n        throw new Error('protobuf: (PBNode) duplicate Links section')\n      } else if (!links) {\n        links = []\n      }\n      let byts\n      ;[byts, index] = decodeBytes(bytes, index)\n      links.push(decodeLink(byts))\n    } else {\n      throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${fieldNum}`)\n    }\n  }\n\n  /* c8 ignore next 3 */\n  if (index > l) {\n    throw new Error('protobuf: (PBNode) unexpected end of data')\n  }\n\n  /** @type {RawPBNode} */\n  const node = {}\n  if (data) {\n    node.Data = data\n  }\n  node.Links = links || []\n  return node\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 20983, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-pb/src/pb-encode.js"],"sourcesContent":["const textEncoder = new TextEncoder()\nconst maxInt32 = 2 ** 32\nconst maxUInt32 = 2 ** 31\n\n/**\n * @typedef {import('./interface.js').RawPBLink} RawPBLink\n */\n\n/**\n * @typedef {import('./interface.js').RawPBNode} RawPBNode\n */\n\n// the encoders work backward from the end of the bytes array\n\n/**\n * encodeLink() is passed a slice of the parent byte array that ends where this\n * link needs to end, so it packs to the right-most part of the passed `bytes`\n *\n * @param {RawPBLink} link\n * @param {Uint8Array} bytes\n * @returns {number}\n */\nfunction encodeLink (link, bytes) {\n  let i = bytes.length\n\n  if (typeof link.Tsize === 'number') {\n    if (link.Tsize < 0) {\n      throw new Error('Tsize cannot be negative')\n    }\n    if (!Number.isSafeInteger(link.Tsize)) {\n      throw new Error('Tsize too large for encoding')\n    }\n    i = encodeVarint(bytes, i, link.Tsize) - 1\n    bytes[i] = 0x18\n  }\n\n  if (typeof link.Name === 'string') {\n    const nameBytes = textEncoder.encode(link.Name)\n    i -= nameBytes.length\n    bytes.set(nameBytes, i)\n    i = encodeVarint(bytes, i, nameBytes.length) - 1\n    bytes[i] = 0x12\n  }\n\n  if (link.Hash) {\n    i -= link.Hash.length\n    bytes.set(link.Hash, i)\n    i = encodeVarint(bytes, i, link.Hash.length) - 1\n    bytes[i] = 0xa\n  }\n\n  return bytes.length - i\n}\n\n/**\n * Encodes a PBNode into a new byte array of precisely the correct size\n *\n * @param {RawPBNode} node\n * @returns {Uint8Array}\n */\nexport function encodeNode (node) {\n  const size = sizeNode(node)\n  const bytes = new Uint8Array(size)\n  let i = size\n\n  if (node.Data) {\n    i -= node.Data.length\n    bytes.set(node.Data, i)\n    i = encodeVarint(bytes, i, node.Data.length) - 1\n    bytes[i] = 0xa\n  }\n\n  if (node.Links) {\n    for (let index = node.Links.length - 1; index >= 0; index--) {\n      const size = encodeLink(node.Links[index], bytes.subarray(0, i))\n      i -= size\n      i = encodeVarint(bytes, i, size) - 1\n      bytes[i] = 0x12\n    }\n  }\n\n  return bytes\n}\n\n/**\n * work out exactly how many bytes this link takes up\n *\n * @param {RawPBLink} link\n * @returns\n */\nfunction sizeLink (link) {\n  let n = 0\n\n  if (link.Hash) {\n    const l = link.Hash.length\n    n += 1 + l + sov(l)\n  }\n\n  if (typeof link.Name === 'string') {\n    const l = textEncoder.encode(link.Name).length\n    n += 1 + l + sov(l)\n  }\n\n  if (typeof link.Tsize === 'number') {\n    n += 1 + sov(link.Tsize)\n  }\n\n  return n\n}\n\n/**\n * Work out exactly how many bytes this node takes up\n *\n * @param {RawPBNode} node\n * @returns {number}\n */\nfunction sizeNode (node) {\n  let n = 0\n\n  if (node.Data) {\n    const l = node.Data.length\n    n += 1 + l + sov(l)\n  }\n\n  if (node.Links) {\n    for (const link of node.Links) {\n      const l = sizeLink(link)\n      n += 1 + l + sov(l)\n    }\n  }\n\n  return n\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset\n * @param {number} v\n * @returns {number}\n */\nfunction encodeVarint (bytes, offset, v) {\n  offset -= sov(v)\n  const base = offset\n\n  while (v >= maxUInt32) {\n    bytes[offset++] = (v & 0x7f) | 0x80\n    v /= 128\n  }\n\n  while (v >= 128) {\n    bytes[offset++] = (v & 0x7f) | 0x80\n    v >>>= 7\n  }\n\n  bytes[offset] = v\n\n  return base\n}\n\n/**\n * size of varint\n *\n * @param {number} x\n * @returns {number}\n */\nfunction sov (x) {\n  if (x % 2 === 0) {\n    x++\n  }\n  return Math.floor((len64(x) + 6) / 7)\n}\n\n/**\n * golang math/bits, how many bits does it take to represent this integer?\n *\n * @param {number} x\n * @returns {number}\n */\nfunction len64 (x) {\n  let n = 0\n  if (x >= maxInt32) {\n    x = Math.floor(x / maxInt32)\n    n = 32\n  }\n  if (x >= (1 << 16)) {\n    x >>>= 16\n    n += 16\n  }\n  if (x >= (1 << 8)) {\n    x >>>= 8\n    n += 8\n  }\n  return n + len8tab[x]\n}\n\n// golang math/bits\nconst len8tab = [\n  0, 1, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4,\n  5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,\n  6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,\n  6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,\n  7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,\n  7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,\n  7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,\n  7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,\n  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8\n]\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 21402, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-pb/src/util.js"],"sourcesContent":["import { CID } from 'multiformats/cid'\n\n/* eslint-disable complexity, no-nested-ternary */\n\n/**\n * @typedef {import('./interface.js').PBLink} PBLink\n * @typedef {import('./interface.js').PBNode} PBNode\n */\n\n/**\n * @template T\n * @typedef {import('multiformats/codecs/interface').ByteView<T>} ByteView\n */\n\n/**\n * @template T\n * @typedef {import('multiformats/codecs/interface').ArrayBufferView<T>} ArrayBufferView\n */\n\nconst pbNodeProperties = ['Data', 'Links']\nconst pbLinkProperties = ['Hash', 'Name', 'Tsize']\n\nconst textEncoder = new TextEncoder()\n\n/**\n * @param {PBLink} a\n * @param {PBLink} b\n * @returns {number}\n */\nfunction linkComparator (a, b) {\n  if (a === b) {\n    return 0\n  }\n\n  const abuf = a.Name ? textEncoder.encode(a.Name) : []\n  const bbuf = b.Name ? textEncoder.encode(b.Name) : []\n\n  let x = abuf.length\n  let y = bbuf.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (abuf[i] !== bbuf[i]) {\n      x = abuf[i]\n      y = bbuf[i]\n      break\n    }\n  }\n\n  return x < y ? -1 : y < x ? 1 : 0\n}\n\n/**\n * @param {any} node\n * @param {string[]} properties\n * @returns {boolean}\n */\nfunction hasOnlyProperties (node, properties) {\n  return !Object.keys(node).some((p) => !properties.includes(p))\n}\n\n/**\n * Converts a CID, or a PBLink-like object to a PBLink\n *\n * @param {any} link\n * @returns {PBLink}\n */\nfunction asLink (link) {\n  if (typeof link.asCID === 'object') {\n    const Hash = CID.asCID(link)\n    if (!Hash) {\n      throw new TypeError('Invalid DAG-PB form')\n    }\n    return { Hash }\n  }\n\n  if (typeof link !== 'object' || Array.isArray(link)) {\n    throw new TypeError('Invalid DAG-PB form')\n  }\n\n  const pbl = {}\n\n  if (link.Hash) {\n    let cid = CID.asCID(link.Hash)\n    try {\n      if (!cid) {\n        if (typeof link.Hash === 'string') {\n          cid = CID.parse(link.Hash)\n        } else if (link.Hash instanceof Uint8Array) {\n          cid = CID.decode(link.Hash)\n        }\n      }\n    } catch (/** @type {any} */ e) {\n      throw new TypeError(`Invalid DAG-PB form: ${e.message}`)\n    }\n\n    if (cid) {\n      pbl.Hash = cid\n    }\n  }\n\n  if (!pbl.Hash) {\n    throw new TypeError('Invalid DAG-PB form')\n  }\n\n  if (typeof link.Name === 'string') {\n    pbl.Name = link.Name\n  }\n\n  if (typeof link.Tsize === 'number') {\n    pbl.Tsize = link.Tsize\n  }\n\n  return pbl\n}\n\n/**\n * @param {any} node\n * @returns {PBNode}\n */\nexport function prepare (node) {\n  if (node instanceof Uint8Array || typeof node === 'string') {\n    node = { Data: node }\n  }\n\n  if (typeof node !== 'object' || Array.isArray(node)) {\n    throw new TypeError('Invalid DAG-PB form')\n  }\n\n  /** @type {PBNode} */\n  const pbn = {}\n\n  if (node.Data !== undefined) {\n    if (typeof node.Data === 'string') {\n      pbn.Data = textEncoder.encode(node.Data)\n    } else if (node.Data instanceof Uint8Array) {\n      pbn.Data = node.Data\n    } else {\n      throw new TypeError('Invalid DAG-PB form')\n    }\n  }\n\n  if (node.Links !== undefined) {\n    if (Array.isArray(node.Links)) {\n      pbn.Links = node.Links.map(asLink)\n      pbn.Links.sort(linkComparator)\n    } else {\n      throw new TypeError('Invalid DAG-PB form')\n    }\n  } else {\n    pbn.Links = []\n  }\n\n  return pbn\n}\n\n/**\n * @param {PBNode} node\n */\nexport function validate (node) {\n  /*\n  type PBLink struct {\n    Hash optional Link\n    Name optional String\n    Tsize optional Int\n  }\n\n  type PBNode struct {\n    Links [PBLink]\n    Data optional Bytes\n  }\n  */\n  // @ts-ignore private property for TS\n  if (!node || typeof node !== 'object' || Array.isArray(node) || node instanceof Uint8Array || (node['/'] && node['/'] === node.bytes)) {\n    throw new TypeError('Invalid DAG-PB form')\n  }\n\n  if (!hasOnlyProperties(node, pbNodeProperties)) {\n    throw new TypeError('Invalid DAG-PB form (extraneous properties)')\n  }\n\n  if (node.Data !== undefined && !(node.Data instanceof Uint8Array)) {\n    throw new TypeError('Invalid DAG-PB form (Data must be bytes)')\n  }\n\n  if (!Array.isArray(node.Links)) {\n    throw new TypeError('Invalid DAG-PB form (Links must be a list)')\n  }\n\n  for (let i = 0; i < node.Links.length; i++) {\n    const link = node.Links[i]\n    // @ts-ignore private property for TS\n    if (!link || typeof link !== 'object' || Array.isArray(link) || link instanceof Uint8Array || (link['/'] && link['/'] === link.bytes)) {\n      throw new TypeError('Invalid DAG-PB form (bad link)')\n    }\n\n    if (!hasOnlyProperties(link, pbLinkProperties)) {\n      throw new TypeError('Invalid DAG-PB form (extraneous properties on link)')\n    }\n\n    if (link.Hash === undefined) {\n      throw new TypeError('Invalid DAG-PB form (link must have a Hash)')\n    }\n\n    // @ts-ignore private property for TS\n    if (link.Hash == null || !link.Hash['/'] || link.Hash['/'] !== link.Hash.bytes) {\n      throw new TypeError('Invalid DAG-PB form (link Hash must be a CID)')\n    }\n\n    if (link.Name !== undefined && typeof link.Name !== 'string') {\n      throw new TypeError('Invalid DAG-PB form (link Name must be a string)')\n    }\n\n    if (link.Tsize !== undefined) {\n      if (typeof link.Tsize !== 'number' || link.Tsize % 1 !== 0) {\n        throw new TypeError('Invalid DAG-PB form (link Tsize must be an integer)')\n      }\n      if (link.Tsize < 0) {\n        throw new TypeError('Invalid DAG-PB form (link Tsize cannot be negative)')\n      }\n    }\n\n    if (i > 0 && linkComparator(link, node.Links[i - 1]) === -1) {\n      throw new TypeError('Invalid DAG-PB form (links must be sorted by Name bytes)')\n    }\n  }\n}\n\n/**\n * @param {Uint8Array} data\n * @param {PBLink[]} [links]\n * @returns {PBNode}\n */\nexport function createNode (data, links = []) {\n  return prepare({ Data: data, Links: links })\n}\n\n/**\n * @param {string} name\n * @param {number} size\n * @param {CID} cid\n * @returns {PBLink}\n */\nexport function createLink (name, size, cid) {\n  return asLink({ Hash: cid, Name: name, Tsize: size })\n}\n\n/**\n * @template T\n * @param {ByteView<T> | ArrayBufferView<T>} buf\n * @returns {ByteView<T>}\n */\nexport function toByteView (buf) {\n  if (buf instanceof ArrayBuffer) {\n    return new Uint8Array(buf, 0, buf.byteLength)\n  }\n\n  return buf\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 21621, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/dag-pb/src/index.js"],"sourcesContent":["import { CID } from 'multiformats/cid'\nimport { decodeNode } from './pb-decode.js'\nimport { encodeNode } from './pb-encode.js'\nimport { prepare, validate, createNode, createLink, toByteView } from './util.js'\n\n/**\n * @template T\n * @typedef {import('multiformats/codecs/interface').ByteView<T>} ByteView\n */\n\n/**\n * @template T\n * @typedef {import('multiformats/codecs/interface').ArrayBufferView<T>} ArrayBufferView\n */\n\n/**\n * @typedef {import('./interface.js').PBLink} PBLink\n * @typedef {import('./interface.js').PBNode} PBNode\n */\n\nexport const name = 'dag-pb'\nexport const code = 0x70\n\n/**\n * @param {PBNode} node\n * @returns {ByteView<PBNode>}\n */\nexport function encode (node) {\n  validate(node)\n\n  const pbn = {}\n  if (node.Links) {\n    pbn.Links = node.Links.map((l) => {\n      const link = {}\n      if (l.Hash) {\n        link.Hash = l.Hash.bytes // cid -> bytes\n      }\n      if (l.Name !== undefined) {\n        link.Name = l.Name\n      }\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize\n      }\n      return link\n    })\n  }\n  if (node.Data) {\n    pbn.Data = node.Data\n  }\n\n  return encodeNode(pbn)\n}\n\n/**\n * @param {ByteView<PBNode> | ArrayBufferView<PBNode>} bytes\n * @returns {PBNode}\n */\nexport function decode (bytes) {\n  const buf = toByteView(bytes)\n  const pbn = decodeNode(buf)\n\n  const node = {}\n\n  if (pbn.Data) {\n    node.Data = pbn.Data\n  }\n\n  if (pbn.Links) {\n    node.Links = pbn.Links.map((l) => {\n      const link = {}\n      try {\n        link.Hash = CID.decode(l.Hash)\n      } catch {\n        // ignore parse fail\n      }\n      if (!link.Hash) {\n        throw new Error('Invalid Hash field found in link, expected CID')\n      }\n      if (l.Name !== undefined) {\n        link.Name = l.Name\n      }\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize\n      }\n      return link\n    })\n  }\n\n  return node\n}\n\nexport { prepare, validate, createNode, createLink }\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAiBO,MAAM,OAAO;AACb,MAAM,OAAO;AAMb,SAAS,OAAQ,IAAI;IAC1B,IAAA,iKAAQ,EAAC;IAET,MAAM,MAAM,CAAC;IACb,IAAI,KAAK,KAAK,EAAE;QACd,IAAI,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,CAAC,CAAC;YAC1B,MAAM,OAAO,CAAC;YACd,IAAI,EAAE,IAAI,EAAE;gBACV,KAAK,IAAI,GAAG,EAAE,IAAI,CAAC,KAAK,EAAC,eAAe;YAC1C;YACA,IAAI,EAAE,IAAI,KAAK,WAAW;gBACxB,KAAK,IAAI,GAAG,EAAE,IAAI;YACpB;YACA,IAAI,EAAE,KAAK,KAAK,WAAW;gBACzB,KAAK,KAAK,GAAG,EAAE,KAAK;YACtB;YACA,OAAO;QACT;IACF;IACA,IAAI,KAAK,IAAI,EAAE;QACb,IAAI,IAAI,GAAG,KAAK,IAAI;IACtB;IAEA,OAAO,IAAA,2KAAU,EAAC;AACpB;AAMO,SAAS,OAAQ,KAAK;IAC3B,MAAM,MAAM,IAAA,mKAAU,EAAC;IACvB,MAAM,MAAM,IAAA,2KAAU,EAAC;IAEvB,MAAM,OAAO,CAAC;IAEd,IAAI,IAAI,IAAI,EAAE;QACZ,KAAK,IAAI,GAAG,IAAI,IAAI;IACtB;IAEA,IAAI,IAAI,KAAK,EAAE;QACb,KAAK,KAAK,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC;YAC1B,MAAM,OAAO,CAAC;YACd,IAAI;gBACF,KAAK,IAAI,GAAG,4KAAG,CAAC,MAAM,CAAC,EAAE,IAAI;YAC/B,EAAE,OAAM;YACN,oBAAoB;YACtB;YACA,IAAI,CAAC,KAAK,IAAI,EAAE;gBACd,MAAM,IAAI,MAAM;YAClB;YACA,IAAI,EAAE,IAAI,KAAK,WAAW;gBACxB,KAAK,IAAI,GAAG,EAAE,IAAI;YACpB;YACA,IAAI,EAAE,KAAK,KAAK,WAAW;gBACzB,KAAK,KAAK,GAAG,EAAE,KAAK;YACtB;YACA,OAAO;QACT;IACF;IAEA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 21698, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40protobufjs/aspromise/index.js"],"sourcesContent":["\"use strict\";\r\nmodule.exports = asPromise;\r\n\r\n/**\r\n * Callback as used by {@link util.asPromise}.\r\n * @typedef asPromiseCallback\r\n * @type {function}\r\n * @param {Error|null} error Error, if any\r\n * @param {...*} params Additional arguments\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Returns a promise from a node-style callback function.\r\n * @memberof util\r\n * @param {asPromiseCallback} fn Function to call\r\n * @param {*} ctx Function context\r\n * @param {...*} params Function arguments\r\n * @returns {Promise<*>} Promisified function\r\n */\r\nfunction asPromise(fn, ctx/*, varargs */) {\r\n    var params  = new Array(arguments.length - 1),\r\n        offset  = 0,\r\n        index   = 2,\r\n        pending = true;\r\n    while (index < arguments.length)\r\n        params[offset++] = arguments[index++];\r\n    return new Promise(function executor(resolve, reject) {\r\n        params[offset] = function callback(err/*, varargs */) {\r\n            if (pending) {\r\n                pending = false;\r\n                if (err)\r\n                    reject(err);\r\n                else {\r\n                    var params = new Array(arguments.length - 1),\r\n                        offset = 0;\r\n                    while (offset < params.length)\r\n                        params[offset++] = arguments[offset];\r\n                    resolve.apply(null, params);\r\n                }\r\n            }\r\n        };\r\n        try {\r\n            fn.apply(ctx || null, params);\r\n        } catch (err) {\r\n            if (pending) {\r\n                pending = false;\r\n                reject(err);\r\n            }\r\n        }\r\n    });\r\n}\r\n"],"names":[],"mappings":"AACA,OAAO,OAAO,GAAG;AAEjB;;;;;;;CAOC,GAED;;;;;;;CAOC,GACD,SAAS,UAAU,EAAE,EAAE,IAAG,YAAY,GAAZ;IACtB,IAAI,SAAU,IAAI,MAAM,UAAU,MAAM,GAAG,IACvC,SAAU,GACV,QAAU,GACV,UAAU;IACd,MAAO,QAAQ,UAAU,MAAM,CAC3B,MAAM,CAAC,SAAS,GAAG,SAAS,CAAC,QAAQ;IACzC,OAAO,IAAI,QAAQ,SAAS,SAAS,OAAO,EAAE,MAAM;QAChD,MAAM,CAAC,OAAO,GAAG,SAAS,SAAS,IAAG,YAAY,GAAZ;YAClC,IAAI,SAAS;gBACT,UAAU;gBACV,IAAI,KACA,OAAO;qBACN;oBACD,IAAI,SAAS,IAAI,MAAM,UAAU,MAAM,GAAG,IACtC,SAAS;oBACb,MAAO,SAAS,OAAO,MAAM,CACzB,MAAM,CAAC,SAAS,GAAG,SAAS,CAAC,OAAO;oBACxC,QAAQ,KAAK,CAAC,MAAM;gBACxB;YACJ;QACJ;QACA,IAAI;YACA,GAAG,KAAK,CAAC,OAAO,MAAM;QAC1B,EAAE,OAAO,KAAK;YACV,IAAI,SAAS;gBACT,UAAU;gBACV,OAAO;YACX;QACJ;IACJ;AACJ","ignoreList":[0]}},
    {"offset": {"line": 21742, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40protobufjs/base64/index.js"],"sourcesContent":["\"use strict\";\r\n\r\n/**\r\n * A minimal base64 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar base64 = exports;\r\n\r\n/**\r\n * Calculates the byte length of a base64 encoded string.\r\n * @param {string} string Base64 encoded string\r\n * @returns {number} Byte length\r\n */\r\nbase64.length = function length(string) {\r\n    var p = string.length;\r\n    if (!p)\r\n        return 0;\r\n    var n = 0;\r\n    while (--p % 4 > 1 && string.charAt(p) === \"=\")\r\n        ++n;\r\n    return Math.ceil(string.length * 3) / 4 - n;\r\n};\r\n\r\n// Base64 encoding table\r\nvar b64 = new Array(64);\r\n\r\n// Base64 decoding table\r\nvar s64 = new Array(123);\r\n\r\n// 65..90, 97..122, 48..57, 43, 47\r\nfor (var i = 0; i < 64;)\r\n    s64[b64[i] = i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i - 59 | 43] = i++;\r\n\r\n/**\r\n * Encodes a buffer to a base64 encoded string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} Base64 encoded string\r\n */\r\nbase64.encode = function encode(buffer, start, end) {\r\n    var parts = null,\r\n        chunk = [];\r\n    var i = 0, // output index\r\n        j = 0, // goto index\r\n        t;     // temporary\r\n    while (start < end) {\r\n        var b = buffer[start++];\r\n        switch (j) {\r\n            case 0:\r\n                chunk[i++] = b64[b >> 2];\r\n                t = (b & 3) << 4;\r\n                j = 1;\r\n                break;\r\n            case 1:\r\n                chunk[i++] = b64[t | b >> 4];\r\n                t = (b & 15) << 2;\r\n                j = 2;\r\n                break;\r\n            case 2:\r\n                chunk[i++] = b64[t | b >> 6];\r\n                chunk[i++] = b64[b & 63];\r\n                j = 0;\r\n                break;\r\n        }\r\n        if (i > 8191) {\r\n            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n            i = 0;\r\n        }\r\n    }\r\n    if (j) {\r\n        chunk[i++] = b64[t];\r\n        chunk[i++] = 61;\r\n        if (j === 1)\r\n            chunk[i++] = 61;\r\n    }\r\n    if (parts) {\r\n        if (i)\r\n            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n        return parts.join(\"\");\r\n    }\r\n    return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\nvar invalidEncoding = \"invalid encoding\";\r\n\r\n/**\r\n * Decodes a base64 encoded string to a buffer.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Number of bytes written\r\n * @throws {Error} If encoding is invalid\r\n */\r\nbase64.decode = function decode(string, buffer, offset) {\r\n    var start = offset;\r\n    var j = 0, // goto index\r\n        t;     // temporary\r\n    for (var i = 0; i < string.length;) {\r\n        var c = string.charCodeAt(i++);\r\n        if (c === 61 && j > 1)\r\n            break;\r\n        if ((c = s64[c]) === undefined)\r\n            throw Error(invalidEncoding);\r\n        switch (j) {\r\n            case 0:\r\n                t = c;\r\n                j = 1;\r\n                break;\r\n            case 1:\r\n                buffer[offset++] = t << 2 | (c & 48) >> 4;\r\n                t = c;\r\n                j = 2;\r\n                break;\r\n            case 2:\r\n                buffer[offset++] = (t & 15) << 4 | (c & 60) >> 2;\r\n                t = c;\r\n                j = 3;\r\n                break;\r\n            case 3:\r\n                buffer[offset++] = (t & 3) << 6 | c;\r\n                j = 0;\r\n                break;\r\n        }\r\n    }\r\n    if (j === 1)\r\n        throw Error(invalidEncoding);\r\n    return offset - start;\r\n};\r\n\r\n/**\r\n * Tests if the specified string appears to be base64 encoded.\r\n * @param {string} string String to test\r\n * @returns {boolean} `true` if probably base64 encoded, otherwise false\r\n */\r\nbase64.test = function test(string) {\r\n    return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);\r\n};\r\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 21858, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40protobufjs/eventemitter/index.js"],"sourcesContent":["\"use strict\";\r\nmodule.exports = EventEmitter;\r\n\r\n/**\r\n * Constructs a new event emitter instance.\r\n * @classdesc A minimal event emitter.\r\n * @memberof util\r\n * @constructor\r\n */\r\nfunction EventEmitter() {\r\n\r\n    /**\r\n     * Registered listeners.\r\n     * @type {Object.<string,*>}\r\n     * @private\r\n     */\r\n    this._listeners = {};\r\n}\r\n\r\n/**\r\n * Registers an event listener.\r\n * @param {string} evt Event name\r\n * @param {function} fn Listener\r\n * @param {*} [ctx] Listener context\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.on = function on(evt, fn, ctx) {\r\n    (this._listeners[evt] || (this._listeners[evt] = [])).push({\r\n        fn  : fn,\r\n        ctx : ctx || this\r\n    });\r\n    return this;\r\n};\r\n\r\n/**\r\n * Removes an event listener or any matching listeners if arguments are omitted.\r\n * @param {string} [evt] Event name. Removes all listeners if omitted.\r\n * @param {function} [fn] Listener to remove. Removes all listeners of `evt` if omitted.\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.off = function off(evt, fn) {\r\n    if (evt === undefined)\r\n        this._listeners = {};\r\n    else {\r\n        if (fn === undefined)\r\n            this._listeners[evt] = [];\r\n        else {\r\n            var listeners = this._listeners[evt];\r\n            for (var i = 0; i < listeners.length;)\r\n                if (listeners[i].fn === fn)\r\n                    listeners.splice(i, 1);\r\n                else\r\n                    ++i;\r\n        }\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Emits an event by calling its listeners with the specified arguments.\r\n * @param {string} evt Event name\r\n * @param {...*} args Arguments\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.emit = function emit(evt) {\r\n    var listeners = this._listeners[evt];\r\n    if (listeners) {\r\n        var args = [],\r\n            i = 1;\r\n        for (; i < arguments.length;)\r\n            args.push(arguments[i++]);\r\n        for (i = 0; i < listeners.length;)\r\n            listeners[i].fn.apply(listeners[i++].ctx, args);\r\n    }\r\n    return this;\r\n};\r\n"],"names":[],"mappings":"AACA,OAAO,OAAO,GAAG;AAEjB;;;;;CAKC,GACD,SAAS;IAEL;;;;KAIC,GACD,IAAI,CAAC,UAAU,GAAG,CAAC;AACvB;AAEA;;;;;;CAMC,GACD,aAAa,SAAS,CAAC,EAAE,GAAG,SAAS,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG;IAChD,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC;QACvD,IAAM;QACN,KAAM,OAAO,IAAI;IACrB;IACA,OAAO,IAAI;AACf;AAEA;;;;;CAKC,GACD,aAAa,SAAS,CAAC,GAAG,GAAG,SAAS,IAAI,GAAG,EAAE,EAAE;IAC7C,IAAI,QAAQ,WACR,IAAI,CAAC,UAAU,GAAG,CAAC;SAClB;QACD,IAAI,OAAO,WACP,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,EAAE;aACxB;YACD,IAAI,YAAY,IAAI,CAAC,UAAU,CAAC,IAAI;YACpC,IAAK,IAAI,IAAI,GAAG,IAAI,UAAU,MAAM,EAChC,IAAI,SAAS,CAAC,EAAE,CAAC,EAAE,KAAK,IACpB,UAAU,MAAM,CAAC,GAAG;iBAEpB,EAAE;QACd;IACJ;IACA,OAAO,IAAI;AACf;AAEA;;;;;CAKC,GACD,aAAa,SAAS,CAAC,IAAI,GAAG,SAAS,KAAK,GAAG;IAC3C,IAAI,YAAY,IAAI,CAAC,UAAU,CAAC,IAAI;IACpC,IAAI,WAAW;QACX,IAAI,OAAO,EAAE,EACT,IAAI;QACR,MAAO,IAAI,UAAU,MAAM,EACvB,KAAK,IAAI,CAAC,SAAS,CAAC,IAAI;QAC5B,IAAK,IAAI,GAAG,IAAI,UAAU,MAAM,EAC5B,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE;IAClD;IACA,OAAO,IAAI;AACf","ignoreList":[0]}},
    {"offset": {"line": 21919, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40protobufjs/float/index.js"],"sourcesContent":["\"use strict\";\r\n\r\nmodule.exports = factory(factory);\r\n\r\n/**\r\n * Reads / writes floats / doubles from / to buffers.\r\n * @name util.float\r\n * @namespace\r\n */\r\n\r\n/**\r\n * Writes a 32 bit float to a buffer using little endian byte order.\r\n * @name util.float.writeFloatLE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Writes a 32 bit float to a buffer using big endian byte order.\r\n * @name util.float.writeFloatBE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Reads a 32 bit float from a buffer using little endian byte order.\r\n * @name util.float.readFloatLE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Reads a 32 bit float from a buffer using big endian byte order.\r\n * @name util.float.readFloatBE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Writes a 64 bit double to a buffer using little endian byte order.\r\n * @name util.float.writeDoubleLE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Writes a 64 bit double to a buffer using big endian byte order.\r\n * @name util.float.writeDoubleBE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Reads a 64 bit double from a buffer using little endian byte order.\r\n * @name util.float.readDoubleLE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Reads a 64 bit double from a buffer using big endian byte order.\r\n * @name util.float.readDoubleBE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n// Factory function for the purpose of node-based testing in modified global environments\r\nfunction factory(exports) {\r\n\r\n    // float: typed array\r\n    if (typeof Float32Array !== \"undefined\") (function() {\r\n\r\n        var f32 = new Float32Array([ -0 ]),\r\n            f8b = new Uint8Array(f32.buffer),\r\n            le  = f8b[3] === 128;\r\n\r\n        function writeFloat_f32_cpy(val, buf, pos) {\r\n            f32[0] = val;\r\n            buf[pos    ] = f8b[0];\r\n            buf[pos + 1] = f8b[1];\r\n            buf[pos + 2] = f8b[2];\r\n            buf[pos + 3] = f8b[3];\r\n        }\r\n\r\n        function writeFloat_f32_rev(val, buf, pos) {\r\n            f32[0] = val;\r\n            buf[pos    ] = f8b[3];\r\n            buf[pos + 1] = f8b[2];\r\n            buf[pos + 2] = f8b[1];\r\n            buf[pos + 3] = f8b[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;\r\n        /* istanbul ignore next */\r\n        exports.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;\r\n\r\n        function readFloat_f32_cpy(buf, pos) {\r\n            f8b[0] = buf[pos    ];\r\n            f8b[1] = buf[pos + 1];\r\n            f8b[2] = buf[pos + 2];\r\n            f8b[3] = buf[pos + 3];\r\n            return f32[0];\r\n        }\r\n\r\n        function readFloat_f32_rev(buf, pos) {\r\n            f8b[3] = buf[pos    ];\r\n            f8b[2] = buf[pos + 1];\r\n            f8b[1] = buf[pos + 2];\r\n            f8b[0] = buf[pos + 3];\r\n            return f32[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;\r\n        /* istanbul ignore next */\r\n        exports.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;\r\n\r\n    // float: ieee754\r\n    })(); else (function() {\r\n\r\n        function writeFloat_ieee754(writeUint, val, buf, pos) {\r\n            var sign = val < 0 ? 1 : 0;\r\n            if (sign)\r\n                val = -val;\r\n            if (val === 0)\r\n                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos);\r\n            else if (isNaN(val))\r\n                writeUint(2143289344, buf, pos);\r\n            else if (val > 3.4028234663852886e+38) // +-Infinity\r\n                writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);\r\n            else if (val < 1.1754943508222875e-38) // denormal\r\n                writeUint((sign << 31 | Math.round(val / 1.401298464324817e-45)) >>> 0, buf, pos);\r\n            else {\r\n                var exponent = Math.floor(Math.log(val) / Math.LN2),\r\n                    mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;\r\n                writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);\r\n            }\r\n        }\r\n\r\n        exports.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);\r\n        exports.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);\r\n\r\n        function readFloat_ieee754(readUint, buf, pos) {\r\n            var uint = readUint(buf, pos),\r\n                sign = (uint >> 31) * 2 + 1,\r\n                exponent = uint >>> 23 & 255,\r\n                mantissa = uint & 8388607;\r\n            return exponent === 255\r\n                ? mantissa\r\n                ? NaN\r\n                : sign * Infinity\r\n                : exponent === 0 // denormal\r\n                ? sign * 1.401298464324817e-45 * mantissa\r\n                : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);\r\n        }\r\n\r\n        exports.readFloatLE = readFloat_ieee754.bind(null, readUintLE);\r\n        exports.readFloatBE = readFloat_ieee754.bind(null, readUintBE);\r\n\r\n    })();\r\n\r\n    // double: typed array\r\n    if (typeof Float64Array !== \"undefined\") (function() {\r\n\r\n        var f64 = new Float64Array([-0]),\r\n            f8b = new Uint8Array(f64.buffer),\r\n            le  = f8b[7] === 128;\r\n\r\n        function writeDouble_f64_cpy(val, buf, pos) {\r\n            f64[0] = val;\r\n            buf[pos    ] = f8b[0];\r\n            buf[pos + 1] = f8b[1];\r\n            buf[pos + 2] = f8b[2];\r\n            buf[pos + 3] = f8b[3];\r\n            buf[pos + 4] = f8b[4];\r\n            buf[pos + 5] = f8b[5];\r\n            buf[pos + 6] = f8b[6];\r\n            buf[pos + 7] = f8b[7];\r\n        }\r\n\r\n        function writeDouble_f64_rev(val, buf, pos) {\r\n            f64[0] = val;\r\n            buf[pos    ] = f8b[7];\r\n            buf[pos + 1] = f8b[6];\r\n            buf[pos + 2] = f8b[5];\r\n            buf[pos + 3] = f8b[4];\r\n            buf[pos + 4] = f8b[3];\r\n            buf[pos + 5] = f8b[2];\r\n            buf[pos + 6] = f8b[1];\r\n            buf[pos + 7] = f8b[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;\r\n        /* istanbul ignore next */\r\n        exports.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;\r\n\r\n        function readDouble_f64_cpy(buf, pos) {\r\n            f8b[0] = buf[pos    ];\r\n            f8b[1] = buf[pos + 1];\r\n            f8b[2] = buf[pos + 2];\r\n            f8b[3] = buf[pos + 3];\r\n            f8b[4] = buf[pos + 4];\r\n            f8b[5] = buf[pos + 5];\r\n            f8b[6] = buf[pos + 6];\r\n            f8b[7] = buf[pos + 7];\r\n            return f64[0];\r\n        }\r\n\r\n        function readDouble_f64_rev(buf, pos) {\r\n            f8b[7] = buf[pos    ];\r\n            f8b[6] = buf[pos + 1];\r\n            f8b[5] = buf[pos + 2];\r\n            f8b[4] = buf[pos + 3];\r\n            f8b[3] = buf[pos + 4];\r\n            f8b[2] = buf[pos + 5];\r\n            f8b[1] = buf[pos + 6];\r\n            f8b[0] = buf[pos + 7];\r\n            return f64[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;\r\n        /* istanbul ignore next */\r\n        exports.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;\r\n\r\n    // double: ieee754\r\n    })(); else (function() {\r\n\r\n        function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {\r\n            var sign = val < 0 ? 1 : 0;\r\n            if (sign)\r\n                val = -val;\r\n            if (val === 0) {\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos + off1);\r\n            } else if (isNaN(val)) {\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint(2146959360, buf, pos + off1);\r\n            } else if (val > 1.7976931348623157e+308) { // +-Infinity\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);\r\n            } else {\r\n                var mantissa;\r\n                if (val < 2.2250738585072014e-308) { // denormal\r\n                    mantissa = val / 5e-324;\r\n                    writeUint(mantissa >>> 0, buf, pos + off0);\r\n                    writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);\r\n                } else {\r\n                    var exponent = Math.floor(Math.log(val) / Math.LN2);\r\n                    if (exponent === 1024)\r\n                        exponent = 1023;\r\n                    mantissa = val * Math.pow(2, -exponent);\r\n                    writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);\r\n                    writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);\r\n                }\r\n            }\r\n        }\r\n\r\n        exports.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);\r\n        exports.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);\r\n\r\n        function readDouble_ieee754(readUint, off0, off1, buf, pos) {\r\n            var lo = readUint(buf, pos + off0),\r\n                hi = readUint(buf, pos + off1);\r\n            var sign = (hi >> 31) * 2 + 1,\r\n                exponent = hi >>> 20 & 2047,\r\n                mantissa = 4294967296 * (hi & 1048575) + lo;\r\n            return exponent === 2047\r\n                ? mantissa\r\n                ? NaN\r\n                : sign * Infinity\r\n                : exponent === 0 // denormal\r\n                ? sign * 5e-324 * mantissa\r\n                : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);\r\n        }\r\n\r\n        exports.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);\r\n        exports.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);\r\n\r\n    })();\r\n\r\n    return exports;\r\n}\r\n\r\n// uint helpers\r\n\r\nfunction writeUintLE(val, buf, pos) {\r\n    buf[pos    ] =  val        & 255;\r\n    buf[pos + 1] =  val >>> 8  & 255;\r\n    buf[pos + 2] =  val >>> 16 & 255;\r\n    buf[pos + 3] =  val >>> 24;\r\n}\r\n\r\nfunction writeUintBE(val, buf, pos) {\r\n    buf[pos    ] =  val >>> 24;\r\n    buf[pos + 1] =  val >>> 16 & 255;\r\n    buf[pos + 2] =  val >>> 8  & 255;\r\n    buf[pos + 3] =  val        & 255;\r\n}\r\n\r\nfunction readUintLE(buf, pos) {\r\n    return (buf[pos    ]\r\n          | buf[pos + 1] << 8\r\n          | buf[pos + 2] << 16\r\n          | buf[pos + 3] << 24) >>> 0;\r\n}\r\n\r\nfunction readUintBE(buf, pos) {\r\n    return (buf[pos    ] << 24\r\n          | buf[pos + 1] << 16\r\n          | buf[pos + 2] << 8\r\n          | buf[pos + 3]) >>> 0;\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 22167, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40protobufjs/inquire/index.js"],"sourcesContent":["\"use strict\";\r\nmodule.exports = inquire;\r\n\r\n/**\r\n * Requires a module only if available.\r\n * @memberof util\r\n * @param {string} moduleName Module to require\r\n * @returns {?Object} Required module if available and not empty, otherwise `null`\r\n */\r\nfunction inquire(moduleName) {\r\n    try {\r\n        var mod = eval(\"quire\".replace(/^/,\"re\"))(moduleName); // eslint-disable-line no-eval\r\n        if (mod && (mod.length || Object.keys(mod).length))\r\n            return mod;\r\n    } catch (e) {} // eslint-disable-line no-empty\r\n    return null;\r\n}\r\n"],"names":[],"mappings":"AACA,OAAO,OAAO,GAAG;AAEjB;;;;;CAKC,GACD,SAAS,QAAQ,UAAU;IACvB,IAAI;QACA,IAAI,MAAM,KAAK,QAAQ,OAAO,CAAC,KAAI,OAAO,aAAa,8BAA8B;QACrF,IAAI,OAAO,CAAC,IAAI,MAAM,IAAI,OAAO,IAAI,CAAC,KAAK,MAAM,GAC7C,OAAO;IACf,EAAE,OAAO,GAAG,CAAC,EAAE,+BAA+B;IAC9C,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 22184, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40protobufjs/utf8/index.js"],"sourcesContent":["\"use strict\";\r\n\r\n/**\r\n * A minimal UTF8 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar utf8 = exports;\r\n\r\n/**\r\n * Calculates the UTF8 byte length of a string.\r\n * @param {string} string String\r\n * @returns {number} Byte length\r\n */\r\nutf8.length = function utf8_length(string) {\r\n    var len = 0,\r\n        c = 0;\r\n    for (var i = 0; i < string.length; ++i) {\r\n        c = string.charCodeAt(i);\r\n        if (c < 128)\r\n            len += 1;\r\n        else if (c < 2048)\r\n            len += 2;\r\n        else if ((c & 0xFC00) === 0xD800 && (string.charCodeAt(i + 1) & 0xFC00) === 0xDC00) {\r\n            ++i;\r\n            len += 4;\r\n        } else\r\n            len += 3;\r\n    }\r\n    return len;\r\n};\r\n\r\n/**\r\n * Reads UTF8 bytes as a string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} String read\r\n */\r\nutf8.read = function utf8_read(buffer, start, end) {\r\n    var len = end - start;\r\n    if (len < 1)\r\n        return \"\";\r\n    var parts = null,\r\n        chunk = [],\r\n        i = 0, // char offset\r\n        t;     // temporary\r\n    while (start < end) {\r\n        t = buffer[start++];\r\n        if (t < 128)\r\n            chunk[i++] = t;\r\n        else if (t > 191 && t < 224)\r\n            chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;\r\n        else if (t > 239 && t < 365) {\r\n            t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 0x10000;\r\n            chunk[i++] = 0xD800 + (t >> 10);\r\n            chunk[i++] = 0xDC00 + (t & 1023);\r\n        } else\r\n            chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;\r\n        if (i > 8191) {\r\n            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n            i = 0;\r\n        }\r\n    }\r\n    if (parts) {\r\n        if (i)\r\n            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n        return parts.join(\"\");\r\n    }\r\n    return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\n/**\r\n * Writes a string as UTF8 bytes.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Bytes written\r\n */\r\nutf8.write = function utf8_write(string, buffer, offset) {\r\n    var start = offset,\r\n        c1, // character 1\r\n        c2; // character 2\r\n    for (var i = 0; i < string.length; ++i) {\r\n        c1 = string.charCodeAt(i);\r\n        if (c1 < 128) {\r\n            buffer[offset++] = c1;\r\n        } else if (c1 < 2048) {\r\n            buffer[offset++] = c1 >> 6       | 192;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        } else if ((c1 & 0xFC00) === 0xD800 && ((c2 = string.charCodeAt(i + 1)) & 0xFC00) === 0xDC00) {\r\n            c1 = 0x10000 + ((c1 & 0x03FF) << 10) + (c2 & 0x03FF);\r\n            ++i;\r\n            buffer[offset++] = c1 >> 18      | 240;\r\n            buffer[offset++] = c1 >> 12 & 63 | 128;\r\n            buffer[offset++] = c1 >> 6  & 63 | 128;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        } else {\r\n            buffer[offset++] = c1 >> 12      | 224;\r\n            buffer[offset++] = c1 >> 6  & 63 | 128;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        }\r\n    }\r\n    return offset - start;\r\n};\r\n"],"names":[],"mappings":"AAEA;;;;CAIC,GACD,IAAI,OAAO;AAEX;;;;CAIC,GACD,KAAK,MAAM,GAAG,SAAS,YAAY,MAAM;IACrC,IAAI,MAAM,GACN,IAAI;IACR,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,EAAE,EAAG;QACpC,IAAI,OAAO,UAAU,CAAC;QACtB,IAAI,IAAI,KACJ,OAAO;aACN,IAAI,IAAI,MACT,OAAO;aACN,IAAI,CAAC,IAAI,MAAM,MAAM,UAAU,CAAC,OAAO,UAAU,CAAC,IAAI,KAAK,MAAM,MAAM,QAAQ;YAChF,EAAE;YACF,OAAO;QACX,OACI,OAAO;IACf;IACA,OAAO;AACX;AAEA;;;;;;CAMC,GACD,KAAK,IAAI,GAAG,SAAS,UAAU,MAAM,EAAE,KAAK,EAAE,GAAG;IAC7C,IAAI,MAAM,MAAM;IAChB,IAAI,MAAM,GACN,OAAO;IACX,IAAI,QAAQ,MACR,QAAQ,EAAE,EACV,IAAI,GACJ,GAAO,YAAY;IACvB,MAAO,QAAQ,IAAK;QAChB,IAAI,MAAM,CAAC,QAAQ;QACnB,IAAI,IAAI,KACJ,KAAK,CAAC,IAAI,GAAG;aACZ,IAAI,IAAI,OAAO,IAAI,KACpB,KAAK,CAAC,IAAI,GAAG,CAAC,IAAI,EAAE,KAAK,IAAI,MAAM,CAAC,QAAQ,GAAG;aAC9C,IAAI,IAAI,OAAO,IAAI,KAAK;YACzB,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,EAAE,KAAK,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,EAAE,KAAK,IAAI,MAAM,CAAC,QAAQ,GAAG,EAAE,IAAI;YAC1G,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC,KAAK,EAAE;YAC9B,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC,IAAI,IAAI;QACnC,OACI,KAAK,CAAC,IAAI,GAAG,CAAC,IAAI,EAAE,KAAK,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,EAAE,KAAK,IAAI,MAAM,CAAC,QAAQ,GAAG;QAClF,IAAI,IAAI,MAAM;YACV,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,YAAY,CAAC,KAAK,CAAC,QAAQ;YAC/D,IAAI;QACR;IACJ;IACA,IAAI,OAAO;QACP,IAAI,GACA,MAAM,IAAI,CAAC,OAAO,YAAY,CAAC,KAAK,CAAC,QAAQ,MAAM,KAAK,CAAC,GAAG;QAChE,OAAO,MAAM,IAAI,CAAC;IACtB;IACA,OAAO,OAAO,YAAY,CAAC,KAAK,CAAC,QAAQ,MAAM,KAAK,CAAC,GAAG;AAC5D;AAEA;;;;;;CAMC,GACD,KAAK,KAAK,GAAG,SAAS,WAAW,MAAM,EAAE,MAAM,EAAE,MAAM;IACnD,IAAI,QAAQ,QACR,IACA,IAAI,cAAc;IACtB,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,EAAE,EAAG;QACpC,KAAK,OAAO,UAAU,CAAC;QACvB,IAAI,KAAK,KAAK;YACV,MAAM,CAAC,SAAS,GAAG;QACvB,OAAO,IAAI,KAAK,MAAM;YAClB,MAAM,CAAC,SAAS,GAAG,MAAM,IAAU;YACnC,MAAM,CAAC,SAAS,GAAG,KAAW,KAAK;QACvC,OAAO,IAAI,CAAC,KAAK,MAAM,MAAM,UAAU,CAAC,CAAC,KAAK,OAAO,UAAU,CAAC,IAAI,EAAE,IAAI,MAAM,MAAM,QAAQ;YAC1F,KAAK,UAAU,CAAC,CAAC,KAAK,MAAM,KAAK,EAAE,IAAI,CAAC,KAAK,MAAM;YACnD,EAAE;YACF,MAAM,CAAC,SAAS,GAAG,MAAM,KAAU;YACnC,MAAM,CAAC,SAAS,GAAG,MAAM,KAAK,KAAK;YACnC,MAAM,CAAC,SAAS,GAAG,MAAM,IAAK,KAAK;YACnC,MAAM,CAAC,SAAS,GAAG,KAAW,KAAK;QACvC,OAAO;YACH,MAAM,CAAC,SAAS,GAAG,MAAM,KAAU;YACnC,MAAM,CAAC,SAAS,GAAG,MAAM,IAAK,KAAK;YACnC,MAAM,CAAC,SAAS,GAAG,KAAW,KAAK;QACvC;IACJ;IACA,OAAO,SAAS;AACpB","ignoreList":[0]}},
    {"offset": {"line": 22270, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40protobufjs/pool/index.js"],"sourcesContent":["\"use strict\";\r\nmodule.exports = pool;\r\n\r\n/**\r\n * An allocator as used by {@link util.pool}.\r\n * @typedef PoolAllocator\r\n * @type {function}\r\n * @param {number} size Buffer size\r\n * @returns {Uint8Array} Buffer\r\n */\r\n\r\n/**\r\n * A slicer as used by {@link util.pool}.\r\n * @typedef PoolSlicer\r\n * @type {function}\r\n * @param {number} start Start offset\r\n * @param {number} end End offset\r\n * @returns {Uint8Array} Buffer slice\r\n * @this {Uint8Array}\r\n */\r\n\r\n/**\r\n * A general purpose buffer pool.\r\n * @memberof util\r\n * @function\r\n * @param {PoolAllocator} alloc Allocator\r\n * @param {PoolSlicer} slice Slicer\r\n * @param {number} [size=8192] Slab size\r\n * @returns {PoolAllocator} Pooled allocator\r\n */\r\nfunction pool(alloc, slice, size) {\r\n    var SIZE   = size || 8192;\r\n    var MAX    = SIZE >>> 1;\r\n    var slab   = null;\r\n    var offset = SIZE;\r\n    return function pool_alloc(size) {\r\n        if (size < 1 || size > MAX)\r\n            return alloc(size);\r\n        if (offset + size > SIZE) {\r\n            slab = alloc(SIZE);\r\n            offset = 0;\r\n        }\r\n        var buf = slice.call(slab, offset, offset += size);\r\n        if (offset & 7) // align to 32 bit\r\n            offset = (offset | 7) + 1;\r\n        return buf;\r\n    };\r\n}\r\n"],"names":[],"mappings":"AACA,OAAO,OAAO,GAAG;AAEjB;;;;;;CAMC,GAED;;;;;;;;CAQC,GAED;;;;;;;;CAQC,GACD,SAAS,KAAK,KAAK,EAAE,KAAK,EAAE,IAAI;IAC5B,IAAI,OAAS,QAAQ;IACrB,IAAI,MAAS,SAAS;IACtB,IAAI,OAAS;IACb,IAAI,SAAS;IACb,OAAO,SAAS,WAAW,IAAI;QAC3B,IAAI,OAAO,KAAK,OAAO,KACnB,OAAO,MAAM;QACjB,IAAI,SAAS,OAAO,MAAM;YACtB,OAAO,MAAM;YACb,SAAS;QACb;QACA,IAAI,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ,UAAU;QAC7C,IAAI,SAAS,GACT,SAAS,CAAC,SAAS,CAAC,IAAI;QAC5B,OAAO;IACX;AACJ","ignoreList":[0]}},
    {"offset": {"line": 22313, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/util/longbits.js"],"sourcesContent":["\"use strict\";\nmodule.exports = LongBits;\n\nvar util = require(\"../util/minimal\");\n\n/**\n * Constructs new long bits.\n * @classdesc Helper class for working with the low and high bits of a 64 bit value.\n * @memberof util\n * @constructor\n * @param {number} lo Low 32 bits, unsigned\n * @param {number} hi High 32 bits, unsigned\n */\nfunction LongBits(lo, hi) {\n\n    // note that the casts below are theoretically unnecessary as of today, but older statically\n    // generated converter code might still call the ctor with signed 32bits. kept for compat.\n\n    /**\n     * Low bits.\n     * @type {number}\n     */\n    this.lo = lo >>> 0;\n\n    /**\n     * High bits.\n     * @type {number}\n     */\n    this.hi = hi >>> 0;\n}\n\n/**\n * Zero bits.\n * @memberof util.LongBits\n * @type {util.LongBits}\n */\nvar zero = LongBits.zero = new LongBits(0, 0);\n\nzero.toNumber = function() { return 0; };\nzero.zzEncode = zero.zzDecode = function() { return this; };\nzero.length = function() { return 1; };\n\n/**\n * Zero hash.\n * @memberof util.LongBits\n * @type {string}\n */\nvar zeroHash = LongBits.zeroHash = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\n\n/**\n * Constructs new long bits from the specified number.\n * @param {number} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.fromNumber = function fromNumber(value) {\n    if (value === 0)\n        return zero;\n    var sign = value < 0;\n    if (sign)\n        value = -value;\n    var lo = value >>> 0,\n        hi = (value - lo) / 4294967296 >>> 0;\n    if (sign) {\n        hi = ~hi >>> 0;\n        lo = ~lo >>> 0;\n        if (++lo > 4294967295) {\n            lo = 0;\n            if (++hi > 4294967295)\n                hi = 0;\n        }\n    }\n    return new LongBits(lo, hi);\n};\n\n/**\n * Constructs new long bits from a number, long or string.\n * @param {Long|number|string} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.from = function from(value) {\n    if (typeof value === \"number\")\n        return LongBits.fromNumber(value);\n    if (util.isString(value)) {\n        /* istanbul ignore else */\n        if (util.Long)\n            value = util.Long.fromString(value);\n        else\n            return LongBits.fromNumber(parseInt(value, 10));\n    }\n    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;\n};\n\n/**\n * Converts this long bits to a possibly unsafe JavaScript number.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {number} Possibly unsafe number\n */\nLongBits.prototype.toNumber = function toNumber(unsigned) {\n    if (!unsigned && this.hi >>> 31) {\n        var lo = ~this.lo + 1 >>> 0,\n            hi = ~this.hi     >>> 0;\n        if (!lo)\n            hi = hi + 1 >>> 0;\n        return -(lo + hi * 4294967296);\n    }\n    return this.lo + this.hi * 4294967296;\n};\n\n/**\n * Converts this long bits to a long.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long} Long\n */\nLongBits.prototype.toLong = function toLong(unsigned) {\n    return util.Long\n        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))\n        /* istanbul ignore next */\n        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };\n};\n\nvar charCodeAt = String.prototype.charCodeAt;\n\n/**\n * Constructs new long bits from the specified 8 characters long hash.\n * @param {string} hash Hash\n * @returns {util.LongBits} Bits\n */\nLongBits.fromHash = function fromHash(hash) {\n    if (hash === zeroHash)\n        return zero;\n    return new LongBits(\n        ( charCodeAt.call(hash, 0)\n        | charCodeAt.call(hash, 1) << 8\n        | charCodeAt.call(hash, 2) << 16\n        | charCodeAt.call(hash, 3) << 24) >>> 0\n    ,\n        ( charCodeAt.call(hash, 4)\n        | charCodeAt.call(hash, 5) << 8\n        | charCodeAt.call(hash, 6) << 16\n        | charCodeAt.call(hash, 7) << 24) >>> 0\n    );\n};\n\n/**\n * Converts this long bits to a 8 characters long hash.\n * @returns {string} Hash\n */\nLongBits.prototype.toHash = function toHash() {\n    return String.fromCharCode(\n        this.lo        & 255,\n        this.lo >>> 8  & 255,\n        this.lo >>> 16 & 255,\n        this.lo >>> 24      ,\n        this.hi        & 255,\n        this.hi >>> 8  & 255,\n        this.hi >>> 16 & 255,\n        this.hi >>> 24\n    );\n};\n\n/**\n * Zig-zag encodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzEncode = function zzEncode() {\n    var mask =   this.hi >> 31;\n    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;\n    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Zig-zag decodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzDecode = function zzDecode() {\n    var mask = -(this.lo & 1);\n    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;\n    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Calculates the length of this longbits when encoded as a varint.\n * @returns {number} Length\n */\nLongBits.prototype.length = function length() {\n    var part0 =  this.lo,\n        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,\n        part2 =  this.hi >>> 24;\n    return part2 === 0\n         ? part1 === 0\n           ? part0 < 16384\n             ? part0 < 128 ? 1 : 2\n             : part0 < 2097152 ? 3 : 4\n           : part1 < 16384\n             ? part1 < 128 ? 5 : 6\n             : part1 < 2097152 ? 7 : 8\n         : part2 < 128 ? 9 : 10;\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 22451, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/util/minimal.js"],"sourcesContent":["\"use strict\";\nvar util = exports;\n\n// used to return a Promise where callback is omitted\nutil.asPromise = require(\"@protobufjs/aspromise\");\n\n// converts to / from base64 encoded strings\nutil.base64 = require(\"@protobufjs/base64\");\n\n// base class of rpc.Service\nutil.EventEmitter = require(\"@protobufjs/eventemitter\");\n\n// float handling accross browsers\nutil.float = require(\"@protobufjs/float\");\n\n// requires modules optionally and hides the call from bundlers\nutil.inquire = require(\"@protobufjs/inquire\");\n\n// converts to / from utf8 encoded strings\nutil.utf8 = require(\"@protobufjs/utf8\");\n\n// provides a node-like buffer pool in the browser\nutil.pool = require(\"@protobufjs/pool\");\n\n// utility to work with the low and high bits of a 64 bit value\nutil.LongBits = require(\"./longbits\");\n\n/**\n * Whether running within node or not.\n * @memberof util\n * @type {boolean}\n */\nutil.isNode = Boolean(typeof global !== \"undefined\"\n                   && global\n                   && global.process\n                   && global.process.versions\n                   && global.process.versions.node);\n\n/**\n * Global object reference.\n * @memberof util\n * @type {Object}\n */\nutil.global = util.isNode && global\n           || typeof window !== \"undefined\" && window\n           || typeof self   !== \"undefined\" && self\n           || this; // eslint-disable-line no-invalid-this\n\n/**\n * An immuable empty array.\n * @memberof util\n * @type {Array.<*>}\n * @const\n */\nutil.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes\n\n/**\n * An immutable empty object.\n * @type {Object}\n * @const\n */\nutil.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes\n\n/**\n * Tests if the specified value is an integer.\n * @function\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is an integer\n */\nutil.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {\n    return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n};\n\n/**\n * Tests if the specified value is a string.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a string\n */\nutil.isString = function isString(value) {\n    return typeof value === \"string\" || value instanceof String;\n};\n\n/**\n * Tests if the specified value is a non-null object.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a non-null object\n */\nutil.isObject = function isObject(value) {\n    return value && typeof value === \"object\";\n};\n\n/**\n * Checks if a property on a message is considered to be present.\n * This is an alias of {@link util.isSet}.\n * @function\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isset =\n\n/**\n * Checks if a property on a message is considered to be present.\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isSet = function isSet(obj, prop) {\n    var value = obj[prop];\n    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins\n        return typeof value !== \"object\" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;\n    return false;\n};\n\n/**\n * Any compatible Buffer instance.\n * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.\n * @interface Buffer\n * @extends Uint8Array\n */\n\n/**\n * Node's Buffer class if available.\n * @type {Constructor<Buffer>}\n */\nutil.Buffer = (function() {\n    try {\n        var Buffer = util.inquire(\"buffer\").Buffer;\n        // refuse to use non-node buffers if not explicitly assigned (perf reasons):\n        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;\n    } catch (e) {\n        /* istanbul ignore next */\n        return null;\n    }\n})();\n\n// Internal alias of or polyfull for Buffer.from.\nutil._Buffer_from = null;\n\n// Internal alias of or polyfill for Buffer.allocUnsafe.\nutil._Buffer_allocUnsafe = null;\n\n/**\n * Creates a new buffer of whatever type supported by the environment.\n * @param {number|number[]} [sizeOrArray=0] Buffer size or number array\n * @returns {Uint8Array|Buffer} Buffer\n */\nutil.newBuffer = function newBuffer(sizeOrArray) {\n    /* istanbul ignore next */\n    return typeof sizeOrArray === \"number\"\n        ? util.Buffer\n            ? util._Buffer_allocUnsafe(sizeOrArray)\n            : new util.Array(sizeOrArray)\n        : util.Buffer\n            ? util._Buffer_from(sizeOrArray)\n            : typeof Uint8Array === \"undefined\"\n                ? sizeOrArray\n                : new Uint8Array(sizeOrArray);\n};\n\n/**\n * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.\n * @type {Constructor<Uint8Array>}\n */\nutil.Array = typeof Uint8Array !== \"undefined\" ? Uint8Array /* istanbul ignore next */ : Array;\n\n/**\n * Any compatible Long instance.\n * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.\n * @interface Long\n * @property {number} low Low bits\n * @property {number} high High bits\n * @property {boolean} unsigned Whether unsigned or not\n */\n\n/**\n * Long.js's Long class if available.\n * @type {Constructor<Long>}\n */\nutil.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long\n         || /* istanbul ignore next */ util.global.Long\n         || util.inquire(\"long\");\n\n/**\n * Regular expression used to verify 2 bit (`bool`) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key2Re = /^true|false|0|1$/;\n\n/**\n * Regular expression used to verify 32 bit (`int32` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key32Re = /^-?(?:0|[1-9][0-9]*)$/;\n\n/**\n * Regular expression used to verify 64 bit (`int64` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key64Re = /^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;\n\n/**\n * Converts a number or long to an 8 characters long hash string.\n * @param {Long|number} value Value to convert\n * @returns {string} Hash\n */\nutil.longToHash = function longToHash(value) {\n    return value\n        ? util.LongBits.from(value).toHash()\n        : util.LongBits.zeroHash;\n};\n\n/**\n * Converts an 8 characters long hash string to a long or number.\n * @param {string} hash Hash\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long|number} Original value\n */\nutil.longFromHash = function longFromHash(hash, unsigned) {\n    var bits = util.LongBits.fromHash(hash);\n    if (util.Long)\n        return util.Long.fromBits(bits.lo, bits.hi, unsigned);\n    return bits.toNumber(Boolean(unsigned));\n};\n\n/**\n * Merges the properties of the source object into the destination object.\n * @memberof util\n * @param {Object.<string,*>} dst Destination object\n * @param {Object.<string,*>} src Source object\n * @param {boolean} [ifNotSet=false] Merges only if the key is not already set\n * @returns {Object.<string,*>} Destination object\n */\nfunction merge(dst, src, ifNotSet) { // used by converters\n    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)\n        if (dst[keys[i]] === undefined || !ifNotSet)\n            dst[keys[i]] = src[keys[i]];\n    return dst;\n}\n\nutil.merge = merge;\n\n/**\n * Converts the first character of a string to lower case.\n * @param {string} str String to convert\n * @returns {string} Converted string\n */\nutil.lcFirst = function lcFirst(str) {\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\n\n/**\n * Creates a custom error constructor.\n * @memberof util\n * @param {string} name Error name\n * @returns {Constructor<Error>} Custom error constructor\n */\nfunction newError(name) {\n\n    function CustomError(message, properties) {\n\n        if (!(this instanceof CustomError))\n            return new CustomError(message, properties);\n\n        // Error.call(this, message);\n        // ^ just returns a new error instance because the ctor can be called as a function\n\n        Object.defineProperty(this, \"message\", { get: function() { return message; } });\n\n        /* istanbul ignore next */\n        if (Error.captureStackTrace) // node\n            Error.captureStackTrace(this, CustomError);\n        else\n            Object.defineProperty(this, \"stack\", { value: new Error().stack || \"\" });\n\n        if (properties)\n            merge(this, properties);\n    }\n\n    CustomError.prototype = Object.create(Error.prototype, {\n        constructor: {\n            value: CustomError,\n            writable: true,\n            enumerable: false,\n            configurable: true,\n        },\n        name: {\n            get: function get() { return name; },\n            set: undefined,\n            enumerable: false,\n            // configurable: false would accurately preserve the behavior of\n            // the original, but I'm guessing that was not intentional.\n            // For an actual error subclass, this property would\n            // be configurable.\n            configurable: true,\n        },\n        toString: {\n            value: function value() { return this.name + \": \" + this.message; },\n            writable: true,\n            enumerable: false,\n            configurable: true,\n        },\n    });\n\n    return CustomError;\n}\n\nutil.newError = newError;\n\n/**\n * Constructs a new protocol error.\n * @classdesc Error subclass indicating a protocol specifc error.\n * @memberof util\n * @extends Error\n * @template T extends Message<T>\n * @constructor\n * @param {string} message Error message\n * @param {Object.<string,*>} [properties] Additional properties\n * @example\n * try {\n *     MyMessage.decode(someBuffer); // throws if required fields are missing\n * } catch (e) {\n *     if (e instanceof ProtocolError && e.instance)\n *         console.log(\"decoded so far: \" + JSON.stringify(e.instance));\n * }\n */\nutil.ProtocolError = newError(\"ProtocolError\");\n\n/**\n * So far decoded message instance.\n * @name util.ProtocolError#instance\n * @type {Message<T>}\n */\n\n/**\n * A OneOf getter as returned by {@link util.oneOfGetter}.\n * @typedef OneOfGetter\n * @type {function}\n * @returns {string|undefined} Set field name, if any\n */\n\n/**\n * Builds a getter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfGetter} Unbound getter\n */\nutil.oneOfGetter = function getOneOf(fieldNames) {\n    var fieldMap = {};\n    for (var i = 0; i < fieldNames.length; ++i)\n        fieldMap[fieldNames[i]] = 1;\n\n    /**\n     * @returns {string|undefined} Set field name, if any\n     * @this Object\n     * @ignore\n     */\n    return function() { // eslint-disable-line consistent-return\n        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)\n            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)\n                return keys[i];\n    };\n};\n\n/**\n * A OneOf setter as returned by {@link util.oneOfSetter}.\n * @typedef OneOfSetter\n * @type {function}\n * @param {string|undefined} value Field name\n * @returns {undefined}\n */\n\n/**\n * Builds a setter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfSetter} Unbound setter\n */\nutil.oneOfSetter = function setOneOf(fieldNames) {\n\n    /**\n     * @param {string} name Field name\n     * @returns {undefined}\n     * @this Object\n     * @ignore\n     */\n    return function(name) {\n        for (var i = 0; i < fieldNames.length; ++i)\n            if (fieldNames[i] !== name)\n                delete this[fieldNames[i]];\n    };\n};\n\n/**\n * Default conversion options used for {@link Message#toJSON} implementations.\n *\n * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:\n *\n * - Longs become strings\n * - Enums become string keys\n * - Bytes become base64 encoded strings\n * - (Sub-)Messages become plain objects\n * - Maps become plain objects with all string keys\n * - Repeated fields become arrays\n * - NaN and Infinity for float and double fields become strings\n *\n * @type {IConversionOptions}\n * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json\n */\nutil.toJSONOptions = {\n    longs: String,\n    enums: String,\n    bytes: String,\n    json: true\n};\n\n// Sets up buffer utility according to the environment (called in index-minimal)\nutil._configure = function() {\n    var Buffer = util.Buffer;\n    /* istanbul ignore if */\n    if (!Buffer) {\n        util._Buffer_from = util._Buffer_allocUnsafe = null;\n        return;\n    }\n    // because node 4.x buffers are incompatible & immutable\n    // see: https://github.com/dcodeIO/protobuf.js/pull/665\n    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||\n        /* istanbul ignore next */\n        function Buffer_from(value, encoding) {\n            return new Buffer(value, encoding);\n        };\n    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||\n        /* istanbul ignore next */\n        function Buffer_allocUnsafe(size) {\n            return new Buffer(size);\n        };\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 22776, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/writer.js"],"sourcesContent":["\"use strict\";\nmodule.exports = Writer;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferWriter; // cyclic\n\nvar LongBits  = util.LongBits,\n    base64    = util.base64,\n    utf8      = util.utf8;\n\n/**\n * Constructs a new writer operation instance.\n * @classdesc Scheduled writer operation.\n * @constructor\n * @param {function(*, Uint8Array, number)} fn Function to call\n * @param {number} len Value byte length\n * @param {*} val Value to write\n * @ignore\n */\nfunction Op(fn, len, val) {\n\n    /**\n     * Function to call.\n     * @type {function(Uint8Array, number, *)}\n     */\n    this.fn = fn;\n\n    /**\n     * Value byte length.\n     * @type {number}\n     */\n    this.len = len;\n\n    /**\n     * Next operation.\n     * @type {Writer.Op|undefined}\n     */\n    this.next = undefined;\n\n    /**\n     * Value to write.\n     * @type {*}\n     */\n    this.val = val; // type varies\n}\n\n/* istanbul ignore next */\nfunction noop() {} // eslint-disable-line no-empty-function\n\n/**\n * Constructs a new writer state instance.\n * @classdesc Copied writer state.\n * @memberof Writer\n * @constructor\n * @param {Writer} writer Writer to copy state from\n * @ignore\n */\nfunction State(writer) {\n\n    /**\n     * Current head.\n     * @type {Writer.Op}\n     */\n    this.head = writer.head;\n\n    /**\n     * Current tail.\n     * @type {Writer.Op}\n     */\n    this.tail = writer.tail;\n\n    /**\n     * Current buffer length.\n     * @type {number}\n     */\n    this.len = writer.len;\n\n    /**\n     * Next state.\n     * @type {State|null}\n     */\n    this.next = writer.states;\n}\n\n/**\n * Constructs a new writer instance.\n * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n */\nfunction Writer() {\n\n    /**\n     * Current length.\n     * @type {number}\n     */\n    this.len = 0;\n\n    /**\n     * Operations head.\n     * @type {Object}\n     */\n    this.head = new Op(noop, 0, 0);\n\n    /**\n     * Operations tail\n     * @type {Object}\n     */\n    this.tail = this.head;\n\n    /**\n     * Linked forked states.\n     * @type {Object|null}\n     */\n    this.states = null;\n\n    // When a value is written, the writer calculates its byte length and puts it into a linked\n    // list of operations to perform when finish() is called. This both allows us to allocate\n    // buffers of the exact required size and reduces the amount of work we have to do compared\n    // to first calculating over objects and then encoding over objects. In our case, the encoding\n    // part is just a linked list walk calling operations with already prepared values.\n}\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup() {\n            return (Writer.create = function create_buffer() {\n                return new BufferWriter();\n            })();\n        }\n        /* istanbul ignore next */\n        : function create_array() {\n            return new Writer();\n        };\n};\n\n/**\n * Creates a new writer.\n * @function\n * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}\n */\nWriter.create = create();\n\n/**\n * Allocates a buffer of the specified size.\n * @param {number} size Buffer size\n * @returns {Uint8Array} Buffer\n */\nWriter.alloc = function alloc(size) {\n    return new util.Array(size);\n};\n\n// Use Uint8Array buffer pool in the browser, just like node does with buffers\n/* istanbul ignore else */\nif (util.Array !== Array)\n    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);\n\n/**\n * Pushes a new operation to the queue.\n * @param {function(Uint8Array, number, *)} fn Function to call\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @returns {Writer} `this`\n * @private\n */\nWriter.prototype._push = function push(fn, len, val) {\n    this.tail = this.tail.next = new Op(fn, len, val);\n    this.len += len;\n    return this;\n};\n\nfunction writeByte(val, buf, pos) {\n    buf[pos] = val & 255;\n}\n\nfunction writeVarint32(val, buf, pos) {\n    while (val > 127) {\n        buf[pos++] = val & 127 | 128;\n        val >>>= 7;\n    }\n    buf[pos] = val;\n}\n\n/**\n * Constructs a new varint writer operation instance.\n * @classdesc Scheduled varint writer operation.\n * @extends Op\n * @constructor\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @ignore\n */\nfunction VarintOp(len, val) {\n    this.len = len;\n    this.next = undefined;\n    this.val = val;\n}\n\nVarintOp.prototype = Object.create(Op.prototype);\nVarintOp.prototype.fn = writeVarint32;\n\n/**\n * Writes an unsigned 32 bit value as a varint.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.uint32 = function write_uint32(value) {\n    // here, the call to this.push has been inlined and a varint specific Op subclass is used.\n    // uint32 is by far the most frequently used operation and benefits significantly from this.\n    this.len += (this.tail = this.tail.next = new VarintOp(\n        (value = value >>> 0)\n                < 128       ? 1\n        : value < 16384     ? 2\n        : value < 2097152   ? 3\n        : value < 268435456 ? 4\n        :                     5,\n    value)).len;\n    return this;\n};\n\n/**\n * Writes a signed 32 bit value as a varint.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.int32 = function write_int32(value) {\n    return value < 0\n        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec\n        : this.uint32(value);\n};\n\n/**\n * Writes a 32 bit value as a varint, zig-zag encoded.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sint32 = function write_sint32(value) {\n    return this.uint32((value << 1 ^ value >> 31) >>> 0);\n};\n\nfunction writeVarint64(val, buf, pos) {\n    while (val.hi) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;\n        val.hi >>>= 7;\n    }\n    while (val.lo > 127) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = val.lo >>> 7;\n    }\n    buf[pos++] = val.lo;\n}\n\n/**\n * Writes an unsigned 64 bit value as a varint.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.uint64 = function write_uint64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a signed 64 bit value as a varint.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.int64 = Writer.prototype.uint64;\n\n/**\n * Writes a signed 64 bit value as a varint, zig-zag encoded.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sint64 = function write_sint64(value) {\n    var bits = LongBits.from(value).zzEncode();\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a boolish value as a varint.\n * @param {boolean} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bool = function write_bool(value) {\n    return this._push(writeByte, 1, value ? 1 : 0);\n};\n\nfunction writeFixed32(val, buf, pos) {\n    buf[pos    ] =  val         & 255;\n    buf[pos + 1] =  val >>> 8   & 255;\n    buf[pos + 2] =  val >>> 16  & 255;\n    buf[pos + 3] =  val >>> 24;\n}\n\n/**\n * Writes an unsigned 32 bit value as fixed 32 bits.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.fixed32 = function write_fixed32(value) {\n    return this._push(writeFixed32, 4, value >>> 0);\n};\n\n/**\n * Writes a signed 32 bit value as fixed 32 bits.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sfixed32 = Writer.prototype.fixed32;\n\n/**\n * Writes an unsigned 64 bit value as fixed 64 bits.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.fixed64 = function write_fixed64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);\n};\n\n/**\n * Writes a signed 64 bit value as fixed 64 bits.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sfixed64 = Writer.prototype.fixed64;\n\n/**\n * Writes a float (32 bit).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.float = function write_float(value) {\n    return this._push(util.float.writeFloatLE, 4, value);\n};\n\n/**\n * Writes a double (64 bit float).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.double = function write_double(value) {\n    return this._push(util.float.writeDoubleLE, 8, value);\n};\n\nvar writeBytes = util.Array.prototype.set\n    ? function writeBytes_set(val, buf, pos) {\n        buf.set(val, pos); // also works for plain array values\n    }\n    /* istanbul ignore next */\n    : function writeBytes_for(val, buf, pos) {\n        for (var i = 0; i < val.length; ++i)\n            buf[pos + i] = val[i];\n    };\n\n/**\n * Writes a sequence of bytes.\n * @param {Uint8Array|string} value Buffer or base64 encoded string to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bytes = function write_bytes(value) {\n    var len = value.length >>> 0;\n    if (!len)\n        return this._push(writeByte, 1, 0);\n    if (util.isString(value)) {\n        var buf = Writer.alloc(len = base64.length(value));\n        base64.decode(value, buf, 0);\n        value = buf;\n    }\n    return this.uint32(len)._push(writeBytes, len, value);\n};\n\n/**\n * Writes a string.\n * @param {string} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.string = function write_string(value) {\n    var len = utf8.length(value);\n    return len\n        ? this.uint32(len)._push(utf8.write, len, value)\n        : this._push(writeByte, 1, 0);\n};\n\n/**\n * Forks this writer's state by pushing it to a stack.\n * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.\n * @returns {Writer} `this`\n */\nWriter.prototype.fork = function fork() {\n    this.states = new State(this);\n    this.head = this.tail = new Op(noop, 0, 0);\n    this.len = 0;\n    return this;\n};\n\n/**\n * Resets this instance to the last state.\n * @returns {Writer} `this`\n */\nWriter.prototype.reset = function reset() {\n    if (this.states) {\n        this.head   = this.states.head;\n        this.tail   = this.states.tail;\n        this.len    = this.states.len;\n        this.states = this.states.next;\n    } else {\n        this.head = this.tail = new Op(noop, 0, 0);\n        this.len  = 0;\n    }\n    return this;\n};\n\n/**\n * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.\n * @returns {Writer} `this`\n */\nWriter.prototype.ldelim = function ldelim() {\n    var head = this.head,\n        tail = this.tail,\n        len  = this.len;\n    this.reset().uint32(len);\n    if (len) {\n        this.tail.next = head.next; // skip noop\n        this.tail = tail;\n        this.len += len;\n    }\n    return this;\n};\n\n/**\n * Finishes the write operation.\n * @returns {Uint8Array} Finished buffer\n */\nWriter.prototype.finish = function finish() {\n    var head = this.head.next, // skip noop\n        buf  = this.constructor.alloc(this.len),\n        pos  = 0;\n    while (head) {\n        head.fn(head.val, buf, pos);\n        pos += head.len;\n        head = head.next;\n    }\n    // this.head = this.tail = null;\n    return buf;\n};\n\nWriter._configure = function(BufferWriter_) {\n    BufferWriter = BufferWriter_;\n    Writer.create = create();\n    BufferWriter._configure();\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 23127, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/writer_buffer.js"],"sourcesContent":["\"use strict\";\nmodule.exports = BufferWriter;\n\n// extends Writer\nvar Writer = require(\"./writer\");\n(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer writer instance.\n * @classdesc Wire format writer using node buffers.\n * @extends Writer\n * @constructor\n */\nfunction BufferWriter() {\n    Writer.call(this);\n}\n\nBufferWriter._configure = function () {\n    /**\n     * Allocates a buffer of the specified size.\n     * @function\n     * @param {number} size Buffer size\n     * @returns {Buffer} Buffer\n     */\n    BufferWriter.alloc = util._Buffer_allocUnsafe;\n\n    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === \"set\"\n        ? function writeBytesBuffer_set(val, buf, pos) {\n          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)\n          // also works for plain array values\n        }\n        /* istanbul ignore next */\n        : function writeBytesBuffer_copy(val, buf, pos) {\n          if (val.copy) // Buffer values\n            val.copy(buf, pos, 0, val.length);\n          else for (var i = 0; i < val.length;) // plain array values\n            buf[pos++] = val[i++];\n        };\n};\n\n\n/**\n * @override\n */\nBufferWriter.prototype.bytes = function write_bytes_buffer(value) {\n    if (util.isString(value))\n        value = util._Buffer_from(value, \"base64\");\n    var len = value.length >>> 0;\n    this.uint32(len);\n    if (len)\n        this._push(BufferWriter.writeBytesBuffer, len, value);\n    return this;\n};\n\nfunction writeStringBuffer(val, buf, pos) {\n    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)\n        util.utf8.write(val, buf, pos);\n    else if (buf.utf8Write)\n        buf.utf8Write(val, pos);\n    else\n        buf.write(val, pos);\n}\n\n/**\n * @override\n */\nBufferWriter.prototype.string = function write_string_buffer(value) {\n    var len = util.Buffer.byteLength(value);\n    this.uint32(len);\n    if (len)\n        this._push(writeStringBuffer, len, value);\n    return this;\n};\n\n\n/**\n * Finishes the write operation.\n * @name BufferWriter#finish\n * @function\n * @returns {Buffer} Finished buffer\n */\n\nBufferWriter._configure();\n"],"names":[],"mappings":"AACA,OAAO,OAAO,GAAG;AAEjB,iBAAiB;AACjB,IAAI;AACJ,CAAC,aAAa,SAAS,GAAG,OAAO,MAAM,CAAC,OAAO,SAAS,CAAC,EAAE,WAAW,GAAG;AAEzE,IAAI;AAEJ;;;;;CAKC,GACD,SAAS;IACL,OAAO,IAAI,CAAC,IAAI;AACpB;AAEA,aAAa,UAAU,GAAG;IACtB;;;;;KAKC,GACD,aAAa,KAAK,GAAG,KAAK,mBAAmB;IAE7C,aAAa,gBAAgB,GAAG,KAAK,MAAM,IAAI,KAAK,MAAM,CAAC,SAAS,YAAY,cAAc,KAAK,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,KAAK,QAC3H,SAAS,qBAAqB,GAAG,EAAE,GAAG,EAAE,GAAG;QAC3C,IAAI,GAAG,CAAC,KAAK,MAAM,sGAAsG;IACzH,oCAAoC;IACtC,IAEE,SAAS,sBAAsB,GAAG,EAAE,GAAG,EAAE,GAAG;QAC5C,IAAI,IAAI,IAAI,EACV,IAAI,IAAI,CAAC,KAAK,KAAK,GAAG,IAAI,MAAM;aAC7B,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EACjC,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;IACzB;AACR;AAGA;;CAEC,GACD,aAAa,SAAS,CAAC,KAAK,GAAG,SAAS,mBAAmB,KAAK;IAC5D,IAAI,KAAK,QAAQ,CAAC,QACd,QAAQ,KAAK,YAAY,CAAC,OAAO;IACrC,IAAI,MAAM,MAAM,MAAM,KAAK;IAC3B,IAAI,CAAC,MAAM,CAAC;IACZ,IAAI,KACA,IAAI,CAAC,KAAK,CAAC,aAAa,gBAAgB,EAAE,KAAK;IACnD,OAAO,IAAI;AACf;AAEA,SAAS,kBAAkB,GAAG,EAAE,GAAG,EAAE,GAAG;IACpC,IAAI,IAAI,MAAM,GAAG,IACb,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK;SACzB,IAAI,IAAI,SAAS,EAClB,IAAI,SAAS,CAAC,KAAK;SAEnB,IAAI,KAAK,CAAC,KAAK;AACvB;AAEA;;CAEC,GACD,aAAa,SAAS,CAAC,MAAM,GAAG,SAAS,oBAAoB,KAAK;IAC9D,IAAI,MAAM,KAAK,MAAM,CAAC,UAAU,CAAC;IACjC,IAAI,CAAC,MAAM,CAAC;IACZ,IAAI,KACA,IAAI,CAAC,KAAK,CAAC,mBAAmB,KAAK;IACvC,OAAO,IAAI;AACf;AAGA;;;;;CAKC,GAED,aAAa,UAAU","ignoreList":[0]}},
    {"offset": {"line": 23187, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/reader.js"],"sourcesContent":["\"use strict\";\nmodule.exports = Reader;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferReader; // cyclic\n\nvar LongBits  = util.LongBits,\n    utf8      = util.utf8;\n\n/* istanbul ignore next */\nfunction indexOutOfRange(reader, writeLength) {\n    return RangeError(\"index out of range: \" + reader.pos + \" + \" + (writeLength || 1) + \" > \" + reader.len);\n}\n\n/**\n * Constructs a new reader instance using the specified buffer.\n * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n * @param {Uint8Array} buffer Buffer to read from\n */\nfunction Reader(buffer) {\n\n    /**\n     * Read buffer.\n     * @type {Uint8Array}\n     */\n    this.buf = buffer;\n\n    /**\n     * Read buffer position.\n     * @type {number}\n     */\n    this.pos = 0;\n\n    /**\n     * Read buffer length.\n     * @type {number}\n     */\n    this.len = buffer.length;\n}\n\nvar create_array = typeof Uint8Array !== \"undefined\"\n    ? function create_typed_array(buffer) {\n        if (buffer instanceof Uint8Array || Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    }\n    /* istanbul ignore next */\n    : function create_array(buffer) {\n        if (Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    };\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup(buffer) {\n            return (Reader.create = function create_buffer(buffer) {\n                return util.Buffer.isBuffer(buffer)\n                    ? new BufferReader(buffer)\n                    /* istanbul ignore next */\n                    : create_array(buffer);\n            })(buffer);\n        }\n        /* istanbul ignore next */\n        : create_array;\n};\n\n/**\n * Creates a new reader using the specified buffer.\n * @function\n * @param {Uint8Array|Buffer} buffer Buffer to read from\n * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}\n * @throws {Error} If `buffer` is not a valid buffer\n */\nReader.create = create();\n\nReader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;\n\n/**\n * Reads a varint as an unsigned 32 bit value.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.uint32 = (function read_uint32_setup() {\n    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)\n    return function read_uint32() {\n        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;\n\n        /* istanbul ignore if */\n        if ((this.pos += 5) > this.len) {\n            this.pos = this.len;\n            throw indexOutOfRange(this, 10);\n        }\n        return value;\n    };\n})();\n\n/**\n * Reads a varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.int32 = function read_int32() {\n    return this.uint32() | 0;\n};\n\n/**\n * Reads a zig-zag encoded varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.sint32 = function read_sint32() {\n    var value = this.uint32();\n    return value >>> 1 ^ -(value & 1) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readLongVarint() {\n    // tends to deopt with local vars for octet etc.\n    var bits = new LongBits(0, 0);\n    var i = 0;\n    if (this.len - this.pos > 4) { // fast route (lo)\n        for (; i < 4; ++i) {\n            // 1st..4th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 5th\n        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;\n        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;\n        if (this.buf[this.pos++] < 128)\n            return bits;\n        i = 0;\n    } else {\n        for (; i < 3; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 1st..3th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 4th\n        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;\n        return bits;\n    }\n    if (this.len - this.pos > 4) { // fast route (hi)\n        for (; i < 5; ++i) {\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    } else {\n        for (; i < 5; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    }\n    /* istanbul ignore next */\n    throw Error(\"invalid varint encoding\");\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads a varint as a signed 64 bit value.\n * @name Reader#int64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as an unsigned 64 bit value.\n * @name Reader#uint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a zig-zag encoded varint as a signed 64 bit value.\n * @name Reader#sint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as a boolean.\n * @returns {boolean} Value read\n */\nReader.prototype.bool = function read_bool() {\n    return this.uint32() !== 0;\n};\n\nfunction readFixed32_end(buf, end) { // note that this uses `end`, not `pos`\n    return (buf[end - 4]\n          | buf[end - 3] << 8\n          | buf[end - 2] << 16\n          | buf[end - 1] << 24) >>> 0;\n}\n\n/**\n * Reads fixed 32 bits as an unsigned 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.fixed32 = function read_fixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4);\n};\n\n/**\n * Reads fixed 32 bits as a signed 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.sfixed32 = function read_sfixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readFixed64(/* this: Reader */) {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 8);\n\n    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads fixed 64 bits.\n * @name Reader#fixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads zig-zag encoded fixed 64 bits.\n * @name Reader#sfixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a float (32 bit) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.float = function read_float() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readFloatLE(this.buf, this.pos);\n    this.pos += 4;\n    return value;\n};\n\n/**\n * Reads a double (64 bit float) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.double = function read_double() {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readDoubleLE(this.buf, this.pos);\n    this.pos += 8;\n    return value;\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @returns {Uint8Array} Value read\n */\nReader.prototype.bytes = function read_bytes() {\n    var length = this.uint32(),\n        start  = this.pos,\n        end    = this.pos + length;\n\n    /* istanbul ignore if */\n    if (end > this.len)\n        throw indexOutOfRange(this, length);\n\n    this.pos += length;\n    if (Array.isArray(this.buf)) // plain array\n        return this.buf.slice(start, end);\n\n    if (start === end) { // fix for IE 10/Win8 and others' subarray returning array of size 1\n        var nativeBuffer = util.Buffer;\n        return nativeBuffer\n            ? nativeBuffer.alloc(0)\n            : new this.buf.constructor(0);\n    }\n    return this._slice.call(this.buf, start, end);\n};\n\n/**\n * Reads a string preceeded by its byte length as a varint.\n * @returns {string} Value read\n */\nReader.prototype.string = function read_string() {\n    var bytes = this.bytes();\n    return utf8.read(bytes, 0, bytes.length);\n};\n\n/**\n * Skips the specified number of bytes if specified, otherwise skips a varint.\n * @param {number} [length] Length if known, otherwise a varint is assumed\n * @returns {Reader} `this`\n */\nReader.prototype.skip = function skip(length) {\n    if (typeof length === \"number\") {\n        /* istanbul ignore if */\n        if (this.pos + length > this.len)\n            throw indexOutOfRange(this, length);\n        this.pos += length;\n    } else {\n        do {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n        } while (this.buf[this.pos++] & 128);\n    }\n    return this;\n};\n\n/**\n * Skips the next element of the specified wire type.\n * @param {number} wireType Wire type received\n * @returns {Reader} `this`\n */\nReader.prototype.skipType = function(wireType) {\n    switch (wireType) {\n        case 0:\n            this.skip();\n            break;\n        case 1:\n            this.skip(8);\n            break;\n        case 2:\n            this.skip(this.uint32());\n            break;\n        case 3:\n            while ((wireType = this.uint32() & 7) !== 4) {\n                this.skipType(wireType);\n            }\n            break;\n        case 5:\n            this.skip(4);\n            break;\n\n        /* istanbul ignore next */\n        default:\n            throw Error(\"invalid wire type \" + wireType + \" at offset \" + this.pos);\n    }\n    return this;\n};\n\nReader._configure = function(BufferReader_) {\n    BufferReader = BufferReader_;\n    Reader.create = create();\n    BufferReader._configure();\n\n    var fn = util.Long ? \"toLong\" : /* istanbul ignore next */ \"toNumber\";\n    util.merge(Reader.prototype, {\n\n        int64: function read_int64() {\n            return readLongVarint.call(this)[fn](false);\n        },\n\n        uint64: function read_uint64() {\n            return readLongVarint.call(this)[fn](true);\n        },\n\n        sint64: function read_sint64() {\n            return readLongVarint.call(this).zzDecode()[fn](false);\n        },\n\n        fixed64: function read_fixed64() {\n            return readFixed64.call(this)[fn](true);\n        },\n\n        sfixed64: function read_sfixed64() {\n            return readFixed64.call(this)[fn](false);\n        }\n\n    });\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 23477, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/reader_buffer.js"],"sourcesContent":["\"use strict\";\nmodule.exports = BufferReader;\n\n// extends Reader\nvar Reader = require(\"./reader\");\n(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer reader instance.\n * @classdesc Wire format reader using node buffers.\n * @extends Reader\n * @constructor\n * @param {Buffer} buffer Buffer to read from\n */\nfunction BufferReader(buffer) {\n    Reader.call(this, buffer);\n\n    /**\n     * Read buffer.\n     * @name BufferReader#buf\n     * @type {Buffer}\n     */\n}\n\nBufferReader._configure = function () {\n    /* istanbul ignore else */\n    if (util.Buffer)\n        BufferReader.prototype._slice = util.Buffer.prototype.slice;\n};\n\n\n/**\n * @override\n */\nBufferReader.prototype.string = function read_string_buffer() {\n    var len = this.uint32(); // modifies pos\n    return this.buf.utf8Slice\n        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))\n        : this.buf.toString(\"utf-8\", this.pos, this.pos = Math.min(this.pos + len, this.len));\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @name BufferReader#bytes\n * @function\n * @returns {Buffer} Value read\n */\n\nBufferReader._configure();\n"],"names":[],"mappings":"AACA,OAAO,OAAO,GAAG;AAEjB,iBAAiB;AACjB,IAAI;AACJ,CAAC,aAAa,SAAS,GAAG,OAAO,MAAM,CAAC,OAAO,SAAS,CAAC,EAAE,WAAW,GAAG;AAEzE,IAAI;AAEJ;;;;;;CAMC,GACD,SAAS,aAAa,MAAM;IACxB,OAAO,IAAI,CAAC,IAAI,EAAE;AAElB;;;;KAIC,GACL;AAEA,aAAa,UAAU,GAAG;IACtB,wBAAwB,GACxB,IAAI,KAAK,MAAM,EACX,aAAa,SAAS,CAAC,MAAM,GAAG,KAAK,MAAM,CAAC,SAAS,CAAC,KAAK;AACnE;AAGA;;CAEC,GACD,aAAa,SAAS,CAAC,MAAM,GAAG,SAAS;IACrC,IAAI,MAAM,IAAI,CAAC,MAAM,IAAI,eAAe;IACxC,OAAO,IAAI,CAAC,GAAG,CAAC,SAAS,GACnB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,KAAK,IAAI,CAAC,GAAG,KACzE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,SAAS,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,KAAK,IAAI,CAAC,GAAG;AAC3F;AAEA;;;;;CAKC,GAED,aAAa,UAAU","ignoreList":[0]}},
    {"offset": {"line": 23514, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/rpc/service.js"],"sourcesContent":["\"use strict\";\nmodule.exports = Service;\n\nvar util = require(\"../util/minimal\");\n\n// Extends EventEmitter\n(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;\n\n/**\n * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.\n *\n * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.\n * @typedef rpc.ServiceMethodCallback\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {Error|null} error Error, if any\n * @param {TRes} [response] Response message\n * @returns {undefined}\n */\n\n/**\n * A service method part of a {@link rpc.Service} as created by {@link Service.create}.\n * @typedef rpc.ServiceMethod\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message\n * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`\n */\n\n/**\n * Constructs a new RPC service instance.\n * @classdesc An RPC service as returned by {@link Service#create}.\n * @exports rpc.Service\n * @extends util.EventEmitter\n * @constructor\n * @param {RPCImpl} rpcImpl RPC implementation\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\n */\nfunction Service(rpcImpl, requestDelimited, responseDelimited) {\n\n    if (typeof rpcImpl !== \"function\")\n        throw TypeError(\"rpcImpl must be a function\");\n\n    util.EventEmitter.call(this);\n\n    /**\n     * RPC implementation. Becomes `null` once the service is ended.\n     * @type {RPCImpl|null}\n     */\n    this.rpcImpl = rpcImpl;\n\n    /**\n     * Whether requests are length-delimited.\n     * @type {boolean}\n     */\n    this.requestDelimited = Boolean(requestDelimited);\n\n    /**\n     * Whether responses are length-delimited.\n     * @type {boolean}\n     */\n    this.responseDelimited = Boolean(responseDelimited);\n}\n\n/**\n * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.\n * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method\n * @param {Constructor<TReq>} requestCtor Request constructor\n * @param {Constructor<TRes>} responseCtor Response constructor\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback\n * @returns {undefined}\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n */\nService.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {\n\n    if (!request)\n        throw TypeError(\"request must be specified\");\n\n    var self = this;\n    if (!callback)\n        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);\n\n    if (!self.rpcImpl) {\n        setTimeout(function() { callback(Error(\"already ended\")); }, 0);\n        return undefined;\n    }\n\n    try {\n        return self.rpcImpl(\n            method,\n            requestCtor[self.requestDelimited ? \"encodeDelimited\" : \"encode\"](request).finish(),\n            function rpcCallback(err, response) {\n\n                if (err) {\n                    self.emit(\"error\", err, method);\n                    return callback(err);\n                }\n\n                if (response === null) {\n                    self.end(/* endedByRPC */ true);\n                    return undefined;\n                }\n\n                if (!(response instanceof responseCtor)) {\n                    try {\n                        response = responseCtor[self.responseDelimited ? \"decodeDelimited\" : \"decode\"](response);\n                    } catch (err) {\n                        self.emit(\"error\", err, method);\n                        return callback(err);\n                    }\n                }\n\n                self.emit(\"data\", response, method);\n                return callback(null, response);\n            }\n        );\n    } catch (err) {\n        self.emit(\"error\", err, method);\n        setTimeout(function() { callback(err); }, 0);\n        return undefined;\n    }\n};\n\n/**\n * Ends this service and emits the `end` event.\n * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.\n * @returns {rpc.Service} `this`\n */\nService.prototype.end = function end(endedByRPC) {\n    if (this.rpcImpl) {\n        if (!endedByRPC) // signal end to rpcImpl\n            this.rpcImpl(null, null, null);\n        this.rpcImpl = null;\n        this.emit(\"end\").off();\n    }\n    return this;\n};\n"],"names":[],"mappings":"AACA,OAAO,OAAO,GAAG;AAEjB,IAAI;AAEJ,uBAAuB;AACvB,CAAC,QAAQ,SAAS,GAAG,OAAO,MAAM,CAAC,KAAK,YAAY,CAAC,SAAS,CAAC,EAAE,WAAW,GAAG;AAE/E;;;;;;;;;;CAUC,GAED;;;;;;;;;CASC,GAED;;;;;;;;;CASC,GACD,SAAS,QAAQ,OAAO,EAAE,gBAAgB,EAAE,iBAAiB;IAEzD,IAAI,OAAO,YAAY,YACnB,MAAM,UAAU;IAEpB,KAAK,YAAY,CAAC,IAAI,CAAC,IAAI;IAE3B;;;KAGC,GACD,IAAI,CAAC,OAAO,GAAG;IAEf;;;KAGC,GACD,IAAI,CAAC,gBAAgB,GAAG,QAAQ;IAEhC;;;KAGC,GACD,IAAI,CAAC,iBAAiB,GAAG,QAAQ;AACrC;AAEA;;;;;;;;;;CAUC,GACD,QAAQ,SAAS,CAAC,OAAO,GAAG,SAAS,QAAQ,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,OAAO,EAAE,QAAQ;IAE7F,IAAI,CAAC,SACD,MAAM,UAAU;IAEpB,IAAI,OAAO,IAAI;IACf,IAAI,CAAC,UACD,OAAO,KAAK,SAAS,CAAC,SAAS,MAAM,QAAQ,aAAa,cAAc;IAE5E,IAAI,CAAC,KAAK,OAAO,EAAE;QACf,WAAW;YAAa,SAAS,MAAM;QAAmB,GAAG;QAC7D,OAAO;IACX;IAEA,IAAI;QACA,OAAO,KAAK,OAAO,CACf,QACA,WAAW,CAAC,KAAK,gBAAgB,GAAG,oBAAoB,SAAS,CAAC,SAAS,MAAM,IACjF,SAAS,YAAY,GAAG,EAAE,QAAQ;YAE9B,IAAI,KAAK;gBACL,KAAK,IAAI,CAAC,SAAS,KAAK;gBACxB,OAAO,SAAS;YACpB;YAEA,IAAI,aAAa,MAAM;gBACnB,KAAK,GAAG,CAAC,cAAc,GAAG;gBAC1B,OAAO;YACX;YAEA,IAAI,CAAC,CAAC,oBAAoB,YAAY,GAAG;gBACrC,IAAI;oBACA,WAAW,YAAY,CAAC,KAAK,iBAAiB,GAAG,oBAAoB,SAAS,CAAC;gBACnF,EAAE,OAAO,KAAK;oBACV,KAAK,IAAI,CAAC,SAAS,KAAK;oBACxB,OAAO,SAAS;gBACpB;YACJ;YAEA,KAAK,IAAI,CAAC,QAAQ,UAAU;YAC5B,OAAO,SAAS,MAAM;QAC1B;IAER,EAAE,OAAO,KAAK;QACV,KAAK,IAAI,CAAC,SAAS,KAAK;QACxB,WAAW;YAAa,SAAS;QAAM,GAAG;QAC1C,OAAO;IACX;AACJ;AAEA;;;;CAIC,GACD,QAAQ,SAAS,CAAC,GAAG,GAAG,SAAS,IAAI,UAAU;IAC3C,IAAI,IAAI,CAAC,OAAO,EAAE;QACd,IAAI,CAAC,YACD,IAAI,CAAC,OAAO,CAAC,MAAM,MAAM;QAC7B,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG;IACxB;IACA,OAAO,IAAI;AACf","ignoreList":[0]}},
    {"offset": {"line": 23627, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/rpc.js"],"sourcesContent":["\"use strict\";\n\n/**\n * Streaming RPC helpers.\n * @namespace\n */\nvar rpc = exports;\n\n/**\n * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.\n * @typedef RPCImpl\n * @type {function}\n * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called\n * @param {Uint8Array} requestData Request data\n * @param {RPCImplCallback} callback Callback function\n * @returns {undefined}\n * @example\n * function rpcImpl(method, requestData, callback) {\n *     if (protobuf.util.lcFirst(method.name) !== \"myMethod\") // compatible with static code\n *         throw Error(\"no such method\");\n *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {\n *         callback(err, responseData);\n *     });\n * }\n */\n\n/**\n * Node-style callback as used by {@link RPCImpl}.\n * @typedef RPCImplCallback\n * @type {function}\n * @param {Error|null} error Error, if any, otherwise `null`\n * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error\n * @returns {undefined}\n */\n\nrpc.Service = require(\"./rpc/service\");\n"],"names":[],"mappings":"AAEA;;;CAGC,GACD,IAAI,MAAM;AAEV;;;;;;;;;;;;;;;;CAgBC,GAED;;;;;;;CAOC,GAED,IAAI,OAAO","ignoreList":[0]}},
    {"offset": {"line": 23659, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/roots.js"],"sourcesContent":["\"use strict\";\nmodule.exports = {};\n\n/**\n * Named roots.\n * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).\n * Can also be used manually to make roots available across modules.\n * @name roots\n * @type {Object.<string,Root>}\n * @example\n * // pbjs -r myroot -o compiled.js ...\n *\n * // in another module:\n * require(\"./compiled.js\");\n *\n * // in any subsequent module:\n * var root = protobuf.roots[\"myroot\"];\n */\n"],"names":[],"mappings":"AACA,OAAO,OAAO,GAAG,CAAC,GAElB;;;;;;;;;;;;;;CAcC","ignoreList":[0]}},
    {"offset": {"line": 23678, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/src/index-minimal.js"],"sourcesContent":["\"use strict\";\nvar protobuf = exports;\n\n/**\n * Build type, one of `\"full\"`, `\"light\"` or `\"minimal\"`.\n * @name build\n * @type {string}\n * @const\n */\nprotobuf.build = \"minimal\";\n\n// Serialization\nprotobuf.Writer       = require(\"./writer\");\nprotobuf.BufferWriter = require(\"./writer_buffer\");\nprotobuf.Reader       = require(\"./reader\");\nprotobuf.BufferReader = require(\"./reader_buffer\");\n\n// Utility\nprotobuf.util         = require(\"./util/minimal\");\nprotobuf.rpc          = require(\"./rpc\");\nprotobuf.roots        = require(\"./roots\");\nprotobuf.configure    = configure;\n\n/* istanbul ignore next */\n/**\n * Reconfigures the library according to the environment.\n * @returns {undefined}\n */\nfunction configure() {\n    protobuf.util._configure();\n    protobuf.Writer._configure(protobuf.BufferWriter);\n    protobuf.Reader._configure(protobuf.BufferReader);\n}\n\n// Set up buffer utility according to the environment\nconfigure();\n"],"names":[],"mappings":"AACA,IAAI,WAAW;AAEf;;;;;CAKC,GACD,SAAS,KAAK,GAAG;AAEjB,gBAAgB;AAChB,SAAS,MAAM;AACf,SAAS,YAAY;AACrB,SAAS,MAAM;AACf,SAAS,YAAY;AAErB,UAAU;AACV,SAAS,IAAI;AACb,SAAS,GAAG;AACZ,SAAS,KAAK;AACd,SAAS,SAAS,GAAM;AAExB,wBAAwB,GACxB;;;CAGC,GACD,SAAS;IACL,SAAS,IAAI,CAAC,UAAU;IACxB,SAAS,MAAM,CAAC,UAAU,CAAC,SAAS,YAAY;IAChD,SAAS,MAAM,CAAC,UAAU,CAAC,SAAS,YAAY;AACpD;AAEA,qDAAqD;AACrD","ignoreList":[0]}},
    {"offset": {"line": 23709, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40ipld/unixfs/node_modules/protobufjs/minimal.js"],"sourcesContent":["// minimal library entry point.\n\n\"use strict\";\nmodule.exports = require(\"./src/index-minimal\");\n"],"names":[],"mappings":"AAAA,+BAA+B;AAG/B,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 23715, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/actor/src/task.js"],"sourcesContent":["// This is file is only here to allow importing type namespace\n// from JS.\nexport * from \"./lib.js\"\n"],"names":[],"mappings":"AAAA,8DAA8D;AAC9D,WAAW;;AACX","ignoreList":[0]}},
    {"offset": {"line": 23724, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/actor/src/lib.js"],"sourcesContent":["import * as Task from \"./task.js\"\nexport * from \"./task.js\"\n\n/**\n * Turns a task (that never fails or sends messages) into an effect of it's\n * result.\n *\n * @template T\n * @param {Task.Task<T, never>} task\n * @returns {Task.Effect<T>}\n */\nexport const effect = function* (task) {\n  const message = yield* task\n  yield* send(message)\n}\n\n/**\n * Gets a handle to the task that invoked it. Useful when task needs to\n * suspend execution until some outside event occurs, in which case handle\n * can be used resume execution (see `suspend` code example for more details)\n *\n * @template T, M, X\n * @returns {Task.Task<Task.Controller<T, X, M>, never>}\n */\nexport function* current() {\n  return /** @type {Task.Controller<T, X, M>} */ (yield CURRENT)\n}\n\n/**\n * Suspends the current task (task that invokes it),  which can then be\n * resumed from another task or an outside event (e.g. `setTimeout` callback)\n * by calling the `resume` with an task's handle.\n *\n * Calling this in almost all cases is preceeded by call to `current()` in\n * order to obtain a `handle` which can be passed to `resume` function\n * to resume the execution.\n *\n * Note: This task never fails, although it may never resume either. However\n * you can utilize `finally` block to do a necessary cleanup in case execution\n * is aborted.\n *\n * @example\n * ```js\n * import { current, suspend, resume } from \"actor\"\n * function * sleep(duration) {\n *    // get a reference to this task so we can resume it.\n *    const self = yield * current()\n *    // resume this task when timeout fires\n *    const id = setTimeout(() => resume(self), duration)\n *    try {\n *      // suspend this task nothing below this line will run until task is\n *      // resumed.\n *      yield * suspend()\n *    } finally {\n *      // if task is aborted finally block will still run which given you\n *      // chance to cleanup.\n *      clearTimeout(id)\n *    }\n * }\n * ```\n *\n * @returns {Task.Task<void, never>}\n */\nexport const suspend = function* () {\n  yield SUSPEND\n}\n\n/**\n * Suspends execution for the given duration in milliseconds, after which\n * execution is resumed (unless it was aborted in the meantime).\n *\n * @example\n * ```js\n * function * demo() {\n *    console.log(\"I'm going to take small nap\")\n *    yield * sleep(200)\n *    console.log(\"I am back to work\")\n * }\n * ```\n *\n * @param {number} [duration]\n * @returns {Task.Task<void, never>}\n */\nexport function* sleep(duration = 0) {\n  const task = yield* current()\n  const id = setTimeout(enqueue, duration, task)\n\n  try {\n    yield* suspend()\n  } finally {\n    clearTimeout(id)\n  }\n}\n\n/**\n * Provides equivalent of `await` in async functions. Specifically it takes\n * a value that you can `await` on (that is `Promise<T>|T`) and suspends\n * execution until promise is settled. If promise succeeds execution is resumed\n * with `T` otherwise an error of type `X` is thrown (which is by default\n * `unknown` since promises do not encode error type).\n *\n * It is useful when you need to deal with potentially async set of operations\n * without having to check if thing is a promise at every step.\n *\n * Please note: This that execution is suspended even if given value is not a\n * promise, however scheduler will still resume it in the same tick of the event\n * loop after, just processing other scheduled tasks. This avoids problematic\n * race condititions that can otherwise occur when values are sometimes promises\n * and other times are not.\n *\n * @example\n * ```js\n * function * fetchJSON (url, options) {\n *    const response = yield * wait(fetch(url, options))\n *    const json = yield * wait(response.json())\n *    return json\n * }\n * ```\n *\n * @template T, [X=unknown]\n * @param {Task.Await<T>} input\n * @returns {Task.Task<T, Error>}\n */\nexport const wait = function* (input) {\n  const task = yield* current()\n  if (isAsync(input)) {\n    let failed = false\n    /** @type {unknown} */\n    let output = undefined\n    input.then(\n      value => {\n        failed = false\n        output = value\n        enqueue(task)\n      },\n      error => {\n        failed = true\n        output = error\n        enqueue(task)\n      }\n    )\n\n    yield* suspend()\n    if (failed) {\n      throw output\n    } else {\n      return /** @type {T} */ (output)\n    }\n  } else {\n    // This may seem redundunt but it is not, by enqueuing this task we allow\n    // scheduler to perform other queued tasks first. This way many race\n    // conditions can be avoided when values are sometimes promises and other\n    // times aren't.\n    // Unlike `await` however this will resume in the same tick.\n    main(wake(task))\n    yield* suspend()\n    return input\n  }\n}\n\n/**\n * @template T, X, M\n * @param {Task.Controller<T, X, M>} task\n * @returns {Task.Task<void, never, never>}\n */\nfunction* wake(task) {\n  enqueue(task)\n}\n\n/**\n * Checks if value value is a promise (or it's lookalike).\n *\n * @template T\n * @param {any} node\n * @returns {node is PromiseLike<T>}\n */\n\nconst isAsync = node =>\n  node != null &&\n  typeof (/** @type {{then?:unknown}} */ (node).then) === \"function\"\n\n/**\n * Task that sends given message (or rather an effect producing this message).\n * Please note, that while you could use `yield message` instead, but you'd risk\n * having to deal with potential breaking changes if library internals change\n * in the future, which in fact may happen as anticipated improvements in\n * TS generator inference could enable replace need for `yield *`.\n *\n * @see https://github.com/microsoft/TypeScript/issues/43632\n *\n * @template T\n * @param {T} message\n * @returns {Task.Effect<T>}\n */\nexport const send = function* (message) {\n  yield /** @type {Task.Message<T>} */ (message)\n}\n\n/**\n * Takes several effects and merges them into a single effect of tagged\n * variants so that their source could be identified via `type` field.\n *\n * @example\n * ```js\n * listen({\n *    read: Task.effect(dbRead),\n *    write: Task.effect(dbWrite)\n * })\n * ```\n *\n * @template {string} Tag\n * @template T\n * @param {{ [K in Tag]: Task.Effect<T> }} source\n * @returns {Task.Effect<Tagged<Tag, T>>}\n */\nexport const listen = function* (source) {\n  /** @type {Task.Fork<void, never, Tagged<Tag, T>>[]} */\n  const forks = []\n  for (const entry of Object.entries(source)) {\n    const [name, effect] = /** @type {[Tag, Task.Effect<T>]} */ (entry)\n    if (effect !== NONE) {\n      forks.push(yield* fork(tag(effect, name)))\n    }\n  }\n\n  yield* group(forks)\n}\n\n/**\n * Takes several tasks and creates an effect of them all.\n *\n * @example\n * ```js\n * Task.effects([\n *    dbRead,\n *    dbWrite\n * ])\n * ```\n *\n * @template {string} Tag\n * @template T\n * @param {Task.Task<T, never>[]} tasks\n * @returns {Task.Effect<T>}\n */\n\nexport const effects = tasks =>\n  tasks.length > 0 ? batch(tasks.map(effect)) : NONE\n\n/**\n * Takes several effects and combines them into a one.\n *\n * @template T\n * @param {Task.Effect<T>[]} effects\n * @returns {Task.Effect<T>}\n */\nexport function* batch(effects) {\n  const forks = []\n  for (const effect of effects) {\n    forks.push(yield* fork(effect))\n  }\n\n  yield* group(forks)\n}\n\n/**\n * @template {string} Tag\n * @template T\n * @typedef {{type: Tag} & {[K in Tag]: T}} Tagged\n */\n/**\n * Tags an effect by boxing each event with an object that has `type` field\n * corresponding to given tag and same named field holding original message\n * e.g. given `nums` effect that produces numbers, `tag(nums, \"inc\")` would\n * create an effect that produces events like `{type:'inc', inc:1}`.\n *\n * @template {string} Tag\n * @template T, M, X\n * @param {Task.Task<T, X, M>} effect\n * @param {Tag} tag\n * @returns {Task.Task<T, X, Tagged<Tag, M>>}\n */\nexport const tag = (effect, tag) =>\n  // @ts-ignore\n  effect === NONE\n    ? NONE\n    : effect instanceof Tagger\n    ? new Tagger([...effect.tags, tag], effect.source)\n    : new Tagger([tag], effect)\n\n/**\n * @template {string} Tag\n * @template Success, Failure, Message\n *\n * @implements {Task.Task<Success, Failure, Tagged<Tag, Message>>}\n * @implements {Task.Controller<Success, Failure, Tagged<Tag, Message>>}\n */\nclass Tagger {\n  /**\n   * @param {Task.Task<Success, Failure, Message>} source\n   * @param {string[]} tags\n   */\n  constructor(tags, source) {\n    this.tags = tags\n    this.source = source\n    /** @type {Task.Controller<Success, Failure, Message>} */\n    this.controller\n  }\n  /* c8 ignore next 3 */\n  [Symbol.iterator]() {\n    if (!this.controller) {\n      this.controller = this.source[Symbol.iterator]()\n    }\n    return this\n  }\n  /**\n   * @param {Task.TaskState<Success, Message>} state\n   * @returns {Task.TaskState<Success, Tagged<Tag, Message>>}\n   */\n  box(state) {\n    if (state.done) {\n      return state\n    } else {\n      switch (state.value) {\n        case SUSPEND:\n        case CURRENT:\n          return /** @type {Task.TaskState<Success, Tagged<Tag, Message>>} */ (\n            state\n          )\n        default: {\n          // Instead of boxing result at each transform step we perform in-place\n          // mutation as we know nothing else is accessing this value.\n          const tagged = /** @type {{ done: false, value: any }} */ (state)\n          let { value } = tagged\n          for (const tag of this.tags) {\n            value = withTag(tag, value)\n          }\n          tagged.value = value\n          return tagged\n        }\n      }\n    }\n  }\n  /**\n   *\n   * @param {Task.Instruction<Message>} instruction\n   */\n  next(instruction) {\n    return this.box(this.controller.next(instruction))\n  }\n  /**\n   *\n   * @param {Failure} error\n   */\n  throw(error) {\n    return this.box(this.controller.throw(error))\n  }\n  /**\n   * @param {Success} value\n   */\n  return(value) {\n    return this.box(this.controller.return(value))\n  }\n\n  get [Symbol.toStringTag]() {\n    return \"TaggedEffect\"\n  }\n}\n\n/**\n * Returns empty `Effect`, that is produces no messages. Kind of like `[]` or\n * `\"\"` but for effects.\n *\n * @type {() => Task.Effect<never>}\n */\nexport const none = () => NONE\n\n/**\n * Takes iterable of tasks and runs them concurrently, returning array of\n * results in an order of tasks (not the order of completion). If any of the\n * tasks fail all the rest are aborted and error is throw into calling task.\n *\n * > This is basically equivalent of `Promise.all` except cancelation logic\n * because tasks unlike promises can be cancelled.\n *\n * @template T, X\n * @param {Iterable<Task.Task<T, X>>} tasks\n * @returns {Task.Task<T[], X>}\n */\nexport const all = function* (tasks) {\n  const self = yield* current()\n\n  /** @type {(id:number) => (value:T) => void} */\n  const succeed = id => value => {\n    delete forks[id]\n    results[id] = value\n    count -= 1\n    if (count === 0) {\n      enqueue(self)\n    }\n  }\n\n  /** @type {(error:X) => void} */\n  const fail = error => {\n    for (const handle of forks) {\n      if (handle) {\n        enqueue(abort(handle, error))\n      }\n    }\n\n    enqueue(abort(self, error))\n  }\n\n  /** @type {Task.Fork<void, never>[]} */\n  let forks = []\n  let count = 0\n  for (const task of tasks) {\n    forks.push(yield* fork(then(task, succeed(count++), fail)))\n  }\n  const results = new Array(count)\n\n  if (count > 0) {\n    yield* suspend()\n  }\n\n  return results\n}\n\n/**\n * @template {string} Tag\n * @template T\n * @param {Tag} tag\n * @param {Task.Message<T>} value\n */\nconst withTag = (tag, value) =>\n  /** @type {Tagged<Tag, T>} */\n  ({ type: tag, [tag]: value })\n\n/**\n * Kind of like promise.then which is handy when you want to extract result\n * from the given task from the outside.\n *\n * @template T, U, X, M\n * @param {Task.Task<T, X, M>} task\n * @param {(value:T) => U} resolve\n * @param {(error:X) => U} reject\n * @returns {Task.Task<U, never, M>}\n */\nexport function* then(task, resolve, reject) {\n  try {\n    return resolve(yield* task)\n  } catch (error) {\n    return reject(/** @type {X} */ (error))\n  }\n}\n\n// Special control instructions recognized by a scheduler.\nconst CURRENT = Symbol(\"current\")\nconst SUSPEND = Symbol(\"suspend\")\n/** @typedef {typeof SUSPEND|typeof CURRENT} Control */\n\n/**\n * @template M\n * @param {Task.Instruction<M>} value\n * @returns {value is M}\n */\nexport const isMessage = value => {\n  switch (value) {\n    case SUSPEND:\n    case CURRENT:\n      return false\n    default:\n      return true\n  }\n}\n\n/**\n * @template M\n * @param {Task.Instruction<M>} value\n * @returns {value is Control}\n */\nexport const isInstruction = value => !isMessage(value)\n\n/**\n * @template T, X, M\n * @implements {Task.TaskGroup<T, X, M>}\n */\nclass Group {\n  /**\n   * @template T, X, M\n   * @param {Task.Controller<T, X, M>|Task.Fork<T, X, M>} member\n   * @returns {Task.Group<T, X, M>}\n   */\n  static of(member) {\n    return (\n      /** @type {{group?:Task.TaskGroup<T, X, M>}} */ (member).group || MAIN\n    )\n  }\n\n  /**\n   * @template T, X, M\n   * @param {(Task.Controller<T, X, M>|Task.Fork<T, X, M>) & {group?:Task.TaskGroup<T, X, M>}} member\n   * @param {Task.TaskGroup<T, X, M>} group\n   */\n  static enqueue(member, group) {\n    member.group = group\n    group.stack.active.push(member)\n  }\n  /**\n   * @param {Task.Controller<T, X, M>} driver\n   * @param {Task.Controller<T, X, M>[]} [active]\n   * @param {Set<Task.Controller<T, X, M>>} [idle]\n   * @param {Task.Stack<T, X, M>} [stack]\n   */\n  constructor(\n    driver,\n    active = [],\n    idle = new Set(),\n    stack = new Stack(active, idle)\n  ) {\n    this.driver = driver\n    this.parent = Group.of(driver)\n    this.stack = stack\n    this.id = ++ID\n  }\n}\n\n/**\n * @template T, X, M\n * @implements {Task.Main<T, X, M>}\n */\nclass Main {\n  constructor() {\n    this.status = IDLE\n    this.stack = new Stack()\n    this.id = /** @type {0} */ (0)\n  }\n}\n\n/**\n * @template T, X, M\n */\nclass Stack {\n  /**\n   * @param {Task.Controller<T, X, M>[]} [active]\n   * @param {Set<Task.Controller<T, X, M>>} [idle]\n   */\n  constructor(active = [], idle = new Set()) {\n    this.active = active\n    this.idle = idle\n  }\n\n  /**\n   *\n   * @param {Task.Stack<unknown, unknown, unknown>} stack\n   * @returns\n   */\n  static size({ active, idle }) {\n    return active.length + idle.size\n  }\n}\n\n/**\n * Starts a main task.\n *\n * @param {Task.Task<void, never>} task\n */\nexport const main = task => enqueue(task[Symbol.iterator]())\n\n/**\n * @template T, X, M\n * @param {Task.Controller<T, X, M>} task\n */\nconst enqueue = task => {\n  let group = Group.of(task)\n  group.stack.active.push(task)\n  group.stack.idle.delete(task)\n\n  // then walk up the group chain and unblock their driver tasks.\n  while (group.parent) {\n    const { idle, active } = group.parent.stack\n    if (idle.has(group.driver)) {\n      idle.delete(group.driver)\n      active.push(group.driver)\n    } else {\n      // if driver was not blocked it must have been unblocked by\n      // other task so stop there.\n      break\n    }\n\n    group = group.parent\n  }\n\n  if (MAIN.status === IDLE) {\n    MAIN.status = ACTIVE\n    while (true) {\n      try {\n        for (const _message of step(MAIN)) {\n        }\n        MAIN.status = IDLE\n        break\n      } catch (_error) {\n        // Top level task may crash and throw an error, but given this is a main\n        // group we do not want to interupt other unrelated tasks, which is why\n        // we discard the error and the task that caused it.\n        MAIN.stack.active.shift()\n      }\n    }\n  }\n}\n\n/**\n * @template T, X, M\n * @param {Task.Controller<T, X, M>} task\n */\nexport const resume = task => enqueue(task)\n\n/**\n * @template T, X, M\n * @param {Task.Group<T, X, M>} group\n */\n\nconst step = function* (group) {\n  const { active } = group.stack\n  let task = active[0]\n  group.stack.idle.delete(task)\n  while (task) {\n    /** @type {Task.TaskState<T, M>} */\n    let state = INIT\n    // Keep processing insturctions until task is done, it send suspend request\n    // or it's has been removed from the active queue.\n    //  Group changes require extra care so please make sure to understand\n    // the detail here. It occurs when spawned task(s) are joined into a group\n    // which will change the task driver, that is when `task === active[0]` will\n    // became false and need to to drop the task immediately otherwise race\n    // condition will occur due to task been  driven by multiple concurrent\n    // schedulers.\n    loop: while (!state.done && task === active[0]) {\n      const instruction = state.value\n      switch (instruction) {\n        // if task is suspended we add it to the idle list and break the loop\n        // to move to a next task.\n        case SUSPEND:\n          group.stack.idle.add(task)\n          break loop\n        // if task requested a context (which is usually to suspend itself)\n        // pass back a task reference and continue.\n        case CURRENT:\n          state = task.next(task)\n          break\n        default:\n          // otherwise task sent a message which we yield to the driver and\n          // continue\n          state = task.next(\n            yield /** @type {M & Task.Message<M>}*/ (instruction)\n          )\n          break\n      }\n    }\n\n    // If task is complete, or got suspended we move to a next task\n    active.shift()\n    task = active[0]\n    group.stack.idle.delete(task)\n  }\n}\n\n/**\n * Executes given task concurrently with a current task (task that spawned it).\n * Spawned task is detached from the task that spawned it and it can outlive it\n * and / or fail without affecting a task that spawned it. If you need to wait\n * on concurrent task completion consider using `fork` instead which can be\n * later `joined`. If you just want a to block on task execution you can just\n * `yield* work()` directly instead.\n *\n * @param {Task.Task<void, never, never>} task\n * @returns {Task.Task<void, never>}\n */\nexport function* spawn(task) {\n  main(task)\n}\n\n/**\n * Executes given task concurrently with current task (the task that initiated\n * fork). Froked task is detached from the task that created it and it can\n * outlive it and / or fail without affecting it. You do however get a handle\n * for the fork which could be used to `join` the task, in which case `joining`\n * task will block until fork finishes execution.\n *\n * This is also a primary interface for executing tasks from the outside of the\n * task context. Function returns `Fork` which implements `Promise` interface\n * so it could be awaited. Please note that calling `fork` does not really do\n * anything, it lazily starts execution when you either `await fork(work())`\n * from arbitray context or `yield* fork(work())` in anothe task context.\n *\n * @template T, X, M\n * @param {Task.Task<T, X, M>} task\n * @param {Task.ForkOptions} [options]\n * @returns {Task.Fork<T, X, M>}\n */\nexport const fork = (task, options) => new Fork(task, options)\n\n/**\n * Exits task succesfully with a given return value.\n *\n * @template T, M, X\n * @param  {Task.Controller<T, M, X>} handle\n * @param {T} value\n * @returns {Task.Task<void, never>}\n */\nexport const exit = (handle, value) => conclude(handle, { ok: true, value })\n\n/**\n * Terminates task execution execution. Only takes task that produces no\n * result, if your task has non `void` return type you should use `exit` instead.\n *\n * @template M, X\n * @param {Task.Controller<void, X, M>} handle\n */\nexport const terminate = handle =>\n  conclude(handle, { ok: true, value: undefined })\n\n/**\n * Aborts given task with an error. Task error type should match provided error.\n *\n * @template T, M, X\n * @param {Task.Controller<T, X, M>} handle\n * @param {X} [error]\n */\nexport const abort = (handle, error) => conclude(handle, { ok: false, error })\n\n/**\n * Aborts given task with an given error.\n *\n * @template T, M, X\n * @param {Task.Controller<T, X, M>} handle\n * @param {Task.Result<T, X>} result\n * @returns {Task.Task<void, never> & Task.Controller<void, never>}\n */\nfunction* conclude(handle, result) {\n  try {\n    const task = handle\n    const state = result.ok\n      ? task.return(result.value)\n      : task.throw(result.error)\n\n    if (!state.done) {\n      if (state.value === SUSPEND) {\n        const { idle } = Group.of(task).stack\n        idle.add(task)\n      } else {\n        enqueue(task)\n      }\n    }\n  } catch (error) {}\n}\n\n/**\n * Groups multiple forks togather and joins joins them with current task.\n *\n * @template T, X, M\n * @param {Task.Fork<T, X, M>[]} forks\n * @returns {Task.Task<void, X, M>}\n */\nexport function* group(forks) {\n  // Abort eraly if there'se no work todo.\n  if (forks.length === 0) return\n\n  const self = yield* current()\n  /** @type {Task.TaskGroup<T, X, M>} */\n  const group = new Group(self)\n  /** @type {Task.Failure<X>|null} */\n  let failure = null\n\n  for (const fork of forks) {\n    const { result } = fork\n    if (result) {\n      if (!result.ok && !failure) {\n        failure = result\n      }\n      continue\n    }\n    move(fork, group)\n  }\n\n  // Keep work looping until there is nom more work to be done\n  try {\n    if (failure) {\n      throw failure.error\n    }\n\n    while (true) {\n      yield* step(group)\n      if (Stack.size(group.stack) > 0) {\n        yield* suspend()\n      } else {\n        break\n      }\n    }\n  } catch (error) {\n    for (const task of group.stack.active) {\n      yield* abort(task, error)\n    }\n\n    for (const task of group.stack.idle) {\n      yield* abort(task, error)\n      enqueue(task)\n    }\n\n    throw error\n  }\n}\n\n/**\n * @template T, X, M\n * @param {Task.Fork<T, X, M>} fork\n * @param {Task.TaskGroup<T, X, M>} group\n */\nconst move = (fork, group) => {\n  const from = Group.of(fork)\n  if (from !== group) {\n    const { active, idle } = from.stack\n    const target = group.stack\n    fork.group = group\n    // If it is idle just move from one group to the other\n    // and update the group task thinks it belongs to.\n    if (idle.has(fork)) {\n      idle.delete(fork)\n      target.idle.add(fork)\n    } else {\n      const index = active.indexOf(fork)\n      // If task is in the job queue, we move it to a target job queue. Moving\n      // top task in the queue requires extra care so it does not end up\n      // processed by two groups which would lead to race. For that reason\n      // `step` loop checks for group changes on each turn.\n      if (index >= 0) {\n        active.splice(index, 1)\n        target.active.push(fork)\n      }\n      // otherwise task is complete\n    }\n  }\n}\n\n/**\n * @template T, X, M\n * @param {Task.Fork<T, X, M>} fork\n * @returns {Task.Task<T, X, M>}\n */\nexport function* join(fork) {\n  // If fork is still idle activate it.\n  if (fork.status === IDLE) {\n    yield* fork\n  }\n\n  if (!fork.result) {\n    yield* group([fork])\n  }\n\n  const result = /** @type {Task.Result<T, X>} */ (fork.result)\n  if (result.ok) {\n    return result.value\n  } else {\n    throw result.error\n  }\n}\n\n/**\n * @template T, X\n * @implements {Task.Future<T, X>}\n */\nclass Future {\n  /**\n   * @param {Task.StateHandler<T, X>} handler\n   */\n  constructor(handler) {\n    this.handler = handler\n    /**\n     * @abstract\n     * @type {Task.Result<T, X>|void}\n     */\n    this.result\n  }\n  /**\n   * @type {Promise<T>}\n   */\n  get promise() {\n    const { result } = this\n    const promise =\n      result == null\n        ? new Promise((succeed, fail) => {\n            this.handler.onsuccess = succeed\n            this.handler.onfailure = fail\n          })\n        : result.ok\n        ? Promise.resolve(result.value)\n        : Promise.reject(result.error)\n    Object.defineProperty(this, \"promise\", { value: promise })\n    return promise\n  }\n\n  /**\n   * @template U, [E=never]\n   * @param {((value:T) => U | PromiseLike<U>)|undefined|null} [onresolve]\n   * @param {((error:X) => E|PromiseLike<E>)|undefined|null} [onreject]\n   * @returns {Promise<U|E>}\n   */\n  then(onresolve, onreject) {\n    return this.activate().promise.then(onresolve, onreject)\n  }\n  /**\n   * @template [U=never]\n   * @param {(error:X) => U} onreject\n   */\n  catch(onreject) {\n    return /** @type {Task.Future<T|U, never>} */ (\n      this.activate().promise.catch(onreject)\n    )\n  }\n  /**\n   * @param {() => void} onfinally\n   * @returns {Task.Future<T, X>}\n   */\n  finally(onfinally) {\n    return /** @type {Task.Future<T, X>} */ (\n      this.activate().promise.finally(onfinally)\n    )\n  }\n  /**\n   * @abstract\n   */\n  /* c8 ignore next 3 */\n  activate() {\n    return this\n  }\n}\n\n/**\n * @template T, X, M\n * @implements {Task.Fork<T, X, M>}\n * @implements {Task.Controller<T, X, M>}\n * @implements {Task.Task<Task.Fork<T, X, M>, never>}\n * @implements {Task.Future<T, X>}\n * @extends {Future<T, X>}\n */\nclass Fork extends Future {\n  /**\n   * @param {Task.Task<T, X, M>} task\n   * @param {Task.ForkOptions} [options]\n   * @param {Task.StateHandler<T, X>} [handler]\n   * @param {Task.TaskState<T, M>} [state]\n   */\n  constructor(task, options = BLANK, handler = {}, state = INIT) {\n    super(handler)\n    this.id = ++ID\n    this.name = options.name || \"\"\n    /** @type {Task.Task<T, X, M>} */\n    this.task = task\n    this.state = state\n    this.status = IDLE\n    /** @type {Task.Result<T, X>} */\n    this.result\n    this.handler = handler\n\n    /** @type {Task.Controller<T, X, M>} */\n    this.controller\n  }\n\n  *resume() {\n    resume(this)\n  }\n\n  /**\n   * @returns {Task.Task<T, X, M>}\n   */\n  join() {\n    return join(this)\n  }\n\n  /**\n   * @param {X} error\n   */\n  abort(error) {\n    return abort(this, error)\n  }\n  /**\n   * @param {T} value\n   */\n  exit(value) {\n    return exit(this, value)\n  }\n  get [Symbol.toStringTag]() {\n    return \"Fork\"\n  }\n\n  /**\n   * @returns {Task.Controller<Task.Fork<T, X, M>, never, never>}\n   */\n  *[Symbol.iterator]() {\n    return this.activate()\n  }\n\n  activate() {\n    this.controller = this.task[Symbol.iterator]()\n    this.status = ACTIVE\n    enqueue(this)\n    return this\n  }\n\n  /**\n   * @private\n   * @param {any} error\n   * @returns {never}\n   */\n  panic(error) {\n    this.result = { ok: false, error }\n    this.status = FINISHED\n    const { handler } = this\n    if (handler.onfailure) {\n      handler.onfailure(error)\n    }\n\n    throw error\n  }\n\n  /**\n   * @private\n   * @param {Task.TaskState<T, M>} state\n   */\n  step(state) {\n    this.state = state\n    if (state.done) {\n      this.result = { ok: true, value: state.value }\n      this.status = FINISHED\n      const { handler } = this\n      if (handler.onsuccess) {\n        handler.onsuccess(state.value)\n      }\n    }\n\n    return state\n  }\n\n  /**\n   * @param {unknown} value\n   */\n  next(value) {\n    try {\n      return this.step(this.controller.next(value))\n    } catch (error) {\n      return this.panic(error)\n    }\n  }\n  /**\n   * @param {T} value\n   */\n  return(value) {\n    try {\n      return this.step(this.controller.return(value))\n    } catch (error) {\n      return this.panic(error)\n    }\n  }\n  /**\n   * @param {X} error\n   */\n  throw(error) {\n    try {\n      return this.step(this.controller.throw(error))\n    } catch (error) {\n      return this.panic(error)\n    }\n  }\n}\n\n/**\n * @template M\n * @param {Task.Effect<M>} init\n * @param {(message:M) => Task.Effect<M>} next\n * @returns {Task.Task<void, never, never>}\n */\nexport const loop = function* (init, next) {\n  /** @type {Task.Controller<void, never, M>} */\n  const controller = yield* current()\n  const group = new Group(controller)\n  Group.enqueue(init[Symbol.iterator](), group)\n\n  while (true) {\n    for (const message of step(group)) {\n      Group.enqueue(next(message)[Symbol.iterator](), group)\n    }\n\n    if (Stack.size(group.stack) > 0) {\n      yield* suspend()\n    } else {\n      break\n    }\n  }\n}\n\nlet ID = 0\n/** @type {Task.Status} */\nconst IDLE = \"idle\"\nconst ACTIVE = \"active\"\nconst FINISHED = \"finished\"\n/** @type {Task.TaskState<any, any>} */\nconst INIT = { done: false, value: CURRENT }\n\nconst BLANK = {}\n\n/** @type {Task.Effect<never>} */\nconst NONE = (function* none() {})()\n\n/** @type {Task.Main<any, any, any>} */\nconst MAIN = new Main()\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 24459, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 24465, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 24471, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40perma/map/src/bitfield/Uint32.js"],"sourcesContent":["import * as API from \"./api.js\"\n\nexport { API }\n\n/**\n * @param {API.Uint32} size\n */\nexport const empty = (size = 32) => {\n  // We could support < 32, but it seems impractical and would negatively affect\n  // performance as we would have to do extra bound checks.\n  if (size !== 32) {\n    throw new Error(`Uint32 BitField does not support size: ${size}`)\n  }\n\n  return 0\n}\n\n/**\n * @param  {API.Uint32[]} bits\n * @param {API.Uint32} [size]\n */\nexport const from = (bits, size) => {\n  let bitfield = empty(size)\n  for (const bit of bits) {\n    bitfield = set(bitfield, bit)\n  }\n  return bitfield\n}\n\n/**\n * @param {API.Uint32} _bitField\n */\nexport const size = _bitField => 32\n\n/**\n * Reads out 5 bits at the given bit offset.\n *\n * @param {API.Uint32} bitField - Bitfield in Uint32 representation.\n * @param {API.Uint32} index - Index with-in `bitField` to read bits from.\n * @returns {API.Uint32}\n */\nconst mask = (bitField, index) => (bitField >>> index) & 0b11111\n\n/**\n * Creates mask that can be used to check a bit in nodes bitmap for the give\n * key (hash) at given depth.\n *\n * @param {API.Uint32} bitField - Key hash as 32 bit integer.\n * @param {API.Uint32} index - Index with-in the 32bit bitfield\n */\nconst offset = (bitField, index) => 1 << mask(bitField, index)\n\n/**\n * Maps numbers [0, 31] to powers of two. Creates mask that can be used\n * to check a bit in nodes bitmap for the give key (hash) at given depth.\n *\n * @param {API.Uint32} bitField - Key hash as 32 bit integer.\n * @param {API.Uint32} index - Index with-in the 32bit bitfield\n */\nexport const popcount = (bitField, index = 31) =>\n  bitCount(bitField & (offset(index, 0) - 1))\n\n/**\n * @param {API.Uint32} bitField\n * @param {API.Uint32} index\n */\nexport const set = (bitField, index) => bitField | (1 << index)\n\n/**\n * @param {API.Uint32} bitField\n * @param {API.Uint32} index\n */\nexport const unset = (bitField, index) => bitField & (0xff ^ (1 << index))\n\n/**\n * @param {API.Uint32} bitField\n * @param {API.Uint32} index\n */\nexport const get = (bitField, index) => ((bitField >> index) & 0x1) !== 0\n\n/**\n * Counts the number of bits set in n\n * @param {API.Uint32} bitField\n */\nexport const bitCount = bitField => {\n  const n1 = bitField - ((bitField >> 1) & 0x55555555)\n  const n2 = (n1 & 0x33333333) + ((n1 >> 2) & 0x33333333)\n  const n3 = ((n2 + (n2 >> 4)) & 0xf0f0f0f) * 0x1010101\n  return n3 >> 24\n}\n\n/**\n * @param {API.Uint32} left\n * @param {API.Uint32} right\n * @returns {API.Uint32}\n */\nexport const and = (left, right) => left & right\n\n/**\n * @param {API.Uint32} left\n * @param {API.Uint32} right\n * @returns {API.Uint32}\n */\nexport const or = (left, right) => left | right\n\n/**\n * Counts the number of bits set in n\n * @param {API.Uint32} bitField\n * @returns {Uint8Array}\n */\nexport const toBytes = bitField =>\n  Uint8Array.of(\n    (bitField >> 24) & 0b1111_1111,\n    (bitField >> 16) & 0b1111_1111,\n    (bitField >> 8) & 0b1111_1111,\n    bitField & 0b1111_1111\n  )\n\n/**\n *\n * @param {Uint8Array} bytes\n * @returns {API.Uint32}\n */\nexport const fromBytes = bytes => {\n  if (bytes.length !== 4) {\n    throw new Error(`Expected 4 bytes instead got ${bytes.length}`)\n  }\n  return (bytes[0] << 24) + (bytes[1] << 16) + (bytes[2] << 8) + bytes[3]\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;AAOO,MAAM,QAAQ,CAAC,OAAO,EAAE;IAC7B,8EAA8E;IAC9E,yDAAyD;IACzD,IAAI,SAAS,IAAI;QACf,MAAM,IAAI,MAAM,CAAC,uCAAuC,EAAE,MAAM;IAClE;IAEA,OAAO;AACT;AAMO,MAAM,OAAO,CAAC,MAAM;IACzB,IAAI,WAAW,MAAM;IACrB,KAAK,MAAM,OAAO,KAAM;QACtB,WAAW,IAAI,UAAU;IAC3B;IACA,OAAO;AACT;AAKO,MAAM,OAAO,CAAA,YAAa;AAEjC;;;;;;CAMC,GACD,MAAM,OAAO,CAAC,UAAU,QAAU,AAAC,aAAa,QAAS;AAEzD;;;;;;CAMC,GACD,MAAM,SAAS,CAAC,UAAU,QAAU,KAAK,KAAK,UAAU;AASjD,MAAM,WAAW,CAAC,UAAU,QAAQ,EAAE,GAC3C,SAAS,WAAY,OAAO,OAAO,KAAK;AAMnC,MAAM,MAAM,CAAC,UAAU,QAAU,WAAY,KAAK;AAMlD,MAAM,QAAQ,CAAC,UAAU,QAAU,WAAW,CAAC,OAAQ,KAAK,KAAM;AAMlE,MAAM,MAAM,CAAC,UAAU,QAAU,CAAC,AAAC,YAAY,QAAS,GAAG,MAAM;AAMjE,MAAM,WAAW,CAAA;IACtB,MAAM,KAAK,WAAW,CAAC,AAAC,YAAY,IAAK,UAAU;IACnD,MAAM,KAAK,CAAC,KAAK,UAAU,IAAI,CAAC,AAAC,MAAM,IAAK,UAAU;IACtD,MAAM,KAAK,CAAC,AAAC,KAAK,CAAC,MAAM,CAAC,IAAK,SAAS,IAAI;IAC5C,OAAO,MAAM;AACf;AAOO,MAAM,MAAM,CAAC,MAAM,QAAU,OAAO;AAOpC,MAAM,KAAK,CAAC,MAAM,QAAU,OAAO;AAOnC,MAAM,UAAU,CAAA,WACrB,WAAW,EAAE,CACX,AAAC,YAAY,KAAM,aACnB,AAAC,YAAY,KAAM,aACnB,AAAC,YAAY,IAAK,aAClB,WAAW;AAQR,MAAM,YAAY,CAAA;IACvB,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,MAAM,MAAM,EAAE;IAChE;IACA,OAAO,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;AACzE","ignoreList":[0]}},
    {"offset": {"line": 24587, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 24593, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40perma/map/src/path/Uint32.js"],"sourcesContent":["import * as API from \"./api.js\"\n// @ts-expect-error - has no types\nimport murmur from \"murmurhash3js-revisited\"\n\nconst utf8 = new TextEncoder()\n\n/**\n * @typedef {(bytes:Uint8Array) => API.Uint32} Hasher\n * @type {Hasher}\n */\nexport const hash32 = murmur.x64.hash126\n\n/**\n * @param {Partial<API.Options<API.Uint32>>} options\n * @returns {API.Path<API.Uint32>}\n */\n/* c8 ignore next 45 */\nexport const configure = ({ bitWidth = 5, hash = hash32 }) => {\n  const hashSize = 4\n  if (bitWidth > hashSize * 8) {\n    throw new RangeError(\n      `Can not use bitWidth ${bitWidth} which exceeds the hashSize ${hashSize}`\n    )\n  }\n\n  if (hashSize * 8 > 32) {\n    throw new RangeError(\n      `Can not use hashSize ${hashSize} as it can not be encoded in Uint32`\n    )\n  }\n\n  // Mask for reading `bitWidth` number of bits from the end.\n  const mask = 0xffffffff >>> (32 - bitWidth)\n\n  /**\n   * Determines bit position for the path entry at the given `depth`.\n   * ```js\n   * const key = hash(\"result\") // 0b00011010010110010101111100110010\n   * // Which is following path (in reverse as we read from the right)\n   * // 10010/11001/10111/10010/00101/01101/00000 -> [ 18, 25, 23, 18, 5, 13, 0 ]\n   * at(key, 0) // 0b10010 -> 18\n   * at(key, 1) // 0b11001 -> 25\n   * at(key, 2) // 0b10111 -> 23\n   * at(key, 3) // 0b10010 -> 18\n   * at(key, 4) // 0b00101 -> 5\n   * at(key, 5) // 0b01101 -> 13\n   * at(key, 6) // 0b00000 -> 0\n   * ```\n   *\n   * @param {API.Uint32} path\n   * @param {number} depth\n   */\n  const at = (path, depth) => (path >>> (depth * bitWidth)) & mask\n\n  /**\n   * @param {string} key\n   * @returns {API.Uint32}\n   */\n  const from = key => hash(utf8.encode(key))\n\n  return { at, from, size: Math.ceil((hashSize * 8) / bitWidth) }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA,kCAAkC;AAClC;;;AAEA,MAAM,OAAO,IAAI;AAMV,MAAM,SAAS,iKAAM,CAAC,GAAG,CAAC,OAAO;AAOjC,MAAM,YAAY,CAAC,EAAE,WAAW,CAAC,EAAE,OAAO,MAAM,EAAE;IACvD,MAAM,WAAW;IACjB,IAAI,WAAW,WAAW,GAAG;QAC3B,MAAM,IAAI,WACR,CAAC,qBAAqB,EAAE,SAAS,4BAA4B,EAAE,UAAU;IAE7E;IAEA,IAAI,WAAW,IAAI,IAAI;QACrB,MAAM,IAAI,WACR,CAAC,qBAAqB,EAAE,SAAS,mCAAmC,CAAC;IAEzE;IAEA,2DAA2D;IAC3D,MAAM,OAAO,eAAgB,KAAK;IAElC;;;;;;;;;;;;;;;;;GAiBC,GACD,MAAM,KAAK,CAAC,MAAM,QAAU,AAAC,SAAU,QAAQ,WAAa;IAE5D;;;GAGC,GACD,MAAM,OAAO,CAAA,MAAO,KAAK,KAAK,MAAM,CAAC;IAErC,OAAO;QAAE;QAAI;QAAM,MAAM,KAAK,IAAI,CAAC,AAAC,WAAW,IAAK;IAAU;AAChE","ignoreList":[0]}},
    {"offset": {"line": 24648, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40perma/map/src/node.js"],"sourcesContent":["import * as API from \"./api.js\"\nexport * from \"./api.js\"\nimport * as BitField from \"./bitfield/Uint32.js\"\nimport * as Path from \"./path/Uint32.js\"\nexport { API }\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @implements {API.BitmapIndexedNode<T, K, C>}\n */\nclass BitmapIndexedNode {\n  /**\n   * @param {API.Edit|null} edit\n   * @param {ReturnType<C['BitField']['empty']>} datamap\n   * @param {ReturnType<C['BitField']['empty']>} nodemap\n   * @param {API.Children<T, K, C>} children\n   * @param {C} config\n   */\n  constructor(edit, datamap, nodemap, children, config) {\n    this.edit = edit\n    this.config = config\n    this.datamap = datamap\n    this.nodemap = nodemap\n    this.children = children\n  }\n\n  get nodeArity() {\n    return this.config.BitField.popcount(this.nodemap)\n  }\n  get dataArity() {\n    return this.config.BitField.popcount(this.datamap)\n  }\n\n  /**\n   * @returns {API.BitmapIndexedNode<T, K, C>}\n   */\n  /* c8 ignore next 3 */\n  empty() {\n    return create(this.config)\n  }\n\n  /**\n   * @template X\n   * @param {API.Uint32} depth\n   * @param {ReturnType<C['Path']['from']>} path\n   * @param {K} key\n   * @param {X} notFound\n   * @returns {T|X}\n   */\n\n  lookup(depth, path, key, notFound) {\n    return lookup(this, depth, path, key, notFound)\n  }\n\n  /**\n   * @template {string} R\n   * @param {API.Edit|null} edit\n   * @param {API.Uint32} depth\n   * @param {ReturnType<C['Path']['from']>} path\n   * @param {K|R} key\n   * @param {T} value\n   * @param {{value:boolean}} addedLeaf\n   * @returns {API.BitmapIndexedNode<T, K | R, C>}\n   */\n  associate(edit, depth, path, key, value, addedLeaf) {\n    return associate(this, edit, depth, path, key, value, addedLeaf)\n  }\n\n  /**\n   * @param {API.Edit|null} edit\n   * @param {API.Uint32} depth\n   * @param {ReturnType<C['Path']['from']>} path\n   * @param {K} key\n   * @param {{value:boolean}} removedLeaf\n   * @returns {API.BitmapIndexedNode<T, K, C>}\n   */\n  dissociate(edit, depth, path, key, removedLeaf) {\n    return dissociate(this, edit, depth, path, key, removedLeaf)\n  }\n\n  /**\n   * @param {API.Edit|null} edit\n   * @returns {API.BitmapIndexedNode<T, K, C>}\n   */\n  fork(edit = null) {\n    return fork(this, edit)\n  }\n\n  /**\n   * @returns {IterableIterator<[K, T]>}\n   */\n  entries() {\n    return entries(this)\n  }\n\n  /**\n   * @returns {IterableIterator<K>}\n   */\n  keys() {\n    return keys(this)\n  }\n\n  /**\n   * @returns {IterableIterator<T>}\n   */\n  values() {\n    return values(this)\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @implements {API.HashCollisionNode<T, K, C>}\n */\nclass HashCollisionNode {\n  /**\n   * @param {API.Edit|null} edit\n   * @param {number} count\n   * @param {API.CollisionEntries<T, K>} children\n   * @param {C} config\n   */\n  /* c8 ignore next 12 */\n  constructor(edit, count, children, config) {\n    this.edit = edit\n    this.count = count\n    this.children = children\n    this.config = config\n  }\n  get nodeArity() {\n    return /** @type {0} */ (0)\n  }\n  get dataArity() {\n    return this.count\n  }\n\n  /**\n   * @template X\n   * @param {API.Uint32} _shift\n   * @param {unknown} _path\n   * @param {K} key\n   * @param {X} notFound\n   * @returns {T|X}\n   */\n  /* c8 ignore next 3 */\n  lookup(_shift, _path, key, notFound) {\n    return lookupCollision(this, key, notFound)\n  }\n\n  /**\n   * @template {string} R\n   * @param {API.Edit|null} edit\n   * @param {API.Uint32} _shift\n   * @param {ReturnType<C['Path']['from']>} path\n   * @param {K|R} key\n   * @param {T} value\n   * @param {{value:boolean}} addedLeaf\n   * @returns {API.HashCollisionNode<T, K | R, C>}\n   */\n  /* c8 ignore next 3 */\n  associate(edit, _shift, path, key, value, addedLeaf) {\n    return associateCollision(this, edit, path, key, value, addedLeaf)\n  }\n\n  /**\n   * @param {API.Edit|null} edit\n   * @param {API.Uint32} _shift\n   * @param {ReturnType<C['Path']['from']>} path\n   * @param {K} key\n   * @param {{value:boolean}} removedLeaf\n   * @returns {API.Node<T, K, C>}\n   */\n  /* c8 ignore next 3 */\n  dissociate(edit, _shift, path, key, removedLeaf) {\n    return dissociateCollision(this, edit, path, key, removedLeaf)\n  }\n\n  /**\n   * @param {API.Edit|null} edit\n   * @returns {this}\n   */\n  /* c8 ignore next 3 */\n  fork(edit = null) {\n    return /** @type {this} */ (forkCollision(this, edit))\n  }\n\n  /**\n   * @returns {IterableIterator<[K, T]>}\n   */\n  /* c8 ignore next 3 */\n  entries() {\n    return entries(this)\n  }\n\n  /**\n   * @returns {IterableIterator<K>}\n   */\n  /* c8 ignore next 3 */\n  keys() {\n    return keys(this)\n  }\n\n  /**\n   * @returns {IterableIterator<T>}\n   */\n  /* c8 ignore next 3 */\n  values() {\n    return values(this)\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @template X\n * @param {API.HashCollisionNode<T, K, C>} node\n * @param {K} name\n * @param {X} notFound\n * @returns {T|X}\n */\n/* c8 ignore next 8 */\nexport const lookupCollision = (node, name, notFound) => {\n  const { children: entries, count } = node\n  // find where entry with this name belongs\n  const n = findHashCollisionNodeIndex(entries, count, name)\n  // if entry name at this index matches given name return the value otherwise\n  // return `notFound` as we have no such entry.\n  return entries[n] === name ? /** @type {T} */ (entries[n + 1]) : notFound\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @template {string} R\n * @param {API.HashCollisionNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @param {ReturnType<C['Path']['from']>} key\n * @param {K|R} name\n * @param {T} value\n * @param {{value:boolean}} addedLeaf\n * @returns {API.HashCollisionNode<T, K | R, C>}\n */\n/* c8 ignore next 26 */\nexport const associateCollision = (node, edit, key, name, value, addedLeaf) => {\n  const { children, count } = node\n\n  const index = findHashCollisionNodeIndex(children, count, name)\n  // If entry at this index has a different name we fork the node and\n  // add a new entry.\n  if (children[index] !== name) {\n    const newNode = node.fork(edit)\n    addedLeaf.value = true\n    newNode.count += 1\n    newNode.children.splice(index, key, value)\n    return newNode\n  }\n  // If name is the same but value is not we fork the node and update\n  // the value\n  else if (children[index + 1] !== value) {\n    const newNode = node.fork(edit)\n    newNode.children[index + 1] = value\n    return newNode\n  }\n  // If we got this far entry with this exact name and value is already\n  // present making this a noop, so we return this node back.\n  else {\n    return node\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.HashCollisionNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @param {ReturnType<C['Path']['from']>} hash\n * @param {K} name\n * @param {{value:boolean}} removedLeaf\n * @returns {API.Node<T, K, C>}\n */\n/* c8 ignore next 37 */\nexport const dissociateCollision = (node, edit, hash, name, removedLeaf) => {\n  const { children: entries, count, config } = node\n  const index = findHashCollisionNodeIndex(entries, count, name)\n  // If there is no entry with a the given name this is noop so we just\n  // return back this node.\n  if (entries[index] !== name) {\n    return node\n  } else {\n    removedLeaf.value = true\n    // If conflict contained only two entries removing one of them would\n    // leave us with no conflict which is why we create a new node with a\n    // an entry other than one that would correspond provided name\n    if (count === 2) {\n      const offset = index === 0 ? 2 : 0\n      return /** @type {API.BitmapIndexedNode<T, K, C>} */ (\n        associate(\n          create(config),\n          edit,\n          0,\n          hash,\n          /** @type {K} */ (entries[offset]),\n          /** @type {T} */ (entries[offset + 1]),\n          removedLeaf\n        )\n      )\n    }\n    // otherwise we got this far we have more than two colliding entries in\n    // which case we simply remove one corresponding to given `name`.\n    //\n    else {\n      const newNode = node.fork(edit)\n      newNode.children.splice(index, 2)\n      newNode.count -= 1\n      return newNode\n    }\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.HashCollisionNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @returns {API.HashCollisionNode<T, K, C>}\n */\n/* c8 ignore next 12 */\nexport const forkCollision = (node, edit = null) => {\n  if (canEdit(node.edit, edit)) {\n    return node\n  } else {\n    return new HashCollisionNode(\n      edit,\n      node.count,\n      /** @type {API.CollisionEntries<T, K>} */ (node.children.slice()),\n      node.config\n    )\n  }\n}\n\n/**\n * Finds the index inside collision entries where given `key` belongs, which is\n * index where `key <= entries[index]` is `true`. If no index satisfies this\n * constraint index will be `entries.length` indicating that key belongs in the\n * last position.\n *\n * @template T\n * @template {string} K\n * @param {API.CollisionEntries<T, K>} entries\n * @param {number} count\n * @param {K} key\n */\n/* c8 ignore next 8 */\nconst findHashCollisionNodeIndex = (entries, count, key) => {\n  let index = 0\n  // increase index until we find a index where key <= entries[index]\n  while (index < count && entries[index] > key) {\n    index += 2\n  }\n  return index\n}\n\nconst defaultConfig = { bitWidth: 32, BitField, Path }\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.Edit|null} [edit]\n * @param {C} config\n * @returns {API.BitmapIndexedNode<T, K, C>}\n */\nexport const create = (config, edit = null) =>\n  new BitmapIndexedNode(\n    edit,\n    config.BitField.empty(Math.pow(2, config.bitWidth)),\n    config.BitField.empty(Math.pow(2, config.bitWidth)),\n    /** @type {API.Children<T, K, C>} */ ([]),\n    config\n  )\n\n/**\n * @template T, U\n * @template {string} K\n * @param {API.BitmapIndexedNode<T, K>} node\n * @param {K} key\n * @param {U} notFound\n */\nexport const get = (node, key, notFound) =>\n  lookup(node, 0, node.config.Path.from(key), key, notFound)\n\n/**\n * @template T, U\n * @template {string} K\n * @template Bits, BitMap\n * @param {API.BitmapIndexedNode<T, K, API.Config<Bits, BitMap>>} node\n * @param {API.Uint32} depth\n * @param {Bits} path\n * @param {K} key\n * @param {U} notFound\n * @returns {T|U}\n */\nexport const lookup = (node, depth, path, key, notFound) => {\n  const { datamap, nodemap, config } = node\n  const { Path, BitField } = config\n  const offset = Path.at(path, depth)\n\n  // If bit is set in the data bitmap we have some key, value under the\n  // matching hash segment.\n  if (BitField.get(datamap, offset)) {\n    const index = BitField.popcount(datamap, offset)\n    // If key matches actual key in the map we found the the value\n    // otherwise we did not.\n    if (keyAt(node, index) === key) {\n      return valueAt(node, index)\n    } else {\n      return notFound\n    }\n  }\n  // If bit is set in the node bitmapt we have a node under the\n  // matching hash segment.\n  else if (BitField.get(nodemap, offset)) {\n    // Resolve node and continue lookup within it.\n    const child = resolveNode(node, offset)\n    return child.lookup(depth + 1, path, key, notFound)\n  }\n  // If we have neither node nor key-pair for this hash segment\n  // we return notFound.\n  else {\n    return notFound\n  }\n}\n\n/**\n * @template T, U\n * @template {string} K\n * @template {string} R\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @param {R} key\n * @param {T} value\n * @param {{ value: boolean }} addedLeaf\n * @returns {API.BitmapIndexedNode<T, K|R, C>}\n */\nexport const set = (node, edit, key, value, addedLeaf) =>\n  associate(node, edit, 0, node.config.Path.from(key), key, value, addedLeaf)\n\n/**\n * @template T\n * @template {string} K\n * @template {string} R\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @param {API.Uint32} depth\n * @param {ReturnType<C['Path']['from']>} path\n * @param {K|R} key\n * @param {T} value\n * @param {{value:boolean}} addedLeaf\n * @returns {API.BitmapIndexedNode<T, K | R, C>}\n */\nexport const associate = (node, edit, depth, path, key, value, addedLeaf) => {\n  const { datamap, nodemap, config } = node\n  const { Path, BitField } = config\n  const offset = Path.at(path, depth)\n  // If bit is set in the data bitmap we have some key, value under the\n  // matching hash segment.\n  if (BitField.get(datamap, offset)) {\n    const index = BitField.popcount(datamap, offset)\n    const found = keyAt(node, index)\n    // If we have entry with given name and value is the same return node\n    // as is, otherwise fork node and set the value.\n    if (key === found) {\n      return valueAt(node, index) === value\n        ? node\n        : forkAndSet(node, edit, index, value)\n    }\n    // Otherwise we need to create a branch to contain current key, value and\n    // one been passed.\n    else {\n      const branch = mergeTwoLeaves(\n        config,\n        edit,\n        depth + 1,\n        Path.from(found),\n        found,\n        valueAt(node, index),\n        path,\n        key,\n        value\n      )\n      addedLeaf.value = true\n\n      return migrateLeafToBranch(node, edit, offset, branch)\n    }\n  }\n  // If bit is set in the node bitmap we have a branch under the current\n  // hash slice.\n  else if (BitField.get(nodemap, offset)) {\n    const child = resolveNode(node, offset)\n    const newChild = child.associate(\n      edit,\n      depth + 1,\n      path,\n      key,\n      value,\n      addedLeaf\n    )\n\n    if (child === newChild) {\n      return node\n    } else {\n      return copyAndSetChild(node, edit, offset, newChild)\n    }\n  }\n  // If we have neither node nor a key-value for this hash segment. We copy\n  // current children and add new key-value pair\n  else {\n    const index = BitField.popcount(datamap, offset)\n    addedLeaf.value = true\n\n    /** @type {API.BitmapIndexedNode<T, K|R, C>} */\n    const newNode = node.fork(edit)\n\n    // Capture new entry in the data bitmap\n    newNode.datamap = BitField.set(datamap, offset)\n    newNode.children.splice(keyPosition(index), 0, key, value)\n    return newNode\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @param {K} key\n * @param {{ value: boolean }} removedLeaf\n * @returns {API.BitmapIndexedNode<T, K, C>}\n */\nconst remove = (node, edit, key, removedLeaf) =>\n  dissociate(node, edit, 0, node.config.Path.from(key), key, removedLeaf)\n\nexport { remove as delete }\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} source\n * @param {API.Edit|null} edit\n * @param {API.Uint32} depth\n * @param {ReturnType<C['Path']['from']>} path\n * @param {K} key\n * @param {{value:boolean}} removedLeaf\n * @returns {API.BitmapIndexedNode<T, K, C>}\n */\nexport const dissociate = (source, edit, depth, path, key, removedLeaf) => {\n  const { datamap, nodemap, config } = source\n  const { BitField, Path } = config\n  const offset = Path.at(path, depth)\n  // If bit is set in the data bitmap we have an entry under the\n  // matching hash segment.\n  if (BitField.get(datamap, offset)) {\n    const index = BitField.popcount(datamap, offset)\n    // If key at a given index matches given `name` we fork a node and remove\n    // the entry\n    if (key === keyAt(source, index)) {\n      removedLeaf.value = true\n      const node = fork(source, edit)\n      // Update the bitmap\n      node.datamap = BitField.unset(source.datamap, offset)\n      // remove the child\n      node.children.splice(keyPosition(index), 2)\n      return node\n    }\n    // otherwise we don't have such entry so we return node back as is.\n    else {\n      return source\n    }\n  }\n  // If bit is set in the node bitmapt we have a node under the\n  // matching hash segment.\n  else if (BitField.get(nodemap, offset)) {\n    const node = resolveNode(source, offset)\n    const child = node.dissociate(edit, depth + 1, path, key, removedLeaf)\n    // if child has a single element we need to canonicalize\n    if (hasSingleLeaf(child)) {\n      // if source has a single child, we collapse and return the child\n      // otherwise we inline the child.\n      return hasSingleNode(source)\n        ? child\n        : inlineChild(source, edit, offset, child)\n    } else if (node === child) {\n      return source\n    } else {\n      return copyAndSetChild(source, edit, offset, child)\n    }\n  }\n  // If we have neither node nor a key-value for this hash segment this is a\n  // noop.\n  else {\n    return source\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.Node<T, K, C>} node\n * @returns {IterableIterator<[K, T]>}\n */\nexport const entries = function* ({ children }) {\n  let offset = 0\n  const count = children.length\n  while (offset < count) {\n    const key = children[offset]\n    if (typeof key === \"string\") {\n      offset += 1\n      const value = children[offset]\n      yield /** @type {[K, T]} */ ([key, value])\n      offset += 1\n    } else {\n      break\n    }\n  }\n\n  while (offset < count) {\n    const node = /** @type {API.BitmapIndexedNode<T, K, C>} */ (\n      children[offset]\n    )\n    yield* node.entries()\n    offset += 1\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @returns {API.BitmapIndexedNode<T, K, C>}\n */\nexport const fork = (node, edit) => {\n  if (canEdit(node.edit, edit)) {\n    return node\n  } else {\n    const newNode = new BitmapIndexedNode(\n      edit,\n      node.datamap,\n      node.nodemap,\n      node.children.slice(),\n      node.config\n    )\n    return newNode\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.Node<T, K, C>} node\n * @returns {IterableIterator<K>}\n */\nexport const keys = function* ({ children }) {\n  let offset = 0\n  const count = children.length\n  while (offset < count) {\n    const key = children[offset]\n    if (typeof key === \"string\") {\n      yield /** @type {K} */ (key)\n      offset += 2\n    } else {\n      break\n    }\n  }\n\n  while (offset < count) {\n    const node = /** @type {API.BitmapIndexedNode<T, K>} */ (children[offset])\n    yield* node.keys()\n    offset += 1\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.Node<T, K, C>} node\n * @returns {IterableIterator<T>}\n */\nexport const values = function* ({ children }) {\n  let offset = 0\n  const count = children.length\n  while (offset < count) {\n    const key = children[offset]\n    if (typeof key === \"string\") {\n      offset += 1\n      yield /** @type {T} */ (children[offset])\n      offset += 1\n    } else {\n      break\n    }\n  }\n\n  while (offset < count) {\n    const node = /** @type {API.BitmapIndexedNode<T, K>} */ (children[offset])\n    yield* node.values()\n    offset += 1\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @param {number} offset\n * @param {T} value\n */\nexport const forkAndSet = (node, edit, offset, value) => {\n  const newNode = node.fork(edit)\n  newNode.children[valuePosition(offset)] = value\n  return newNode\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} source\n * @param {API.Edit|null} edit\n * @param {number} offset\n * @param {API.Node<T, K, C>} child\n * @returns {API.BitmapIndexedNode<T, K, C>}\n */\nexport const inlineChild = (source, edit, offset, child) => {\n  const { datamap, nodemap, config } = source\n  const { BitField } = config\n  const node = fork(source, edit)\n\n  // remove the node that we are inlining\n  node.children.splice(nodePosition(source, offset), 1)\n  // add key-value pair where it wolud fall\n  node.children.splice(\n    keyPosition(BitField.popcount(datamap, offset)),\n    0,\n    child.children[0],\n    child.children[1]\n  )\n\n  node.datamap = BitField.set(datamap, offset)\n  node.nodemap = BitField.unset(nodemap, offset)\n\n  return node\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @param {API.Edit|null} edit\n * @param {number} offset\n * @param {API.Node<T, K, C>} child\n * @returns {API.BitmapIndexedNode<T, K, C>}\n */\nexport const copyAndSetChild = (node, edit, offset, child) => {\n  const newNode = fork(node, edit)\n  newNode.children[nodePosition(node, offset)] = child\n  return newNode\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} source\n * @param {API.Edit|null} edit\n * @param {number} offset\n * @param {API.Node<T, K, C>} branch\n * @returns {API.BitmapIndexedNode<T, K, C>}\n */\nexport const migrateLeafToBranch = (source, edit, offset, branch) => {\n  const { nodemap, datamap, config } = source\n  const { BitField } = config\n  const index = BitField.popcount(datamap, offset)\n  // Previous id corresponds to the key position\n  const oldId = keyPosition(index)\n  const newId = nodePosition(source, offset)\n\n  const node = fork(source, edit)\n\n  // remove an old leaf\n  node.datamap = BitField.unset(datamap, offset)\n  node.children.splice(oldId, 2)\n\n  // add a new branch\n  node.nodemap = BitField.set(nodemap, offset)\n  node.children.splice(newId - 1, 0, branch)\n\n  return node\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {C} config\n * @param {API.Edit|null} edit\n * @param {number} depth\n * @param {ReturnType<C['Path']['from']>} oldPath\n * @param {K} oldKey\n * @param {T} oldValue\n * @param {ReturnType<C['Path']['from']>} newPath\n * @param {K} newKey\n * @param {T} newValue\n * @returns {API.Node<T, K, C>}\n */\nexport const mergeTwoLeaves = (\n  config,\n  edit,\n  depth,\n  oldPath,\n  oldKey,\n  oldValue,\n  newPath,\n  newKey,\n  newValue\n) => {\n  const { BitField, Path } = config\n  // If we have reached end of the path we can no longer create another\n  // `BitmapIndexedNode`, instead we create a node containing (hash) colliding\n  // entries\n  /* c8 ignore next 7 */\n  if (Path.size < depth) {\n    return new HashCollisionNode(\n      edit,\n      2,\n      [oldKey, oldValue, newKey, newValue],\n      config\n    )\n  } else {\n    const oldOffset = Path.at(oldPath, depth)\n    const newOffset = Path.at(newPath, depth)\n    // If offsets still match create another intermediery node and merge these\n    // two nodes at next depth level.\n    if (oldOffset === newOffset) {\n      return new BitmapIndexedNode(\n        edit,\n        BitField.empty(Math.pow(2, config.bitWidth)),\n        BitField.from([oldOffset], Math.pow(2, config.bitWidth)),\n        [\n          mergeTwoLeaves(\n            config,\n            edit,\n            depth + 1,\n            oldPath,\n            oldKey,\n            oldValue,\n            newPath,\n            newKey,\n            newValue\n          ),\n        ],\n        config\n      )\n    }\n    // otherwise create new node with both key-value pairs as it's children\n    else {\n      return new BitmapIndexedNode(\n        edit,\n        BitField.from([oldOffset, newOffset], Math.pow(2, config.bitWidth)),\n        BitField.empty(Math.pow(2, config.bitWidth)),\n        /** @type {API.Children<T, K, C>} */\n        (\n          // We insert child with a lower index first so that we can derive it's\n          // index on access via popcount\n          oldOffset < newOffset\n            ? [oldKey, oldValue, newKey, newValue]\n            : [newKey, newValue, oldKey, oldValue]\n        ),\n        config\n      )\n    }\n  }\n}\n\n/**\n * @template {string} K\n * @param {API.BitmapIndexedNode<unknown, K>} node\n * @param {number} index\n */\nexport const keyAt = ({ children }, index) =>\n  /** @type {K} */ (children[keyPosition(index)])\n\n/**\n * @param {number} index\n */\nexport const keyPosition = index => index * 2\n\n/**\n * @template T\n * @param {API.BitmapIndexedNode<T>} node\n * @param {number} index\n */\nexport const valueAt = ({ children }, index) =>\n  /** @type {T} */ (children[valuePosition(index)])\n\n/**\n * @param {number} index\n */\nexport const valuePosition = index => index * 2 + 1\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @param {number} offset\n * @returns {API.BitmapIndexedNode<T, K, C>|API.HashCollisionNode<T, K, C>}\n */\nexport const resolveNode = (node, offset) =>\n  /** @type {API.BitmapIndexedNode<T, K, C>|API.HashCollisionNode<T, K, C>} */ (\n    node.children[nodePosition(node, offset)]\n  )\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @param {number} offset\n */\nconst nodePosition = ({ children, nodemap, config }, offset) =>\n  children.length - 1 - config.BitField.popcount(nodemap, offset)\n\n/**\n * @param {API.Edit|null} owner\n * @param {API.Edit|null} editor\n */\nconst canEdit = (owner, editor) => owner != null && owner === editor\n\n/**\n * Returns `true` if node has a single entry. It also refines type to\n * `BitmapIndexedNode` because `HashCollisionNode` is normalized to\n * `BitmapIndexedNode` when it contains only a single entry.\n *\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.Node<T, K, C>} node\n * @returns {node is API.BitmapIndexedNode<T, K, C>}\n */\nconst hasSingleLeaf = node => node.nodeArity === 0 && node.dataArity === 1\n\n/**\n * Returns `true` if node has a single childe node and 0 child leaves.\n *\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @param {API.BitmapIndexedNode<T, K, C>} node\n * @returns {node is API.BitmapIndexedNode<T, K, C>}\n */\nconst hasSingleNode = ({ config: { BitField }, datamap, nodemap }) =>\n  BitField.popcount(datamap) === 0 && BitField.popcount(nodemap) === 1\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 25251, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40perma/map/src/path/Uint8Array.js"],"sourcesContent":["import * as API from \"./api.js\"\nconst utf8 = new TextEncoder()\nimport { murmur364 } from \"@multiformats/murmur3\"\n\n/**\n * @param {Uint8Array} bytes\n */\n/* c8 ignore next 2 */\nexport const hash64 = bytes =>\n  /** @type {Uint8Array} */ (murmur364.encode(bytes))\n\n/**\n * @param {Partial<API.Options<Uint8Array>>} options\n * @returns {API.Path<Uint8Array>}\n */\n/* c8 ignore next 25 */\nexport const configure = ({ bitWidth = 8, hash = hash64 } = {}) => {\n  const hashSize = hash(new Uint8Array()).byteLength\n\n  /**\n   * @param {Uint8Array} path\n   * @param {number} depth\n   * @returns {API.Uint32}\n   */\n  const at = (path, depth) => {\n    const offset = depth * bitWidth\n    if (offset > hashSize) {\n      throw new RangeError(`Out of bounds`)\n    }\n\n    return toInt(path, offset, bitWidth)\n  }\n\n  /**\n   * @param {string} key\n   * @returns {Uint8Array}\n   */\n  const from = key => hash(utf8.encode(key))\n\n  return { from, at, size: Math.ceil((hashSize * 8) / bitWidth) }\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {number} offset - bit offset\n * @param {number} count - number of bits to consume\n */\nexport const toInt = (bytes, offset, count) => {\n  let byteOffset = (offset / 8) | 0\n  let bitOffset = offset % 8\n  let desired = count\n  let bits = 0\n  while (desired > 0 && byteOffset < bytes.byteLength) {\n    const byte = bytes[byteOffset]\n    const available = 8 - bitOffset\n\n    const taking = available < desired ? available : desired\n    const bitsLeft = 8 - bitOffset - taking\n    // mask to turn of bits before bitOffset\n    const mask = 0xff >> bitOffset\n    // turn off offset bits and shift to drop remaining bit on the right\n    const value = (mask & byte) >> bitsLeft\n    bits = (bits << taking) + value\n\n    desired -= taking\n    byteOffset++\n    bitOffset = 0\n  }\n\n  return bits\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEA;;AADA,MAAM,OAAO,IAAI;;AAOV,MAAM,SAAS,CAAA,QACO,yKAAS,CAAC,MAAM,CAAC;AAOvC,MAAM,YAAY,CAAC,EAAE,WAAW,CAAC,EAAE,OAAO,MAAM,EAAE,GAAG,CAAC,CAAC;IAC5D,MAAM,WAAW,KAAK,IAAI,cAAc,UAAU;IAElD;;;;GAIC,GACD,MAAM,KAAK,CAAC,MAAM;QAChB,MAAM,SAAS,QAAQ;QACvB,IAAI,SAAS,UAAU;YACrB,MAAM,IAAI,WAAW,CAAC,aAAa,CAAC;QACtC;QAEA,OAAO,MAAM,MAAM,QAAQ;IAC7B;IAEA;;;GAGC,GACD,MAAM,OAAO,CAAA,MAAO,KAAK,KAAK,MAAM,CAAC;IAErC,OAAO;QAAE;QAAM;QAAI,MAAM,KAAK,IAAI,CAAC,AAAC,WAAW,IAAK;IAAU;AAChE;AAOO,MAAM,QAAQ,CAAC,OAAO,QAAQ;IACnC,IAAI,aAAa,AAAC,SAAS,IAAK;IAChC,IAAI,YAAY,SAAS;IACzB,IAAI,UAAU;IACd,IAAI,OAAO;IACX,MAAO,UAAU,KAAK,aAAa,MAAM,UAAU,CAAE;QACnD,MAAM,OAAO,KAAK,CAAC,WAAW;QAC9B,MAAM,YAAY,IAAI;QAEtB,MAAM,SAAS,YAAY,UAAU,YAAY;QACjD,MAAM,WAAW,IAAI,YAAY;QACjC,wCAAwC;QACxC,MAAM,OAAO,QAAQ;QACrB,oEAAoE;QACpE,MAAM,QAAQ,CAAC,OAAO,IAAI,KAAK;QAC/B,OAAO,CAAC,QAAQ,MAAM,IAAI;QAE1B,WAAW;QACX;QACA,YAAY;IACd;IAEA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 25313, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40perma/map/src/bitfield/Uint8Array.js"],"sourcesContent":["import { bitCount, popcount as popcount32 } from \"./Uint32.js\"\nimport * as API from \"./api.js\"\n\n/**\n * @param {number} size\n */\nexport const empty = (size = 256) => {\n  if (size % 8 !== 0) {\n    throw new Error(`Must be multiple of 8`)\n  }\n\n  return new Uint8Array(size / 8)\n}\n\n/**\n * Creates bitfield with specific bits set.\n *\n * @param {number[]} bits\n * @param {number} [size]\n * @returns {Uint8Array}\n */\nexport const from = (bits, size) => {\n  let bitfield = empty(size)\n  for (const index of bits) {\n    const { byte, byteOffset, bitOffset } = at(bitfield, index)\n    bitfield[byteOffset] = byte | (1 << bitOffset)\n  }\n  return bitfield\n}\n\n/**\n * @param {Uint8Array} bitfield\n */\nexport const size = bitfield => bitfield.byteLength * 8\n\n/**\n * Compute offset for the given index\n *\n * @param {Uint8Array} bitfield\n * @param {number} index\n */\nconst at = (bitfield, index) => {\n  const byteOffset = bitfield.byteLength - 1 - ((index / 8) | 0)\n  const bitOffset = index % 8\n  const byte = bitfield[byteOffset]\n\n  return { byte, byteOffset, bitOffset }\n}\n\n/**\n * Set a particular bit.\n *\n * @param {Uint8Array} bytes\n * @param {number} index\n * @param {number} byte\n * @returns {Uint8Array}\n */\nconst setByte = (bytes, index, byte) => {\n  if (bytes[index] !== byte) {\n    const result = bytes.slice(0)\n    result[index] = byte\n    return result\n  }\n  return bytes\n}\n\n/**\n * Set a particular bit.\n *\n * @param {Uint8Array} bitfield\n * @param {number} index\n * @returns {Uint8Array}\n */\nexport const set = (bitfield, index) => {\n  const { byte, byteOffset, bitOffset } = at(bitfield, index)\n  return setByte(bitfield, byteOffset, byte | (1 << bitOffset))\n}\n\n/**\n * Unsets a particular bit.\n\n * @param {Uint8Array} bitfield\n * @param {number} index\n * @returns {Uint8Array}\n */\nexport const unset = (bitfield, index) => {\n  const { byte, byteOffset, bitOffset } = at(bitfield, index)\n  return setByte(bitfield, byteOffset, byte & (0xff ^ (1 << bitOffset)))\n}\n\n/**\n * Returns `true` if bit at given index is set.\n *\n * @param {Uint8Array} bitfield\n * @param {number} index\n */\nexport const get = (bitfield, index) => {\n  var { byte, bitOffset } = at(bitfield, index)\n  return ((byte >> bitOffset) & 0x1) !== 0\n}\n\n/**\n * @param {Uint8Array} bitfield\n */\nexport const toBytes = bitfield => bitfield\n\n/**\n * @param {Uint8Array} bytes\n */\nexport const fromBytes = bytes => bytes\n\n/**\n * @param {Uint8Array} bitfield\n * @param {number} index\n */\nexport const popcount = (bitfield, index = bitfield.byteLength * 8) => {\n  const { byteOffset, bitOffset, byte } = at(bitfield, index)\n\n  let count = popcount32(byte, bitOffset)\n  let offset = bitfield.byteLength - 1\n  while (offset > byteOffset) {\n    const byte = bitfield[offset]\n    count += bitCount(byte)\n    offset--\n  }\n\n  return count\n}\n\n/**\n * @param {Uint8Array} left\n * @param {Uint8Array} right\n */\nexport const or = (left, right) => {\n  const result = left.slice()\n  let offset = 0\n  while (offset < left.length) {\n    result[offset] |= right[offset]\n    offset++\n  }\n  return result\n}\n\n/**\n * @param {Uint8Array} left\n * @param {Uint8Array} right\n */\nexport const and = (left, right) => {\n  const result = left.slice()\n  let offset = 0\n  while (offset < left.length) {\n    result[offset] &= right[offset]\n    offset++\n  }\n  return result\n}\n\nexport { API }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAKO,MAAM,QAAQ,CAAC,OAAO,GAAG;IAC9B,IAAI,OAAO,MAAM,GAAG;QAClB,MAAM,IAAI,MAAM,CAAC,qBAAqB,CAAC;IACzC;IAEA,OAAO,IAAI,WAAW,OAAO;AAC/B;AASO,MAAM,OAAO,CAAC,MAAM;IACzB,IAAI,WAAW,MAAM;IACrB,KAAK,MAAM,SAAS,KAAM;QACxB,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,GAAG,UAAU;QACrD,QAAQ,CAAC,WAAW,GAAG,OAAQ,KAAK;IACtC;IACA,OAAO;AACT;AAKO,MAAM,OAAO,CAAA,WAAY,SAAS,UAAU,GAAG;AAEtD;;;;;CAKC,GACD,MAAM,KAAK,CAAC,UAAU;IACpB,MAAM,aAAa,SAAS,UAAU,GAAG,IAAI,CAAC,AAAC,QAAQ,IAAK,CAAC;IAC7D,MAAM,YAAY,QAAQ;IAC1B,MAAM,OAAO,QAAQ,CAAC,WAAW;IAEjC,OAAO;QAAE;QAAM;QAAY;IAAU;AACvC;AAEA;;;;;;;CAOC,GACD,MAAM,UAAU,CAAC,OAAO,OAAO;IAC7B,IAAI,KAAK,CAAC,MAAM,KAAK,MAAM;QACzB,MAAM,SAAS,MAAM,KAAK,CAAC;QAC3B,MAAM,CAAC,MAAM,GAAG;QAChB,OAAO;IACT;IACA,OAAO;AACT;AASO,MAAM,MAAM,CAAC,UAAU;IAC5B,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,GAAG,UAAU;IACrD,OAAO,QAAQ,UAAU,YAAY,OAAQ,KAAK;AACpD;AASO,MAAM,QAAQ,CAAC,UAAU;IAC9B,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,GAAG,UAAU;IACrD,OAAO,QAAQ,UAAU,YAAY,OAAO,CAAC,OAAQ,KAAK,SAAU;AACtE;AAQO,MAAM,MAAM,CAAC,UAAU;IAC5B,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,GAAG,UAAU;IACvC,OAAO,CAAC,AAAC,QAAQ,YAAa,GAAG,MAAM;AACzC;AAKO,MAAM,UAAU,CAAA,WAAY;AAK5B,MAAM,YAAY,CAAA,QAAS;AAM3B,MAAM,WAAW,CAAC,UAAU,QAAQ,SAAS,UAAU,GAAG,CAAC;IAChE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,GAAG,UAAU;IAErD,IAAI,QAAQ,IAAA,0LAAU,EAAC,MAAM;IAC7B,IAAI,SAAS,SAAS,UAAU,GAAG;IACnC,MAAO,SAAS,WAAY;QAC1B,MAAM,OAAO,QAAQ,CAAC,OAAO;QAC7B,SAAS,IAAA,0LAAQ,EAAC;QAClB;IACF;IAEA,OAAO;AACT;AAMO,MAAM,KAAK,CAAC,MAAM;IACvB,MAAM,SAAS,KAAK,KAAK;IACzB,IAAI,SAAS;IACb,MAAO,SAAS,KAAK,MAAM,CAAE;QAC3B,MAAM,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO;QAC/B;IACF;IACA,OAAO;AACT;AAMO,MAAM,MAAM,CAAC,MAAM;IACxB,MAAM,SAAS,KAAK,KAAK;IACzB,IAAI,SAAS;IACb,MAAO,SAAS,KAAK,MAAM,CAAE;QAC3B,MAAM,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO;QAC/B;IACF;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 25466, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40perma/map/src/lib.js"],"sourcesContent":["export * from \"./api.js\"\nimport * as Node from \"./node.js\"\nimport { create as createBitmapIndexedNode } from \"./node.js\"\nimport * as API from \"./api.js\"\nimport * as Uint32Path from \"./path/Uint32.js\"\nimport * as Uint8ArrayPath from \"./path/Uint8Array.js\"\nimport * as Uint32BitField from \"./bitfield/Uint32.js\"\nimport * as Uint8ArrayBitField from \"./bitfield/Uint8Array.js\"\n\nconst NOT_FOUND = new RangeError(\"Not Found\")\n\n/**\n * A `bitWidth` determines the number of bits of the hash to use for index\n * calculation at each level of the tree. In first layer will distribute\n * children by the first `bitWidth` bits of the key hash. In the next layer\n * next `bitWidth` number of bits of the key hash are used to determine\n * placement of it's children and so on. Each node in the tree will hold\n * `2 ** bitWidth` number of elements.\n *\n * For example when we insert an entry named `result` it will generate a\n * folowing hash (with murmur3 32) `442064690` which in binary would be\n *\n * ```\n * 11010010110010101111100110010\n * ```\n *\n * Which will correspond to a following key path\n *\n * ```\n * 11010/01011/00101/01111/10011/0010\n * ```\n *\n * Whis in decimals would be\n *\n * ```ts\n * 26/11/5/15/19/2'\n * ```\n *\n * If we then insert `fish` it would produce following path\n *\n * ```ts\n * 26/3/4/18/28/19/1\n * ```\n * @template [V=unknown]\n * @template {string} [K=string]\n * @template {API.Config} [C=API.Config<API.Uint32>]\n * @param {Partial<C>} [options]\n * @returns {API.PersistentHashMap<V, K, C>}\n */\nexport const empty = options => {\n  const config = configure(options)\n  return new PersistentHashMap(0, createBitmapIndexedNode(config, null), config)\n}\n\n/**\n * @template {API.Config} [C=API.Config<API.Uint32>]\n * @param {Partial<C>} config\n * @returns {C}\n */\nconst configure = ({\n  bitWidth = 5,\n  /* c8 ignore next 4 */\n  BitField = bitWidth === 5 ? Uint32BitField : Uint8ArrayBitField,\n  Path = bitWidth === 5\n    ? Uint32Path.configure({ bitWidth })\n    : Uint8ArrayPath.configure({ bitWidth }),\n} = {}) => /** @type {C} */ ({ bitWidth, BitField, Path })\n\n/**\n * Creates HashMap from the provided entries.\n *\n * @template [V=unknown]\n * @template {string} [K=string]\n * @template {API.Config} [C=API.Config<API.Uint32>]\n * @param {Iterable<[K, V]>} entries\n * @param {Partial<C>} [options]\n * @returns {API.PersistentHashMap<V, K, C>}\n */\nexport const from = (entries, options) => {\n  const node = /** @type {API.HashMapBuilder<V, K, C>} */ (builder(options))\n  for (const [key, value] of entries) {\n    node.set(key, value)\n  }\n\n  return node.build()\n}\n\n/**\n * @template T\n * @template {string} K\n * @param {API.HAMT<T, K>} hamt\n * @param {K} key\n */\nexport const has = (hamt, key) =>\n  Node.get(hamt.root, key, NOT_FOUND) !== NOT_FOUND\n\n/**\n * @template T\n * @template {string} K\n * @template [U=undefined]\n * @param {API.HAMT<T, K>} hamt\n * @param {K} key\n * @param {U} notFound\n * @returns {T|U}\n */\nexport const get = (hamt, key, notFound = /** @type {U} */ (undefined)) =>\n  Node.get(hamt.root, key, notFound)\n\n/**\n * @template {string} K\n * @template T\n * @template {API.Config} C\n * @param {Partial<C>} [options]\n * @returns {API.HashMapBuilder<T, K, C>}\n */\nexport const builder = options => {\n  const edit = {}\n  const config = configure(options)\n  return new HashMapBuilder(\n    edit,\n    0,\n    createBitmapIndexedNode(config, edit),\n    config\n  )\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n * @implements {API.PersistentHashMap<T, K, C>}\n */\nclass PersistentHashMap {\n  /**\n   *\n   * @param {number} count\n   * @param {API.BitmapIndexedNode<T, K, C>} root\n   * @param {C} config\n   */\n  constructor(count = 0, root, config) {\n    this.count = count\n    this.root = root\n    this.config = config\n  }\n\n  get size() {\n    return this.count\n  }\n\n  clone() {\n    return new PersistentHashMap(this.count, this.root, this.config)\n  }\n\n  /**\n   * @returns {API.PersistentHashMap<T, K, C>}\n   */\n  empty() {\n    return new PersistentHashMap(\n      0,\n      createBitmapIndexedNode(this.config, null),\n      this.config\n    )\n  }\n  /**\n   * @param {K} key\n   * @returns {boolean}\n   */\n  has(key) {\n    return has(this, key)\n  }\n  /**\n   * @param {K} key\n   * @returns {T|undefined}\n   */\n  get(key) {\n    return Node.get(this.root, key, undefined)\n  }\n  /**\n   * @template {string} R\n   * @param {R} key\n   * @param {T} value\n   * @returns {PersistentHashMap<T, K|R, C>}\n   */\n  set(key, value) {\n    const addedLeaf = { value: false }\n    const root = Node.set(this.root, null, key, value, addedLeaf)\n    if (root === this.root) {\n      return this\n    } else {\n      return new PersistentHashMap(\n        addedLeaf.value ? this.count + 1 : this.count,\n        root,\n        this.config\n      )\n    }\n  }\n  /**\n   * @param {K} key\n   */\n  delete(key) {\n    const root = Node.delete(this.root, null, key, { value: false })\n\n    if (root === this.root) {\n      return this\n    } else {\n      return new PersistentHashMap(this.count - 1, root, this.config)\n    }\n  }\n\n  /* c8 ignore next 3 */\n  get bitField() {\n    return this.config.BitField.or(this.root.datamap, this.root.nodemap)\n  }\n\n  [Symbol.iterator]() {\n    return this.entries()\n  }\n\n  entries() {\n    return this.root.entries()\n  }\n  keys() {\n    return this.root.keys()\n  }\n  values() {\n    return this.root.values()\n  }\n\n  /**\n   * @returns {API.HashMapBuilder<T, K, C>}\n   */\n\n  createBuilder() {\n    return new HashMapBuilder({}, this.count, this.root, this.config)\n  }\n}\n\n/**\n * @template T\n * @template {string} K\n * @template {API.Config} C\n */\nclass HashMapBuilder {\n  /**\n   * @param {API.Edit} edit\n   * @param {number} count\n   * @param {API.BitmapIndexedNode<T, K, C>} root\n   * @param {C} config\n   */\n  constructor(edit, count, root, config) {\n    /**\n     * @type {API.Edit|null}\n     * @private\n     */\n    this.edit = edit\n    /**\n     * @private\n     */\n    this.count = count\n    this.root = root\n    this.config = config\n  }\n\n  get size() {\n    if (this.edit) {\n      return this.count\n    } else {\n      throw new Error(`.size was accessed on the finalized builder`)\n    }\n  }\n  /**\n   * @template {string} R\n   * @param {R} key\n   * @param {T} value\n   * @returns {HashMapBuilder<T, K|R, C>}\n   */\n  set(key, value) {\n    if (this.edit) {\n      const addedLeaf = { value: false }\n      const root = Node.set(this.root, this.edit, key, value, addedLeaf)\n\n      if (this.root !== root) {\n        this.root = /** @type {API.BitmapIndexedNode<T, K, C>} */ (root)\n      }\n\n      if (addedLeaf.value) {\n        this.count += 1\n      }\n\n      return this\n    } else {\n      throw new Error(`.set was called on the finalized builder`)\n    }\n  }\n  /**\n   * @param {K} key\n   */\n  delete(key) {\n    if (this.edit) {\n      if (this.count === 0) {\n        return this\n      }\n      const removedLeaf = { value: false }\n      const root = Node.delete(this.root, this.edit, key, removedLeaf)\n\n      if (root !== this.root) {\n        this.root = root\n      }\n      if (removedLeaf.value) {\n        this.count -= 1\n      }\n      return this\n    } else {\n      throw new Error(`.delete was called on the finalized builder`)\n    }\n  }\n\n  build() {\n    if (this.edit) {\n      this.edit = null\n      return new PersistentHashMap(this.count, this.root, this.config)\n    } else {\n      throw new Error(`.build was called on the finalized builder`)\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 25699, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40perma/map/src/path/InfiniteUint8Array.js"],"sourcesContent":["import * as API from \"./api.js\"\nimport { toInt } from \"./Uint8Array.js\"\nimport { murmur364 } from \"@multiformats/murmur3\"\nconst utf8 = new TextEncoder()\n\n/**\n * @param {Uint8Array} bytes\n */\nexport const hash64 = bytes =>\n  /** @type {Uint8Array} */ (murmur364.encode(bytes))\n\n/**\n * @param {Partial<API.Options<Uint8Array>>} options\n * @returns {API.Path<Uint8Array>}\n */\nexport const configure = ({ bitWidth = 8, hash = hash64 }) => {\n  const hashSize = hash(new Uint8Array()).byteLength\n  const options = { bitWidth, hash, hashSize }\n\n  /**\n   * @param {Uint8Array} path\n   * @param {number} depth\n   * @returns {API.Uint32}\n   */\n  const at = (path, depth) => read(path, depth, options)\n\n  /**\n   * @param {string} key\n   */\n  const from = key => utf8.encode(key)\n\n  return { at, from, size: Infinity }\n}\n\n/**\n * @param {Uint8Array} key\n * @param {number} depth\n * @param {object} options\n * @param {number} [options.bitWidth]\n * @param {number} options.hashSize\n * @param {(input:Uint8Array) => Uint8Array} options.hash\n */\nexport const read = (key, depth = 0, { bitWidth = 8, hash, hashSize }) => {\n  // key digest consists of infinite number of hash frames that are computed\n  // from key + frame n which looks like\n  // [hash(key), hash([key, 1]), hash([key, n])]\n  // You can think of the hash as concatination of all frames. Here we calculate\n  // frame bit size from hash size as we going to use that several times.\n  const frameBitSize = hashSize * 8\n\n  // We start with 0 digest and required `bitCount` corresponding to `bitWith`.\n  // In the loop we'll going to consume `bitCount` hash bits.\n  let digest = 0\n  let bitCount = bitWidth\n  // Calculate absolute bit offset within the key digest.\n  let bitOffset = bitWidth * depth\n  while (bitCount > 0) {\n    // We derive frame number based on current bit offset.\n    const frameOffset = (bitOffset / frameBitSize) >> 0\n    // Then we compute that hash frame\n    const frame =\n      frameOffset === 0 ? hash(key) : hash(appendByte(key, frameOffset))\n\n    // compute bit offset within the current frame\n    const offset =\n      frameBitSize <= bitOffset ? bitOffset % frameBitSize : bitOffset\n    // calculate number of bits remaining in this frame\n    const maxBits = frameBitSize - offset\n    // we will consume all required bits from frame if enough are available\n    // otherwise we consume whatever's available and continue rest in the next\n    // cycle(s).\n    const count = maxBits < bitCount ? maxBits : bitCount\n    digest = (digest << count) + toInt(frame, offset, count)\n    bitCount -= count\n    bitOffset += count\n  }\n\n  return digest\n}\n\n/**\n * @param {Uint8Array} source\n * @param {number} byte\n */\nconst appendByte = (source, byte) => {\n  const bytes = new Uint8Array(source.byteLength + 1).fill(\n    byte,\n    source.byteLength\n  )\n  bytes.set(source)\n  return bytes\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;AACA,MAAM,OAAO,IAAI;AAKV,MAAM,SAAS,CAAA,QACO,yKAAS,CAAC,MAAM,CAAC;AAMvC,MAAM,YAAY,CAAC,EAAE,WAAW,CAAC,EAAE,OAAO,MAAM,EAAE;IACvD,MAAM,WAAW,KAAK,IAAI,cAAc,UAAU;IAClD,MAAM,UAAU;QAAE;QAAU;QAAM;IAAS;IAE3C;;;;GAIC,GACD,MAAM,KAAK,CAAC,MAAM,QAAU,KAAK,MAAM,OAAO;IAE9C;;GAEC,GACD,MAAM,OAAO,CAAA,MAAO,KAAK,MAAM,CAAC;IAEhC,OAAO;QAAE;QAAI;QAAM,MAAM;IAAS;AACpC;AAUO,MAAM,OAAO,CAAC,KAAK,QAAQ,CAAC,EAAE,EAAE,WAAW,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;IACnE,0EAA0E;IAC1E,sCAAsC;IACtC,8CAA8C;IAC9C,8EAA8E;IAC9E,uEAAuE;IACvE,MAAM,eAAe,WAAW;IAEhC,6EAA6E;IAC7E,2DAA2D;IAC3D,IAAI,SAAS;IACb,IAAI,WAAW;IACf,uDAAuD;IACvD,IAAI,YAAY,WAAW;IAC3B,MAAO,WAAW,EAAG;QACnB,sDAAsD;QACtD,MAAM,cAAc,AAAC,YAAY,gBAAiB;QAClD,kCAAkC;QAClC,MAAM,QACJ,gBAAgB,IAAI,KAAK,OAAO,KAAK,WAAW,KAAK;QAEvD,8CAA8C;QAC9C,MAAM,SACJ,gBAAgB,YAAY,YAAY,eAAe;QACzD,mDAAmD;QACnD,MAAM,UAAU,eAAe;QAC/B,uEAAuE;QACvE,0EAA0E;QAC1E,YAAY;QACZ,MAAM,QAAQ,UAAU,WAAW,UAAU;QAC7C,SAAS,CAAC,UAAU,KAAK,IAAI,IAAA,uKAAK,EAAC,OAAO,QAAQ;QAClD,YAAY;QACZ,aAAa;IACf;IAEA,OAAO;AACT;AAEA;;;CAGC,GACD,MAAM,aAAa,CAAC,QAAQ;IAC1B,MAAM,QAAQ,IAAI,WAAW,OAAO,UAAU,GAAG,GAAG,IAAI,CACtD,MACA,OAAO,UAAU;IAEnB,MAAM,GAAG,CAAC;IACV,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 25780, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40perma/map/src/unixfs.js"],"sourcesContent":["import * as HAMT from \"./lib.js\"\nimport * as Node from \"./node.js\"\nimport * as Path from \"./path/InfiniteUint8Array.js\"\n\nexport * from \"./api.js\"\n\nexport { Path }\n\nexport const bitWidth = 8\nexport const config = {\n  bitWidth,\n  Path: Path.configure({ bitWidth }),\n}\n\n/**\n * @param {HAMT.PersistentHashMap} hamt\n */\nexport const tableSize = hamt => Math.pow(2, hamt.config.bitWidth)\n\n/**\n * @template [T=unknown]\n * @template {string} [K=string]\n * @template {HAMT.Config} [C=HAMT.Config<Uint8Array>]\n * @param {Partial<C>} options\n * @returns {HAMT.PersistentHashMap<T, K, C>}\n */\nexport const empty = (options = /** @type {C} */ (config)) =>\n  HAMT.empty(options)\n\n/**\n * @template [T=unknown]\n * @template {string} [K=string]\n * @template {HAMT.Config} [C=HAMT.Config<Uint8Array>]\n * @param {Partial<C>} options\n * @returns {HAMT.HashMapBuilder<T, K, C>}\n */\nexport const builder = (options = /** @type {C} */ (config)) =>\n  HAMT.builder(options)\n\n/**\n * @template [V=unknown]\n * @template {string} [K=string]\n * @template {HAMT.Config} [C=HAMT.Config<Uint8Array>]\n * @param {Iterable<[K, V]>} entries\n * @param {Partial<C>} options\n */\nexport const from = (entries, options = /** @type {C} */ (config)) =>\n  HAMT.from(entries, options)\n\n/**\n * @template T\n * @template {string} K\n * @template Bits, Bitmap\n * @param {HAMT.BitmapIndexedNode<T, K, HAMT.Config<Bits, Bitmap>>} hamt\n */\nexport const bitField = ({ datamap, nodemap, config: { BitField } }) =>\n  withoutLeadingZeros(BitField.toBytes(BitField.or(datamap, nodemap)))\n\n/**\n * @param {Uint8Array} bytes\n */\nconst withoutLeadingZeros = bytes => {\n  let offset = 0\n  while (offset < bytes.byteLength) {\n    if (bytes[offset] !== 0) {\n      return bytes.subarray(offset)\n    }\n    offset += 1\n  }\n  return bytes.subarray(offset)\n}\n\n/**\n * Maps HAMT node into IPFS UnixFS compatible format.\n *\n * @template T\n * @template {string} K\n * @template {HAMT.Config} C\n * @param {HAMT.BitmapIndexedNode<T, K, C>} root\n * @returns {IterableIterator<{prefix:string, key:K, value:T, node?:void}|{prefix:string, node:HAMT.BitmapIndexedNode<T, K, C>}>}\n */\nexport const iterate = function* (root) {\n  const { config, datamap, nodemap } = root\n  const { BitField: bitfield } = config\n  const size = bitfield.size(datamap)\n  let bitOffset = 0\n  let dataCount = 0\n  while (bitOffset < size) {\n    const prefix = bitOffset.toString(16).toUpperCase().padStart(2, \"0\")\n    if (bitfield.get(datamap, bitOffset)) {\n      const key = Node.keyAt(root, dataCount)\n      yield {\n        prefix,\n        key,\n        value: Node.valueAt(root, dataCount),\n      }\n      dataCount++\n    } else if (bitfield.get(nodemap, bitOffset)) {\n      yield {\n        prefix,\n        // UnixFS never contains hash collision nodes because it uses\n        // inifinite hashes\n        node: /** @type {HAMT.BitmapIndexedNode<T, K, C>} */ (\n          Node.resolveNode(root, bitOffset)\n        ),\n      }\n    }\n    bitOffset++\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAIO,MAAM,WAAW;AACjB,MAAM,SAAS;IACpB;IACA,MAAM,mLAAc,CAAC;QAAE;IAAS;AAClC;AAKO,MAAM,YAAY,CAAA,OAAQ,KAAK,GAAG,CAAC,GAAG,KAAK,MAAM,CAAC,QAAQ;AAS1D,MAAM,QAAQ,CAAC,UAA4B,MAAO,GACvD,wKAAU,CAAC;AASN,MAAM,UAAU,CAAC,UAA4B,MAAO,GACzD,0KAAY,CAAC;AASR,MAAM,OAAO,CAAC,SAAS,UAA4B,MAAO,GAC/D,uKAAS,CAAC,SAAS;AAQd,MAAM,WAAW,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,GACjE,oBAAoB,SAAS,OAAO,CAAC,SAAS,EAAE,CAAC,SAAS;AAE5D;;CAEC,GACD,MAAM,sBAAsB,CAAA;IAC1B,IAAI,SAAS;IACb,MAAO,SAAS,MAAM,UAAU,CAAE;QAChC,IAAI,KAAK,CAAC,OAAO,KAAK,GAAG;YACvB,OAAO,MAAM,QAAQ,CAAC;QACxB;QACA,UAAU;IACZ;IACA,OAAO,MAAM,QAAQ,CAAC;AACxB;AAWO,MAAM,UAAU,UAAW,IAAI;IACpC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG;IACrC,MAAM,EAAE,UAAU,QAAQ,EAAE,GAAG;IAC/B,MAAM,OAAO,SAAS,IAAI,CAAC;IAC3B,IAAI,YAAY;IAChB,IAAI,YAAY;IAChB,MAAO,YAAY,KAAM;QACvB,MAAM,SAAS,UAAU,QAAQ,CAAC,IAAI,WAAW,GAAG,QAAQ,CAAC,GAAG;QAChE,IAAI,SAAS,GAAG,CAAC,SAAS,YAAY;YACpC,MAAM,MAAM,yKAAU,CAAC,MAAM;YAC7B,MAAM;gBACJ;gBACA;gBACA,OAAO,2KAAY,CAAC,MAAM;YAC5B;YACA;QACF,OAAO,IAAI,SAAS,GAAG,CAAC,SAAS,YAAY;YAC3C,MAAM;gBACJ;gBACA,6DAA6D;gBAC7D,mBAAmB;gBACnB,MACE,+KAAgB,CAAC,MAAM;YAE3B;QACF;QACA;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 25861, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/murmurhash3js-revisited/lib/murmurHash3js.js"],"sourcesContent":["/* jshint -W086: true */\n// +----------------------------------------------------------------------+\n// | murmurHash3js.js v3.0.1 // https://github.com/pid/murmurHash3js\n// | A javascript implementation of MurmurHash3's x86 hashing algorithms. |\n// |----------------------------------------------------------------------|\n// | Copyright (c) 2012-2015 Karan Lyons                                       |\n// | https://github.com/karanlyons/murmurHash3.js/blob/c1778f75792abef7bdd74bc85d2d4e1a3d25cfe9/murmurHash3.js |\n// | Freely distributable under the MIT license.                          |\n// +----------------------------------------------------------------------+\n\n;(function (root, undefined) {\n    'use strict';\n\n    // Create a local object that'll be exported or referenced globally.\n    var library = {\n        'version': '3.0.0',\n        'x86': {},\n        'x64': {},\n        'inputValidation': true\n    };\n\n    // PRIVATE FUNCTIONS\n    // -----------------\n\n    function _validBytes(bytes) {\n        // check the input is an array or a typed array\n        if (!Array.isArray(bytes) && !ArrayBuffer.isView(bytes)) {\n            return false;\n        }\n\n        // check all bytes are actually bytes\n        for (var i = 0; i < bytes.length; i++) {\n            if (!Number.isInteger(bytes[i]) || bytes[i] < 0 || bytes[i] > 255) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function _x86Multiply(m, n) {\n        //\n        // Given two 32bit ints, returns the two multiplied together as a\n        // 32bit int.\n        //\n\n        return ((m & 0xffff) * n) + ((((m >>> 16) * n) & 0xffff) << 16);\n    }\n\n    function _x86Rotl(m, n) {\n        //\n        // Given a 32bit int and an int representing a number of bit positions,\n        // returns the 32bit int rotated left by that number of positions.\n        //\n\n        return (m << n) | (m >>> (32 - n));\n    }\n\n    function _x86Fmix(h) {\n        //\n        // Given a block, returns murmurHash3's final x86 mix of that block.\n        //\n\n        h ^= h >>> 16;\n        h = _x86Multiply(h, 0x85ebca6b);\n        h ^= h >>> 13;\n        h = _x86Multiply(h, 0xc2b2ae35);\n        h ^= h >>> 16;\n\n        return h;\n    }\n\n    function _x64Add(m, n) {\n        //\n        // Given two 64bit ints (as an array of two 32bit ints) returns the two\n        // added together as a 64bit int (as an array of two 32bit ints).\n        //\n\n        m = [m[0] >>> 16, m[0] & 0xffff, m[1] >>> 16, m[1] & 0xffff];\n        n = [n[0] >>> 16, n[0] & 0xffff, n[1] >>> 16, n[1] & 0xffff];\n        var o = [0, 0, 0, 0];\n\n        o[3] += m[3] + n[3];\n        o[2] += o[3] >>> 16;\n        o[3] &= 0xffff;\n\n        o[2] += m[2] + n[2];\n        o[1] += o[2] >>> 16;\n        o[2] &= 0xffff;\n\n        o[1] += m[1] + n[1];\n        o[0] += o[1] >>> 16;\n        o[1] &= 0xffff;\n\n        o[0] += m[0] + n[0];\n        o[0] &= 0xffff;\n\n        return [(o[0] << 16) | o[1], (o[2] << 16) | o[3]];\n    }\n\n    function _x64Multiply(m, n) {\n        //\n        // Given two 64bit ints (as an array of two 32bit ints) returns the two\n        // multiplied together as a 64bit int (as an array of two 32bit ints).\n        //\n\n        m = [m[0] >>> 16, m[0] & 0xffff, m[1] >>> 16, m[1] & 0xffff];\n        n = [n[0] >>> 16, n[0] & 0xffff, n[1] >>> 16, n[1] & 0xffff];\n        var o = [0, 0, 0, 0];\n\n        o[3] += m[3] * n[3];\n        o[2] += o[3] >>> 16;\n        o[3] &= 0xffff;\n\n        o[2] += m[2] * n[3];\n        o[1] += o[2] >>> 16;\n        o[2] &= 0xffff;\n\n        o[2] += m[3] * n[2];\n        o[1] += o[2] >>> 16;\n        o[2] &= 0xffff;\n\n        o[1] += m[1] * n[3];\n        o[0] += o[1] >>> 16;\n        o[1] &= 0xffff;\n\n        o[1] += m[2] * n[2];\n        o[0] += o[1] >>> 16;\n        o[1] &= 0xffff;\n\n        o[1] += m[3] * n[1];\n        o[0] += o[1] >>> 16;\n        o[1] &= 0xffff;\n\n        o[0] += (m[0] * n[3]) + (m[1] * n[2]) + (m[2] * n[1]) + (m[3] * n[0]);\n        o[0] &= 0xffff;\n\n        return [(o[0] << 16) | o[1], (o[2] << 16) | o[3]];\n    }\n\n    function _x64Rotl(m, n) {\n        //\n        // Given a 64bit int (as an array of two 32bit ints) and an int\n        // representing a number of bit positions, returns the 64bit int (as an\n        // array of two 32bit ints) rotated left by that number of positions.\n        //\n\n        n %= 64;\n\n        if (n === 32) {\n            return [m[1], m[0]];\n        } else if (n < 32) {\n            return [(m[0] << n) | (m[1] >>> (32 - n)), (m[1] << n) | (m[0] >>> (32 - n))];\n        } else {\n            n -= 32;\n            return [(m[1] << n) | (m[0] >>> (32 - n)), (m[0] << n) | (m[1] >>> (32 - n))];\n        }\n    }\n\n    function _x64LeftShift(m, n) {\n        //\n        // Given a 64bit int (as an array of two 32bit ints) and an int\n        // representing a number of bit positions, returns the 64bit int (as an\n        // array of two 32bit ints) shifted left by that number of positions.\n        //\n\n        n %= 64;\n\n        if (n === 0) {\n            return m;\n        } else if (n < 32) {\n            return [(m[0] << n) | (m[1] >>> (32 - n)), m[1] << n];\n        } else {\n            return [m[1] << (n - 32), 0];\n        }\n    }\n\n    function _x64Xor(m, n) {\n        //\n        // Given two 64bit ints (as an array of two 32bit ints) returns the two\n        // xored together as a 64bit int (as an array of two 32bit ints).\n        //\n\n        return [m[0] ^ n[0], m[1] ^ n[1]];\n    }\n\n    function _x64Fmix(h) {\n        //\n        // Given a block, returns murmurHash3's final x64 mix of that block.\n        // (`[0, h[0] >>> 1]` is a 33 bit unsigned right shift. This is the\n        // only place where we need to right shift 64bit ints.)\n        //\n\n        h = _x64Xor(h, [0, h[0] >>> 1]);\n        h = _x64Multiply(h, [0xff51afd7, 0xed558ccd]);\n        h = _x64Xor(h, [0, h[0] >>> 1]);\n        h = _x64Multiply(h, [0xc4ceb9fe, 0x1a85ec53]);\n        h = _x64Xor(h, [0, h[0] >>> 1]);\n\n        return h;\n    }\n\n    // PUBLIC FUNCTIONS\n    // ----------------\n\n    library.x86.hash32 = function (bytes, seed) {\n        //\n        // Given a string and an optional seed as an int, returns a 32 bit hash\n        // using the x86 flavor of MurmurHash3, as an unsigned int.\n        //\n        if (library.inputValidation && !_validBytes(bytes)) {\n            return undefined;\n        }\n        seed = seed || 0;\n\n        var remainder = bytes.length % 4;\n        var blocks = bytes.length - remainder;\n\n        var h1 = seed;\n\n        var k1 = 0;\n\n        var c1 = 0xcc9e2d51;\n        var c2 = 0x1b873593;\n\n        for (var i = 0; i < blocks; i = i + 4) {\n            k1 = (bytes[i]) | (bytes[i + 1] << 8) | (bytes[i + 2] << 16) | (bytes[i + 3] << 24);\n\n            k1 = _x86Multiply(k1, c1);\n            k1 = _x86Rotl(k1, 15);\n            k1 = _x86Multiply(k1, c2);\n\n            h1 ^= k1;\n            h1 = _x86Rotl(h1, 13);\n            h1 = _x86Multiply(h1, 5) + 0xe6546b64;\n        }\n\n        k1 = 0;\n\n        switch (remainder) {\n            case 3:\n                k1 ^= bytes[i + 2] << 16;\n\n            case 2:\n                k1 ^= bytes[i + 1] << 8;\n\n            case 1:\n                k1 ^= bytes[i];\n                k1 = _x86Multiply(k1, c1);\n                k1 = _x86Rotl(k1, 15);\n                k1 = _x86Multiply(k1, c2);\n                h1 ^= k1;\n        }\n\n        h1 ^= bytes.length;\n        h1 = _x86Fmix(h1);\n\n        return h1 >>> 0;\n    };\n\n    library.x86.hash128 = function (bytes, seed) {\n        //\n        // Given a string and an optional seed as an int, returns a 128 bit\n        // hash using the x86 flavor of MurmurHash3, as an unsigned hex.\n        //\n        if (library.inputValidation && !_validBytes(bytes)) {\n            return undefined;\n        }\n\n        seed = seed || 0;\n        var remainder = bytes.length % 16;\n        var blocks = bytes.length - remainder;\n\n        var h1 = seed;\n        var h2 = seed;\n        var h3 = seed;\n        var h4 = seed;\n\n        var k1 = 0;\n        var k2 = 0;\n        var k3 = 0;\n        var k4 = 0;\n\n        var c1 = 0x239b961b;\n        var c2 = 0xab0e9789;\n        var c3 = 0x38b34ae5;\n        var c4 = 0xa1e38b93;\n\n        for (var i = 0; i < blocks; i = i + 16) {\n            k1 = (bytes[i]) | (bytes[i + 1] << 8) | (bytes[i + 2] << 16) | (bytes[i + 3] << 24);\n            k2 = (bytes[i + 4]) | (bytes[i + 5] << 8) | (bytes[i + 6] << 16) | (bytes[i + 7] << 24);\n            k3 = (bytes[i + 8]) | (bytes[i + 9] << 8) | (bytes[i + 10] << 16) | (bytes[i + 11] << 24);\n            k4 = (bytes[i + 12]) | (bytes[i + 13] << 8) | (bytes[i + 14] << 16) | (bytes[i + 15] << 24);\n\n            k1 = _x86Multiply(k1, c1);\n            k1 = _x86Rotl(k1, 15);\n            k1 = _x86Multiply(k1, c2);\n            h1 ^= k1;\n\n            h1 = _x86Rotl(h1, 19);\n            h1 += h2;\n            h1 = _x86Multiply(h1, 5) + 0x561ccd1b;\n\n            k2 = _x86Multiply(k2, c2);\n            k2 = _x86Rotl(k2, 16);\n            k2 = _x86Multiply(k2, c3);\n            h2 ^= k2;\n\n            h2 = _x86Rotl(h2, 17);\n            h2 += h3;\n            h2 = _x86Multiply(h2, 5) + 0x0bcaa747;\n\n            k3 = _x86Multiply(k3, c3);\n            k3 = _x86Rotl(k3, 17);\n            k3 = _x86Multiply(k3, c4);\n            h3 ^= k3;\n\n            h3 = _x86Rotl(h3, 15);\n            h3 += h4;\n            h3 = _x86Multiply(h3, 5) + 0x96cd1c35;\n\n            k4 = _x86Multiply(k4, c4);\n            k4 = _x86Rotl(k4, 18);\n            k4 = _x86Multiply(k4, c1);\n            h4 ^= k4;\n\n            h4 = _x86Rotl(h4, 13);\n            h4 += h1;\n            h4 = _x86Multiply(h4, 5) + 0x32ac3b17;\n        }\n\n        k1 = 0;\n        k2 = 0;\n        k3 = 0;\n        k4 = 0;\n\n        switch (remainder) {\n            case 15:\n                k4 ^= bytes[i + 14] << 16;\n\n            case 14:\n                k4 ^= bytes[i + 13] << 8;\n\n            case 13:\n                k4 ^= bytes[i + 12];\n                k4 = _x86Multiply(k4, c4);\n                k4 = _x86Rotl(k4, 18);\n                k4 = _x86Multiply(k4, c1);\n                h4 ^= k4;\n\n            case 12:\n                k3 ^= bytes[i + 11] << 24;\n\n            case 11:\n                k3 ^= bytes[i + 10] << 16;\n\n            case 10:\n                k3 ^= bytes[i + 9] << 8;\n\n            case 9:\n                k3 ^= bytes[i + 8];\n                k3 = _x86Multiply(k3, c3);\n                k3 = _x86Rotl(k3, 17);\n                k3 = _x86Multiply(k3, c4);\n                h3 ^= k3;\n\n            case 8:\n                k2 ^= bytes[i + 7] << 24;\n\n            case 7:\n                k2 ^= bytes[i + 6] << 16;\n\n            case 6:\n                k2 ^= bytes[i + 5] << 8;\n\n            case 5:\n                k2 ^= bytes[i + 4];\n                k2 = _x86Multiply(k2, c2);\n                k2 = _x86Rotl(k2, 16);\n                k2 = _x86Multiply(k2, c3);\n                h2 ^= k2;\n\n            case 4:\n                k1 ^= bytes[i + 3] << 24;\n\n            case 3:\n                k1 ^= bytes[i + 2] << 16;\n\n            case 2:\n                k1 ^= bytes[i + 1] << 8;\n\n            case 1:\n                k1 ^= bytes[i];\n                k1 = _x86Multiply(k1, c1);\n                k1 = _x86Rotl(k1, 15);\n                k1 = _x86Multiply(k1, c2);\n                h1 ^= k1;\n        }\n\n        h1 ^= bytes.length;\n        h2 ^= bytes.length;\n        h3 ^= bytes.length;\n        h4 ^= bytes.length;\n\n        h1 += h2;\n        h1 += h3;\n        h1 += h4;\n        h2 += h1;\n        h3 += h1;\n        h4 += h1;\n\n        h1 = _x86Fmix(h1);\n        h2 = _x86Fmix(h2);\n        h3 = _x86Fmix(h3);\n        h4 = _x86Fmix(h4);\n\n        h1 += h2;\n        h1 += h3;\n        h1 += h4;\n        h2 += h1;\n        h3 += h1;\n        h4 += h1;\n\n        return (\"00000000\" + (h1 >>> 0).toString(16)).slice(-8) + (\"00000000\" + (h2 >>> 0).toString(16)).slice(-8) + (\"00000000\" + (h3 >>> 0).toString(16)).slice(-8) + (\"00000000\" + (h4 >>> 0).toString(16)).slice(-8);\n    };\n\n    library.x64.hash128 = function (bytes, seed) {\n        //\n        // Given a string and an optional seed as an int, returns a 128 bit\n        // hash using the x64 flavor of MurmurHash3, as an unsigned hex.\n        //\n        if (library.inputValidation && !_validBytes(bytes)) {\n            return undefined;\n        }\n        seed = seed || 0;\n\n        var remainder = bytes.length % 16;\n        var blocks = bytes.length - remainder;\n\n        var h1 = [0, seed];\n        var h2 = [0, seed];\n\n        var k1 = [0, 0];\n        var k2 = [0, 0];\n\n        var c1 = [0x87c37b91, 0x114253d5];\n        var c2 = [0x4cf5ad43, 0x2745937f];\n\n        for (var i = 0; i < blocks; i = i + 16) {\n            k1 = [(bytes[i + 4]) | (bytes[i + 5] << 8) | (bytes[i + 6] << 16) | (bytes[i + 7] << 24), (bytes[i]) |\n                (bytes[i + 1] << 8) | (bytes[i + 2] << 16) | (bytes[i + 3] << 24)];\n            k2 = [(bytes[i + 12]) | (bytes[i + 13] << 8) | (bytes[i + 14] << 16) | (bytes[i + 15] << 24), (bytes[i + 8]) |\n                (bytes[i + 9] << 8) | (bytes[i + 10] << 16) | (bytes[i + 11] << 24)];\n\n            k1 = _x64Multiply(k1, c1);\n            k1 = _x64Rotl(k1, 31);\n            k1 = _x64Multiply(k1, c2);\n            h1 = _x64Xor(h1, k1);\n\n            h1 = _x64Rotl(h1, 27);\n            h1 = _x64Add(h1, h2);\n            h1 = _x64Add(_x64Multiply(h1, [0, 5]), [0, 0x52dce729]);\n\n            k2 = _x64Multiply(k2, c2);\n            k2 = _x64Rotl(k2, 33);\n            k2 = _x64Multiply(k2, c1);\n            h2 = _x64Xor(h2, k2);\n\n            h2 = _x64Rotl(h2, 31);\n            h2 = _x64Add(h2, h1);\n            h2 = _x64Add(_x64Multiply(h2, [0, 5]), [0, 0x38495ab5]);\n        }\n\n        k1 = [0, 0];\n        k2 = [0, 0];\n\n        switch (remainder) {\n            case 15:\n                k2 = _x64Xor(k2, _x64LeftShift([0, bytes[i + 14]], 48));\n\n            case 14:\n                k2 = _x64Xor(k2, _x64LeftShift([0, bytes[i + 13]], 40));\n\n            case 13:\n                k2 = _x64Xor(k2, _x64LeftShift([0, bytes[i + 12]], 32));\n\n            case 12:\n                k2 = _x64Xor(k2, _x64LeftShift([0, bytes[i + 11]], 24));\n\n            case 11:\n                k2 = _x64Xor(k2, _x64LeftShift([0, bytes[i + 10]], 16));\n\n            case 10:\n                k2 = _x64Xor(k2, _x64LeftShift([0, bytes[i + 9]], 8));\n\n            case 9:\n                k2 = _x64Xor(k2, [0, bytes[i + 8]]);\n                k2 = _x64Multiply(k2, c2);\n                k2 = _x64Rotl(k2, 33);\n                k2 = _x64Multiply(k2, c1);\n                h2 = _x64Xor(h2, k2);\n\n            case 8:\n                k1 = _x64Xor(k1, _x64LeftShift([0, bytes[i + 7]], 56));\n\n            case 7:\n                k1 = _x64Xor(k1, _x64LeftShift([0, bytes[i + 6]], 48));\n\n            case 6:\n                k1 = _x64Xor(k1, _x64LeftShift([0, bytes[i + 5]], 40));\n\n            case 5:\n                k1 = _x64Xor(k1, _x64LeftShift([0, bytes[i + 4]], 32));\n\n            case 4:\n                k1 = _x64Xor(k1, _x64LeftShift([0, bytes[i + 3]], 24));\n\n            case 3:\n                k1 = _x64Xor(k1, _x64LeftShift([0, bytes[i + 2]], 16));\n\n            case 2:\n                k1 = _x64Xor(k1, _x64LeftShift([0, bytes[i + 1]], 8));\n\n            case 1:\n                k1 = _x64Xor(k1, [0, bytes[i]]);\n                k1 = _x64Multiply(k1, c1);\n                k1 = _x64Rotl(k1, 31);\n                k1 = _x64Multiply(k1, c2);\n                h1 = _x64Xor(h1, k1);\n        }\n\n        h1 = _x64Xor(h1, [0, bytes.length]);\n        h2 = _x64Xor(h2, [0, bytes.length]);\n\n        h1 = _x64Add(h1, h2);\n        h2 = _x64Add(h2, h1);\n\n        h1 = _x64Fmix(h1);\n        h2 = _x64Fmix(h2);\n\n        h1 = _x64Add(h1, h2);\n        h2 = _x64Add(h2, h1);\n\n        return (\"00000000\" + (h1[0] >>> 0).toString(16)).slice(-8) + (\"00000000\" + (h1[1] >>> 0).toString(16)).slice(-8) + (\"00000000\" + (h2[0] >>> 0).toString(16)).slice(-8) + (\"00000000\" + (h2[1] >>> 0).toString(16)).slice(-8);\n    };\n\n    // INITIALIZATION\n    // --------------\n\n    // Export murmurHash3 for CommonJS, either as an AMD module or just as part\n    // of the global object.\n    if (typeof exports !== 'undefined') {\n\n        if (typeof module !== 'undefined' && module.exports) {\n            exports = module.exports = library;\n        }\n\n        exports.murmurHash3 = library;\n\n    } else if (typeof define === 'function' && define.amd) {\n\n        define([], function () {\n            return library;\n        });\n    } else {\n\n        // Use murmurHash3.noConflict to restore `murmurHash3` back to its\n        // original value. Returns a reference to the library object, to allow\n        // it to be used under a different name.\n        library._murmurHash3 = root.murmurHash3;\n\n        library.noConflict = function () {\n            root.murmurHash3 = library._murmurHash3;\n            library._murmurHash3 = undefined;\n            library.noConflict = undefined;\n\n            return library;\n        };\n\n        root.murmurHash3 = library;\n    }\n})(this);\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 26474, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/murmurhash3js-revisited/index.js"],"sourcesContent":["module.exports = require('./lib/murmurHash3js');\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 26479, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40multiformats/murmur3/src/index.js"],"sourcesContent":["import { bytes } from 'multiformats'\nimport { from } from 'multiformats/hashes/hasher'\n// @ts-expect-error no types\nimport mur from 'murmurhash3js-revisited'\n\n/**\n * @param {number} number\n * @returns {Uint8Array}\n */\nfunction fromNumberTo32BitBuf (number) {\n  const bytes = new Array(4)\n  for (let i = 0; i < 4; i++) {\n    bytes[i] = number & 0xff\n    number = number >> 8\n  }\n  return new Uint8Array(bytes)\n}\n\nexport const murmur332 = from({\n  name: 'murmur3-32',\n  code: 0x23,\n  encode: (input) => fromNumberTo32BitBuf(mur.x86.hash32(input))\n})\n\nexport const murmur3128 = from({\n  name: 'murmur3-128',\n  code: 0x22,\n  encode: (input) => bytes.fromHex(mur.x64.hash128(input))\n})\n\n// A special-use 0x22 that truncates 64 bits, specifically for use in the UnixFS HAMT\nexport const murmur364 = from({\n  name: 'murmur3-x64-64',\n  code: 0x22,\n  encode: (input) => bytes.fromHex(mur.x64.hash128(input)).subarray(0, 8)\n})\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AACA,4BAA4B;AAC5B;;;;AAEA;;;CAGC,GACD,SAAS,qBAAsB,MAAM;IACnC,MAAM,QAAQ,IAAI,MAAM;IACxB,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;QAC1B,KAAK,CAAC,EAAE,GAAG,SAAS;QACpB,SAAS,UAAU;IACrB;IACA,OAAO,IAAI,WAAW;AACxB;AAEO,MAAM,YAAY,IAAA,0KAAI,EAAC;IAC5B,MAAM;IACN,MAAM;IACN,QAAQ,CAAC,QAAU,qBAAqB,iKAAG,CAAC,GAAG,CAAC,MAAM,CAAC;AACzD;AAEO,MAAM,aAAa,IAAA,0KAAI,EAAC;IAC7B,MAAM;IACN,MAAM;IACN,QAAQ,CAAC,QAAU,iMAAK,CAAC,OAAO,CAAC,iKAAG,CAAC,GAAG,CAAC,OAAO,CAAC;AACnD;AAGO,MAAM,YAAY,IAAA,0KAAI,EAAC;IAC5B,MAAM;IACN,MAAM;IACN,QAAQ,CAAC,QAAU,iMAAK,CAAC,OAAO,CAAC,iKAAG,CAAC,GAAG,CAAC,OAAO,CAAC,QAAQ,QAAQ,CAAC,GAAG;AACvE","ignoreList":[0]}},
    {"offset": {"line": 26525, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/dist/api.js"],"sourcesContent":["export {};\n//# sourceMappingURL=api.js.map"],"names":[],"mappings":";;CACA,+BAA+B","ignoreList":[0]}},
    {"offset": {"line": 26532, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/dist/digest-map.js"],"sourcesContent":["import * as API from './api.js';\nimport { base58btc } from 'multiformats/bases/base58';\n/** @type {WeakMap<Uint8Array, string>} */\nconst cache = new WeakMap();\n/** @param {API.MultihashDigest} digest */\nconst toBase58String = (digest) => {\n    let str = cache.get(digest.bytes);\n    if (!str) {\n        str = base58btc.encode(digest.bytes);\n        cache.set(digest.bytes, str);\n    }\n    return str;\n};\n/**\n * @template {API.MultihashDigest} Key\n * @template Value\n * @implements {Map<Key, Value>}\n */\nexport class DigestMap {\n    /** @type {Map<string, [Key, Value]>} */\n    #data;\n    /**\n     * @param {Array<[Key, Value]>} [entries]\n     */\n    constructor(entries) {\n        this.#data = new Map();\n        for (const [k, v] of entries ?? []) {\n            this.set(k, v);\n        }\n    }\n    get [Symbol.toStringTag]() {\n        return 'DigestMap';\n    }\n    clear() {\n        this.#data.clear();\n    }\n    /**\n     * @param {Key} key\n     * @returns {boolean}\n     */\n    delete(key) {\n        const mhstr = toBase58String(key);\n        return this.#data.delete(mhstr);\n    }\n    /**\n     * @param {(value: Value, key: Key, map: Map<Key, Value>) => void} callbackfn\n     * @param {any} [thisArg]\n     */\n    forEach(callbackfn, thisArg) {\n        for (const [k, v] of this.#data.values()) {\n            callbackfn.call(thisArg, v, k, this);\n        }\n    }\n    /**\n     * @param {Key} key\n     * @returns {Value|undefined}\n     */\n    get(key) {\n        const data = this.#data.get(toBase58String(key));\n        if (data)\n            return data[1];\n    }\n    /**\n     * @param {Key} key\n     * @returns {boolean}\n     */\n    has(key) {\n        return this.#data.has(toBase58String(key));\n    }\n    /**\n     * @param {Key} key\n     * @param {Value} value\n     */\n    set(key, value) {\n        this.#data.set(toBase58String(key), [key, value]);\n        return this;\n    }\n    /** @returns {number} */\n    get size() {\n        return this.#data.size;\n    }\n    /** @returns */\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    /** @returns {IterableIterator<[Key, Value]>} */\n    *entries() {\n        yield* this.#data.values();\n    }\n    /** @returns {IterableIterator<Key>} */\n    *keys() {\n        for (const [k] of this.#data.values()) {\n            yield k;\n        }\n    }\n    /** @returns {IterableIterator<Value>} */\n    *values() {\n        for (const [, v] of this.#data.values()) {\n            yield v;\n        }\n    }\n}\n//# sourceMappingURL=digest-map.js.map"],"names":[],"mappings":";;;;AAAA;AACA;;;AACA,wCAAwC,GACxC,MAAM,QAAQ,IAAI;AAClB,wCAAwC,GACxC,MAAM,iBAAiB,CAAC;IACpB,IAAI,MAAM,MAAM,GAAG,CAAC,OAAO,KAAK;IAChC,IAAI,CAAC,KAAK;QACN,MAAM,8KAAS,CAAC,MAAM,CAAC,OAAO,KAAK;QACnC,MAAM,GAAG,CAAC,OAAO,KAAK,EAAE;IAC5B;IACA,OAAO;AACX;AAMO,MAAM;IACT,sCAAsC,GACtC,CAAA,IAAK,CAAC;IACN;;KAEC,GACD,YAAY,OAAO,CAAE;QACjB,IAAI,CAAC,CAAA,IAAK,GAAG,IAAI;QACjB,KAAK,MAAM,CAAC,GAAG,EAAE,IAAI,WAAW,EAAE,CAAE;YAChC,IAAI,CAAC,GAAG,CAAC,GAAG;QAChB;IACJ;IACA,IAAI,CAAC,OAAO,WAAW,CAAC,GAAG;QACvB,OAAO;IACX;IACA,QAAQ;QACJ,IAAI,CAAC,CAAA,IAAK,CAAC,KAAK;IACpB;IACA;;;KAGC,GACD,OAAO,GAAG,EAAE;QACR,MAAM,QAAQ,eAAe;QAC7B,OAAO,IAAI,CAAC,CAAA,IAAK,CAAC,MAAM,CAAC;IAC7B;IACA;;;KAGC,GACD,QAAQ,UAAU,EAAE,OAAO,EAAE;QACzB,KAAK,MAAM,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,CAAA,IAAK,CAAC,MAAM,GAAI;YACtC,WAAW,IAAI,CAAC,SAAS,GAAG,GAAG,IAAI;QACvC;IACJ;IACA;;;KAGC,GACD,IAAI,GAAG,EAAE;QACL,MAAM,OAAO,IAAI,CAAC,CAAA,IAAK,CAAC,GAAG,CAAC,eAAe;QAC3C,IAAI,MACA,OAAO,IAAI,CAAC,EAAE;IACtB;IACA;;;KAGC,GACD,IAAI,GAAG,EAAE;QACL,OAAO,IAAI,CAAC,CAAA,IAAK,CAAC,GAAG,CAAC,eAAe;IACzC;IACA;;;KAGC,GACD,IAAI,GAAG,EAAE,KAAK,EAAE;QACZ,IAAI,CAAC,CAAA,IAAK,CAAC,GAAG,CAAC,eAAe,MAAM;YAAC;YAAK;SAAM;QAChD,OAAO,IAAI;IACf;IACA,sBAAsB,GACtB,IAAI,OAAO;QACP,OAAO,IAAI,CAAC,CAAA,IAAK,CAAC,IAAI;IAC1B;IACA,aAAa,GACb,CAAC,OAAO,QAAQ,CAAC,GAAG;QAChB,OAAO,IAAI,CAAC,OAAO;IACvB;IACA,8CAA8C,GAC9C,CAAC,UAAU;QACP,OAAO,IAAI,CAAC,CAAA,IAAK,CAAC,MAAM;IAC5B;IACA,qCAAqC,GACrC,CAAC,OAAO;QACJ,KAAK,MAAM,CAAC,EAAE,IAAI,IAAI,CAAC,CAAA,IAAK,CAAC,MAAM,GAAI;YACnC,MAAM;QACV;IACJ;IACA,uCAAuC,GACvC,CAAC,SAAS;QACN,KAAK,MAAM,GAAG,EAAE,IAAI,IAAI,CAAC,CAAA,IAAK,CAAC,MAAM,GAAI;YACrC,MAAM;QACV;IACJ;AACJ,EACA,sCAAsC","ignoreList":[0]}},
    {"offset": {"line": 26627, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/dist/sharded-dag-index.js"],"sourcesContent":["import * as API from './api.js';\nimport { CAR, ok, error, Schema, Failure } from '@ucanto/core';\nimport { compare } from 'uint8arrays';\nimport * as dagCBOR from '@ipld/dag-cbor';\nimport * as Digest from 'multiformats/hashes/digest';\nimport * as Link from 'multiformats/link';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { DigestMap } from './digest-map.js';\nexport const version = 'index/sharded/dag@0.1';\nexport const ShardedDAGIndexSchema = Schema.variant({\n    [version]: Schema.struct({\n        /** DAG root. */\n        content: Schema.link(),\n        /** Shards the DAG can be found in. */\n        shards: Schema.array(Schema.link()),\n    }),\n});\nexport const MultihashSchema = Schema.bytes();\nexport const BlobIndexSchema = Schema.tuple([\n    MultihashSchema,\n    Schema.array(\n    /** multihash bytes, offset, length. */\n    Schema.tuple([\n        MultihashSchema,\n        Schema.tuple([Schema.number(), Schema.number()]),\n    ])),\n]);\n/**\n * @param {Uint8Array} archive\n * @returns {API.Result<API.ShardedDAGIndexView, API.DecodeFailure|API.UnknownFormat>}\n */\nexport const extract = (archive) => {\n    const { roots, blocks } = CAR.decode(archive);\n    if (!roots.length) {\n        return error(new UnknownFormat('missing root block'));\n    }\n    const { code } = roots[0].cid;\n    if (code !== dagCBOR.code) {\n        return error(new UnknownFormat(`unexpected root CID codec: 0x${code.toString(16)}`));\n    }\n    return view({ root: roots[0], blocks });\n};\n/**\n * @param {object} source\n * @param {API.IPLDBlock} source.root\n * @param {Map<string, API.IPLDBlock>} source.blocks\n * @returns {API.Result<API.ShardedDAGIndexView, API.DecodeFailure|API.UnknownFormat>}\n */\nexport const view = ({ root, blocks }) => {\n    const [version, dagIndexData] = ShardedDAGIndexSchema.match(dagCBOR.decode(root.bytes));\n    switch (version) {\n        case version: {\n            const dagIndex = create(dagIndexData.content);\n            for (const shardLink of dagIndexData.shards) {\n                const shard = blocks.get(shardLink.toString());\n                if (!shard) {\n                    return error(new DecodeFailure(`missing shard block: ${shardLink}`));\n                }\n                const blobIndexData = BlobIndexSchema.from(dagCBOR.decode(shard.bytes));\n                const blobIndex = new DigestMap();\n                for (const [digest, [offset, length]] of blobIndexData[1]) {\n                    blobIndex.set(Digest.decode(digest), [offset, length]);\n                }\n                dagIndex.shards.set(Digest.decode(blobIndexData[0]), blobIndex);\n            }\n            return ok(dagIndex);\n        }\n        default:\n            return error(new UnknownFormat(`unknown index version: ${version}`));\n    }\n};\n/** @implements {API.ShardedDAGIndexView} */\nclass ShardedDAGIndex {\n    #content;\n    #shards;\n    /** @param {API.UnknownLink} content */\n    constructor(content) {\n        this.#content = content;\n        /** @type {DigestMap<API.ShardDigest, API.Position>} */\n        this.#shards = new DigestMap();\n    }\n    get content() {\n        return this.#content;\n    }\n    get shards() {\n        return this.#shards;\n    }\n    /**\n     * @param {API.ShardDigest} shard\n     * @param {API.SliceDigest} slice\n     * @param {API.Position} pos\n     */\n    setSlice(shard, slice, pos) {\n        let index = this.#shards.get(shard);\n        if (!index) {\n            index = new DigestMap();\n            this.#shards.set(shard, index);\n        }\n        index.set(slice, pos);\n    }\n    archive() {\n        return archive(this);\n    }\n}\nexport class UnknownFormat extends Failure {\n    #reason;\n    /** @param {string} [reason] */\n    constructor(reason) {\n        super();\n        this.name = /** @type {const} */ ('UnknownFormat');\n        this.#reason = reason;\n    }\n    describe() {\n        return this.#reason ?? 'unknown format';\n    }\n}\nexport class DecodeFailure extends Failure {\n    #reason;\n    /** @param {string} [reason] */\n    constructor(reason) {\n        super();\n        this.name = /** @type {const} */ ('DecodeFailure');\n        this.#reason = reason;\n    }\n    describe() {\n        return this.#reason ?? 'failed to decode';\n    }\n}\n/**\n * @param {API.UnknownLink} content\n * @returns {API.ShardedDAGIndexView}\n */\nexport const create = (content) => new ShardedDAGIndex(content);\n/**\n * @param {API.ShardedDAGIndex} model\n * @returns {Promise<API.Result<Uint8Array, API.EncodeFailure>>}\n */\nexport const archive = async (model) => {\n    const roots = [];\n    const blocks = new Map();\n    try {\n        const shards = [...model.shards.entries()].sort((a, b) => compare(a[0].digest, b[0].digest));\n        const index = {\n            content: model.content,\n            shards: /** @type {API.Link[]} */ ([]),\n        };\n        for (const s of shards) {\n            const slices = [...s[1].entries()]\n                .sort((a, b) => compare(a[0].digest, b[0].digest))\n                .map((e) => [e[0].bytes, e[1]]);\n            const bytes = dagCBOR.encode([s[0].bytes, slices]);\n            const digest = await sha256.digest(bytes);\n            const cid = Link.create(dagCBOR.code, digest);\n            blocks.set(cid.toString(), { cid, bytes });\n            index.shards.push(cid);\n        }\n        const bytes = dagCBOR.encode({ [version]: index });\n        const digest = await sha256.digest(bytes);\n        const cid = Link.create(dagCBOR.code, digest);\n        roots.push({ cid, bytes });\n    }\n    catch ( /** @type {any} */err) {\n        return error(\n        /** @type {API.EncodeFailure} */ ({\n            name: 'EncodeFailure',\n            message: `encoding DAG: ${err.message}`,\n            stack: err.stack,\n        }));\n    }\n    try {\n        return ok(CAR.encode({ roots, blocks }));\n    }\n    catch ( /** @type {any} */err) {\n        return error(\n        /** @type {API.EncodeFailure} */ ({\n            name: 'EncodeFailure',\n            message: `encoding CAR: ${err.message}`,\n            stack: err.stack,\n        }));\n    }\n};\n//# sourceMappingURL=sharded-dag-index.js.map"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 26843, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/dist/util.js"],"sourcesContent":["import { CARReaderStream } from 'carstream';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport * as API from './api.js';\nimport { create } from './sharded-dag-index.js';\n/**\n * Create a sharded DAG index by indexing blocks in the passed CAR shards.\n *\n * @param {API.UnknownLink} content\n * @param {Uint8Array[]} shards\n * @returns {Promise<API.ShardedDAGIndexView>}\n */\nexport const fromShardArchives = async (content, shards) => {\n    const index = create(content);\n    for (const s of shards) {\n        const digest = await sha256.digest(s);\n        await new ReadableStream({\n            pull: (c) => {\n                c.enqueue(s);\n                c.close();\n            },\n        })\n            .pipeThrough(new CARReaderStream())\n            .pipeTo(new WritableStream({\n            write({ cid, blockOffset, blockLength }) {\n                index.setSlice(digest, cid.multihash, [blockOffset, blockLength]);\n            },\n        }));\n    }\n    return index;\n};\n/**\n * Indexes a sharded DAG\n *\n * @param {import('multiformats').Link} root\n * @param {import('@storacha/capabilities/types').CARLink[]} shards\n * @param {Array<Map<API.SliceDigest, API.Position>>} shardIndexes\n */\nexport async function indexShardedDAG(root, shards, shardIndexes) {\n    const index = create(root);\n    for (const [i, shard] of shards.entries()) {\n        const slices = shardIndexes[i];\n        index.shards.set(shard.multihash, slices);\n    }\n    return await index.archive();\n}\n//# sourceMappingURL=util.js.map"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AACA;AACA;;;;;AAQO,MAAM,oBAAoB,OAAO,SAAS;IAC7C,MAAM,QAAQ,IAAA,2LAAM,EAAC;IACrB,KAAK,MAAM,KAAK,OAAQ;QACpB,MAAM,SAAS,MAAM,qLAAM,CAAC,MAAM,CAAC;QACnC,MAAM,IAAI,eAAe;YACrB,MAAM,CAAC;gBACH,EAAE,OAAO,CAAC;gBACV,EAAE,KAAK;YACX;QACJ,GACK,WAAW,CAAC,IAAI,gKAAe,IAC/B,MAAM,CAAC,IAAI,eAAe;YAC3B,OAAM,EAAE,GAAG,EAAE,WAAW,EAAE,WAAW,EAAE;gBACnC,MAAM,QAAQ,CAAC,QAAQ,IAAI,SAAS,EAAE;oBAAC;oBAAa;iBAAY;YACpE;QACJ;IACJ;IACA,OAAO;AACX;AAQO,eAAe,gBAAgB,IAAI,EAAE,MAAM,EAAE,YAAY;IAC5D,MAAM,QAAQ,IAAA,2LAAM,EAAC;IACrB,KAAK,MAAM,CAAC,GAAG,MAAM,IAAI,OAAO,OAAO,GAAI;QACvC,MAAM,SAAS,YAAY,CAAC,EAAE;QAC9B,MAAM,MAAM,CAAC,GAAG,CAAC,MAAM,SAAS,EAAE;IACtC;IACA,OAAO,MAAM,MAAM,OAAO;AAC9B,EACA,gCAAgC","ignoreList":[0]}},
    {"offset": {"line": 26890, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/%40storacha/blob-index/dist/index.js"],"sourcesContent":["export * as ShardedDAGIndex from './sharded-dag-index.js';\nexport * from './digest-map.js';\nexport { indexShardedDAG } from './util.js';\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":";AAAA;AACA;AACA,oRACA,iCAAiC","ignoreList":[0]}},
    {"offset": {"line": 26910, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/uint8arraylist/dist/src/index.js","sources":["file:///home/driemworks/fangorn/website/node_modules/uint8arraylist/src/index.ts"],"sourcesContent":["/**\n * @packageDocumentation\n *\n * A class that lets you do operations over a list of Uint8Arrays without\n * copying them.\n *\n * ```js\n * import { Uint8ArrayList } from 'uint8arraylist'\n *\n * const list = new Uint8ArrayList()\n * list.append(Uint8Array.from([0, 1, 2]))\n * list.append(Uint8Array.from([3, 4, 5]))\n *\n * list.subarray()\n * // -> Uint8Array([0, 1, 2, 3, 4, 5])\n *\n * list.consume(3)\n * list.subarray()\n * // -> Uint8Array([3, 4, 5])\n *\n * // you can also iterate over the list\n * for (const buf of list) {\n *   // ..do something with `buf`\n * }\n *\n * list.subarray(0, 1)\n * // -> Uint8Array([0])\n * ```\n *\n * ## Converting Uint8ArrayLists to Uint8Arrays\n *\n * There are two ways to turn a `Uint8ArrayList` into a `Uint8Array` - `.slice` and `.subarray` and one way to turn a `Uint8ArrayList` into a `Uint8ArrayList` with different contents - `.sublist`.\n *\n * ### slice\n *\n * Slice follows the same semantics as [Uint8Array.slice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/slice) in that it creates a new `Uint8Array` and copies bytes into it using an optional offset & length.\n *\n * ```js\n * const list = new Uint8ArrayList()\n * list.append(Uint8Array.from([0, 1, 2]))\n * list.append(Uint8Array.from([3, 4, 5]))\n *\n * list.slice(0, 1)\n * // -> Uint8Array([0])\n * ```\n *\n * ### subarray\n *\n * Subarray attempts to follow the same semantics as [Uint8Array.subarray](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/subarray) with one important different - this is a no-copy operation, unless the requested bytes span two internal buffers in which case it is a copy operation.\n *\n * ```js\n * const list = new Uint8ArrayList()\n * list.append(Uint8Array.from([0, 1, 2]))\n * list.append(Uint8Array.from([3, 4, 5]))\n *\n * list.subarray(0, 1)\n * // -> Uint8Array([0]) - no-copy\n *\n * list.subarray(2, 5)\n * // -> Uint8Array([2, 3, 4]) - copy\n * ```\n *\n * ### sublist\n *\n * Sublist creates and returns a new `Uint8ArrayList` that shares the underlying buffers with the original so is always a no-copy operation.\n *\n * ```js\n * const list = new Uint8ArrayList()\n * list.append(Uint8Array.from([0, 1, 2]))\n * list.append(Uint8Array.from([3, 4, 5]))\n *\n * list.sublist(0, 1)\n * // -> Uint8ArrayList([0]) - no-copy\n *\n * list.sublist(2, 5)\n * // -> Uint8ArrayList([2], [3, 4]) - no-copy\n * ```\n *\n * ## Inspiration\n *\n * Borrows liberally from [bl](https://www.npmjs.com/package/bl) but only uses native JS types.\n */\nimport { allocUnsafe, alloc } from 'uint8arrays/alloc'\nimport { concat } from 'uint8arrays/concat'\nimport { equals } from 'uint8arrays/equals'\n\nconst symbol = Symbol.for('@achingbrain/uint8arraylist')\n\nexport type Appendable = Uint8ArrayList | Uint8Array\n\nfunction findBufAndOffset (bufs: Uint8Array[], index: number): { buf: Uint8Array, index: number } {\n  if (index == null || index < 0) {\n    throw new RangeError('index is out of bounds')\n  }\n\n  let offset = 0\n\n  for (const buf of bufs) {\n    const bufEnd = offset + buf.byteLength\n\n    if (index < bufEnd) {\n      return {\n        buf,\n        index: index - offset\n      }\n    }\n\n    offset = bufEnd\n  }\n\n  throw new RangeError('index is out of bounds')\n}\n\n/**\n * Check if object is a CID instance\n *\n * @example\n *\n * ```js\n * import { isUint8ArrayList, Uint8ArrayList } from 'uint8arraylist'\n *\n * isUint8ArrayList(true) // false\n * isUint8ArrayList([]) // false\n * isUint8ArrayList(new Uint8ArrayList()) // true\n * ```\n */\nexport function isUint8ArrayList (value: any): value is Uint8ArrayList {\n  return Boolean(value?.[symbol])\n}\n\nexport class Uint8ArrayList implements Iterable<Uint8Array> {\n  private bufs: Uint8Array[]\n  public length: number\n  public readonly [symbol] = true\n\n  constructor (...data: Appendable[]) {\n    this.bufs = []\n    this.length = 0\n\n    if (data.length > 0) {\n      this.appendAll(data)\n    }\n  }\n\n  * [Symbol.iterator] (): Iterator<Uint8Array> {\n    yield * this.bufs\n  }\n\n  get byteLength (): number {\n    return this.length\n  }\n\n  /**\n   * Add one or more `bufs` to the end of this Uint8ArrayList\n   */\n  append (...bufs: Appendable[]): void {\n    this.appendAll(bufs)\n  }\n\n  /**\n   * Add all `bufs` to the end of this Uint8ArrayList\n   */\n  appendAll (bufs: Appendable[]): void {\n    let length = 0\n\n    for (const buf of bufs) {\n      if (buf instanceof Uint8Array) {\n        length += buf.byteLength\n        this.bufs.push(buf)\n      } else if (isUint8ArrayList(buf)) {\n        length += buf.byteLength\n        this.bufs.push(...buf.bufs)\n      } else {\n        throw new Error('Could not append value, must be an Uint8Array or a Uint8ArrayList')\n      }\n    }\n\n    this.length += length\n  }\n\n  /**\n   * Add one or more `bufs` to the start of this Uint8ArrayList\n   */\n  prepend (...bufs: Appendable[]): void {\n    this.prependAll(bufs)\n  }\n\n  /**\n   * Add all `bufs` to the start of this Uint8ArrayList\n   */\n  prependAll (bufs: Appendable[]): void {\n    let length = 0\n\n    for (const buf of bufs.reverse()) {\n      if (buf instanceof Uint8Array) {\n        length += buf.byteLength\n        this.bufs.unshift(buf)\n      } else if (isUint8ArrayList(buf)) {\n        length += buf.byteLength\n        this.bufs.unshift(...buf.bufs)\n      } else {\n        throw new Error('Could not prepend value, must be an Uint8Array or a Uint8ArrayList')\n      }\n    }\n\n    this.length += length\n  }\n\n  /**\n   * Read the value at `index`\n   */\n  get (index: number): number {\n    const res = findBufAndOffset(this.bufs, index)\n\n    return res.buf[res.index]\n  }\n\n  /**\n   * Set the value at `index` to `value`\n   */\n  set (index: number, value: number): void {\n    const res = findBufAndOffset(this.bufs, index)\n\n    res.buf[res.index] = value\n  }\n\n  /**\n   * Copy bytes from `buf` to the index specified by `offset`\n   */\n  write (buf: Appendable, offset: number = 0): void {\n    if (buf instanceof Uint8Array) {\n      for (let i = 0; i < buf.length; i++) {\n        this.set(offset + i, buf[i])\n      }\n    } else if (isUint8ArrayList(buf)) {\n      for (let i = 0; i < buf.length; i++) {\n        this.set(offset + i, buf.get(i))\n      }\n    } else {\n      throw new Error('Could not write value, must be an Uint8Array or a Uint8ArrayList')\n    }\n  }\n\n  /**\n   * Remove bytes from the front of the pool\n   */\n  consume (bytes: number): void {\n    // first, normalize the argument, in accordance with how Buffer does it\n    bytes = Math.trunc(bytes)\n\n    // do nothing if not a positive number\n    if (Number.isNaN(bytes) || bytes <= 0) {\n      return\n    }\n\n    // if consuming all bytes, skip iterating\n    if (bytes === this.byteLength) {\n      this.bufs = []\n      this.length = 0\n      return\n    }\n\n    while (this.bufs.length > 0) {\n      if (bytes >= this.bufs[0].byteLength) {\n        bytes -= this.bufs[0].byteLength\n        this.length -= this.bufs[0].byteLength\n        this.bufs.shift()\n      } else {\n        this.bufs[0] = this.bufs[0].subarray(bytes)\n        this.length -= bytes\n        break\n      }\n    }\n  }\n\n  /**\n   * Extracts a section of an array and returns a new array.\n   *\n   * This is a copy operation as it is with Uint8Arrays and Arrays\n   * - note this is different to the behaviour of Node Buffers.\n   */\n  slice (beginInclusive?: number, endExclusive?: number): Uint8Array {\n    const { bufs, length } = this._subList(beginInclusive, endExclusive)\n\n    return concat(bufs, length)\n  }\n\n  /**\n   * Returns a alloc from the given start and end element index.\n   *\n   * In the best case where the data extracted comes from a single Uint8Array\n   * internally this is a no-copy operation otherwise it is a copy operation.\n   */\n  subarray (beginInclusive?: number, endExclusive?: number): Uint8Array {\n    const { bufs, length } = this._subList(beginInclusive, endExclusive)\n\n    if (bufs.length === 1) {\n      return bufs[0]\n    }\n\n    return concat(bufs, length)\n  }\n\n  /**\n   * Returns a allocList from the given start and end element index.\n   *\n   * This is a no-copy operation.\n   */\n  sublist (beginInclusive?: number, endExclusive?: number): Uint8ArrayList {\n    const { bufs, length } = this._subList(beginInclusive, endExclusive)\n\n    const list = new Uint8ArrayList()\n    list.length = length\n    // don't loop, just set the bufs\n    list.bufs = [...bufs]\n\n    return list\n  }\n\n  private _subList (beginInclusive?: number, endExclusive?: number): { bufs: Uint8Array[], length: number } {\n    beginInclusive = beginInclusive ?? 0\n    endExclusive = endExclusive ?? this.length\n\n    if (beginInclusive < 0) {\n      beginInclusive = this.length + beginInclusive\n    }\n\n    if (endExclusive < 0) {\n      endExclusive = this.length + endExclusive\n    }\n\n    if (beginInclusive < 0 || endExclusive > this.length) {\n      throw new RangeError('index is out of bounds')\n    }\n\n    if (beginInclusive === endExclusive) {\n      return { bufs: [], length: 0 }\n    }\n\n    if (beginInclusive === 0 && endExclusive === this.length) {\n      return { bufs: this.bufs, length: this.length }\n    }\n\n    const bufs: Uint8Array[] = []\n    let offset = 0\n\n    for (let i = 0; i < this.bufs.length; i++) {\n      const buf = this.bufs[i]\n      const bufStart = offset\n      const bufEnd = bufStart + buf.byteLength\n\n      // for next loop\n      offset = bufEnd\n\n      if (beginInclusive >= bufEnd) {\n        // start after this buf\n        continue\n      }\n\n      const sliceStartInBuf = beginInclusive >= bufStart && beginInclusive < bufEnd\n      const sliceEndsInBuf = endExclusive > bufStart && endExclusive <= bufEnd\n\n      if (sliceStartInBuf && sliceEndsInBuf) {\n        // slice is wholly contained within this buffer\n        if (beginInclusive === bufStart && endExclusive === bufEnd) {\n          // requested whole buffer\n          bufs.push(buf)\n          break\n        }\n\n        // requested part of buffer\n        const start = beginInclusive - bufStart\n        bufs.push(buf.subarray(start, start + (endExclusive - beginInclusive)))\n        break\n      }\n\n      if (sliceStartInBuf) {\n        // slice starts in this buffer\n        if (beginInclusive === 0) {\n          // requested whole buffer\n          bufs.push(buf)\n          continue\n        }\n\n        // requested part of buffer\n        bufs.push(buf.subarray(beginInclusive - bufStart))\n        continue\n      }\n\n      if (sliceEndsInBuf) {\n        if (endExclusive === bufEnd) {\n          // requested whole buffer\n          bufs.push(buf)\n          break\n        }\n\n        // requested part of buffer\n        bufs.push(buf.subarray(0, endExclusive - bufStart))\n        break\n      }\n\n      // slice started before this buffer and ends after it\n      bufs.push(buf)\n    }\n\n    return { bufs, length: endExclusive - beginInclusive }\n  }\n\n  indexOf (search: Uint8ArrayList | Uint8Array, offset: number = 0): number {\n    if (!isUint8ArrayList(search) && !(search instanceof Uint8Array)) {\n      throw new TypeError('The \"value\" argument must be a Uint8ArrayList or Uint8Array')\n    }\n\n    const needle = search instanceof Uint8Array ? search : search.subarray()\n\n    offset = Number(offset ?? 0)\n\n    if (isNaN(offset)) {\n      offset = 0\n    }\n\n    if (offset < 0) {\n      offset = this.length + offset\n    }\n\n    if (offset < 0) {\n      offset = 0\n    }\n\n    if (search.length === 0) {\n      return offset > this.length ? this.length : offset\n    }\n\n    // https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string-search_algorithm\n    const M: number = needle.byteLength\n\n    if (M === 0) {\n      throw new TypeError('search must be at least 1 byte long')\n    }\n\n    // radix\n    const radix: number = 256\n    const rightmostPositions: Int32Array = new Int32Array(radix)\n\n    // position of the rightmost occurrence of the byte c in the pattern\n    for (let c: number = 0; c < radix; c++) {\n      // -1 for bytes not in pattern\n      rightmostPositions[c] = -1\n    }\n\n    for (let j = 0; j < M; j++) {\n      // rightmost position for bytes in pattern\n      rightmostPositions[needle[j]] = j\n    }\n\n    // Return offset of first match, -1 if no match\n    const right = rightmostPositions\n    const lastIndex = this.byteLength - needle.byteLength\n    const lastPatIndex = needle.byteLength - 1\n    let skip: number\n\n    for (let i = offset; i <= lastIndex; i += skip) {\n      skip = 0\n\n      for (let j = lastPatIndex; j >= 0; j--) {\n        const char: number = this.get(i + j)\n\n        if (needle[j] !== char) {\n          skip = Math.max(1, j - right[char])\n          break\n        }\n      }\n\n      if (skip === 0) {\n        return i\n      }\n    }\n\n    return -1\n  }\n\n  getInt8 (byteOffset: number): number {\n    const buf = this.subarray(byteOffset, byteOffset + 1)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getInt8(0)\n  }\n\n  setInt8 (byteOffset: number, value: number): void {\n    const buf = allocUnsafe(1)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setInt8(0, value)\n\n    this.write(buf, byteOffset)\n  }\n\n  getInt16 (byteOffset: number, littleEndian?: boolean): number {\n    const buf = this.subarray(byteOffset, byteOffset + 2)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getInt16(0, littleEndian)\n  }\n\n  setInt16 (byteOffset: number, value: number, littleEndian?: boolean): void {\n    const buf = alloc(2)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setInt16(0, value, littleEndian)\n\n    this.write(buf, byteOffset)\n  }\n\n  getInt32 (byteOffset: number, littleEndian?: boolean): number {\n    const buf = this.subarray(byteOffset, byteOffset + 4)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getInt32(0, littleEndian)\n  }\n\n  setInt32 (byteOffset: number, value: number, littleEndian?: boolean): void {\n    const buf = alloc(4)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setInt32(0, value, littleEndian)\n\n    this.write(buf, byteOffset)\n  }\n\n  getBigInt64 (byteOffset: number, littleEndian?: boolean): bigint {\n    const buf = this.subarray(byteOffset, byteOffset + 8)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getBigInt64(0, littleEndian)\n  }\n\n  setBigInt64 (byteOffset: number, value: bigint, littleEndian?: boolean): void {\n    const buf = alloc(8)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setBigInt64(0, value, littleEndian)\n\n    this.write(buf, byteOffset)\n  }\n\n  getUint8 (byteOffset: number): number {\n    const buf = this.subarray(byteOffset, byteOffset + 1)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getUint8(0)\n  }\n\n  setUint8 (byteOffset: number, value: number): void {\n    const buf = allocUnsafe(1)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setUint8(0, value)\n\n    this.write(buf, byteOffset)\n  }\n\n  getUint16 (byteOffset: number, littleEndian?: boolean): number {\n    const buf = this.subarray(byteOffset, byteOffset + 2)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getUint16(0, littleEndian)\n  }\n\n  setUint16 (byteOffset: number, value: number, littleEndian?: boolean): void {\n    const buf = alloc(2)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setUint16(0, value, littleEndian)\n\n    this.write(buf, byteOffset)\n  }\n\n  getUint32 (byteOffset: number, littleEndian?: boolean): number {\n    const buf = this.subarray(byteOffset, byteOffset + 4)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getUint32(0, littleEndian)\n  }\n\n  setUint32 (byteOffset: number, value: number, littleEndian?: boolean): void {\n    const buf = alloc(4)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setUint32(0, value, littleEndian)\n\n    this.write(buf, byteOffset)\n  }\n\n  getBigUint64 (byteOffset: number, littleEndian?: boolean): bigint {\n    const buf = this.subarray(byteOffset, byteOffset + 8)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getBigUint64(0, littleEndian)\n  }\n\n  setBigUint64 (byteOffset: number, value: bigint, littleEndian?: boolean): void {\n    const buf = alloc(8)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setBigUint64(0, value, littleEndian)\n\n    this.write(buf, byteOffset)\n  }\n\n  getFloat32 (byteOffset: number, littleEndian?: boolean): number {\n    const buf = this.subarray(byteOffset, byteOffset + 4)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getFloat32(0, littleEndian)\n  }\n\n  setFloat32 (byteOffset: number, value: number, littleEndian?: boolean): void {\n    const buf = alloc(4)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setFloat32(0, value, littleEndian)\n\n    this.write(buf, byteOffset)\n  }\n\n  getFloat64 (byteOffset: number, littleEndian?: boolean): number {\n    const buf = this.subarray(byteOffset, byteOffset + 8)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n\n    return view.getFloat64(0, littleEndian)\n  }\n\n  setFloat64 (byteOffset: number, value: number, littleEndian?: boolean): void {\n    const buf = alloc(8)\n    const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n    view.setFloat64(0, value, littleEndian)\n\n    this.write(buf, byteOffset)\n  }\n\n  equals (other: any): other is Uint8ArrayList {\n    if (other == null) {\n      return false\n    }\n\n    if (!(other instanceof Uint8ArrayList)) {\n      return false\n    }\n\n    if (other.bufs.length !== this.bufs.length) {\n      return false\n    }\n\n    for (let i = 0; i < this.bufs.length; i++) {\n      if (!equals(this.bufs[i], other.bufs[i])) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  /**\n   * Create a Uint8ArrayList from a pre-existing list of Uint8Arrays.  Use this\n   * method if you know the total size of all the Uint8Arrays ahead of time.\n   */\n  static fromUint8Arrays (bufs: Uint8Array[], length?: number): Uint8ArrayList {\n    const list = new Uint8ArrayList()\n    list.bufs = bufs\n\n    if (length == null) {\n      length = bufs.reduce((acc, curr) => acc + curr.byteLength, 0)\n    }\n\n    list.length = length\n\n    return list\n  }\n}\n\n/*\nfunction indexOf (needle: Uint8Array, haystack: Uint8Array, offset = 0) {\n  for (let i = offset; i < haystack.byteLength; i++) {\n    for (let j = 0; j < needle.length; j++) {\n      if (haystack[i + j] !== needle[j]) {\n        break\n      }\n\n      if (j === needle.byteLength -1) {\n        return i\n      }\n    }\n\n    if (haystack.byteLength - i < needle.byteLength) {\n      break\n    }\n  }\n\n  return -1\n}\n*/\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 27471, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/carstream/src/varint.js"],"sourcesContent":["const MSB = 0x80\nconst REST = 0x7F\nconst MSBALL = ~REST\nconst INT = Math.pow(2, 31)\n\n/**\n * @param {number} num\n */\nexport const encode = num => {\n  /** @type {number[]} */\n  const out = []\n  let offset = 0\n\n  while (num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB\n    num /= 128\n  }\n  while (num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB\n    num >>>= 7\n  }\n  out[offset] = num | 0\n\n  return out\n}\n\n/**\n * @param {import('uint8arraylist').Uint8ArrayList} buf\n * @param {number} [offset]\n */\nexport const decode = (buf, offset) => {\n  let res = 0\n  offset = offset || 0\n  let shift = 0\n  let counter = offset\n  let b\n  const l = buf.length\n\n  do {\n    if (counter >= l || shift > 49) throw new RangeError('Could not decode varint')\n    b = buf.get(counter++)\n    res += shift < 28\n      ? (b & REST) << shift\n      : (b & REST) * Math.pow(2, shift)\n    shift += 7\n  } while (b >= MSB)\n\n  return [res, counter - offset]\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,MAAM;AACZ,MAAM,OAAO;AACb,MAAM,SAAS,CAAC;AAChB,MAAM,MAAM,KAAK,GAAG,CAAC,GAAG;AAKjB,MAAM,SAAS,CAAA;IACpB,qBAAqB,GACrB,MAAM,MAAM,EAAE;IACd,IAAI,SAAS;IAEb,MAAO,OAAO,IAAK;QACjB,GAAG,CAAC,SAAS,GAAG,AAAC,MAAM,OAAQ;QAC/B,OAAO;IACT;IACA,MAAO,MAAM,OAAQ;QACnB,GAAG,CAAC,SAAS,GAAG,AAAC,MAAM,OAAQ;QAC/B,SAAS;IACX;IACA,GAAG,CAAC,OAAO,GAAG,MAAM;IAEpB,OAAO;AACT;AAMO,MAAM,SAAS,CAAC,KAAK;IAC1B,IAAI,MAAM;IACV,SAAS,UAAU;IACnB,IAAI,QAAQ;IACZ,IAAI,UAAU;IACd,IAAI;IACJ,MAAM,IAAI,IAAI,MAAM;IAEpB,GAAG;QACD,IAAI,WAAW,KAAK,QAAQ,IAAI,MAAM,IAAI,WAAW;QACrD,IAAI,IAAI,GAAG,CAAC;QACZ,OAAO,QAAQ,KACX,CAAC,IAAI,IAAI,KAAK,QACd,CAAC,IAAI,IAAI,IAAI,KAAK,GAAG,CAAC,GAAG;QAC7B,SAAS;IACX,QAAS,KAAK,IAAI;IAElB,OAAO;QAAC;QAAK,UAAU;KAAO;AAChC","ignoreList":[0]}},
    {"offset": {"line": 27517, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/carstream/src/reader.js"],"sourcesContent":["/* eslint-env browser */\nimport { Uint8ArrayList } from 'uint8arraylist'\nimport { decode as decodeDagCBOR } from '@ipld/dag-cbor'\nimport { decode as decodeDigest } from 'multiformats/hashes/digest'\nimport { create as createLink, createLegacy as createLegacyLink } from 'multiformats/link'\nimport { decode as decodeVarint } from './varint.js'\n\nconst State = {\n  ReadHeaderLength: 0,\n  ReadHeader: 1,\n  ReadBlockLength: 2,\n  ReadBlock: 3\n}\n\nconst CIDV0_BYTES = {\n  SHA2_256: 0x12,\n  LENGTH: 0x20,\n  DAG_PB: 0x70\n}\n\n/** @extends {TransformStream<Uint8Array, import('./api.js').Block & import('./api.js').Position>} */\nexport class CARReaderStream extends TransformStream {\n  /** @type {Promise<import('./api.js').CARHeader>} */\n  #headerPromise\n\n  /**\n   * @param {QueuingStrategy<Uint8Array>} [writableStrategy]\n   * An object that optionally defines a queuing strategy for the stream.\n   * @param {QueuingStrategy<import('./api.js').Block & import('./api.js').Position>} [readableStrategy]\n   * An object that optionally defines a queuing strategy for the stream.\n   * Defaults to a CountQueuingStrategy with highWaterMark of `1` to allow\n   * `getHeader` to be called before the stream is consumed.\n   */\n  constructor (writableStrategy, readableStrategy) {\n    const buffer = new Uint8ArrayList()\n    let offset = 0\n    let prevOffset = offset\n    let wanted = 8\n    let state = State.ReadHeaderLength\n\n    /** @type {(value: import('./api.js').CARHeader) => void} */\n    let resolveHeader\n    const headerPromise = new Promise(resolve => { resolveHeader = resolve })\n\n    super({\n      transform (chunk, controller) {\n        buffer.append(chunk)\n        while (true) {\n          if (buffer.length < wanted) break\n          if (state === State.ReadHeaderLength) {\n            const [length, bytes] = decodeVarint(buffer)\n            buffer.consume(bytes)\n            prevOffset = offset\n            offset += bytes\n            state = State.ReadHeader\n            wanted = length\n          } else if (state === State.ReadHeader) {\n            const header = decodeDagCBOR(buffer.slice(0, wanted))\n            resolveHeader && resolveHeader(header)\n            buffer.consume(wanted)\n            prevOffset = offset\n            offset += wanted\n            state = State.ReadBlockLength\n            wanted = 8\n          } else if (state === State.ReadBlockLength) {\n            const [length, bytes] = decodeVarint(buffer)\n            buffer.consume(bytes)\n            prevOffset = offset\n            offset += bytes\n            state = State.ReadBlock\n            wanted = length\n          } else if (state === State.ReadBlock) {\n            const _offset = prevOffset\n            const length = offset - prevOffset + wanted\n\n            prevOffset = offset\n            /** @type {import('multiformats').UnknownLink} */\n            let cid\n            if (buffer.get(0) === CIDV0_BYTES.SHA2_256 && buffer.get(1) === CIDV0_BYTES.LENGTH) {\n              const bytes = buffer.subarray(0, 34)\n              const multihash = decodeDigest(bytes)\n              // @ts-expect-error\n              cid = createLegacyLink(multihash)\n              buffer.consume(34)\n              offset += 34\n            } else {\n              const [version, versionBytes] = decodeVarint(buffer)\n              if (version !== 1) throw new Error(`unexpected CID version (${version})`)\n              buffer.consume(versionBytes)\n              offset += versionBytes\n\n              const [codec, codecBytes] = decodeVarint(buffer)\n              buffer.consume(codecBytes)\n              offset += codecBytes\n\n              const multihashBytes = getMultihashLength(buffer)\n              const multihash = decodeDigest(buffer.subarray(0, multihashBytes))\n              cid = createLink(codec, multihash)\n              buffer.consume(multihashBytes)\n              offset += multihashBytes\n            }\n\n            const blockBytes = wanted - (offset - prevOffset)\n            const bytes = buffer.subarray(0, blockBytes)\n            controller.enqueue({ cid, bytes, offset: _offset, length, blockOffset: offset, blockLength: blockBytes })\n\n            buffer.consume(blockBytes)\n            prevOffset = offset\n            offset += blockBytes\n            state = State.ReadBlockLength\n            wanted = 8\n          }\n        }\n      },\n      flush (controller) {\n        if (state !== State.ReadBlockLength) {\n          controller.error(new Error('unexpected end of data'))\n        }\n      }\n    }, writableStrategy, readableStrategy ?? new CountQueuingStrategy({ highWaterMark: 1 }))\n\n    this.#headerPromise = headerPromise\n  }\n\n  /**\n   * Get the decoded CAR header.\n   */\n  getHeader () {\n    return this.#headerPromise\n  }\n}\n\n/** @param {Uint8ArrayList} bytes */\nconst getMultihashLength = bytes => {\n  const [, codeBytes] = decodeVarint(bytes)\n  const [length, lengthBytes] = decodeVarint(bytes, codeBytes)\n  return codeBytes + lengthBytes + length\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 27657, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/carstream/src/writer.js"],"sourcesContent":["/* eslint-env browser */\nimport { encode as encodeCBOR } from '@ipld/dag-cbor'\nimport { encode as encodeVarint } from './varint.js'\n\n/**\n * @param {import('multiformats').UnknownLink[]} roots\n * @returns {Uint8Array}\n */\nexport const encodeHeader = roots => {\n  const headerBytes = encodeCBOR({ version: 1, roots })\n  const varintBytes = encodeVarint(headerBytes.length)\n  const header = new Uint8Array(varintBytes.length + headerBytes.length)\n  header.set(varintBytes, 0)\n  header.set(headerBytes, varintBytes.length)\n  return header\n}\n\n/**\n * @param {import('./api.js').Block} block\n * @returns {Uint8Array}\n */\nexport const encodeBlock = block => {\n  const varintBytes = encodeVarint(block.cid.bytes.length + block.bytes.length)\n  const bytes = new Uint8Array(varintBytes.length + block.cid.bytes.length + block.bytes.length)\n  bytes.set(varintBytes)\n  bytes.set(block.cid.bytes, varintBytes.length)\n  bytes.set(block.bytes, varintBytes.length + block.cid.bytes.length)\n  return bytes\n}\n\n/** @extends {TransformStream<import('./api.js').Block, Uint8Array>} */\nexport class CARWriterStream extends TransformStream {\n  /**\n   * @param {import('multiformats').UnknownLink[]} [roots]\n   * @param {QueuingStrategy<import('./api.js').Block>} [writableStrategy]\n   * @param {QueuingStrategy<Uint8Array>} [readableStrategy]\n   */\n  constructor (roots = [], writableStrategy, readableStrategy) {\n    super({\n      start: controller => controller.enqueue(encodeHeader(roots)),\n      transform: (block, controller) => controller.enqueue(encodeBlock(block))\n    }, writableStrategy, readableStrategy)\n  }\n}\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;;;;AACtB;AACA;;;AAMO,MAAM,eAAe,CAAA;IAC1B,MAAM,cAAc,IAAA,kKAAU,EAAC;QAAE,SAAS;QAAG;IAAM;IACnD,MAAM,cAAc,IAAA,uJAAY,EAAC,YAAY,MAAM;IACnD,MAAM,SAAS,IAAI,WAAW,YAAY,MAAM,GAAG,YAAY,MAAM;IACrE,OAAO,GAAG,CAAC,aAAa;IACxB,OAAO,GAAG,CAAC,aAAa,YAAY,MAAM;IAC1C,OAAO;AACT;AAMO,MAAM,cAAc,CAAA;IACzB,MAAM,cAAc,IAAA,uJAAY,EAAC,MAAM,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,KAAK,CAAC,MAAM;IAC5E,MAAM,QAAQ,IAAI,WAAW,YAAY,MAAM,GAAG,MAAM,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,KAAK,CAAC,MAAM;IAC7F,MAAM,GAAG,CAAC;IACV,MAAM,GAAG,CAAC,MAAM,GAAG,CAAC,KAAK,EAAE,YAAY,MAAM;IAC7C,MAAM,GAAG,CAAC,MAAM,KAAK,EAAE,YAAY,MAAM,GAAG,MAAM,GAAG,CAAC,KAAK,CAAC,MAAM;IAClE,OAAO;AACT;AAGO,MAAM,wBAAwB;IACnC;;;;GAIC,GACD,YAAa,QAAQ,EAAE,EAAE,gBAAgB,EAAE,gBAAgB,CAAE;QAC3D,KAAK,CAAC;YACJ,OAAO,CAAA,aAAc,WAAW,OAAO,CAAC,aAAa;YACrD,WAAW,CAAC,OAAO,aAAe,WAAW,OAAO,CAAC,YAAY;QACnE,GAAG,kBAAkB;IACvB;AACF","ignoreList":[0]}},
    {"offset": {"line": 27704, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/carstream/src/index.js"],"sourcesContent":["export { CARReaderStream } from './reader.js'\nexport { CARWriterStream } from './writer.js'\n\n/**\n * IPLD multicodec code for CAR.\n * @see https://github.com/multiformats/multicodec/blob/c954a787dc6a17d099653e5f90d26fbd177d2074/table.csv#L141\n */\nexport const code = 0x0202\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMO,MAAM,OAAO","ignoreList":[0]}},
    {"offset": {"line": 27717, "column": 0}, "map": {"version":3,"sources":["file:///home/driemworks/fangorn/website/node_modules/environment/index.js"],"sourcesContent":["/* globals WorkerGlobalScope, DedicatedWorkerGlobalScope, SharedWorkerGlobalScope, ServiceWorkerGlobalScope */\n\nexport const isBrowser = globalThis.window?.document !== undefined;\n\nexport const isNode = globalThis.process?.versions?.node !== undefined;\n\nexport const isBun = globalThis.process?.versions?.bun !== undefined;\n\nexport const isDeno = globalThis.Deno?.version?.deno !== undefined;\n\nexport const isElectron = globalThis.process?.versions?.electron !== undefined;\n\nexport const isJsDom = globalThis.navigator?.userAgent?.includes('jsdom') === true;\n\nexport const isWebWorker = typeof WorkerGlobalScope !== 'undefined' && globalThis instanceof WorkerGlobalScope;\n\nexport const isDedicatedWorker = typeof DedicatedWorkerGlobalScope !== 'undefined' && globalThis instanceof DedicatedWorkerGlobalScope;\n\nexport const isSharedWorker = typeof SharedWorkerGlobalScope !== 'undefined' && globalThis instanceof SharedWorkerGlobalScope;\n\nexport const isServiceWorker = typeof ServiceWorkerGlobalScope !== 'undefined' && globalThis instanceof ServiceWorkerGlobalScope;\n\n// Note: I'm intentionally not DRYing up the other variables to keep them \"lazy\".\nconst platform = globalThis.navigator?.userAgentData?.platform;\n\nexport const isMacOs = platform === 'macOS'\n\t|| globalThis.navigator?.platform === 'MacIntel' // Even on Apple silicon Macs.\n\t|| globalThis.navigator?.userAgent?.includes(' Mac ') === true\n\t|| globalThis.process?.platform === 'darwin';\n\nexport const isWindows = platform === 'Windows'\n\t|| globalThis.navigator?.platform === 'Win32'\n\t|| globalThis.process?.platform === 'win32';\n\nexport const isLinux = platform === 'Linux'\n\t|| globalThis.navigator?.platform?.startsWith('Linux') === true\n\t|| globalThis.navigator?.userAgent?.includes(' Linux ') === true\n\t|| globalThis.process?.platform === 'linux';\n\nexport const isIos = platform === 'iOS'\n\t|| (globalThis.navigator?.platform === 'MacIntel' && globalThis.navigator?.maxTouchPoints > 1)\n\t|| /iPad|iPhone|iPod/.test(globalThis.navigator?.platform);\n\nexport const isAndroid = platform === 'Android'\n\t|| globalThis.navigator?.platform === 'Android'\n\t|| globalThis.navigator?.userAgent?.includes(' Android ') === true\n\t|| globalThis.process?.platform === 'android';\n"],"names":[],"mappings":"AAAA,4GAA4G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAErG,MAAM,YAAY,WAAW,MAAM,EAAE,aAAa;AAElD,MAAM,SAAS,WAAW,OAAO,EAAE,UAAU,SAAS;AAEtD,MAAM,QAAQ,WAAW,OAAO,EAAE,UAAU,QAAQ;AAEpD,MAAM,SAAS,WAAW,IAAI,EAAE,SAAS,SAAS;AAElD,MAAM,aAAa,WAAW,OAAO,EAAE,UAAU,aAAa;AAE9D,MAAM,UAAU,WAAW,SAAS,EAAE,WAAW,SAAS,aAAa;AAEvE,MAAM,cAAc,OAAO,sBAAsB,eAAe,sBAAsB;AAEtF,MAAM,oBAAoB,OAAO,+BAA+B,eAAe,sBAAsB;AAErG,MAAM,iBAAiB,OAAO,4BAA4B,eAAe,sBAAsB;AAE/F,MAAM,kBAAkB,OAAO,6BAA6B,eAAe,sBAAsB;AAExG,iFAAiF;AACjF,MAAM,WAAW,WAAW,SAAS,EAAE,eAAe;AAE/C,MAAM,UAAU,aAAa,WAChC,WAAW,SAAS,EAAE,aAAa,WAAW,8BAA8B;IAC5E,WAAW,SAAS,EAAE,WAAW,SAAS,aAAa,QACvD,WAAW,OAAO,EAAE,aAAa;AAE9B,MAAM,YAAY,aAAa,aAClC,WAAW,SAAS,EAAE,aAAa,WACnC,WAAW,OAAO,EAAE,aAAa;AAE9B,MAAM,UAAU,aAAa,WAChC,WAAW,SAAS,EAAE,UAAU,WAAW,aAAa,QACxD,WAAW,SAAS,EAAE,WAAW,SAAS,eAAe,QACzD,WAAW,OAAO,EAAE,aAAa;AAE9B,MAAM,QAAQ,aAAa,SAC7B,WAAW,SAAS,EAAE,aAAa,cAAc,WAAW,SAAS,EAAE,iBAAiB,KACzF,mBAAmB,IAAI,CAAC,WAAW,SAAS,EAAE;AAE3C,MAAM,YAAY,aAAa,aAClC,WAAW,SAAS,EAAE,aAAa,aACnC,WAAW,SAAS,EAAE,WAAW,SAAS,iBAAiB,QAC3D,WAAW,OAAO,EAAE,aAAa","ignoreList":[0]}}]
}